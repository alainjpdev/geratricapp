function DS(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in e)){const i=Object.getOwnPropertyDescriptor(s,o);i&&Object.defineProperty(e,o,i.get?i:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();var RS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Al(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function fd(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function s(){var o=!1;try{o=this instanceof s}catch{}return o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var o=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,o.get?o:{enumerable:!0,get:function(){return e[s]}})}),r}var Ym={exports:{}},Ec={},Zm={exports:{}},Lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fv;function OS(){if(Fv)return Lt;Fv=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.iterator;function x(B){return B===null||typeof B!="object"?null:(B=v&&B[v]||B["@@iterator"],typeof B=="function"?B:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,S={};function C(B,re,ae){this.props=B,this.context=re,this.refs=S,this.updater=ae||w}C.prototype.isReactComponent={},C.prototype.setState=function(B,re){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,re,"setState")},C.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function T(){}T.prototype=C.prototype;function A(B,re,ae){this.props=B,this.context=re,this.refs=S,this.updater=ae||w}var I=A.prototype=new T;I.constructor=A,y(I,C.prototype),I.isPureReactComponent=!0;var O=Array.isArray,P=Object.prototype.hasOwnProperty,$={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function te(B,re,ae){var z,ge={},Pe=null,we=null;if(re!=null)for(z in re.ref!==void 0&&(we=re.ref),re.key!==void 0&&(Pe=""+re.key),re)P.call(re,z)&&!F.hasOwnProperty(z)&&(ge[z]=re[z]);var Q=arguments.length-2;if(Q===1)ge.children=ae;else if(1<Q){for(var ke=Array(Q),q=0;q<Q;q++)ke[q]=arguments[q+2];ge.children=ke}if(B&&B.defaultProps)for(z in Q=B.defaultProps,Q)ge[z]===void 0&&(ge[z]=Q[z]);return{$$typeof:e,type:B,key:Pe,ref:we,props:ge,_owner:$.current}}function ne(B,re){return{$$typeof:e,type:B.type,key:re,ref:B.ref,props:B.props,_owner:B._owner}}function Ee(B){return typeof B=="object"&&B!==null&&B.$$typeof===e}function Se(B){var re={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ae){return re[ae]})}var De=/\/+/g;function U(B,re){return typeof B=="object"&&B!==null&&B.key!=null?Se(""+B.key):re.toString(36)}function H(B,re,ae,z,ge){var Pe=typeof B;(Pe==="undefined"||Pe==="boolean")&&(B=null);var we=!1;if(B===null)we=!0;else switch(Pe){case"string":case"number":we=!0;break;case"object":switch(B.$$typeof){case e:case t:we=!0}}if(we)return we=B,ge=ge(we),B=z===""?"."+U(we,0):z,O(ge)?(ae="",B!=null&&(ae=B.replace(De,"$&/")+"/"),H(ge,re,ae,"",function(q){return q})):ge!=null&&(Ee(ge)&&(ge=ne(ge,ae+(!ge.key||we&&we.key===ge.key?"":(""+ge.key).replace(De,"$&/")+"/")+B)),re.push(ge)),1;if(we=0,z=z===""?".":z+":",O(B))for(var Q=0;Q<B.length;Q++){Pe=B[Q];var ke=z+U(Pe,Q);we+=H(Pe,re,ae,ke,ge)}else if(ke=x(B),typeof ke=="function")for(B=ke.call(B),Q=0;!(Pe=B.next()).done;)Pe=Pe.value,ke=z+U(Pe,Q++),we+=H(Pe,re,ae,ke,ge);else if(Pe==="object")throw re=String(B),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.");return we}function ye(B,re,ae){if(B==null)return B;var z=[],ge=0;return H(B,z,"","",function(Pe){return re.call(ae,Pe,ge++)}),z}function R(B){if(B._status===-1){var re=B._result;re=re(),re.then(function(ae){(B._status===0||B._status===-1)&&(B._status=1,B._result=ae)},function(ae){(B._status===0||B._status===-1)&&(B._status=2,B._result=ae)}),B._status===-1&&(B._status=0,B._result=re)}if(B._status===1)return B._result.default;throw B._result}var de={current:null},V={transition:null},he={ReactCurrentDispatcher:de,ReactCurrentBatchConfig:V,ReactCurrentOwner:$};function K(){throw Error("act(...) is not supported in production builds of React.")}return Lt.Children={map:ye,forEach:function(B,re,ae){ye(B,function(){re.apply(this,arguments)},ae)},count:function(B){var re=0;return ye(B,function(){re++}),re},toArray:function(B){return ye(B,function(re){return re})||[]},only:function(B){if(!Ee(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Lt.Component=C,Lt.Fragment=r,Lt.Profiler=o,Lt.PureComponent=A,Lt.StrictMode=s,Lt.Suspense=h,Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=he,Lt.act=K,Lt.cloneElement=function(B,re,ae){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var z=y({},B.props),ge=B.key,Pe=B.ref,we=B._owner;if(re!=null){if(re.ref!==void 0&&(Pe=re.ref,we=$.current),re.key!==void 0&&(ge=""+re.key),B.type&&B.type.defaultProps)var Q=B.type.defaultProps;for(ke in re)P.call(re,ke)&&!F.hasOwnProperty(ke)&&(z[ke]=re[ke]===void 0&&Q!==void 0?Q[ke]:re[ke])}var ke=arguments.length-2;if(ke===1)z.children=ae;else if(1<ke){Q=Array(ke);for(var q=0;q<ke;q++)Q[q]=arguments[q+2];z.children=Q}return{$$typeof:e,type:B.type,key:ge,ref:Pe,props:z,_owner:we}},Lt.createContext=function(B){return B={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:i,_context:B},B.Consumer=B},Lt.createElement=te,Lt.createFactory=function(B){var re=te.bind(null,B);return re.type=B,re},Lt.createRef=function(){return{current:null}},Lt.forwardRef=function(B){return{$$typeof:d,render:B}},Lt.isValidElement=Ee,Lt.lazy=function(B){return{$$typeof:p,_payload:{_status:-1,_result:B},_init:R}},Lt.memo=function(B,re){return{$$typeof:f,type:B,compare:re===void 0?null:re}},Lt.startTransition=function(B){var re=V.transition;V.transition={};try{B()}finally{V.transition=re}},Lt.unstable_act=K,Lt.useCallback=function(B,re){return de.current.useCallback(B,re)},Lt.useContext=function(B){return de.current.useContext(B)},Lt.useDebugValue=function(){},Lt.useDeferredValue=function(B){return de.current.useDeferredValue(B)},Lt.useEffect=function(B,re){return de.current.useEffect(B,re)},Lt.useId=function(){return de.current.useId()},Lt.useImperativeHandle=function(B,re,ae){return de.current.useImperativeHandle(B,re,ae)},Lt.useInsertionEffect=function(B,re){return de.current.useInsertionEffect(B,re)},Lt.useLayoutEffect=function(B,re){return de.current.useLayoutEffect(B,re)},Lt.useMemo=function(B,re){return de.current.useMemo(B,re)},Lt.useReducer=function(B,re,ae){return de.current.useReducer(B,re,ae)},Lt.useRef=function(B){return de.current.useRef(B)},Lt.useState=function(B){return de.current.useState(B)},Lt.useSyncExternalStore=function(B,re,ae){return de.current.useSyncExternalStore(B,re,ae)},Lt.useTransition=function(){return de.current.useTransition()},Lt.version="18.3.1",Lt}var Bv;function $g(){return Bv||(Bv=1,Zm.exports=OS()),Zm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uv;function PS(){if(Uv)return Ec;Uv=1;var e=$g(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function c(d,h,f){var p,v={},x=null,w=null;f!==void 0&&(x=""+f),h.key!==void 0&&(x=""+h.key),h.ref!==void 0&&(w=h.ref);for(p in h)s.call(h,p)&&!i.hasOwnProperty(p)&&(v[p]=h[p]);if(d&&d.defaultProps)for(p in h=d.defaultProps,h)v[p]===void 0&&(v[p]=h[p]);return{$$typeof:t,type:d,key:x,ref:w,props:v,_owner:o.current}}return Ec.Fragment=r,Ec.jsx=c,Ec.jsxs=c,Ec}var zv;function MS(){return zv||(zv=1,Ym.exports=PS()),Ym.exports}var n=MS(),j=$g();const pt=Al(j);var $u={},Xm={exports:{}},Rn={},ep={exports:{}},tp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qv;function LS(){return qv||(qv=1,(function(e){function t(V,he){var K=V.length;V.push(he);e:for(;0<K;){var B=K-1>>>1,re=V[B];if(0<o(re,he))V[B]=he,V[K]=re,K=B;else break e}}function r(V){return V.length===0?null:V[0]}function s(V){if(V.length===0)return null;var he=V[0],K=V.pop();if(K!==he){V[0]=K;e:for(var B=0,re=V.length,ae=re>>>1;B<ae;){var z=2*(B+1)-1,ge=V[z],Pe=z+1,we=V[Pe];if(0>o(ge,K))Pe<re&&0>o(we,ge)?(V[B]=we,V[Pe]=K,B=Pe):(V[B]=ge,V[z]=K,B=z);else if(Pe<re&&0>o(we,K))V[B]=we,V[Pe]=K,B=Pe;else break e}}return he}function o(V,he){var K=V.sortIndex-he.sortIndex;return K!==0?K:V.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var c=Date,d=c.now();e.unstable_now=function(){return c.now()-d}}var h=[],f=[],p=1,v=null,x=3,w=!1,y=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(V){for(var he=r(f);he!==null;){if(he.callback===null)s(f);else if(he.startTime<=V)s(f),he.sortIndex=he.expirationTime,t(h,he);else break;he=r(f)}}function O(V){if(S=!1,I(V),!y)if(r(h)!==null)y=!0,R(P);else{var he=r(f);he!==null&&de(O,he.startTime-V)}}function P(V,he){y=!1,S&&(S=!1,T(te),te=-1),w=!0;var K=x;try{for(I(he),v=r(h);v!==null&&(!(v.expirationTime>he)||V&&!Se());){var B=v.callback;if(typeof B=="function"){v.callback=null,x=v.priorityLevel;var re=B(v.expirationTime<=he);he=e.unstable_now(),typeof re=="function"?v.callback=re:v===r(h)&&s(h),I(he)}else s(h);v=r(h)}if(v!==null)var ae=!0;else{var z=r(f);z!==null&&de(O,z.startTime-he),ae=!1}return ae}finally{v=null,x=K,w=!1}}var $=!1,F=null,te=-1,ne=5,Ee=-1;function Se(){return!(e.unstable_now()-Ee<ne)}function De(){if(F!==null){var V=e.unstable_now();Ee=V;var he=!0;try{he=F(!0,V)}finally{he?U():($=!1,F=null)}}else $=!1}var U;if(typeof A=="function")U=function(){A(De)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ye=H.port2;H.port1.onmessage=De,U=function(){ye.postMessage(null)}}else U=function(){C(De,0)};function R(V){F=V,$||($=!0,U())}function de(V,he){te=C(function(){V(e.unstable_now())},he)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_continueExecution=function(){y||w||(y=!0,R(P))},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return r(h)},e.unstable_next=function(V){switch(x){case 1:case 2:case 3:var he=3;break;default:he=x}var K=x;x=he;try{return V()}finally{x=K}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(V,he){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var K=x;x=V;try{return he()}finally{x=K}},e.unstable_scheduleCallback=function(V,he,K){var B=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?B+K:B):K=B,V){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=K+re,V={id:p++,callback:he,priorityLevel:V,startTime:K,expirationTime:re,sortIndex:-1},K>B?(V.sortIndex=K,t(f,V),r(h)===null&&V===r(f)&&(S?(T(te),te=-1):S=!0,de(O,K-B))):(V.sortIndex=re,t(h,V),y||w||(y=!0,R(P))),V},e.unstable_shouldYield=Se,e.unstable_wrapCallback=function(V){var he=x;return function(){var K=x;x=he;try{return V.apply(this,arguments)}finally{x=K}}}})(tp)),tp}var Gv;function $S(){return Gv||(Gv=1,ep.exports=LS()),ep.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function FS(){if(Vv)return Rn;Vv=1;var e=$g(),t=$S();function r(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,u=1;u<arguments.length;u++)l+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function i(a,l){c(a,l),c(a+"Capture",l)}function c(a,l){for(o[a]=l,a=0;a<l.length;a++)s.add(l[a])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},v={};function x(a){return h.call(v,a)?!0:h.call(p,a)?!1:f.test(a)?v[a]=!0:(p[a]=!0,!1)}function w(a,l,u,g){if(u!==null&&u.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return g?!1:u!==null?!u.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function y(a,l,u,g){if(l===null||typeof l>"u"||w(a,l,u,g))return!0;if(g)return!1;if(u!==null)switch(u.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function S(a,l,u,g,N,_,L){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=g,this.attributeNamespace=N,this.mustUseProperty=u,this.propertyName=a,this.type=l,this.sanitizeURL=_,this.removeEmptyString=L}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){C[a]=new S(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];C[l]=new S(l,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){C[a]=new S(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){C[a]=new S(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){C[a]=new S(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){C[a]=new S(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){C[a]=new S(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){C[a]=new S(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){C[a]=new S(a,5,!1,a.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function A(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(T,A);C[l]=new S(l,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(T,A);C[l]=new S(l,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(T,A);C[l]=new S(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){C[a]=new S(a,1,!1,a.toLowerCase(),null,!1,!1)}),C.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){C[a]=new S(a,1,!1,a.toLowerCase(),null,!0,!0)});function I(a,l,u,g){var N=C.hasOwnProperty(l)?C[l]:null;(N!==null?N.type!==0:g||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(y(l,u,N,g)&&(u=null),g||N===null?x(l)&&(u===null?a.removeAttribute(l):a.setAttribute(l,""+u)):N.mustUseProperty?a[N.propertyName]=u===null?N.type===3?!1:"":u:(l=N.attributeName,g=N.attributeNamespace,u===null?a.removeAttribute(l):(N=N.type,u=N===3||N===4&&u===!0?"":""+u,g?a.setAttributeNS(g,l,u):a.setAttribute(l,u))))}var O=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),$=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),Ee=Symbol.for("react.provider"),Se=Symbol.for("react.context"),De=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),ye=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),de=Symbol.for("react.offscreen"),V=Symbol.iterator;function he(a){return a===null||typeof a!="object"?null:(a=V&&a[V]||a["@@iterator"],typeof a=="function"?a:null)}var K=Object.assign,B;function re(a){if(B===void 0)try{throw Error()}catch(u){var l=u.stack.trim().match(/\n( *(at )?)/);B=l&&l[1]||""}return`
`+B+a}var ae=!1;function z(a,l){if(!a||ae)return"";ae=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(Re){var g=Re}Reflect.construct(a,[],l)}else{try{l.call()}catch(Re){g=Re}a.call(l.prototype)}else{try{throw Error()}catch(Re){g=Re}a()}}catch(Re){if(Re&&g&&typeof Re.stack=="string"){for(var N=Re.stack.split(`
`),_=g.stack.split(`
`),L=N.length-1,Y=_.length-1;1<=L&&0<=Y&&N[L]!==_[Y];)Y--;for(;1<=L&&0<=Y;L--,Y--)if(N[L]!==_[Y]){if(L!==1||Y!==1)do if(L--,Y--,0>Y||N[L]!==_[Y]){var oe=`
`+N[L].replace(" at new "," at ");return a.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",a.displayName)),oe}while(1<=L&&0<=Y);break}}}finally{ae=!1,Error.prepareStackTrace=u}return(a=a?a.displayName||a.name:"")?re(a):""}function ge(a){switch(a.tag){case 5:return re(a.type);case 16:return re("Lazy");case 13:return re("Suspense");case 19:return re("SuspenseList");case 0:case 2:case 15:return a=z(a.type,!1),a;case 11:return a=z(a.type.render,!1),a;case 1:return a=z(a.type,!0),a;default:return""}}function Pe(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case F:return"Fragment";case $:return"Portal";case ne:return"Profiler";case te:return"StrictMode";case U:return"Suspense";case H:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case Se:return(a.displayName||"Context")+".Consumer";case Ee:return(a._context.displayName||"Context")+".Provider";case De:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case ye:return l=a.displayName||null,l!==null?l:Pe(a.type)||"Memo";case R:l=a._payload,a=a._init;try{return Pe(a(l))}catch{}}return null}function we(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(l);case 8:return l===te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Q(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function ke(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function q(a){var l=ke(a)?"checked":"value",u=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),g=""+a[l];if(!a.hasOwnProperty(l)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var N=u.get,_=u.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return N.call(this)},set:function(L){g=""+L,_.call(this,L)}}),Object.defineProperty(a,l,{enumerable:u.enumerable}),{getValue:function(){return g},setValue:function(L){g=""+L},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function ce(a){a._valueTracker||(a._valueTracker=q(a))}function J(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var u=l.getValue(),g="";return a&&(g=ke(a)?a.checked?"true":"false":a.value),a=g,a!==u?(l.setValue(a),!0):!1}function qe(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Be(a,l){var u=l.checked;return K({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??a._wrapperState.initialChecked})}function ee(a,l){var u=l.defaultValue==null?"":l.defaultValue,g=l.checked!=null?l.checked:l.defaultChecked;u=Q(l.value!=null?l.value:u),a._wrapperState={initialChecked:g,initialValue:u,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Ye(a,l){l=l.checked,l!=null&&I(a,"checked",l,!1)}function Ne(a,l){Ye(a,l);var u=Q(l.value),g=l.type;if(u!=null)g==="number"?(u===0&&a.value===""||a.value!=u)&&(a.value=""+u):a.value!==""+u&&(a.value=""+u);else if(g==="submit"||g==="reset"){a.removeAttribute("value");return}l.hasOwnProperty("value")?xt(a,l.type,u):l.hasOwnProperty("defaultValue")&&xt(a,l.type,Q(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function kt(a,l,u){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var g=l.type;if(!(g!=="submit"&&g!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,u||l===a.value||(a.value=l),a.defaultValue=l}u=a.name,u!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,u!==""&&(a.name=u)}function xt(a,l,u){(l!=="number"||qe(a.ownerDocument)!==a)&&(u==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+u&&(a.defaultValue=""+u))}var X=Array.isArray;function xe(a,l,u,g){if(a=a.options,l){l={};for(var N=0;N<u.length;N++)l["$"+u[N]]=!0;for(u=0;u<a.length;u++)N=l.hasOwnProperty("$"+a[u].value),a[u].selected!==N&&(a[u].selected=N),N&&g&&(a[u].defaultSelected=!0)}else{for(u=""+Q(u),l=null,N=0;N<a.length;N++){if(a[N].value===u){a[N].selected=!0,g&&(a[N].defaultSelected=!0);return}l!==null||a[N].disabled||(l=a[N])}l!==null&&(l.selected=!0)}}function W(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(r(91));return K({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function Ae(a,l){var u=l.value;if(u==null){if(u=l.children,l=l.defaultValue,u!=null){if(l!=null)throw Error(r(92));if(X(u)){if(1<u.length)throw Error(r(93));u=u[0]}l=u}l==null&&(l=""),u=l}a._wrapperState={initialValue:Q(u)}}function Le(a,l){var u=Q(l.value),g=Q(l.defaultValue);u!=null&&(u=""+u,u!==a.value&&(a.value=u),l.defaultValue==null&&a.defaultValue!==u&&(a.defaultValue=u)),g!=null&&(a.defaultValue=""+g)}function Fe(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}function nt(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yt(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?nt(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Nt,Ft=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,u,g,N){MSApp.execUnsafeLocalFunction(function(){return a(l,u,g,N)})}:a})(function(a,l){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=l;else{for(Nt=Nt||document.createElement("div"),Nt.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Nt.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function Rt(a,l){if(l){var u=a.firstChild;if(u&&u===a.lastChild&&u.nodeType===3){u.nodeValue=l;return}}a.textContent=l}var It={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},on=["Webkit","ms","Moz","O"];Object.keys(It).forEach(function(a){on.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),It[l]=It[a]})});function zn(a,l,u){return l==null||typeof l=="boolean"||l===""?"":u||typeof l!="number"||l===0||It.hasOwnProperty(a)&&It[a]?(""+l).trim():l+"px"}function ns(a,l){a=a.style;for(var u in l)if(l.hasOwnProperty(u)){var g=u.indexOf("--")===0,N=zn(u,l[u],g);u==="float"&&(u="cssFloat"),g?a.setProperty(u,N):a[u]=N}}var ln=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lt(a,l){if(l){if(ln[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(r(137,a));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(r(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(r(61))}if(l.style!=null&&typeof l.style!="object")throw Error(r(62))}}function qn(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qr=null;function Hs(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var st=null,ss=null,Zt=null;function yr(a){if(a=fc(a)){if(typeof st!="function")throw Error(r(280));var l=a.stateNode;l&&(l=Xd(l),st(a.stateNode,a.type,l))}}function _r(a){ss?Zt?Zt.push(a):Zt=[a]:ss=a}function vn(){if(ss){var a=ss,l=Zt;if(Zt=ss=null,yr(a),l)for(a=0;a<l.length;a++)yr(l[a])}}function Jr(a,l){return a(l)}function Or(){}var pr=!1;function cn(a,l,u){if(pr)return a(l,u);pr=!0;try{return Jr(a,l,u)}finally{pr=!1,(ss!==null||Zt!==null)&&(Or(),vn())}}function Yt(a,l){var u=a.stateNode;if(u===null)return null;var g=Xd(u);if(g===null)return null;u=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(u&&typeof u!="function")throw Error(r(231,l,typeof u));return u}var Yr=!1;if(d)try{var Ot={};Object.defineProperty(Ot,"passive",{get:function(){Yr=!0}}),window.addEventListener("test",Ot,Ot),window.removeEventListener("test",Ot,Ot)}catch{Yr=!1}function Wt(a,l,u,g,N,_,L,Y,oe){var Re=Array.prototype.slice.call(arguments,3);try{l.apply(u,Re)}catch(Ve){this.onError(Ve)}}var Gn=!1,yn=null,Pr=!1,Cn=null,Di={onError:function(a){Gn=!0,yn=a}};function Ws(a,l,u,g,N,_,L,Y,oe){Gn=!1,yn=null,Wt.apply(Di,arguments)}function Ua(a,l,u,g,N,_,L,Y,oe){if(Ws.apply(this,arguments),Gn){if(Gn){var Re=yn;Gn=!1,yn=null}else throw Error(r(198));Pr||(Pr=!0,Cn=Re)}}function dn(a){var l=a,u=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(u=l.return),a=l.return;while(a)}return l.tag===3?u:null}function Ri(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function Ed(a){if(dn(a)!==a)throw Error(r(188))}function Ks(a){var l=a.alternate;if(!l){if(l=dn(a),l===null)throw Error(r(188));return l!==a?null:a}for(var u=a,g=l;;){var N=u.return;if(N===null)break;var _=N.alternate;if(_===null){if(g=N.return,g!==null){u=g;continue}break}if(N.child===_.child){for(_=N.child;_;){if(_===u)return Ed(N),a;if(_===g)return Ed(N),l;_=_.sibling}throw Error(r(188))}if(u.return!==g.return)u=N,g=_;else{for(var L=!1,Y=N.child;Y;){if(Y===u){L=!0,u=N,g=_;break}if(Y===g){L=!0,g=N,u=_;break}Y=Y.sibling}if(!L){for(Y=_.child;Y;){if(Y===u){L=!0,u=_,g=N;break}if(Y===g){L=!0,g=_,u=N;break}Y=Y.sibling}if(!L)throw Error(r(189))}}if(u.alternate!==g)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?a:l}function ql(a){return a=Ks(a),a!==null?Qs(a):null}function Qs(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=Qs(a);if(l!==null)return l;a=a.sibling}return null}var Gl=t.unstable_scheduleCallback,_o=t.unstable_cancelCallback,cr=t.unstable_shouldYield,ma=t.unstable_requestPaint,Ht=t.unstable_now,Ad=t.unstable_getCurrentPriorityLevel,Js=t.unstable_ImmediatePriority,Oi=t.unstable_UserBlockingPriority,za=t.unstable_NormalPriority,Vl=t.unstable_LowPriority,Ys=t.unstable_IdlePriority,Pi=null,bn=null;function Id(a){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(Pi,a,void 0,(a.current.flags&128)===128)}catch{}}var _t=Math.clz32?Math.clz32:Co,Td=Math.log,Dd=Math.LN2;function Co(a){return a>>>=0,a===0?32:31-(Td(a)/Dd|0)|0}var Zs=64,Mi=4194304;function qa(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Li(a,l){var u=a.pendingLanes;if(u===0)return 0;var g=0,N=a.suspendedLanes,_=a.pingedLanes,L=u&268435455;if(L!==0){var Y=L&~N;Y!==0?g=qa(Y):(_&=L,_!==0&&(g=qa(_)))}else L=u&~N,L!==0?g=qa(L):_!==0&&(g=qa(_));if(g===0)return 0;if(l!==0&&l!==g&&(l&N)===0&&(N=g&-g,_=l&-l,N>=_||N===16&&(_&4194240)!==0))return l;if((g&4)!==0&&(g|=u&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=g;0<l;)u=31-_t(l),N=1<<u,g|=a[u],l&=~N;return g}function Qt(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $i(a,l){for(var u=a.suspendedLanes,g=a.pingedLanes,N=a.expirationTimes,_=a.pendingLanes;0<_;){var L=31-_t(_),Y=1<<L,oe=N[L];oe===-1?((Y&u)===0||(Y&g)!==0)&&(N[L]=Qt(Y,l)):oe<=l&&(a.expiredLanes|=Y),_&=~Y}}function pa(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function ga(){var a=Zs;return Zs<<=1,(Zs&4194240)===0&&(Zs=64),a}function Fi(a){for(var l=[],u=0;31>u;u++)l.push(a);return l}function xa(a,l,u){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-_t(l),a[l]=u}function Eo(a,l){var u=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var g=a.eventTimes;for(a=a.expirationTimes;0<u;){var N=31-_t(u),_=1<<N;l[N]=0,g[N]=-1,a[N]=-1,u&=~_}}function Ao(a,l){var u=a.entangledLanes|=l;for(a=a.entanglements;u;){var g=31-_t(u),N=1<<g;N&l|a[g]&l&&(a[g]|=l),u&=~N}}var zt=0;function Hl(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Rd,Bt,Wl,Od,Pd,Zr=!1,ys=[],Vn=null,Xr=null,bs=null,Ga=new Map,sr=new Map,Cr=[],Bi="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Va(a,l){switch(a){case"focusin":case"focusout":Vn=null;break;case"dragenter":case"dragleave":Xr=null;break;case"mouseover":case"mouseout":bs=null;break;case"pointerover":case"pointerout":Ga.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":sr.delete(l.pointerId)}}function va(a,l,u,g,N,_){return a===null||a.nativeEvent!==_?(a={blockedOn:l,domEventName:u,eventSystemFlags:g,nativeEvent:_,targetContainers:[N]},l!==null&&(l=fc(l),l!==null&&Bt(l)),a):(a.eventSystemFlags|=g,l=a.targetContainers,N!==null&&l.indexOf(N)===-1&&l.push(N),a)}function Xs(a,l,u,g,N){switch(l){case"focusin":return Vn=va(Vn,a,l,u,g,N),!0;case"dragenter":return Xr=va(Xr,a,l,u,g,N),!0;case"mouseover":return bs=va(bs,a,l,u,g,N),!0;case"pointerover":var _=N.pointerId;return Ga.set(_,va(Ga.get(_)||null,a,l,u,g,N)),!0;case"gotpointercapture":return _=N.pointerId,sr.set(_,va(sr.get(_)||null,a,l,u,g,N)),!0}return!1}function Md(a){var l=Wi(a.target);if(l!==null){var u=dn(l);if(u!==null){if(l=u.tag,l===13){if(l=Ri(u),l!==null){a.blockedOn=l,Pd(a.priority,function(){Wl(u)});return}}else if(l===3&&u.stateNode.current.memoizedState.isDehydrated){a.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}a.blockedOn=null}function wn(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var u=Ha(a.domEventName,a.eventSystemFlags,l[0],a.nativeEvent);if(u===null){u=a.nativeEvent;var g=new u.constructor(u.type,u);Qr=g,u.target.dispatchEvent(g),Qr=null}else return l=fc(u),l!==null&&Bt(l),a.blockedOn=u,!1;l.shift()}return!0}function Io(a,l,u){wn(a)&&u.delete(l)}function Ld(){Zr=!1,Vn!==null&&wn(Vn)&&(Vn=null),Xr!==null&&wn(Xr)&&(Xr=null),bs!==null&&wn(bs)&&(bs=null),Ga.forEach(Io),sr.forEach(Io)}function ya(a,l){a.blockedOn===l&&(a.blockedOn=null,Zr||(Zr=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Ld)))}function ws(a){function l(N){return ya(N,a)}if(0<ys.length){ya(ys[0],a);for(var u=1;u<ys.length;u++){var g=ys[u];g.blockedOn===a&&(g.blockedOn=null)}}for(Vn!==null&&ya(Vn,a),Xr!==null&&ya(Xr,a),bs!==null&&ya(bs,a),Ga.forEach(l),sr.forEach(l),u=0;u<Cr.length;u++)g=Cr[u],g.blockedOn===a&&(g.blockedOn=null);for(;0<Cr.length&&(u=Cr[0],u.blockedOn===null);)Md(u),u.blockedOn===null&&Cr.shift()}var ea=O.ReactCurrentBatchConfig,Ui=!0;function Pf(a,l,u,g){var N=zt,_=ea.transition;ea.transition=null;try{zt=1,Kl(a,l,u,g)}finally{zt=N,ea.transition=_}}function zi(a,l,u,g){var N=zt,_=ea.transition;ea.transition=null;try{zt=4,Kl(a,l,u,g)}finally{zt=N,ea.transition=_}}function Kl(a,l,u,g){if(Ui){var N=Ha(a,l,u,g);if(N===null)Uf(a,l,g,To,u),Va(a,g);else if(Xs(N,a,l,u,g))g.stopPropagation();else if(Va(a,g),l&4&&-1<Bi.indexOf(a)){for(;N!==null;){var _=fc(N);if(_!==null&&Rd(_),_=Ha(a,l,u,g),_===null&&Uf(a,l,g,To,u),_===N)break;N=_}N!==null&&g.stopPropagation()}else Uf(a,l,g,null,u)}}var To=null;function Ha(a,l,u,g){if(To=null,a=Hs(g),a=Wi(a),a!==null)if(l=dn(a),l===null)a=null;else if(u=l.tag,u===13){if(a=Ri(l),a!==null)return a;a=null}else if(u===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null);return To=a,null}function qi(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ad()){case Js:return 1;case Oi:return 4;case za:case Vl:return 16;case Ys:return 536870912;default:return 16}default:return 16}}var as=null,Ql=null,Do=null;function $d(){if(Do)return Do;var a,l=Ql,u=l.length,g,N="value"in as?as.value:as.textContent,_=N.length;for(a=0;a<u&&l[a]===N[a];a++);var L=u-a;for(g=1;g<=L&&l[u-g]===N[_-g];g++);return Do=N.slice(a,1<g?1-g:void 0)}function Wa(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function Ka(){return!0}function Jl(){return!1}function Mr(a){function l(u,g,N,_,L){this._reactName=u,this._targetInst=N,this.type=g,this.nativeEvent=_,this.target=L,this.currentTarget=null;for(var Y in a)a.hasOwnProperty(Y)&&(u=a[Y],this[Y]=u?u(_):_[Y]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Ka:Jl,this.isPropagationStopped=Jl,this}return K(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Ka)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Ka)},persist:function(){},isPersistent:Ka}),l}var js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qa=Mr(js),Ja=K({},js,{view:0,detail:0}),Mf=Mr(Ja),ta,Gi,ba,Ya=K({},Ja,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$o,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==ba&&(ba&&a.type==="mousemove"?(ta=a.screenX-ba.screenX,Gi=a.screenY-ba.screenY):Gi=ta=0,ba=a),ta)},movementY:function(a){return"movementY"in a?a.movementY:Gi}}),Ro=Mr(Ya),Lr=K({},Ya,{dataTransfer:0}),Vi=Mr(Lr),Hi=K({},Ja,{relatedTarget:0}),Oo=Mr(Hi),Po=K({},js,{animationName:0,elapsedTime:0,pseudoElement:0}),Fd=Mr(Po),Bd=K({},js,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Mo=Mr(Bd),Yl=K({},js,{data:0}),ra=Mr(Yl),Zl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ec(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=Lo[a])?!!l[a]:!1}function $o(){return ec}var Lf=K({},Ja,{key:function(a){if(a.key){var l=Zl[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=Wa(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Xl[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$o,charCode:function(a){return a.type==="keypress"?Wa(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Wa(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),tc=Mr(Lf),Fo=K({},Ya,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ud=Mr(Fo),rc=K({},Ja,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$o}),nc=Mr(rc),$f=K({},js,{propertyName:0,elapsedTime:0,pseudoElement:0}),zd=Mr($f),Ff=K({},Ya,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),qd=Mr(Ff),Gd=[9,13,27,32],sc=d&&"CompositionEvent"in window,Za=null;d&&"documentMode"in document&&(Za=document.documentMode);var ac=d&&"TextEvent"in window&&!Za,ic=d&&(!sc||Za&&8<Za&&11>=Za),oc=" ",Vd=!1;function Hd(a,l){switch(a){case"keyup":return Gd.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wd(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ns=!1;function Ss(a,l){switch(a){case"compositionend":return Wd(l);case"keypress":return l.which!==32?null:(Vd=!0,oc);case"textInput":return a=l.data,a===oc&&Vd?null:a;default:return null}}function dr(a,l){if(Ns)return a==="compositionend"||!sc&&Hd(a,l)?(a=$d(),Do=Ql=as=null,Ns=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return ic&&l.locale!=="ko"?null:l.data;default:return null}}var Bo={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jn(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!Bo[a.type]:l==="textarea"}function Kd(a,l,u,g){_r(g),l=Jd(l,"onChange"),0<l.length&&(u=new Qa("onChange","change",null,u,g),a.push({event:u,listeners:l}))}var wa=null,Xa=null;function ja(a){t0(a,0)}function ei(a){var l=Go(a);if(J(l))return a}function ti(a,l){if(a==="change")return l}var ks=!1;if(d){var Uo;if(d){var m="oninput"in document;if(!m){var b=document.createElement("div");b.setAttribute("oninput","return;"),m=typeof b.oninput=="function"}Uo=m}else Uo=!1;ks=Uo&&(!document.documentMode||9<document.documentMode)}function k(){wa&&(wa.detachEvent("onpropertychange",E),Xa=wa=null)}function E(a){if(a.propertyName==="value"&&ei(Xa)){var l=[];Kd(l,Xa,a,Hs(a)),cn(ja,l)}}function D(a,l,u){a==="focusin"?(k(),wa=l,Xa=u,wa.attachEvent("onpropertychange",E)):a==="focusout"&&k()}function M(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return ei(Xa)}function G(a,l){if(a==="click")return ei(l)}function Z(a,l){if(a==="input"||a==="change")return ei(l)}function le(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var ie=typeof Object.is=="function"?Object.is:le;function ve(a,l){if(ie(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var u=Object.keys(a),g=Object.keys(l);if(u.length!==g.length)return!1;for(g=0;g<u.length;g++){var N=u[g];if(!h.call(l,N)||!ie(a[N],l[N]))return!1}return!0}function se(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function je(a,l){var u=se(a);a=0;for(var g;u;){if(u.nodeType===3){if(g=a+u.textContent.length,a<=l&&g>=l)return{node:u,offset:l-a};a=g}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=se(u)}}function ue(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?ue(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function pe(){for(var a=window,l=qe();l instanceof a.HTMLIFrameElement;){try{var u=typeof l.contentWindow.location.href=="string"}catch{u=!1}if(u)a=l.contentWindow;else break;l=qe(a.document)}return l}function me(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}function be(a){var l=pe(),u=a.focusedElem,g=a.selectionRange;if(l!==u&&u&&u.ownerDocument&&ue(u.ownerDocument.documentElement,u)){if(g!==null&&me(u)){if(l=g.start,a=g.end,a===void 0&&(a=l),"selectionStart"in u)u.selectionStart=l,u.selectionEnd=Math.min(a,u.value.length);else if(a=(l=u.ownerDocument||document)&&l.defaultView||window,a.getSelection){a=a.getSelection();var N=u.textContent.length,_=Math.min(g.start,N);g=g.end===void 0?_:Math.min(g.end,N),!a.extend&&_>g&&(N=g,g=_,_=N),N=je(u,_);var L=je(u,g);N&&L&&(a.rangeCount!==1||a.anchorNode!==N.node||a.anchorOffset!==N.offset||a.focusNode!==L.node||a.focusOffset!==L.offset)&&(l=l.createRange(),l.setStart(N.node,N.offset),a.removeAllRanges(),_>g?(a.addRange(l),a.extend(L.node,L.offset)):(l.setEnd(L.node,L.offset),a.addRange(l)))}}for(l=[],a=u;a=a.parentNode;)a.nodeType===1&&l.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<l.length;u++)a=l[u],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var _e=d&&"documentMode"in document&&11>=document.documentMode,Ie=null,$e=null,ze=null,Qe=!1;function tt(a,l,u){var g=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Qe||Ie==null||Ie!==qe(g)||(g=Ie,"selectionStart"in g&&me(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),ze&&ve(ze,g)||(ze=g,g=Jd($e,"onSelect"),0<g.length&&(l=new Qa("onSelect","select",null,l,u),a.push({event:l,listeners:g}),l.target=Ie)))}function We(a,l){var u={};return u[a.toLowerCase()]=l.toLowerCase(),u["Webkit"+a]="webkit"+l,u["Moz"+a]="moz"+l,u}var Je={animationend:We("Animation","AnimationEnd"),animationiteration:We("Animation","AnimationIteration"),animationstart:We("Animation","AnimationStart"),transitionend:We("Transition","TransitionEnd")},rt={},Xe={};d&&(Xe=document.createElement("div").style,"AnimationEvent"in window||(delete Je.animationend.animation,delete Je.animationiteration.animation,delete Je.animationstart.animation),"TransitionEvent"in window||delete Je.transitionend.transition);function it(a){if(rt[a])return rt[a];if(!Je[a])return a;var l=Je[a],u;for(u in l)if(l.hasOwnProperty(u)&&u in Xe)return rt[a]=l[u];return a}var At=it("animationend"),Tt=it("animationiteration"),Pt=it("animationstart"),un=it("transitionend"),Et=new Map,Er="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tr(a,l){Et.set(a,l),i(l,[a])}for(var ri=0;ri<Er.length;ri++){var Ar=Er[ri],Na=Ar.toLowerCase(),lc=Ar[0].toUpperCase()+Ar.slice(1);tr(Na,"on"+lc)}tr(At,"onAnimationEnd"),tr(Tt,"onAnimationIteration"),tr(Pt,"onAnimationStart"),tr("dblclick","onDoubleClick"),tr("focusin","onFocus"),tr("focusout","onBlur"),tr(un,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qN=new Set("cancel close invalid load scroll toggle".split(" ").concat(cc));function e0(a,l,u){var g=a.type||"unknown-event";a.currentTarget=u,Ua(g,l,void 0,a),a.currentTarget=null}function t0(a,l){l=(l&4)!==0;for(var u=0;u<a.length;u++){var g=a[u],N=g.event;g=g.listeners;e:{var _=void 0;if(l)for(var L=g.length-1;0<=L;L--){var Y=g[L],oe=Y.instance,Re=Y.currentTarget;if(Y=Y.listener,oe!==_&&N.isPropagationStopped())break e;e0(N,Y,Re),_=oe}else for(L=0;L<g.length;L++){if(Y=g[L],oe=Y.instance,Re=Y.currentTarget,Y=Y.listener,oe!==_&&N.isPropagationStopped())break e;e0(N,Y,Re),_=oe}}}if(Pr)throw a=Cn,Pr=!1,Cn=null,a}function rr(a,l){var u=l[Wf];u===void 0&&(u=l[Wf]=new Set);var g=a+"__bubble";u.has(g)||(r0(l,a,2,!1),u.add(g))}function Bf(a,l,u){var g=0;l&&(g|=4),r0(u,a,g,l)}var Qd="_reactListening"+Math.random().toString(36).slice(2);function dc(a){if(!a[Qd]){a[Qd]=!0,s.forEach(function(u){u!=="selectionchange"&&(qN.has(u)||Bf(u,!1,a),Bf(u,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[Qd]||(l[Qd]=!0,Bf("selectionchange",!1,l))}}function r0(a,l,u,g){switch(qi(l)){case 1:var N=Pf;break;case 4:N=zi;break;default:N=Kl}u=N.bind(null,l,u,a),N=void 0,!Yr||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(N=!0),g?N!==void 0?a.addEventListener(l,u,{capture:!0,passive:N}):a.addEventListener(l,u,!0):N!==void 0?a.addEventListener(l,u,{passive:N}):a.addEventListener(l,u,!1)}function Uf(a,l,u,g,N){var _=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var L=g.tag;if(L===3||L===4){var Y=g.stateNode.containerInfo;if(Y===N||Y.nodeType===8&&Y.parentNode===N)break;if(L===4)for(L=g.return;L!==null;){var oe=L.tag;if((oe===3||oe===4)&&(oe=L.stateNode.containerInfo,oe===N||oe.nodeType===8&&oe.parentNode===N))return;L=L.return}for(;Y!==null;){if(L=Wi(Y),L===null)return;if(oe=L.tag,oe===5||oe===6){g=_=L;continue e}Y=Y.parentNode}}g=g.return}cn(function(){var Re=_,Ve=Hs(u),Ke=[];e:{var Ge=Et.get(a);if(Ge!==void 0){var ot=Qa,ut=a;switch(a){case"keypress":if(Wa(u)===0)break e;case"keydown":case"keyup":ot=tc;break;case"focusin":ut="focus",ot=Oo;break;case"focusout":ut="blur",ot=Oo;break;case"beforeblur":case"afterblur":ot=Oo;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=Ro;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=Vi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=nc;break;case At:case Tt:case Pt:ot=Fd;break;case un:ot=zd;break;case"scroll":ot=Mf;break;case"wheel":ot=qd;break;case"copy":case"cut":case"paste":ot=Mo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=Ud}var ht=(l&4)!==0,gr=!ht&&a==="scroll",Ce=ht?Ge!==null?Ge+"Capture":null:Ge;ht=[];for(var fe=Re,Te;fe!==null;){Te=fe;var Ze=Te.stateNode;if(Te.tag===5&&Ze!==null&&(Te=Ze,Ce!==null&&(Ze=Yt(fe,Ce),Ze!=null&&ht.push(uc(fe,Ze,Te)))),gr)break;fe=fe.return}0<ht.length&&(Ge=new ot(Ge,ut,null,u,Ve),Ke.push({event:Ge,listeners:ht}))}}if((l&7)===0){e:{if(Ge=a==="mouseover"||a==="pointerover",ot=a==="mouseout"||a==="pointerout",Ge&&u!==Qr&&(ut=u.relatedTarget||u.fromElement)&&(Wi(ut)||ut[Sa]))break e;if((ot||Ge)&&(Ge=Ve.window===Ve?Ve:(Ge=Ve.ownerDocument)?Ge.defaultView||Ge.parentWindow:window,ot?(ut=u.relatedTarget||u.toElement,ot=Re,ut=ut?Wi(ut):null,ut!==null&&(gr=dn(ut),ut!==gr||ut.tag!==5&&ut.tag!==6)&&(ut=null)):(ot=null,ut=Re),ot!==ut)){if(ht=Ro,Ze="onMouseLeave",Ce="onMouseEnter",fe="mouse",(a==="pointerout"||a==="pointerover")&&(ht=Ud,Ze="onPointerLeave",Ce="onPointerEnter",fe="pointer"),gr=ot==null?Ge:Go(ot),Te=ut==null?Ge:Go(ut),Ge=new ht(Ze,fe+"leave",ot,u,Ve),Ge.target=gr,Ge.relatedTarget=Te,Ze=null,Wi(Ve)===Re&&(ht=new ht(Ce,fe+"enter",ut,u,Ve),ht.target=Te,ht.relatedTarget=gr,Ze=ht),gr=Ze,ot&&ut)t:{for(ht=ot,Ce=ut,fe=0,Te=ht;Te;Te=zo(Te))fe++;for(Te=0,Ze=Ce;Ze;Ze=zo(Ze))Te++;for(;0<fe-Te;)ht=zo(ht),fe--;for(;0<Te-fe;)Ce=zo(Ce),Te--;for(;fe--;){if(ht===Ce||Ce!==null&&ht===Ce.alternate)break t;ht=zo(ht),Ce=zo(Ce)}ht=null}else ht=null;ot!==null&&n0(Ke,Ge,ot,ht,!1),ut!==null&&gr!==null&&n0(Ke,gr,ut,ht,!0)}}e:{if(Ge=Re?Go(Re):window,ot=Ge.nodeName&&Ge.nodeName.toLowerCase(),ot==="select"||ot==="input"&&Ge.type==="file")var gt=ti;else if(jn(Ge))if(ks)gt=Z;else{gt=M;var bt=D}else(ot=Ge.nodeName)&&ot.toLowerCase()==="input"&&(Ge.type==="checkbox"||Ge.type==="radio")&&(gt=G);if(gt&&(gt=gt(a,Re))){Kd(Ke,gt,u,Ve);break e}bt&&bt(a,Ge,Re),a==="focusout"&&(bt=Ge._wrapperState)&&bt.controlled&&Ge.type==="number"&&xt(Ge,"number",Ge.value)}switch(bt=Re?Go(Re):window,a){case"focusin":(jn(bt)||bt.contentEditable==="true")&&(Ie=bt,$e=Re,ze=null);break;case"focusout":ze=$e=Ie=null;break;case"mousedown":Qe=!0;break;case"contextmenu":case"mouseup":case"dragend":Qe=!1,tt(Ke,u,Ve);break;case"selectionchange":if(_e)break;case"keydown":case"keyup":tt(Ke,u,Ve)}var wt;if(sc)e:{switch(a){case"compositionstart":var Ct="onCompositionStart";break e;case"compositionend":Ct="onCompositionEnd";break e;case"compositionupdate":Ct="onCompositionUpdate";break e}Ct=void 0}else Ns?Hd(a,u)&&(Ct="onCompositionEnd"):a==="keydown"&&u.keyCode===229&&(Ct="onCompositionStart");Ct&&(ic&&u.locale!=="ko"&&(Ns||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&Ns&&(wt=$d()):(as=Ve,Ql="value"in as?as.value:as.textContent,Ns=!0)),bt=Jd(Re,Ct),0<bt.length&&(Ct=new ra(Ct,a,null,u,Ve),Ke.push({event:Ct,listeners:bt}),wt?Ct.data=wt:(wt=Wd(u),wt!==null&&(Ct.data=wt)))),(wt=ac?Ss(a,u):dr(a,u))&&(Re=Jd(Re,"onBeforeInput"),0<Re.length&&(Ve=new ra("onBeforeInput","beforeinput",null,u,Ve),Ke.push({event:Ve,listeners:Re}),Ve.data=wt))}t0(Ke,l)})}function uc(a,l,u){return{instance:a,listener:l,currentTarget:u}}function Jd(a,l){for(var u=l+"Capture",g=[];a!==null;){var N=a,_=N.stateNode;N.tag===5&&_!==null&&(N=_,_=Yt(a,u),_!=null&&g.unshift(uc(a,_,N)),_=Yt(a,l),_!=null&&g.push(uc(a,_,N))),a=a.return}return g}function zo(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function n0(a,l,u,g,N){for(var _=l._reactName,L=[];u!==null&&u!==g;){var Y=u,oe=Y.alternate,Re=Y.stateNode;if(oe!==null&&oe===g)break;Y.tag===5&&Re!==null&&(Y=Re,N?(oe=Yt(u,_),oe!=null&&L.unshift(uc(u,oe,Y))):N||(oe=Yt(u,_),oe!=null&&L.push(uc(u,oe,Y)))),u=u.return}L.length!==0&&a.push({event:l,listeners:L})}var GN=/\r\n?/g,VN=/\u0000|\uFFFD/g;function s0(a){return(typeof a=="string"?a:""+a).replace(GN,`
`).replace(VN,"")}function Yd(a,l,u){if(l=s0(l),s0(a)!==l&&u)throw Error(r(425))}function Zd(){}var zf=null,qf=null;function Gf(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Vf=typeof setTimeout=="function"?setTimeout:void 0,HN=typeof clearTimeout=="function"?clearTimeout:void 0,a0=typeof Promise=="function"?Promise:void 0,WN=typeof queueMicrotask=="function"?queueMicrotask:typeof a0<"u"?function(a){return a0.resolve(null).then(a).catch(KN)}:Vf;function KN(a){setTimeout(function(){throw a})}function Hf(a,l){var u=l,g=0;do{var N=u.nextSibling;if(a.removeChild(u),N&&N.nodeType===8)if(u=N.data,u==="/$"){if(g===0){a.removeChild(N),ws(l);return}g--}else u!=="$"&&u!=="$?"&&u!=="$!"||g++;u=N}while(u);ws(l)}function ni(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return a}function i0(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var u=a.data;if(u==="$"||u==="$!"||u==="$?"){if(l===0)return a;l--}else u==="/$"&&l++}a=a.previousSibling}return null}var qo=Math.random().toString(36).slice(2),na="__reactFiber$"+qo,hc="__reactProps$"+qo,Sa="__reactContainer$"+qo,Wf="__reactEvents$"+qo,QN="__reactListeners$"+qo,JN="__reactHandles$"+qo;function Wi(a){var l=a[na];if(l)return l;for(var u=a.parentNode;u;){if(l=u[Sa]||u[na]){if(u=l.alternate,l.child!==null||u!==null&&u.child!==null)for(a=i0(a);a!==null;){if(u=a[na])return u;a=i0(a)}return l}a=u,u=a.parentNode}return null}function fc(a){return a=a[na]||a[Sa],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Go(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(r(33))}function Xd(a){return a[hc]||null}var Kf=[],Vo=-1;function si(a){return{current:a}}function nr(a){0>Vo||(a.current=Kf[Vo],Kf[Vo]=null,Vo--)}function Xt(a,l){Vo++,Kf[Vo]=a.current,a.current=l}var ai={},hn=si(ai),En=si(!1),Ki=ai;function Ho(a,l){var u=a.type.contextTypes;if(!u)return ai;var g=a.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===l)return g.__reactInternalMemoizedMaskedChildContext;var N={},_;for(_ in u)N[_]=l[_];return g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=N),N}function An(a){return a=a.childContextTypes,a!=null}function eu(){nr(En),nr(hn)}function o0(a,l,u){if(hn.current!==ai)throw Error(r(168));Xt(hn,l),Xt(En,u)}function l0(a,l,u){var g=a.stateNode;if(l=l.childContextTypes,typeof g.getChildContext!="function")return u;g=g.getChildContext();for(var N in g)if(!(N in l))throw Error(r(108,we(a)||"Unknown",N));return K({},u,g)}function tu(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||ai,Ki=hn.current,Xt(hn,a),Xt(En,En.current),!0}function c0(a,l,u){var g=a.stateNode;if(!g)throw Error(r(169));u?(a=l0(a,l,Ki),g.__reactInternalMemoizedMergedChildContext=a,nr(En),nr(hn),Xt(hn,a)):nr(En),Xt(En,u)}var ka=null,ru=!1,Qf=!1;function d0(a){ka===null?ka=[a]:ka.push(a)}function YN(a){ru=!0,d0(a)}function ii(){if(!Qf&&ka!==null){Qf=!0;var a=0,l=zt;try{var u=ka;for(zt=1;a<u.length;a++){var g=u[a];do g=g(!0);while(g!==null)}ka=null,ru=!1}catch(N){throw ka!==null&&(ka=ka.slice(a+1)),Gl(Js,ii),N}finally{zt=l,Qf=!1}}return null}var Wo=[],Ko=0,nu=null,su=0,is=[],os=0,Qi=null,_a=1,Ca="";function Ji(a,l){Wo[Ko++]=su,Wo[Ko++]=nu,nu=a,su=l}function u0(a,l,u){is[os++]=_a,is[os++]=Ca,is[os++]=Qi,Qi=a;var g=_a;a=Ca;var N=32-_t(g)-1;g&=~(1<<N),u+=1;var _=32-_t(l)+N;if(30<_){var L=N-N%5;_=(g&(1<<L)-1).toString(32),g>>=L,N-=L,_a=1<<32-_t(l)+N|u<<N|g,Ca=_+a}else _a=1<<_|u<<N|g,Ca=a}function Jf(a){a.return!==null&&(Ji(a,1),u0(a,1,0))}function Yf(a){for(;a===nu;)nu=Wo[--Ko],Wo[Ko]=null,su=Wo[--Ko],Wo[Ko]=null;for(;a===Qi;)Qi=is[--os],is[os]=null,Ca=is[--os],is[os]=null,_a=is[--os],is[os]=null}var Hn=null,Wn=null,ar=!1,_s=null;function h0(a,l){var u=us(5,null,null,0);u.elementType="DELETED",u.stateNode=l,u.return=a,l=a.deletions,l===null?(a.deletions=[u],a.flags|=16):l.push(u)}function f0(a,l){switch(a.tag){case 5:var u=a.type;return l=l.nodeType!==1||u.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(a.stateNode=l,Hn=a,Wn=ni(l.firstChild),!0):!1;case 6:return l=a.pendingProps===""||l.nodeType!==3?null:l,l!==null?(a.stateNode=l,Hn=a,Wn=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(u=Qi!==null?{id:_a,overflow:Ca}:null,a.memoizedState={dehydrated:l,treeContext:u,retryLane:1073741824},u=us(18,null,null,0),u.stateNode=l,u.return=a,a.child=u,Hn=a,Wn=null,!0):!1;default:return!1}}function Zf(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Xf(a){if(ar){var l=Wn;if(l){var u=l;if(!f0(a,l)){if(Zf(a))throw Error(r(418));l=ni(u.nextSibling);var g=Hn;l&&f0(a,l)?h0(g,u):(a.flags=a.flags&-4097|2,ar=!1,Hn=a)}}else{if(Zf(a))throw Error(r(418));a.flags=a.flags&-4097|2,ar=!1,Hn=a}}}function m0(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Hn=a}function au(a){if(a!==Hn)return!1;if(!ar)return m0(a),ar=!0,!1;var l;if((l=a.tag!==3)&&!(l=a.tag!==5)&&(l=a.type,l=l!=="head"&&l!=="body"&&!Gf(a.type,a.memoizedProps)),l&&(l=Wn)){if(Zf(a))throw p0(),Error(r(418));for(;l;)h0(a,l),l=ni(l.nextSibling)}if(m0(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var u=a.data;if(u==="/$"){if(l===0){Wn=ni(a.nextSibling);break e}l--}else u!=="$"&&u!=="$!"&&u!=="$?"||l++}a=a.nextSibling}Wn=null}}else Wn=Hn?ni(a.stateNode.nextSibling):null;return!0}function p0(){for(var a=Wn;a;)a=ni(a.nextSibling)}function Qo(){Wn=Hn=null,ar=!1}function em(a){_s===null?_s=[a]:_s.push(a)}var ZN=O.ReactCurrentBatchConfig;function mc(a,l,u){if(a=u.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(r(309));var g=u.stateNode}if(!g)throw Error(r(147,a));var N=g,_=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===_?l.ref:(l=function(L){var Y=N.refs;L===null?delete Y[_]:Y[_]=L},l._stringRef=_,l)}if(typeof a!="string")throw Error(r(284));if(!u._owner)throw Error(r(290,a))}return a}function iu(a,l){throw a=Object.prototype.toString.call(l),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function g0(a){var l=a._init;return l(a._payload)}function x0(a){function l(Ce,fe){if(a){var Te=Ce.deletions;Te===null?(Ce.deletions=[fe],Ce.flags|=16):Te.push(fe)}}function u(Ce,fe){if(!a)return null;for(;fe!==null;)l(Ce,fe),fe=fe.sibling;return null}function g(Ce,fe){for(Ce=new Map;fe!==null;)fe.key!==null?Ce.set(fe.key,fe):Ce.set(fe.index,fe),fe=fe.sibling;return Ce}function N(Ce,fe){return Ce=mi(Ce,fe),Ce.index=0,Ce.sibling=null,Ce}function _(Ce,fe,Te){return Ce.index=Te,a?(Te=Ce.alternate,Te!==null?(Te=Te.index,Te<fe?(Ce.flags|=2,fe):Te):(Ce.flags|=2,fe)):(Ce.flags|=1048576,fe)}function L(Ce){return a&&Ce.alternate===null&&(Ce.flags|=2),Ce}function Y(Ce,fe,Te,Ze){return fe===null||fe.tag!==6?(fe=Vm(Te,Ce.mode,Ze),fe.return=Ce,fe):(fe=N(fe,Te),fe.return=Ce,fe)}function oe(Ce,fe,Te,Ze){var gt=Te.type;return gt===F?Ve(Ce,fe,Te.props.children,Ze,Te.key):fe!==null&&(fe.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===R&&g0(gt)===fe.type)?(Ze=N(fe,Te.props),Ze.ref=mc(Ce,fe,Te),Ze.return=Ce,Ze):(Ze=Iu(Te.type,Te.key,Te.props,null,Ce.mode,Ze),Ze.ref=mc(Ce,fe,Te),Ze.return=Ce,Ze)}function Re(Ce,fe,Te,Ze){return fe===null||fe.tag!==4||fe.stateNode.containerInfo!==Te.containerInfo||fe.stateNode.implementation!==Te.implementation?(fe=Hm(Te,Ce.mode,Ze),fe.return=Ce,fe):(fe=N(fe,Te.children||[]),fe.return=Ce,fe)}function Ve(Ce,fe,Te,Ze,gt){return fe===null||fe.tag!==7?(fe=so(Te,Ce.mode,Ze,gt),fe.return=Ce,fe):(fe=N(fe,Te),fe.return=Ce,fe)}function Ke(Ce,fe,Te){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return fe=Vm(""+fe,Ce.mode,Te),fe.return=Ce,fe;if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case P:return Te=Iu(fe.type,fe.key,fe.props,null,Ce.mode,Te),Te.ref=mc(Ce,null,fe),Te.return=Ce,Te;case $:return fe=Hm(fe,Ce.mode,Te),fe.return=Ce,fe;case R:var Ze=fe._init;return Ke(Ce,Ze(fe._payload),Te)}if(X(fe)||he(fe))return fe=so(fe,Ce.mode,Te,null),fe.return=Ce,fe;iu(Ce,fe)}return null}function Ge(Ce,fe,Te,Ze){var gt=fe!==null?fe.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number")return gt!==null?null:Y(Ce,fe,""+Te,Ze);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case P:return Te.key===gt?oe(Ce,fe,Te,Ze):null;case $:return Te.key===gt?Re(Ce,fe,Te,Ze):null;case R:return gt=Te._init,Ge(Ce,fe,gt(Te._payload),Ze)}if(X(Te)||he(Te))return gt!==null?null:Ve(Ce,fe,Te,Ze,null);iu(Ce,Te)}return null}function ot(Ce,fe,Te,Ze,gt){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number")return Ce=Ce.get(Te)||null,Y(fe,Ce,""+Ze,gt);if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case P:return Ce=Ce.get(Ze.key===null?Te:Ze.key)||null,oe(fe,Ce,Ze,gt);case $:return Ce=Ce.get(Ze.key===null?Te:Ze.key)||null,Re(fe,Ce,Ze,gt);case R:var bt=Ze._init;return ot(Ce,fe,Te,bt(Ze._payload),gt)}if(X(Ze)||he(Ze))return Ce=Ce.get(Te)||null,Ve(fe,Ce,Ze,gt,null);iu(fe,Ze)}return null}function ut(Ce,fe,Te,Ze){for(var gt=null,bt=null,wt=fe,Ct=fe=0,Br=null;wt!==null&&Ct<Te.length;Ct++){wt.index>Ct?(Br=wt,wt=null):Br=wt.sibling;var Vt=Ge(Ce,wt,Te[Ct],Ze);if(Vt===null){wt===null&&(wt=Br);break}a&&wt&&Vt.alternate===null&&l(Ce,wt),fe=_(Vt,fe,Ct),bt===null?gt=Vt:bt.sibling=Vt,bt=Vt,wt=Br}if(Ct===Te.length)return u(Ce,wt),ar&&Ji(Ce,Ct),gt;if(wt===null){for(;Ct<Te.length;Ct++)wt=Ke(Ce,Te[Ct],Ze),wt!==null&&(fe=_(wt,fe,Ct),bt===null?gt=wt:bt.sibling=wt,bt=wt);return ar&&Ji(Ce,Ct),gt}for(wt=g(Ce,wt);Ct<Te.length;Ct++)Br=ot(wt,Ce,Ct,Te[Ct],Ze),Br!==null&&(a&&Br.alternate!==null&&wt.delete(Br.key===null?Ct:Br.key),fe=_(Br,fe,Ct),bt===null?gt=Br:bt.sibling=Br,bt=Br);return a&&wt.forEach(function(pi){return l(Ce,pi)}),ar&&Ji(Ce,Ct),gt}function ht(Ce,fe,Te,Ze){var gt=he(Te);if(typeof gt!="function")throw Error(r(150));if(Te=gt.call(Te),Te==null)throw Error(r(151));for(var bt=gt=null,wt=fe,Ct=fe=0,Br=null,Vt=Te.next();wt!==null&&!Vt.done;Ct++,Vt=Te.next()){wt.index>Ct?(Br=wt,wt=null):Br=wt.sibling;var pi=Ge(Ce,wt,Vt.value,Ze);if(pi===null){wt===null&&(wt=Br);break}a&&wt&&pi.alternate===null&&l(Ce,wt),fe=_(pi,fe,Ct),bt===null?gt=pi:bt.sibling=pi,bt=pi,wt=Br}if(Vt.done)return u(Ce,wt),ar&&Ji(Ce,Ct),gt;if(wt===null){for(;!Vt.done;Ct++,Vt=Te.next())Vt=Ke(Ce,Vt.value,Ze),Vt!==null&&(fe=_(Vt,fe,Ct),bt===null?gt=Vt:bt.sibling=Vt,bt=Vt);return ar&&Ji(Ce,Ct),gt}for(wt=g(Ce,wt);!Vt.done;Ct++,Vt=Te.next())Vt=ot(wt,Ce,Ct,Vt.value,Ze),Vt!==null&&(a&&Vt.alternate!==null&&wt.delete(Vt.key===null?Ct:Vt.key),fe=_(Vt,fe,Ct),bt===null?gt=Vt:bt.sibling=Vt,bt=Vt);return a&&wt.forEach(function(TS){return l(Ce,TS)}),ar&&Ji(Ce,Ct),gt}function gr(Ce,fe,Te,Ze){if(typeof Te=="object"&&Te!==null&&Te.type===F&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case P:e:{for(var gt=Te.key,bt=fe;bt!==null;){if(bt.key===gt){if(gt=Te.type,gt===F){if(bt.tag===7){u(Ce,bt.sibling),fe=N(bt,Te.props.children),fe.return=Ce,Ce=fe;break e}}else if(bt.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===R&&g0(gt)===bt.type){u(Ce,bt.sibling),fe=N(bt,Te.props),fe.ref=mc(Ce,bt,Te),fe.return=Ce,Ce=fe;break e}u(Ce,bt);break}else l(Ce,bt);bt=bt.sibling}Te.type===F?(fe=so(Te.props.children,Ce.mode,Ze,Te.key),fe.return=Ce,Ce=fe):(Ze=Iu(Te.type,Te.key,Te.props,null,Ce.mode,Ze),Ze.ref=mc(Ce,fe,Te),Ze.return=Ce,Ce=Ze)}return L(Ce);case $:e:{for(bt=Te.key;fe!==null;){if(fe.key===bt)if(fe.tag===4&&fe.stateNode.containerInfo===Te.containerInfo&&fe.stateNode.implementation===Te.implementation){u(Ce,fe.sibling),fe=N(fe,Te.children||[]),fe.return=Ce,Ce=fe;break e}else{u(Ce,fe);break}else l(Ce,fe);fe=fe.sibling}fe=Hm(Te,Ce.mode,Ze),fe.return=Ce,Ce=fe}return L(Ce);case R:return bt=Te._init,gr(Ce,fe,bt(Te._payload),Ze)}if(X(Te))return ut(Ce,fe,Te,Ze);if(he(Te))return ht(Ce,fe,Te,Ze);iu(Ce,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"?(Te=""+Te,fe!==null&&fe.tag===6?(u(Ce,fe.sibling),fe=N(fe,Te),fe.return=Ce,Ce=fe):(u(Ce,fe),fe=Vm(Te,Ce.mode,Ze),fe.return=Ce,Ce=fe),L(Ce)):u(Ce,fe)}return gr}var Jo=x0(!0),v0=x0(!1),ou=si(null),lu=null,Yo=null,tm=null;function rm(){tm=Yo=lu=null}function nm(a){var l=ou.current;nr(ou),a._currentValue=l}function sm(a,l,u){for(;a!==null;){var g=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),a===u)break;a=a.return}}function Zo(a,l){lu=a,tm=Yo=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&l)!==0&&(In=!0),a.firstContext=null)}function ls(a){var l=a._currentValue;if(tm!==a)if(a={context:a,memoizedValue:l,next:null},Yo===null){if(lu===null)throw Error(r(308));Yo=a,lu.dependencies={lanes:0,firstContext:a}}else Yo=Yo.next=a;return l}var Yi=null;function am(a){Yi===null?Yi=[a]:Yi.push(a)}function y0(a,l,u,g){var N=l.interleaved;return N===null?(u.next=u,am(l)):(u.next=N.next,N.next=u),l.interleaved=u,Ea(a,g)}function Ea(a,l){a.lanes|=l;var u=a.alternate;for(u!==null&&(u.lanes|=l),u=a,a=a.return;a!==null;)a.childLanes|=l,u=a.alternate,u!==null&&(u.childLanes|=l),u=a,a=a.return;return u.tag===3?u.stateNode:null}var oi=!1;function im(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function b0(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Aa(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function li(a,l,u){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(qt&2)!==0){var N=g.pending;return N===null?l.next=l:(l.next=N.next,N.next=l),g.pending=l,Ea(a,u)}return N=g.interleaved,N===null?(l.next=l,am(g)):(l.next=N.next,N.next=l),g.interleaved=l,Ea(a,u)}function cu(a,l,u){if(l=l.updateQueue,l!==null&&(l=l.shared,(u&4194240)!==0)){var g=l.lanes;g&=a.pendingLanes,u|=g,l.lanes=u,Ao(a,u)}}function w0(a,l){var u=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,u===g)){var N=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var L={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};_===null?N=_=L:_=_.next=L,u=u.next}while(u!==null);_===null?N=_=l:_=_.next=l}else N=_=l;u={baseState:g.baseState,firstBaseUpdate:N,lastBaseUpdate:_,shared:g.shared,effects:g.effects},a.updateQueue=u;return}a=u.lastBaseUpdate,a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=l}function du(a,l,u,g){var N=a.updateQueue;oi=!1;var _=N.firstBaseUpdate,L=N.lastBaseUpdate,Y=N.shared.pending;if(Y!==null){N.shared.pending=null;var oe=Y,Re=oe.next;oe.next=null,L===null?_=Re:L.next=Re,L=oe;var Ve=a.alternate;Ve!==null&&(Ve=Ve.updateQueue,Y=Ve.lastBaseUpdate,Y!==L&&(Y===null?Ve.firstBaseUpdate=Re:Y.next=Re,Ve.lastBaseUpdate=oe))}if(_!==null){var Ke=N.baseState;L=0,Ve=Re=oe=null,Y=_;do{var Ge=Y.lane,ot=Y.eventTime;if((g&Ge)===Ge){Ve!==null&&(Ve=Ve.next={eventTime:ot,lane:0,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null});e:{var ut=a,ht=Y;switch(Ge=l,ot=u,ht.tag){case 1:if(ut=ht.payload,typeof ut=="function"){Ke=ut.call(ot,Ke,Ge);break e}Ke=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=ht.payload,Ge=typeof ut=="function"?ut.call(ot,Ke,Ge):ut,Ge==null)break e;Ke=K({},Ke,Ge);break e;case 2:oi=!0}}Y.callback!==null&&Y.lane!==0&&(a.flags|=64,Ge=N.effects,Ge===null?N.effects=[Y]:Ge.push(Y))}else ot={eventTime:ot,lane:Ge,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Ve===null?(Re=Ve=ot,oe=Ke):Ve=Ve.next=ot,L|=Ge;if(Y=Y.next,Y===null){if(Y=N.shared.pending,Y===null)break;Ge=Y,Y=Ge.next,Ge.next=null,N.lastBaseUpdate=Ge,N.shared.pending=null}}while(!0);if(Ve===null&&(oe=Ke),N.baseState=oe,N.firstBaseUpdate=Re,N.lastBaseUpdate=Ve,l=N.shared.interleaved,l!==null){N=l;do L|=N.lane,N=N.next;while(N!==l)}else _===null&&(N.shared.lanes=0);eo|=L,a.lanes=L,a.memoizedState=Ke}}function j0(a,l,u){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var g=a[l],N=g.callback;if(N!==null){if(g.callback=null,g=u,typeof N!="function")throw Error(r(191,N));N.call(g)}}}var pc={},sa=si(pc),gc=si(pc),xc=si(pc);function Zi(a){if(a===pc)throw Error(r(174));return a}function om(a,l){switch(Xt(xc,l),Xt(gc,a),Xt(sa,pc),a=l.nodeType,a){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:yt(null,"");break;default:a=a===8?l.parentNode:l,l=a.namespaceURI||null,a=a.tagName,l=yt(l,a)}nr(sa),Xt(sa,l)}function Xo(){nr(sa),nr(gc),nr(xc)}function N0(a){Zi(xc.current);var l=Zi(sa.current),u=yt(l,a.type);l!==u&&(Xt(gc,a),Xt(sa,u))}function lm(a){gc.current===a&&(nr(sa),nr(gc))}var ur=si(0);function uu(a){for(var l=a;l!==null;){if(l.tag===13){var u=l.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var cm=[];function dm(){for(var a=0;a<cm.length;a++)cm[a]._workInProgressVersionPrimary=null;cm.length=0}var hu=O.ReactCurrentDispatcher,um=O.ReactCurrentBatchConfig,Xi=0,hr=null,Ir=null,$r=null,fu=!1,vc=!1,yc=0,XN=0;function fn(){throw Error(r(321))}function hm(a,l){if(l===null)return!1;for(var u=0;u<l.length&&u<a.length;u++)if(!ie(a[u],l[u]))return!1;return!0}function fm(a,l,u,g,N,_){if(Xi=_,hr=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,hu.current=a===null||a.memoizedState===null?nS:sS,a=u(g,N),vc){_=0;do{if(vc=!1,yc=0,25<=_)throw Error(r(301));_+=1,$r=Ir=null,l.updateQueue=null,hu.current=aS,a=u(g,N)}while(vc)}if(hu.current=gu,l=Ir!==null&&Ir.next!==null,Xi=0,$r=Ir=hr=null,fu=!1,l)throw Error(r(300));return a}function mm(){var a=yc!==0;return yc=0,a}function aa(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $r===null?hr.memoizedState=$r=a:$r=$r.next=a,$r}function cs(){if(Ir===null){var a=hr.alternate;a=a!==null?a.memoizedState:null}else a=Ir.next;var l=$r===null?hr.memoizedState:$r.next;if(l!==null)$r=l,Ir=a;else{if(a===null)throw Error(r(310));Ir=a,a={memoizedState:Ir.memoizedState,baseState:Ir.baseState,baseQueue:Ir.baseQueue,queue:Ir.queue,next:null},$r===null?hr.memoizedState=$r=a:$r=$r.next=a}return $r}function bc(a,l){return typeof l=="function"?l(a):l}function pm(a){var l=cs(),u=l.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=a;var g=Ir,N=g.baseQueue,_=u.pending;if(_!==null){if(N!==null){var L=N.next;N.next=_.next,_.next=L}g.baseQueue=N=_,u.pending=null}if(N!==null){_=N.next,g=g.baseState;var Y=L=null,oe=null,Re=_;do{var Ve=Re.lane;if((Xi&Ve)===Ve)oe!==null&&(oe=oe.next={lane:0,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null}),g=Re.hasEagerState?Re.eagerState:a(g,Re.action);else{var Ke={lane:Ve,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null};oe===null?(Y=oe=Ke,L=g):oe=oe.next=Ke,hr.lanes|=Ve,eo|=Ve}Re=Re.next}while(Re!==null&&Re!==_);oe===null?L=g:oe.next=Y,ie(g,l.memoizedState)||(In=!0),l.memoizedState=g,l.baseState=L,l.baseQueue=oe,u.lastRenderedState=g}if(a=u.interleaved,a!==null){N=a;do _=N.lane,hr.lanes|=_,eo|=_,N=N.next;while(N!==a)}else N===null&&(u.lanes=0);return[l.memoizedState,u.dispatch]}function gm(a){var l=cs(),u=l.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=a;var g=u.dispatch,N=u.pending,_=l.memoizedState;if(N!==null){u.pending=null;var L=N=N.next;do _=a(_,L.action),L=L.next;while(L!==N);ie(_,l.memoizedState)||(In=!0),l.memoizedState=_,l.baseQueue===null&&(l.baseState=_),u.lastRenderedState=_}return[_,g]}function S0(){}function k0(a,l){var u=hr,g=cs(),N=l(),_=!ie(g.memoizedState,N);if(_&&(g.memoizedState=N,In=!0),g=g.queue,xm(E0.bind(null,u,g,a),[a]),g.getSnapshot!==l||_||$r!==null&&$r.memoizedState.tag&1){if(u.flags|=2048,wc(9,C0.bind(null,u,g,N,l),void 0,null),Fr===null)throw Error(r(349));(Xi&30)!==0||_0(u,l,N)}return N}function _0(a,l,u){a.flags|=16384,a={getSnapshot:l,value:u},l=hr.updateQueue,l===null?(l={lastEffect:null,stores:null},hr.updateQueue=l,l.stores=[a]):(u=l.stores,u===null?l.stores=[a]:u.push(a))}function C0(a,l,u,g){l.value=u,l.getSnapshot=g,A0(l)&&I0(a)}function E0(a,l,u){return u(function(){A0(l)&&I0(a)})}function A0(a){var l=a.getSnapshot;a=a.value;try{var u=l();return!ie(a,u)}catch{return!0}}function I0(a){var l=Ea(a,1);l!==null&&Is(l,a,1,-1)}function T0(a){var l=aa();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bc,lastRenderedState:a},l.queue=a,a=a.dispatch=rS.bind(null,hr,a),[l.memoizedState,a]}function wc(a,l,u,g){return a={tag:a,create:l,destroy:u,deps:g,next:null},l=hr.updateQueue,l===null?(l={lastEffect:null,stores:null},hr.updateQueue=l,l.lastEffect=a.next=a):(u=l.lastEffect,u===null?l.lastEffect=a.next=a:(g=u.next,u.next=a,a.next=g,l.lastEffect=a)),a}function D0(){return cs().memoizedState}function mu(a,l,u,g){var N=aa();hr.flags|=a,N.memoizedState=wc(1|l,u,void 0,g===void 0?null:g)}function pu(a,l,u,g){var N=cs();g=g===void 0?null:g;var _=void 0;if(Ir!==null){var L=Ir.memoizedState;if(_=L.destroy,g!==null&&hm(g,L.deps)){N.memoizedState=wc(l,u,_,g);return}}hr.flags|=a,N.memoizedState=wc(1|l,u,_,g)}function R0(a,l){return mu(8390656,8,a,l)}function xm(a,l){return pu(2048,8,a,l)}function O0(a,l){return pu(4,2,a,l)}function P0(a,l){return pu(4,4,a,l)}function M0(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function L0(a,l,u){return u=u!=null?u.concat([a]):null,pu(4,4,M0.bind(null,l,a),u)}function vm(){}function $0(a,l){var u=cs();l=l===void 0?null:l;var g=u.memoizedState;return g!==null&&l!==null&&hm(l,g[1])?g[0]:(u.memoizedState=[a,l],a)}function F0(a,l){var u=cs();l=l===void 0?null:l;var g=u.memoizedState;return g!==null&&l!==null&&hm(l,g[1])?g[0]:(a=a(),u.memoizedState=[a,l],a)}function B0(a,l,u){return(Xi&21)===0?(a.baseState&&(a.baseState=!1,In=!0),a.memoizedState=u):(ie(u,l)||(u=ga(),hr.lanes|=u,eo|=u,a.baseState=!0),l)}function eS(a,l){var u=zt;zt=u!==0&&4>u?u:4,a(!0);var g=um.transition;um.transition={};try{a(!1),l()}finally{zt=u,um.transition=g}}function U0(){return cs().memoizedState}function tS(a,l,u){var g=hi(a);if(u={lane:g,action:u,hasEagerState:!1,eagerState:null,next:null},z0(a))q0(l,u);else if(u=y0(a,l,u,g),u!==null){var N=Sn();Is(u,a,g,N),G0(u,l,g)}}function rS(a,l,u){var g=hi(a),N={lane:g,action:u,hasEagerState:!1,eagerState:null,next:null};if(z0(a))q0(l,N);else{var _=a.alternate;if(a.lanes===0&&(_===null||_.lanes===0)&&(_=l.lastRenderedReducer,_!==null))try{var L=l.lastRenderedState,Y=_(L,u);if(N.hasEagerState=!0,N.eagerState=Y,ie(Y,L)){var oe=l.interleaved;oe===null?(N.next=N,am(l)):(N.next=oe.next,oe.next=N),l.interleaved=N;return}}catch{}finally{}u=y0(a,l,N,g),u!==null&&(N=Sn(),Is(u,a,g,N),G0(u,l,g))}}function z0(a){var l=a.alternate;return a===hr||l!==null&&l===hr}function q0(a,l){vc=fu=!0;var u=a.pending;u===null?l.next=l:(l.next=u.next,u.next=l),a.pending=l}function G0(a,l,u){if((u&4194240)!==0){var g=l.lanes;g&=a.pendingLanes,u|=g,l.lanes=u,Ao(a,u)}}var gu={readContext:ls,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useInsertionEffect:fn,useLayoutEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useMutableSource:fn,useSyncExternalStore:fn,useId:fn,unstable_isNewReconciler:!1},nS={readContext:ls,useCallback:function(a,l){return aa().memoizedState=[a,l===void 0?null:l],a},useContext:ls,useEffect:R0,useImperativeHandle:function(a,l,u){return u=u!=null?u.concat([a]):null,mu(4194308,4,M0.bind(null,l,a),u)},useLayoutEffect:function(a,l){return mu(4194308,4,a,l)},useInsertionEffect:function(a,l){return mu(4,2,a,l)},useMemo:function(a,l){var u=aa();return l=l===void 0?null:l,a=a(),u.memoizedState=[a,l],a},useReducer:function(a,l,u){var g=aa();return l=u!==void 0?u(l):l,g.memoizedState=g.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},g.queue=a,a=a.dispatch=tS.bind(null,hr,a),[g.memoizedState,a]},useRef:function(a){var l=aa();return a={current:a},l.memoizedState=a},useState:T0,useDebugValue:vm,useDeferredValue:function(a){return aa().memoizedState=a},useTransition:function(){var a=T0(!1),l=a[0];return a=eS.bind(null,a[1]),aa().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,u){var g=hr,N=aa();if(ar){if(u===void 0)throw Error(r(407));u=u()}else{if(u=l(),Fr===null)throw Error(r(349));(Xi&30)!==0||_0(g,l,u)}N.memoizedState=u;var _={value:u,getSnapshot:l};return N.queue=_,R0(E0.bind(null,g,_,a),[a]),g.flags|=2048,wc(9,C0.bind(null,g,_,u,l),void 0,null),u},useId:function(){var a=aa(),l=Fr.identifierPrefix;if(ar){var u=Ca,g=_a;u=(g&~(1<<32-_t(g)-1)).toString(32)+u,l=":"+l+"R"+u,u=yc++,0<u&&(l+="H"+u.toString(32)),l+=":"}else u=XN++,l=":"+l+"r"+u.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},sS={readContext:ls,useCallback:$0,useContext:ls,useEffect:xm,useImperativeHandle:L0,useInsertionEffect:O0,useLayoutEffect:P0,useMemo:F0,useReducer:pm,useRef:D0,useState:function(){return pm(bc)},useDebugValue:vm,useDeferredValue:function(a){var l=cs();return B0(l,Ir.memoizedState,a)},useTransition:function(){var a=pm(bc)[0],l=cs().memoizedState;return[a,l]},useMutableSource:S0,useSyncExternalStore:k0,useId:U0,unstable_isNewReconciler:!1},aS={readContext:ls,useCallback:$0,useContext:ls,useEffect:xm,useImperativeHandle:L0,useInsertionEffect:O0,useLayoutEffect:P0,useMemo:F0,useReducer:gm,useRef:D0,useState:function(){return gm(bc)},useDebugValue:vm,useDeferredValue:function(a){var l=cs();return Ir===null?l.memoizedState=a:B0(l,Ir.memoizedState,a)},useTransition:function(){var a=gm(bc)[0],l=cs().memoizedState;return[a,l]},useMutableSource:S0,useSyncExternalStore:k0,useId:U0,unstable_isNewReconciler:!1};function Cs(a,l){if(a&&a.defaultProps){l=K({},l),a=a.defaultProps;for(var u in a)l[u]===void 0&&(l[u]=a[u]);return l}return l}function ym(a,l,u,g){l=a.memoizedState,u=u(g,l),u=u==null?l:K({},l,u),a.memoizedState=u,a.lanes===0&&(a.updateQueue.baseState=u)}var xu={isMounted:function(a){return(a=a._reactInternals)?dn(a)===a:!1},enqueueSetState:function(a,l,u){a=a._reactInternals;var g=Sn(),N=hi(a),_=Aa(g,N);_.payload=l,u!=null&&(_.callback=u),l=li(a,_,N),l!==null&&(Is(l,a,N,g),cu(l,a,N))},enqueueReplaceState:function(a,l,u){a=a._reactInternals;var g=Sn(),N=hi(a),_=Aa(g,N);_.tag=1,_.payload=l,u!=null&&(_.callback=u),l=li(a,_,N),l!==null&&(Is(l,a,N,g),cu(l,a,N))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var u=Sn(),g=hi(a),N=Aa(u,g);N.tag=2,l!=null&&(N.callback=l),l=li(a,N,g),l!==null&&(Is(l,a,g,u),cu(l,a,g))}};function V0(a,l,u,g,N,_,L){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,_,L):l.prototype&&l.prototype.isPureReactComponent?!ve(u,g)||!ve(N,_):!0}function H0(a,l,u){var g=!1,N=ai,_=l.contextType;return typeof _=="object"&&_!==null?_=ls(_):(N=An(l)?Ki:hn.current,g=l.contextTypes,_=(g=g!=null)?Ho(a,N):ai),l=new l(u,_),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=xu,a.stateNode=l,l._reactInternals=a,g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=N,a.__reactInternalMemoizedMaskedChildContext=_),l}function W0(a,l,u,g){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(u,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(u,g),l.state!==a&&xu.enqueueReplaceState(l,l.state,null)}function bm(a,l,u,g){var N=a.stateNode;N.props=u,N.state=a.memoizedState,N.refs={},im(a);var _=l.contextType;typeof _=="object"&&_!==null?N.context=ls(_):(_=An(l)?Ki:hn.current,N.context=Ho(a,_)),N.state=a.memoizedState,_=l.getDerivedStateFromProps,typeof _=="function"&&(ym(a,l,_,u),N.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(l=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),l!==N.state&&xu.enqueueReplaceState(N,N.state,null),du(a,u,N,g),N.state=a.memoizedState),typeof N.componentDidMount=="function"&&(a.flags|=4194308)}function el(a,l){try{var u="",g=l;do u+=ge(g),g=g.return;while(g);var N=u}catch(_){N=`
Error generating stack: `+_.message+`
`+_.stack}return{value:a,source:l,stack:N,digest:null}}function wm(a,l,u){return{value:a,source:null,stack:u??null,digest:l??null}}function jm(a,l){try{console.error(l.value)}catch(u){setTimeout(function(){throw u})}}var iS=typeof WeakMap=="function"?WeakMap:Map;function K0(a,l,u){u=Aa(-1,u),u.tag=3,u.payload={element:null};var g=l.value;return u.callback=function(){Su||(Su=!0,Lm=g),jm(a,l)},u}function Q0(a,l,u){u=Aa(-1,u),u.tag=3;var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var N=l.value;u.payload=function(){return g(N)},u.callback=function(){jm(a,l)}}var _=a.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(u.callback=function(){jm(a,l),typeof g!="function"&&(di===null?di=new Set([this]):di.add(this));var L=l.stack;this.componentDidCatch(l.value,{componentStack:L!==null?L:""})}),u}function J0(a,l,u){var g=a.pingCache;if(g===null){g=a.pingCache=new iS;var N=new Set;g.set(l,N)}else N=g.get(l),N===void 0&&(N=new Set,g.set(l,N));N.has(u)||(N.add(u),a=bS.bind(null,a,l,u),l.then(a,a))}function Y0(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function Z0(a,l,u,g,N){return(a.mode&1)===0?(a===l?a.flags|=65536:(a.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(l=Aa(-1,1),l.tag=2,li(u,l,1))),u.lanes|=1),a):(a.flags|=65536,a.lanes=N,a)}var oS=O.ReactCurrentOwner,In=!1;function Nn(a,l,u,g){l.child=a===null?v0(l,null,u,g):Jo(l,a.child,u,g)}function X0(a,l,u,g,N){u=u.render;var _=l.ref;return Zo(l,N),g=fm(a,l,u,g,_,N),u=mm(),a!==null&&!In?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~N,Ia(a,l,N)):(ar&&u&&Jf(l),l.flags|=1,Nn(a,l,g,N),l.child)}function ev(a,l,u,g,N){if(a===null){var _=u.type;return typeof _=="function"&&!Gm(_)&&_.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(l.tag=15,l.type=_,tv(a,l,_,g,N)):(a=Iu(u.type,null,g,l,l.mode,N),a.ref=l.ref,a.return=l,l.child=a)}if(_=a.child,(a.lanes&N)===0){var L=_.memoizedProps;if(u=u.compare,u=u!==null?u:ve,u(L,g)&&a.ref===l.ref)return Ia(a,l,N)}return l.flags|=1,a=mi(_,g),a.ref=l.ref,a.return=l,l.child=a}function tv(a,l,u,g,N){if(a!==null){var _=a.memoizedProps;if(ve(_,g)&&a.ref===l.ref)if(In=!1,l.pendingProps=g=_,(a.lanes&N)!==0)(a.flags&131072)!==0&&(In=!0);else return l.lanes=a.lanes,Ia(a,l,N)}return Nm(a,l,u,g,N)}function rv(a,l,u){var g=l.pendingProps,N=g.children,_=a!==null?a.memoizedState:null;if(g.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xt(rl,Kn),Kn|=u;else{if((u&1073741824)===0)return a=_!==null?_.baseLanes|u:u,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,Xt(rl,Kn),Kn|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=_!==null?_.baseLanes:u,Xt(rl,Kn),Kn|=g}else _!==null?(g=_.baseLanes|u,l.memoizedState=null):g=u,Xt(rl,Kn),Kn|=g;return Nn(a,l,N,u),l.child}function nv(a,l){var u=l.ref;(a===null&&u!==null||a!==null&&a.ref!==u)&&(l.flags|=512,l.flags|=2097152)}function Nm(a,l,u,g,N){var _=An(u)?Ki:hn.current;return _=Ho(l,_),Zo(l,N),u=fm(a,l,u,g,_,N),g=mm(),a!==null&&!In?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~N,Ia(a,l,N)):(ar&&g&&Jf(l),l.flags|=1,Nn(a,l,u,N),l.child)}function sv(a,l,u,g,N){if(An(u)){var _=!0;tu(l)}else _=!1;if(Zo(l,N),l.stateNode===null)yu(a,l),H0(l,u,g),bm(l,u,g,N),g=!0;else if(a===null){var L=l.stateNode,Y=l.memoizedProps;L.props=Y;var oe=L.context,Re=u.contextType;typeof Re=="object"&&Re!==null?Re=ls(Re):(Re=An(u)?Ki:hn.current,Re=Ho(l,Re));var Ve=u.getDerivedStateFromProps,Ke=typeof Ve=="function"||typeof L.getSnapshotBeforeUpdate=="function";Ke||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(Y!==g||oe!==Re)&&W0(l,L,g,Re),oi=!1;var Ge=l.memoizedState;L.state=Ge,du(l,g,L,N),oe=l.memoizedState,Y!==g||Ge!==oe||En.current||oi?(typeof Ve=="function"&&(ym(l,u,Ve,g),oe=l.memoizedState),(Y=oi||V0(l,u,Y,g,Ge,oe,Re))?(Ke||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(l.flags|=4194308)):(typeof L.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=oe),L.props=g,L.state=oe,L.context=Re,g=Y):(typeof L.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{L=l.stateNode,b0(a,l),Y=l.memoizedProps,Re=l.type===l.elementType?Y:Cs(l.type,Y),L.props=Re,Ke=l.pendingProps,Ge=L.context,oe=u.contextType,typeof oe=="object"&&oe!==null?oe=ls(oe):(oe=An(u)?Ki:hn.current,oe=Ho(l,oe));var ot=u.getDerivedStateFromProps;(Ve=typeof ot=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(Y!==Ke||Ge!==oe)&&W0(l,L,g,oe),oi=!1,Ge=l.memoizedState,L.state=Ge,du(l,g,L,N);var ut=l.memoizedState;Y!==Ke||Ge!==ut||En.current||oi?(typeof ot=="function"&&(ym(l,u,ot,g),ut=l.memoizedState),(Re=oi||V0(l,u,Re,g,Ge,ut,oe)||!1)?(Ve||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(g,ut,oe),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(g,ut,oe)),typeof L.componentDidUpdate=="function"&&(l.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof L.componentDidUpdate!="function"||Y===a.memoizedProps&&Ge===a.memoizedState||(l.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||Y===a.memoizedProps&&Ge===a.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=ut),L.props=g,L.state=ut,L.context=oe,g=Re):(typeof L.componentDidUpdate!="function"||Y===a.memoizedProps&&Ge===a.memoizedState||(l.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||Y===a.memoizedProps&&Ge===a.memoizedState||(l.flags|=1024),g=!1)}return Sm(a,l,u,g,_,N)}function Sm(a,l,u,g,N,_){nv(a,l);var L=(l.flags&128)!==0;if(!g&&!L)return N&&c0(l,u,!1),Ia(a,l,_);g=l.stateNode,oS.current=l;var Y=L&&typeof u.getDerivedStateFromError!="function"?null:g.render();return l.flags|=1,a!==null&&L?(l.child=Jo(l,a.child,null,_),l.child=Jo(l,null,Y,_)):Nn(a,l,Y,_),l.memoizedState=g.state,N&&c0(l,u,!0),l.child}function av(a){var l=a.stateNode;l.pendingContext?o0(a,l.pendingContext,l.pendingContext!==l.context):l.context&&o0(a,l.context,!1),om(a,l.containerInfo)}function iv(a,l,u,g,N){return Qo(),em(N),l.flags|=256,Nn(a,l,u,g),l.child}var km={dehydrated:null,treeContext:null,retryLane:0};function _m(a){return{baseLanes:a,cachePool:null,transitions:null}}function ov(a,l,u){var g=l.pendingProps,N=ur.current,_=!1,L=(l.flags&128)!==0,Y;if((Y=L)||(Y=a!==null&&a.memoizedState===null?!1:(N&2)!==0),Y?(_=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(N|=1),Xt(ur,N&1),a===null)return Xf(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((l.mode&1)===0?l.lanes=1:a.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(L=g.children,a=g.fallback,_?(g=l.mode,_=l.child,L={mode:"hidden",children:L},(g&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=L):_=Tu(L,g,0,null),a=so(a,g,u,null),_.return=l,a.return=l,_.sibling=a,l.child=_,l.child.memoizedState=_m(u),l.memoizedState=km,a):Cm(l,L));if(N=a.memoizedState,N!==null&&(Y=N.dehydrated,Y!==null))return lS(a,l,L,g,Y,N,u);if(_){_=g.fallback,L=l.mode,N=a.child,Y=N.sibling;var oe={mode:"hidden",children:g.children};return(L&1)===0&&l.child!==N?(g=l.child,g.childLanes=0,g.pendingProps=oe,l.deletions=null):(g=mi(N,oe),g.subtreeFlags=N.subtreeFlags&14680064),Y!==null?_=mi(Y,_):(_=so(_,L,u,null),_.flags|=2),_.return=l,g.return=l,g.sibling=_,l.child=g,g=_,_=l.child,L=a.child.memoizedState,L=L===null?_m(u):{baseLanes:L.baseLanes|u,cachePool:null,transitions:L.transitions},_.memoizedState=L,_.childLanes=a.childLanes&~u,l.memoizedState=km,g}return _=a.child,a=_.sibling,g=mi(_,{mode:"visible",children:g.children}),(l.mode&1)===0&&(g.lanes=u),g.return=l,g.sibling=null,a!==null&&(u=l.deletions,u===null?(l.deletions=[a],l.flags|=16):u.push(a)),l.child=g,l.memoizedState=null,g}function Cm(a,l){return l=Tu({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function vu(a,l,u,g){return g!==null&&em(g),Jo(l,a.child,null,u),a=Cm(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function lS(a,l,u,g,N,_,L){if(u)return l.flags&256?(l.flags&=-257,g=wm(Error(r(422))),vu(a,l,L,g)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(_=g.fallback,N=l.mode,g=Tu({mode:"visible",children:g.children},N,0,null),_=so(_,N,L,null),_.flags|=2,g.return=l,_.return=l,g.sibling=_,l.child=g,(l.mode&1)!==0&&Jo(l,a.child,null,L),l.child.memoizedState=_m(L),l.memoizedState=km,_);if((l.mode&1)===0)return vu(a,l,L,null);if(N.data==="$!"){if(g=N.nextSibling&&N.nextSibling.dataset,g)var Y=g.dgst;return g=Y,_=Error(r(419)),g=wm(_,g,void 0),vu(a,l,L,g)}if(Y=(L&a.childLanes)!==0,In||Y){if(g=Fr,g!==null){switch(L&-L){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}N=(N&(g.suspendedLanes|L))!==0?0:N,N!==0&&N!==_.retryLane&&(_.retryLane=N,Ea(a,N),Is(g,a,N,-1))}return qm(),g=wm(Error(r(421))),vu(a,l,L,g)}return N.data==="$?"?(l.flags|=128,l.child=a.child,l=wS.bind(null,a),N._reactRetry=l,null):(a=_.treeContext,Wn=ni(N.nextSibling),Hn=l,ar=!0,_s=null,a!==null&&(is[os++]=_a,is[os++]=Ca,is[os++]=Qi,_a=a.id,Ca=a.overflow,Qi=l),l=Cm(l,g.children),l.flags|=4096,l)}function lv(a,l,u){a.lanes|=l;var g=a.alternate;g!==null&&(g.lanes|=l),sm(a.return,l,u)}function Em(a,l,u,g,N){var _=a.memoizedState;_===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:u,tailMode:N}:(_.isBackwards=l,_.rendering=null,_.renderingStartTime=0,_.last=g,_.tail=u,_.tailMode=N)}function cv(a,l,u){var g=l.pendingProps,N=g.revealOrder,_=g.tail;if(Nn(a,l,g.children,u),g=ur.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&lv(a,u,l);else if(a.tag===19)lv(a,u,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}if(Xt(ur,g),(l.mode&1)===0)l.memoizedState=null;else switch(N){case"forwards":for(u=l.child,N=null;u!==null;)a=u.alternate,a!==null&&uu(a)===null&&(N=u),u=u.sibling;u=N,u===null?(N=l.child,l.child=null):(N=u.sibling,u.sibling=null),Em(l,!1,N,u,_);break;case"backwards":for(u=null,N=l.child,l.child=null;N!==null;){if(a=N.alternate,a!==null&&uu(a)===null){l.child=N;break}a=N.sibling,N.sibling=u,u=N,N=a}Em(l,!0,u,null,_);break;case"together":Em(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function yu(a,l){(l.mode&1)===0&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function Ia(a,l,u){if(a!==null&&(l.dependencies=a.dependencies),eo|=l.lanes,(u&l.childLanes)===0)return null;if(a!==null&&l.child!==a.child)throw Error(r(153));if(l.child!==null){for(a=l.child,u=mi(a,a.pendingProps),l.child=u,u.return=l;a.sibling!==null;)a=a.sibling,u=u.sibling=mi(a,a.pendingProps),u.return=l;u.sibling=null}return l.child}function cS(a,l,u){switch(l.tag){case 3:av(l),Qo();break;case 5:N0(l);break;case 1:An(l.type)&&tu(l);break;case 4:om(l,l.stateNode.containerInfo);break;case 10:var g=l.type._context,N=l.memoizedProps.value;Xt(ou,g._currentValue),g._currentValue=N;break;case 13:if(g=l.memoizedState,g!==null)return g.dehydrated!==null?(Xt(ur,ur.current&1),l.flags|=128,null):(u&l.child.childLanes)!==0?ov(a,l,u):(Xt(ur,ur.current&1),a=Ia(a,l,u),a!==null?a.sibling:null);Xt(ur,ur.current&1);break;case 19:if(g=(u&l.childLanes)!==0,(a.flags&128)!==0){if(g)return cv(a,l,u);l.flags|=128}if(N=l.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),Xt(ur,ur.current),g)break;return null;case 22:case 23:return l.lanes=0,rv(a,l,u)}return Ia(a,l,u)}var dv,Am,uv,hv;dv=function(a,l){for(var u=l.child;u!==null;){if(u.tag===5||u.tag===6)a.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Am=function(){},uv=function(a,l,u,g){var N=a.memoizedProps;if(N!==g){a=l.stateNode,Zi(sa.current);var _=null;switch(u){case"input":N=Be(a,N),g=Be(a,g),_=[];break;case"select":N=K({},N,{value:void 0}),g=K({},g,{value:void 0}),_=[];break;case"textarea":N=W(a,N),g=W(a,g),_=[];break;default:typeof N.onClick!="function"&&typeof g.onClick=="function"&&(a.onclick=Zd)}lt(u,g);var L;u=null;for(Re in N)if(!g.hasOwnProperty(Re)&&N.hasOwnProperty(Re)&&N[Re]!=null)if(Re==="style"){var Y=N[Re];for(L in Y)Y.hasOwnProperty(L)&&(u||(u={}),u[L]="")}else Re!=="dangerouslySetInnerHTML"&&Re!=="children"&&Re!=="suppressContentEditableWarning"&&Re!=="suppressHydrationWarning"&&Re!=="autoFocus"&&(o.hasOwnProperty(Re)?_||(_=[]):(_=_||[]).push(Re,null));for(Re in g){var oe=g[Re];if(Y=N?.[Re],g.hasOwnProperty(Re)&&oe!==Y&&(oe!=null||Y!=null))if(Re==="style")if(Y){for(L in Y)!Y.hasOwnProperty(L)||oe&&oe.hasOwnProperty(L)||(u||(u={}),u[L]="");for(L in oe)oe.hasOwnProperty(L)&&Y[L]!==oe[L]&&(u||(u={}),u[L]=oe[L])}else u||(_||(_=[]),_.push(Re,u)),u=oe;else Re==="dangerouslySetInnerHTML"?(oe=oe?oe.__html:void 0,Y=Y?Y.__html:void 0,oe!=null&&Y!==oe&&(_=_||[]).push(Re,oe)):Re==="children"?typeof oe!="string"&&typeof oe!="number"||(_=_||[]).push(Re,""+oe):Re!=="suppressContentEditableWarning"&&Re!=="suppressHydrationWarning"&&(o.hasOwnProperty(Re)?(oe!=null&&Re==="onScroll"&&rr("scroll",a),_||Y===oe||(_=[])):(_=_||[]).push(Re,oe))}u&&(_=_||[]).push("style",u);var Re=_;(l.updateQueue=Re)&&(l.flags|=4)}},hv=function(a,l,u,g){u!==g&&(l.flags|=4)};function jc(a,l){if(!ar)switch(a.tailMode){case"hidden":l=a.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?a.tail=null:u.sibling=null;break;case"collapsed":u=a.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function mn(a){var l=a.alternate!==null&&a.alternate.child===a.child,u=0,g=0;if(l)for(var N=a.child;N!==null;)u|=N.lanes|N.childLanes,g|=N.subtreeFlags&14680064,g|=N.flags&14680064,N.return=a,N=N.sibling;else for(N=a.child;N!==null;)u|=N.lanes|N.childLanes,g|=N.subtreeFlags,g|=N.flags,N.return=a,N=N.sibling;return a.subtreeFlags|=g,a.childLanes=u,l}function dS(a,l,u){var g=l.pendingProps;switch(Yf(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mn(l),null;case 1:return An(l.type)&&eu(),mn(l),null;case 3:return g=l.stateNode,Xo(),nr(En),nr(hn),dm(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(a===null||a.child===null)&&(au(l)?l.flags|=4:a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,_s!==null&&(Bm(_s),_s=null))),Am(a,l),mn(l),null;case 5:lm(l);var N=Zi(xc.current);if(u=l.type,a!==null&&l.stateNode!=null)uv(a,l,u,g,N),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!g){if(l.stateNode===null)throw Error(r(166));return mn(l),null}if(a=Zi(sa.current),au(l)){g=l.stateNode,u=l.type;var _=l.memoizedProps;switch(g[na]=l,g[hc]=_,a=(l.mode&1)!==0,u){case"dialog":rr("cancel",g),rr("close",g);break;case"iframe":case"object":case"embed":rr("load",g);break;case"video":case"audio":for(N=0;N<cc.length;N++)rr(cc[N],g);break;case"source":rr("error",g);break;case"img":case"image":case"link":rr("error",g),rr("load",g);break;case"details":rr("toggle",g);break;case"input":ee(g,_),rr("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!_.multiple},rr("invalid",g);break;case"textarea":Ae(g,_),rr("invalid",g)}lt(u,_),N=null;for(var L in _)if(_.hasOwnProperty(L)){var Y=_[L];L==="children"?typeof Y=="string"?g.textContent!==Y&&(_.suppressHydrationWarning!==!0&&Yd(g.textContent,Y,a),N=["children",Y]):typeof Y=="number"&&g.textContent!==""+Y&&(_.suppressHydrationWarning!==!0&&Yd(g.textContent,Y,a),N=["children",""+Y]):o.hasOwnProperty(L)&&Y!=null&&L==="onScroll"&&rr("scroll",g)}switch(u){case"input":ce(g),kt(g,_,!0);break;case"textarea":ce(g),Fe(g);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(g.onclick=Zd)}g=N,l.updateQueue=g,g!==null&&(l.flags|=4)}else{L=N.nodeType===9?N:N.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=nt(u)),a==="http://www.w3.org/1999/xhtml"?u==="script"?(a=L.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof g.is=="string"?a=L.createElement(u,{is:g.is}):(a=L.createElement(u),u==="select"&&(L=a,g.multiple?L.multiple=!0:g.size&&(L.size=g.size))):a=L.createElementNS(a,u),a[na]=l,a[hc]=g,dv(a,l,!1,!1),l.stateNode=a;e:{switch(L=qn(u,g),u){case"dialog":rr("cancel",a),rr("close",a),N=g;break;case"iframe":case"object":case"embed":rr("load",a),N=g;break;case"video":case"audio":for(N=0;N<cc.length;N++)rr(cc[N],a);N=g;break;case"source":rr("error",a),N=g;break;case"img":case"image":case"link":rr("error",a),rr("load",a),N=g;break;case"details":rr("toggle",a),N=g;break;case"input":ee(a,g),N=Be(a,g),rr("invalid",a);break;case"option":N=g;break;case"select":a._wrapperState={wasMultiple:!!g.multiple},N=K({},g,{value:void 0}),rr("invalid",a);break;case"textarea":Ae(a,g),N=W(a,g),rr("invalid",a);break;default:N=g}lt(u,N),Y=N;for(_ in Y)if(Y.hasOwnProperty(_)){var oe=Y[_];_==="style"?ns(a,oe):_==="dangerouslySetInnerHTML"?(oe=oe?oe.__html:void 0,oe!=null&&Ft(a,oe)):_==="children"?typeof oe=="string"?(u!=="textarea"||oe!=="")&&Rt(a,oe):typeof oe=="number"&&Rt(a,""+oe):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(o.hasOwnProperty(_)?oe!=null&&_==="onScroll"&&rr("scroll",a):oe!=null&&I(a,_,oe,L))}switch(u){case"input":ce(a),kt(a,g,!1);break;case"textarea":ce(a),Fe(a);break;case"option":g.value!=null&&a.setAttribute("value",""+Q(g.value));break;case"select":a.multiple=!!g.multiple,_=g.value,_!=null?xe(a,!!g.multiple,_,!1):g.defaultValue!=null&&xe(a,!!g.multiple,g.defaultValue,!0);break;default:typeof N.onClick=="function"&&(a.onclick=Zd)}switch(u){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return mn(l),null;case 6:if(a&&l.stateNode!=null)hv(a,l,a.memoizedProps,g);else{if(typeof g!="string"&&l.stateNode===null)throw Error(r(166));if(u=Zi(xc.current),Zi(sa.current),au(l)){if(g=l.stateNode,u=l.memoizedProps,g[na]=l,(_=g.nodeValue!==u)&&(a=Hn,a!==null))switch(a.tag){case 3:Yd(g.nodeValue,u,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Yd(g.nodeValue,u,(a.mode&1)!==0)}_&&(l.flags|=4)}else g=(u.nodeType===9?u:u.ownerDocument).createTextNode(g),g[na]=l,l.stateNode=g}return mn(l),null;case 13:if(nr(ur),g=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(ar&&Wn!==null&&(l.mode&1)!==0&&(l.flags&128)===0)p0(),Qo(),l.flags|=98560,_=!1;else if(_=au(l),g!==null&&g.dehydrated!==null){if(a===null){if(!_)throw Error(r(318));if(_=l.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[na]=l}else Qo(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;mn(l),_=!1}else _s!==null&&(Bm(_s),_s=null),_=!0;if(!_)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=u,l):(g=g!==null,g!==(a!==null&&a.memoizedState!==null)&&g&&(l.child.flags|=8192,(l.mode&1)!==0&&(a===null||(ur.current&1)!==0?Tr===0&&(Tr=3):qm())),l.updateQueue!==null&&(l.flags|=4),mn(l),null);case 4:return Xo(),Am(a,l),a===null&&dc(l.stateNode.containerInfo),mn(l),null;case 10:return nm(l.type._context),mn(l),null;case 17:return An(l.type)&&eu(),mn(l),null;case 19:if(nr(ur),_=l.memoizedState,_===null)return mn(l),null;if(g=(l.flags&128)!==0,L=_.rendering,L===null)if(g)jc(_,!1);else{if(Tr!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(L=uu(a),L!==null){for(l.flags|=128,jc(_,!1),g=L.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),l.subtreeFlags=0,g=u,u=l.child;u!==null;)_=u,a=g,_.flags&=14680066,L=_.alternate,L===null?(_.childLanes=0,_.lanes=a,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=L.childLanes,_.lanes=L.lanes,_.child=L.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=L.memoizedProps,_.memoizedState=L.memoizedState,_.updateQueue=L.updateQueue,_.type=L.type,a=L.dependencies,_.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),u=u.sibling;return Xt(ur,ur.current&1|2),l.child}a=a.sibling}_.tail!==null&&Ht()>nl&&(l.flags|=128,g=!0,jc(_,!1),l.lanes=4194304)}else{if(!g)if(a=uu(L),a!==null){if(l.flags|=128,g=!0,u=a.updateQueue,u!==null&&(l.updateQueue=u,l.flags|=4),jc(_,!0),_.tail===null&&_.tailMode==="hidden"&&!L.alternate&&!ar)return mn(l),null}else 2*Ht()-_.renderingStartTime>nl&&u!==1073741824&&(l.flags|=128,g=!0,jc(_,!1),l.lanes=4194304);_.isBackwards?(L.sibling=l.child,l.child=L):(u=_.last,u!==null?u.sibling=L:l.child=L,_.last=L)}return _.tail!==null?(l=_.tail,_.rendering=l,_.tail=l.sibling,_.renderingStartTime=Ht(),l.sibling=null,u=ur.current,Xt(ur,g?u&1|2:u&1),l):(mn(l),null);case 22:case 23:return zm(),g=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==g&&(l.flags|=8192),g&&(l.mode&1)!==0?(Kn&1073741824)!==0&&(mn(l),l.subtreeFlags&6&&(l.flags|=8192)):mn(l),null;case 24:return null;case 25:return null}throw Error(r(156,l.tag))}function uS(a,l){switch(Yf(l),l.tag){case 1:return An(l.type)&&eu(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return Xo(),nr(En),nr(hn),dm(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 5:return lm(l),null;case 13:if(nr(ur),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Qo()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return nr(ur),null;case 4:return Xo(),null;case 10:return nm(l.type._context),null;case 22:case 23:return zm(),null;case 24:return null;default:return null}}var bu=!1,pn=!1,hS=typeof WeakSet=="function"?WeakSet:Set,ct=null;function tl(a,l){var u=a.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(g){mr(a,l,g)}else u.current=null}function Im(a,l,u){try{u()}catch(g){mr(a,l,g)}}var fv=!1;function fS(a,l){if(zf=Ui,a=pe(),me(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else e:{u=(u=a.ownerDocument)&&u.defaultView||window;var g=u.getSelection&&u.getSelection();if(g&&g.rangeCount!==0){u=g.anchorNode;var N=g.anchorOffset,_=g.focusNode;g=g.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var L=0,Y=-1,oe=-1,Re=0,Ve=0,Ke=a,Ge=null;t:for(;;){for(var ot;Ke!==u||N!==0&&Ke.nodeType!==3||(Y=L+N),Ke!==_||g!==0&&Ke.nodeType!==3||(oe=L+g),Ke.nodeType===3&&(L+=Ke.nodeValue.length),(ot=Ke.firstChild)!==null;)Ge=Ke,Ke=ot;for(;;){if(Ke===a)break t;if(Ge===u&&++Re===N&&(Y=L),Ge===_&&++Ve===g&&(oe=L),(ot=Ke.nextSibling)!==null)break;Ke=Ge,Ge=Ke.parentNode}Ke=ot}u=Y===-1||oe===-1?null:{start:Y,end:oe}}else u=null}u=u||{start:0,end:0}}else u=null;for(qf={focusedElem:a,selectionRange:u},Ui=!1,ct=l;ct!==null;)if(l=ct,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,ct=a;else for(;ct!==null;){l=ct;try{var ut=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(ut!==null){var ht=ut.memoizedProps,gr=ut.memoizedState,Ce=l.stateNode,fe=Ce.getSnapshotBeforeUpdate(l.elementType===l.type?ht:Cs(l.type,ht),gr);Ce.__reactInternalSnapshotBeforeUpdate=fe}break;case 3:var Te=l.stateNode.containerInfo;Te.nodeType===1?Te.textContent="":Te.nodeType===9&&Te.documentElement&&Te.removeChild(Te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Ze){mr(l,l.return,Ze)}if(a=l.sibling,a!==null){a.return=l.return,ct=a;break}ct=l.return}return ut=fv,fv=!1,ut}function Nc(a,l,u){var g=l.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var N=g=g.next;do{if((N.tag&a)===a){var _=N.destroy;N.destroy=void 0,_!==void 0&&Im(l,u,_)}N=N.next}while(N!==g)}}function wu(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var u=l=l.next;do{if((u.tag&a)===a){var g=u.create;u.destroy=g()}u=u.next}while(u!==l)}}function Tm(a){var l=a.ref;if(l!==null){var u=a.stateNode;switch(a.tag){case 5:a=u;break;default:a=u}typeof l=="function"?l(a):l.current=a}}function mv(a){var l=a.alternate;l!==null&&(a.alternate=null,mv(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&(delete l[na],delete l[hc],delete l[Wf],delete l[QN],delete l[JN])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function pv(a){return a.tag===5||a.tag===3||a.tag===4}function gv(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||pv(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Dm(a,l,u){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?u.nodeType===8?u.parentNode.insertBefore(a,l):u.insertBefore(a,l):(u.nodeType===8?(l=u.parentNode,l.insertBefore(a,u)):(l=u,l.appendChild(a)),u=u._reactRootContainer,u!=null||l.onclick!==null||(l.onclick=Zd));else if(g!==4&&(a=a.child,a!==null))for(Dm(a,l,u),a=a.sibling;a!==null;)Dm(a,l,u),a=a.sibling}function Rm(a,l,u){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?u.insertBefore(a,l):u.appendChild(a);else if(g!==4&&(a=a.child,a!==null))for(Rm(a,l,u),a=a.sibling;a!==null;)Rm(a,l,u),a=a.sibling}var en=null,Es=!1;function ci(a,l,u){for(u=u.child;u!==null;)xv(a,l,u),u=u.sibling}function xv(a,l,u){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(Pi,u)}catch{}switch(u.tag){case 5:pn||tl(u,l);case 6:var g=en,N=Es;en=null,ci(a,l,u),en=g,Es=N,en!==null&&(Es?(a=en,u=u.stateNode,a.nodeType===8?a.parentNode.removeChild(u):a.removeChild(u)):en.removeChild(u.stateNode));break;case 18:en!==null&&(Es?(a=en,u=u.stateNode,a.nodeType===8?Hf(a.parentNode,u):a.nodeType===1&&Hf(a,u),ws(a)):Hf(en,u.stateNode));break;case 4:g=en,N=Es,en=u.stateNode.containerInfo,Es=!0,ci(a,l,u),en=g,Es=N;break;case 0:case 11:case 14:case 15:if(!pn&&(g=u.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){N=g=g.next;do{var _=N,L=_.destroy;_=_.tag,L!==void 0&&((_&2)!==0||(_&4)!==0)&&Im(u,l,L),N=N.next}while(N!==g)}ci(a,l,u);break;case 1:if(!pn&&(tl(u,l),g=u.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=u.memoizedProps,g.state=u.memoizedState,g.componentWillUnmount()}catch(Y){mr(u,l,Y)}ci(a,l,u);break;case 21:ci(a,l,u);break;case 22:u.mode&1?(pn=(g=pn)||u.memoizedState!==null,ci(a,l,u),pn=g):ci(a,l,u);break;default:ci(a,l,u)}}function vv(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var u=a.stateNode;u===null&&(u=a.stateNode=new hS),l.forEach(function(g){var N=jS.bind(null,a,g);u.has(g)||(u.add(g),g.then(N,N))})}}function As(a,l){var u=l.deletions;if(u!==null)for(var g=0;g<u.length;g++){var N=u[g];try{var _=a,L=l,Y=L;e:for(;Y!==null;){switch(Y.tag){case 5:en=Y.stateNode,Es=!1;break e;case 3:en=Y.stateNode.containerInfo,Es=!0;break e;case 4:en=Y.stateNode.containerInfo,Es=!0;break e}Y=Y.return}if(en===null)throw Error(r(160));xv(_,L,N),en=null,Es=!1;var oe=N.alternate;oe!==null&&(oe.return=null),N.return=null}catch(Re){mr(N,l,Re)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)yv(l,a),l=l.sibling}function yv(a,l){var u=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(As(l,a),ia(a),g&4){try{Nc(3,a,a.return),wu(3,a)}catch(ht){mr(a,a.return,ht)}try{Nc(5,a,a.return)}catch(ht){mr(a,a.return,ht)}}break;case 1:As(l,a),ia(a),g&512&&u!==null&&tl(u,u.return);break;case 5:if(As(l,a),ia(a),g&512&&u!==null&&tl(u,u.return),a.flags&32){var N=a.stateNode;try{Rt(N,"")}catch(ht){mr(a,a.return,ht)}}if(g&4&&(N=a.stateNode,N!=null)){var _=a.memoizedProps,L=u!==null?u.memoizedProps:_,Y=a.type,oe=a.updateQueue;if(a.updateQueue=null,oe!==null)try{Y==="input"&&_.type==="radio"&&_.name!=null&&Ye(N,_),qn(Y,L);var Re=qn(Y,_);for(L=0;L<oe.length;L+=2){var Ve=oe[L],Ke=oe[L+1];Ve==="style"?ns(N,Ke):Ve==="dangerouslySetInnerHTML"?Ft(N,Ke):Ve==="children"?Rt(N,Ke):I(N,Ve,Ke,Re)}switch(Y){case"input":Ne(N,_);break;case"textarea":Le(N,_);break;case"select":var Ge=N._wrapperState.wasMultiple;N._wrapperState.wasMultiple=!!_.multiple;var ot=_.value;ot!=null?xe(N,!!_.multiple,ot,!1):Ge!==!!_.multiple&&(_.defaultValue!=null?xe(N,!!_.multiple,_.defaultValue,!0):xe(N,!!_.multiple,_.multiple?[]:"",!1))}N[hc]=_}catch(ht){mr(a,a.return,ht)}}break;case 6:if(As(l,a),ia(a),g&4){if(a.stateNode===null)throw Error(r(162));N=a.stateNode,_=a.memoizedProps;try{N.nodeValue=_}catch(ht){mr(a,a.return,ht)}}break;case 3:if(As(l,a),ia(a),g&4&&u!==null&&u.memoizedState.isDehydrated)try{ws(l.containerInfo)}catch(ht){mr(a,a.return,ht)}break;case 4:As(l,a),ia(a);break;case 13:As(l,a),ia(a),N=a.child,N.flags&8192&&(_=N.memoizedState!==null,N.stateNode.isHidden=_,!_||N.alternate!==null&&N.alternate.memoizedState!==null||(Mm=Ht())),g&4&&vv(a);break;case 22:if(Ve=u!==null&&u.memoizedState!==null,a.mode&1?(pn=(Re=pn)||Ve,As(l,a),pn=Re):As(l,a),ia(a),g&8192){if(Re=a.memoizedState!==null,(a.stateNode.isHidden=Re)&&!Ve&&(a.mode&1)!==0)for(ct=a,Ve=a.child;Ve!==null;){for(Ke=ct=Ve;ct!==null;){switch(Ge=ct,ot=Ge.child,Ge.tag){case 0:case 11:case 14:case 15:Nc(4,Ge,Ge.return);break;case 1:tl(Ge,Ge.return);var ut=Ge.stateNode;if(typeof ut.componentWillUnmount=="function"){g=Ge,u=Ge.return;try{l=g,ut.props=l.memoizedProps,ut.state=l.memoizedState,ut.componentWillUnmount()}catch(ht){mr(g,u,ht)}}break;case 5:tl(Ge,Ge.return);break;case 22:if(Ge.memoizedState!==null){jv(Ke);continue}}ot!==null?(ot.return=Ge,ct=ot):jv(Ke)}Ve=Ve.sibling}e:for(Ve=null,Ke=a;;){if(Ke.tag===5){if(Ve===null){Ve=Ke;try{N=Ke.stateNode,Re?(_=N.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(Y=Ke.stateNode,oe=Ke.memoizedProps.style,L=oe!=null&&oe.hasOwnProperty("display")?oe.display:null,Y.style.display=zn("display",L))}catch(ht){mr(a,a.return,ht)}}}else if(Ke.tag===6){if(Ve===null)try{Ke.stateNode.nodeValue=Re?"":Ke.memoizedProps}catch(ht){mr(a,a.return,ht)}}else if((Ke.tag!==22&&Ke.tag!==23||Ke.memoizedState===null||Ke===a)&&Ke.child!==null){Ke.child.return=Ke,Ke=Ke.child;continue}if(Ke===a)break e;for(;Ke.sibling===null;){if(Ke.return===null||Ke.return===a)break e;Ve===Ke&&(Ve=null),Ke=Ke.return}Ve===Ke&&(Ve=null),Ke.sibling.return=Ke.return,Ke=Ke.sibling}}break;case 19:As(l,a),ia(a),g&4&&vv(a);break;case 21:break;default:As(l,a),ia(a)}}function ia(a){var l=a.flags;if(l&2){try{e:{for(var u=a.return;u!==null;){if(pv(u)){var g=u;break e}u=u.return}throw Error(r(160))}switch(g.tag){case 5:var N=g.stateNode;g.flags&32&&(Rt(N,""),g.flags&=-33);var _=gv(a);Rm(a,_,N);break;case 3:case 4:var L=g.stateNode.containerInfo,Y=gv(a);Dm(a,Y,L);break;default:throw Error(r(161))}}catch(oe){mr(a,a.return,oe)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function mS(a,l,u){ct=a,bv(a)}function bv(a,l,u){for(var g=(a.mode&1)!==0;ct!==null;){var N=ct,_=N.child;if(N.tag===22&&g){var L=N.memoizedState!==null||bu;if(!L){var Y=N.alternate,oe=Y!==null&&Y.memoizedState!==null||pn;Y=bu;var Re=pn;if(bu=L,(pn=oe)&&!Re)for(ct=N;ct!==null;)L=ct,oe=L.child,L.tag===22&&L.memoizedState!==null?Nv(N):oe!==null?(oe.return=L,ct=oe):Nv(N);for(;_!==null;)ct=_,bv(_),_=_.sibling;ct=N,bu=Y,pn=Re}wv(a)}else(N.subtreeFlags&8772)!==0&&_!==null?(_.return=N,ct=_):wv(a)}}function wv(a){for(;ct!==null;){var l=ct;if((l.flags&8772)!==0){var u=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:pn||wu(5,l);break;case 1:var g=l.stateNode;if(l.flags&4&&!pn)if(u===null)g.componentDidMount();else{var N=l.elementType===l.type?u.memoizedProps:Cs(l.type,u.memoizedProps);g.componentDidUpdate(N,u.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var _=l.updateQueue;_!==null&&j0(l,_,g);break;case 3:var L=l.updateQueue;if(L!==null){if(u=null,l.child!==null)switch(l.child.tag){case 5:u=l.child.stateNode;break;case 1:u=l.child.stateNode}j0(l,L,u)}break;case 5:var Y=l.stateNode;if(u===null&&l.flags&4){u=Y;var oe=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":oe.autoFocus&&u.focus();break;case"img":oe.src&&(u.src=oe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var Re=l.alternate;if(Re!==null){var Ve=Re.memoizedState;if(Ve!==null){var Ke=Ve.dehydrated;Ke!==null&&ws(Ke)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}pn||l.flags&512&&Tm(l)}catch(Ge){mr(l,l.return,Ge)}}if(l===a){ct=null;break}if(u=l.sibling,u!==null){u.return=l.return,ct=u;break}ct=l.return}}function jv(a){for(;ct!==null;){var l=ct;if(l===a){ct=null;break}var u=l.sibling;if(u!==null){u.return=l.return,ct=u;break}ct=l.return}}function Nv(a){for(;ct!==null;){var l=ct;try{switch(l.tag){case 0:case 11:case 15:var u=l.return;try{wu(4,l)}catch(oe){mr(l,u,oe)}break;case 1:var g=l.stateNode;if(typeof g.componentDidMount=="function"){var N=l.return;try{g.componentDidMount()}catch(oe){mr(l,N,oe)}}var _=l.return;try{Tm(l)}catch(oe){mr(l,_,oe)}break;case 5:var L=l.return;try{Tm(l)}catch(oe){mr(l,L,oe)}}}catch(oe){mr(l,l.return,oe)}if(l===a){ct=null;break}var Y=l.sibling;if(Y!==null){Y.return=l.return,ct=Y;break}ct=l.return}}var pS=Math.ceil,ju=O.ReactCurrentDispatcher,Om=O.ReactCurrentOwner,ds=O.ReactCurrentBatchConfig,qt=0,Fr=null,br=null,tn=0,Kn=0,rl=si(0),Tr=0,Sc=null,eo=0,Nu=0,Pm=0,kc=null,Tn=null,Mm=0,nl=1/0,Ta=null,Su=!1,Lm=null,di=null,ku=!1,ui=null,_u=0,_c=0,$m=null,Cu=-1,Eu=0;function Sn(){return(qt&6)!==0?Ht():Cu!==-1?Cu:Cu=Ht()}function hi(a){return(a.mode&1)===0?1:(qt&2)!==0&&tn!==0?tn&-tn:ZN.transition!==null?(Eu===0&&(Eu=ga()),Eu):(a=zt,a!==0||(a=window.event,a=a===void 0?16:qi(a.type)),a)}function Is(a,l,u,g){if(50<_c)throw _c=0,$m=null,Error(r(185));xa(a,u,g),((qt&2)===0||a!==Fr)&&(a===Fr&&((qt&2)===0&&(Nu|=u),Tr===4&&fi(a,tn)),Dn(a,g),u===1&&qt===0&&(l.mode&1)===0&&(nl=Ht()+500,ru&&ii()))}function Dn(a,l){var u=a.callbackNode;$i(a,l);var g=Li(a,a===Fr?tn:0);if(g===0)u!==null&&_o(u),a.callbackNode=null,a.callbackPriority=0;else if(l=g&-g,a.callbackPriority!==l){if(u!=null&&_o(u),l===1)a.tag===0?YN(kv.bind(null,a)):d0(kv.bind(null,a)),WN(function(){(qt&6)===0&&ii()}),u=null;else{switch(Hl(g)){case 1:u=Js;break;case 4:u=Oi;break;case 16:u=za;break;case 536870912:u=Ys;break;default:u=za}u=Rv(u,Sv.bind(null,a))}a.callbackPriority=l,a.callbackNode=u}}function Sv(a,l){if(Cu=-1,Eu=0,(qt&6)!==0)throw Error(r(327));var u=a.callbackNode;if(sl()&&a.callbackNode!==u)return null;var g=Li(a,a===Fr?tn:0);if(g===0)return null;if((g&30)!==0||(g&a.expiredLanes)!==0||l)l=Au(a,g);else{l=g;var N=qt;qt|=2;var _=Cv();(Fr!==a||tn!==l)&&(Ta=null,nl=Ht()+500,ro(a,l));do try{vS();break}catch(Y){_v(a,Y)}while(!0);rm(),ju.current=_,qt=N,br!==null?l=0:(Fr=null,tn=0,l=Tr)}if(l!==0){if(l===2&&(N=pa(a),N!==0&&(g=N,l=Fm(a,N))),l===1)throw u=Sc,ro(a,0),fi(a,g),Dn(a,Ht()),u;if(l===6)fi(a,g);else{if(N=a.current.alternate,(g&30)===0&&!gS(N)&&(l=Au(a,g),l===2&&(_=pa(a),_!==0&&(g=_,l=Fm(a,_))),l===1))throw u=Sc,ro(a,0),fi(a,g),Dn(a,Ht()),u;switch(a.finishedWork=N,a.finishedLanes=g,l){case 0:case 1:throw Error(r(345));case 2:no(a,Tn,Ta);break;case 3:if(fi(a,g),(g&130023424)===g&&(l=Mm+500-Ht(),10<l)){if(Li(a,0)!==0)break;if(N=a.suspendedLanes,(N&g)!==g){Sn(),a.pingedLanes|=a.suspendedLanes&N;break}a.timeoutHandle=Vf(no.bind(null,a,Tn,Ta),l);break}no(a,Tn,Ta);break;case 4:if(fi(a,g),(g&4194240)===g)break;for(l=a.eventTimes,N=-1;0<g;){var L=31-_t(g);_=1<<L,L=l[L],L>N&&(N=L),g&=~_}if(g=N,g=Ht()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*pS(g/1960))-g,10<g){a.timeoutHandle=Vf(no.bind(null,a,Tn,Ta),g);break}no(a,Tn,Ta);break;case 5:no(a,Tn,Ta);break;default:throw Error(r(329))}}}return Dn(a,Ht()),a.callbackNode===u?Sv.bind(null,a):null}function Fm(a,l){var u=kc;return a.current.memoizedState.isDehydrated&&(ro(a,l).flags|=256),a=Au(a,l),a!==2&&(l=Tn,Tn=u,l!==null&&Bm(l)),a}function Bm(a){Tn===null?Tn=a:Tn.push.apply(Tn,a)}function gS(a){for(var l=a;;){if(l.flags&16384){var u=l.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var g=0;g<u.length;g++){var N=u[g],_=N.getSnapshot;N=N.value;try{if(!ie(_(),N))return!1}catch{return!1}}}if(u=l.child,l.subtreeFlags&16384&&u!==null)u.return=l,l=u;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function fi(a,l){for(l&=~Pm,l&=~Nu,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var u=31-_t(l),g=1<<u;a[u]=-1,l&=~g}}function kv(a){if((qt&6)!==0)throw Error(r(327));sl();var l=Li(a,0);if((l&1)===0)return Dn(a,Ht()),null;var u=Au(a,l);if(a.tag!==0&&u===2){var g=pa(a);g!==0&&(l=g,u=Fm(a,g))}if(u===1)throw u=Sc,ro(a,0),fi(a,l),Dn(a,Ht()),u;if(u===6)throw Error(r(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,no(a,Tn,Ta),Dn(a,Ht()),null}function Um(a,l){var u=qt;qt|=1;try{return a(l)}finally{qt=u,qt===0&&(nl=Ht()+500,ru&&ii())}}function to(a){ui!==null&&ui.tag===0&&(qt&6)===0&&sl();var l=qt;qt|=1;var u=ds.transition,g=zt;try{if(ds.transition=null,zt=1,a)return a()}finally{zt=g,ds.transition=u,qt=l,(qt&6)===0&&ii()}}function zm(){Kn=rl.current,nr(rl)}function ro(a,l){a.finishedWork=null,a.finishedLanes=0;var u=a.timeoutHandle;if(u!==-1&&(a.timeoutHandle=-1,HN(u)),br!==null)for(u=br.return;u!==null;){var g=u;switch(Yf(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&eu();break;case 3:Xo(),nr(En),nr(hn),dm();break;case 5:lm(g);break;case 4:Xo();break;case 13:nr(ur);break;case 19:nr(ur);break;case 10:nm(g.type._context);break;case 22:case 23:zm()}u=u.return}if(Fr=a,br=a=mi(a.current,null),tn=Kn=l,Tr=0,Sc=null,Pm=Nu=eo=0,Tn=kc=null,Yi!==null){for(l=0;l<Yi.length;l++)if(u=Yi[l],g=u.interleaved,g!==null){u.interleaved=null;var N=g.next,_=u.pending;if(_!==null){var L=_.next;_.next=N,g.next=L}u.pending=g}Yi=null}return a}function _v(a,l){do{var u=br;try{if(rm(),hu.current=gu,fu){for(var g=hr.memoizedState;g!==null;){var N=g.queue;N!==null&&(N.pending=null),g=g.next}fu=!1}if(Xi=0,$r=Ir=hr=null,vc=!1,yc=0,Om.current=null,u===null||u.return===null){Tr=1,Sc=l,br=null;break}e:{var _=a,L=u.return,Y=u,oe=l;if(l=tn,Y.flags|=32768,oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var Re=oe,Ve=Y,Ke=Ve.tag;if((Ve.mode&1)===0&&(Ke===0||Ke===11||Ke===15)){var Ge=Ve.alternate;Ge?(Ve.updateQueue=Ge.updateQueue,Ve.memoizedState=Ge.memoizedState,Ve.lanes=Ge.lanes):(Ve.updateQueue=null,Ve.memoizedState=null)}var ot=Y0(L);if(ot!==null){ot.flags&=-257,Z0(ot,L,Y,_,l),ot.mode&1&&J0(_,Re,l),l=ot,oe=Re;var ut=l.updateQueue;if(ut===null){var ht=new Set;ht.add(oe),l.updateQueue=ht}else ut.add(oe);break e}else{if((l&1)===0){J0(_,Re,l),qm();break e}oe=Error(r(426))}}else if(ar&&Y.mode&1){var gr=Y0(L);if(gr!==null){(gr.flags&65536)===0&&(gr.flags|=256),Z0(gr,L,Y,_,l),em(el(oe,Y));break e}}_=oe=el(oe,Y),Tr!==4&&(Tr=2),kc===null?kc=[_]:kc.push(_),_=L;do{switch(_.tag){case 3:_.flags|=65536,l&=-l,_.lanes|=l;var Ce=K0(_,oe,l);w0(_,Ce);break e;case 1:Y=oe;var fe=_.type,Te=_.stateNode;if((_.flags&128)===0&&(typeof fe.getDerivedStateFromError=="function"||Te!==null&&typeof Te.componentDidCatch=="function"&&(di===null||!di.has(Te)))){_.flags|=65536,l&=-l,_.lanes|=l;var Ze=Q0(_,Y,l);w0(_,Ze);break e}}_=_.return}while(_!==null)}Av(u)}catch(gt){l=gt,br===u&&u!==null&&(br=u=u.return);continue}break}while(!0)}function Cv(){var a=ju.current;return ju.current=gu,a===null?gu:a}function qm(){(Tr===0||Tr===3||Tr===2)&&(Tr=4),Fr===null||(eo&268435455)===0&&(Nu&268435455)===0||fi(Fr,tn)}function Au(a,l){var u=qt;qt|=2;var g=Cv();(Fr!==a||tn!==l)&&(Ta=null,ro(a,l));do try{xS();break}catch(N){_v(a,N)}while(!0);if(rm(),qt=u,ju.current=g,br!==null)throw Error(r(261));return Fr=null,tn=0,Tr}function xS(){for(;br!==null;)Ev(br)}function vS(){for(;br!==null&&!cr();)Ev(br)}function Ev(a){var l=Dv(a.alternate,a,Kn);a.memoizedProps=a.pendingProps,l===null?Av(a):br=l,Om.current=null}function Av(a){var l=a;do{var u=l.alternate;if(a=l.return,(l.flags&32768)===0){if(u=dS(u,l,Kn),u!==null){br=u;return}}else{if(u=uS(u,l),u!==null){u.flags&=32767,br=u;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Tr=6,br=null;return}}if(l=l.sibling,l!==null){br=l;return}br=l=a}while(l!==null);Tr===0&&(Tr=5)}function no(a,l,u){var g=zt,N=ds.transition;try{ds.transition=null,zt=1,yS(a,l,u,g)}finally{ds.transition=N,zt=g}return null}function yS(a,l,u,g){do sl();while(ui!==null);if((qt&6)!==0)throw Error(r(327));u=a.finishedWork;var N=a.finishedLanes;if(u===null)return null;if(a.finishedWork=null,a.finishedLanes=0,u===a.current)throw Error(r(177));a.callbackNode=null,a.callbackPriority=0;var _=u.lanes|u.childLanes;if(Eo(a,_),a===Fr&&(br=Fr=null,tn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||ku||(ku=!0,Rv(za,function(){return sl(),null})),_=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||_){_=ds.transition,ds.transition=null;var L=zt;zt=1;var Y=qt;qt|=4,Om.current=null,fS(a,u),yv(u,a),be(qf),Ui=!!zf,qf=zf=null,a.current=u,mS(u),ma(),qt=Y,zt=L,ds.transition=_}else a.current=u;if(ku&&(ku=!1,ui=a,_u=N),_=a.pendingLanes,_===0&&(di=null),Id(u.stateNode),Dn(a,Ht()),l!==null)for(g=a.onRecoverableError,u=0;u<l.length;u++)N=l[u],g(N.value,{componentStack:N.stack,digest:N.digest});if(Su)throw Su=!1,a=Lm,Lm=null,a;return(_u&1)!==0&&a.tag!==0&&sl(),_=a.pendingLanes,(_&1)!==0?a===$m?_c++:(_c=0,$m=a):_c=0,ii(),null}function sl(){if(ui!==null){var a=Hl(_u),l=ds.transition,u=zt;try{if(ds.transition=null,zt=16>a?16:a,ui===null)var g=!1;else{if(a=ui,ui=null,_u=0,(qt&6)!==0)throw Error(r(331));var N=qt;for(qt|=4,ct=a.current;ct!==null;){var _=ct,L=_.child;if((ct.flags&16)!==0){var Y=_.deletions;if(Y!==null){for(var oe=0;oe<Y.length;oe++){var Re=Y[oe];for(ct=Re;ct!==null;){var Ve=ct;switch(Ve.tag){case 0:case 11:case 15:Nc(8,Ve,_)}var Ke=Ve.child;if(Ke!==null)Ke.return=Ve,ct=Ke;else for(;ct!==null;){Ve=ct;var Ge=Ve.sibling,ot=Ve.return;if(mv(Ve),Ve===Re){ct=null;break}if(Ge!==null){Ge.return=ot,ct=Ge;break}ct=ot}}}var ut=_.alternate;if(ut!==null){var ht=ut.child;if(ht!==null){ut.child=null;do{var gr=ht.sibling;ht.sibling=null,ht=gr}while(ht!==null)}}ct=_}}if((_.subtreeFlags&2064)!==0&&L!==null)L.return=_,ct=L;else e:for(;ct!==null;){if(_=ct,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:Nc(9,_,_.return)}var Ce=_.sibling;if(Ce!==null){Ce.return=_.return,ct=Ce;break e}ct=_.return}}var fe=a.current;for(ct=fe;ct!==null;){L=ct;var Te=L.child;if((L.subtreeFlags&2064)!==0&&Te!==null)Te.return=L,ct=Te;else e:for(L=fe;ct!==null;){if(Y=ct,(Y.flags&2048)!==0)try{switch(Y.tag){case 0:case 11:case 15:wu(9,Y)}}catch(gt){mr(Y,Y.return,gt)}if(Y===L){ct=null;break e}var Ze=Y.sibling;if(Ze!==null){Ze.return=Y.return,ct=Ze;break e}ct=Y.return}}if(qt=N,ii(),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(Pi,a)}catch{}g=!0}return g}finally{zt=u,ds.transition=l}}return!1}function Iv(a,l,u){l=el(u,l),l=K0(a,l,1),a=li(a,l,1),l=Sn(),a!==null&&(xa(a,1,l),Dn(a,l))}function mr(a,l,u){if(a.tag===3)Iv(a,a,u);else for(;l!==null;){if(l.tag===3){Iv(l,a,u);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(di===null||!di.has(g))){a=el(u,a),a=Q0(l,a,1),l=li(l,a,1),a=Sn(),l!==null&&(xa(l,1,a),Dn(l,a));break}}l=l.return}}function bS(a,l,u){var g=a.pingCache;g!==null&&g.delete(l),l=Sn(),a.pingedLanes|=a.suspendedLanes&u,Fr===a&&(tn&u)===u&&(Tr===4||Tr===3&&(tn&130023424)===tn&&500>Ht()-Mm?ro(a,0):Pm|=u),Dn(a,l)}function Tv(a,l){l===0&&((a.mode&1)===0?l=1:(l=Mi,Mi<<=1,(Mi&130023424)===0&&(Mi=4194304)));var u=Sn();a=Ea(a,l),a!==null&&(xa(a,l,u),Dn(a,u))}function wS(a){var l=a.memoizedState,u=0;l!==null&&(u=l.retryLane),Tv(a,u)}function jS(a,l){var u=0;switch(a.tag){case 13:var g=a.stateNode,N=a.memoizedState;N!==null&&(u=N.retryLane);break;case 19:g=a.stateNode;break;default:throw Error(r(314))}g!==null&&g.delete(l),Tv(a,u)}var Dv;Dv=function(a,l,u){if(a!==null)if(a.memoizedProps!==l.pendingProps||En.current)In=!0;else{if((a.lanes&u)===0&&(l.flags&128)===0)return In=!1,cS(a,l,u);In=(a.flags&131072)!==0}else In=!1,ar&&(l.flags&1048576)!==0&&u0(l,su,l.index);switch(l.lanes=0,l.tag){case 2:var g=l.type;yu(a,l),a=l.pendingProps;var N=Ho(l,hn.current);Zo(l,u),N=fm(null,l,g,a,N,u);var _=mm();return l.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,An(g)?(_=!0,tu(l)):_=!1,l.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,im(l),N.updater=xu,l.stateNode=N,N._reactInternals=l,bm(l,g,a,u),l=Sm(null,l,g,!0,_,u)):(l.tag=0,ar&&_&&Jf(l),Nn(null,l,N,u),l=l.child),l;case 16:g=l.elementType;e:{switch(yu(a,l),a=l.pendingProps,N=g._init,g=N(g._payload),l.type=g,N=l.tag=SS(g),a=Cs(g,a),N){case 0:l=Nm(null,l,g,a,u);break e;case 1:l=sv(null,l,g,a,u);break e;case 11:l=X0(null,l,g,a,u);break e;case 14:l=ev(null,l,g,Cs(g.type,a),u);break e}throw Error(r(306,g,""))}return l;case 0:return g=l.type,N=l.pendingProps,N=l.elementType===g?N:Cs(g,N),Nm(a,l,g,N,u);case 1:return g=l.type,N=l.pendingProps,N=l.elementType===g?N:Cs(g,N),sv(a,l,g,N,u);case 3:e:{if(av(l),a===null)throw Error(r(387));g=l.pendingProps,_=l.memoizedState,N=_.element,b0(a,l),du(l,g,null,u);var L=l.memoizedState;if(g=L.element,_.isDehydrated)if(_={element:g,isDehydrated:!1,cache:L.cache,pendingSuspenseBoundaries:L.pendingSuspenseBoundaries,transitions:L.transitions},l.updateQueue.baseState=_,l.memoizedState=_,l.flags&256){N=el(Error(r(423)),l),l=iv(a,l,g,u,N);break e}else if(g!==N){N=el(Error(r(424)),l),l=iv(a,l,g,u,N);break e}else for(Wn=ni(l.stateNode.containerInfo.firstChild),Hn=l,ar=!0,_s=null,u=v0(l,null,g,u),l.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Qo(),g===N){l=Ia(a,l,u);break e}Nn(a,l,g,u)}l=l.child}return l;case 5:return N0(l),a===null&&Xf(l),g=l.type,N=l.pendingProps,_=a!==null?a.memoizedProps:null,L=N.children,Gf(g,N)?L=null:_!==null&&Gf(g,_)&&(l.flags|=32),nv(a,l),Nn(a,l,L,u),l.child;case 6:return a===null&&Xf(l),null;case 13:return ov(a,l,u);case 4:return om(l,l.stateNode.containerInfo),g=l.pendingProps,a===null?l.child=Jo(l,null,g,u):Nn(a,l,g,u),l.child;case 11:return g=l.type,N=l.pendingProps,N=l.elementType===g?N:Cs(g,N),X0(a,l,g,N,u);case 7:return Nn(a,l,l.pendingProps,u),l.child;case 8:return Nn(a,l,l.pendingProps.children,u),l.child;case 12:return Nn(a,l,l.pendingProps.children,u),l.child;case 10:e:{if(g=l.type._context,N=l.pendingProps,_=l.memoizedProps,L=N.value,Xt(ou,g._currentValue),g._currentValue=L,_!==null)if(ie(_.value,L)){if(_.children===N.children&&!En.current){l=Ia(a,l,u);break e}}else for(_=l.child,_!==null&&(_.return=l);_!==null;){var Y=_.dependencies;if(Y!==null){L=_.child;for(var oe=Y.firstContext;oe!==null;){if(oe.context===g){if(_.tag===1){oe=Aa(-1,u&-u),oe.tag=2;var Re=_.updateQueue;if(Re!==null){Re=Re.shared;var Ve=Re.pending;Ve===null?oe.next=oe:(oe.next=Ve.next,Ve.next=oe),Re.pending=oe}}_.lanes|=u,oe=_.alternate,oe!==null&&(oe.lanes|=u),sm(_.return,u,l),Y.lanes|=u;break}oe=oe.next}}else if(_.tag===10)L=_.type===l.type?null:_.child;else if(_.tag===18){if(L=_.return,L===null)throw Error(r(341));L.lanes|=u,Y=L.alternate,Y!==null&&(Y.lanes|=u),sm(L,u,l),L=_.sibling}else L=_.child;if(L!==null)L.return=_;else for(L=_;L!==null;){if(L===l){L=null;break}if(_=L.sibling,_!==null){_.return=L.return,L=_;break}L=L.return}_=L}Nn(a,l,N.children,u),l=l.child}return l;case 9:return N=l.type,g=l.pendingProps.children,Zo(l,u),N=ls(N),g=g(N),l.flags|=1,Nn(a,l,g,u),l.child;case 14:return g=l.type,N=Cs(g,l.pendingProps),N=Cs(g.type,N),ev(a,l,g,N,u);case 15:return tv(a,l,l.type,l.pendingProps,u);case 17:return g=l.type,N=l.pendingProps,N=l.elementType===g?N:Cs(g,N),yu(a,l),l.tag=1,An(g)?(a=!0,tu(l)):a=!1,Zo(l,u),H0(l,g,N),bm(l,g,N,u),Sm(null,l,g,!0,a,u);case 19:return cv(a,l,u);case 22:return rv(a,l,u)}throw Error(r(156,l.tag))};function Rv(a,l){return Gl(a,l)}function NS(a,l,u,g){this.tag=a,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function us(a,l,u,g){return new NS(a,l,u,g)}function Gm(a){return a=a.prototype,!(!a||!a.isReactComponent)}function SS(a){if(typeof a=="function")return Gm(a)?1:0;if(a!=null){if(a=a.$$typeof,a===De)return 11;if(a===ye)return 14}return 2}function mi(a,l){var u=a.alternate;return u===null?(u=us(a.tag,l,a.key,a.mode),u.elementType=a.elementType,u.type=a.type,u.stateNode=a.stateNode,u.alternate=a,a.alternate=u):(u.pendingProps=l,u.type=a.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=a.flags&14680064,u.childLanes=a.childLanes,u.lanes=a.lanes,u.child=a.child,u.memoizedProps=a.memoizedProps,u.memoizedState=a.memoizedState,u.updateQueue=a.updateQueue,l=a.dependencies,u.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},u.sibling=a.sibling,u.index=a.index,u.ref=a.ref,u}function Iu(a,l,u,g,N,_){var L=2;if(g=a,typeof a=="function")Gm(a)&&(L=1);else if(typeof a=="string")L=5;else e:switch(a){case F:return so(u.children,N,_,l);case te:L=8,N|=8;break;case ne:return a=us(12,u,l,N|2),a.elementType=ne,a.lanes=_,a;case U:return a=us(13,u,l,N),a.elementType=U,a.lanes=_,a;case H:return a=us(19,u,l,N),a.elementType=H,a.lanes=_,a;case de:return Tu(u,N,_,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case Ee:L=10;break e;case Se:L=9;break e;case De:L=11;break e;case ye:L=14;break e;case R:L=16,g=null;break e}throw Error(r(130,a==null?a:typeof a,""))}return l=us(L,u,l,N),l.elementType=a,l.type=g,l.lanes=_,l}function so(a,l,u,g){return a=us(7,a,g,l),a.lanes=u,a}function Tu(a,l,u,g){return a=us(22,a,g,l),a.elementType=de,a.lanes=u,a.stateNode={isHidden:!1},a}function Vm(a,l,u){return a=us(6,a,null,l),a.lanes=u,a}function Hm(a,l,u){return l=us(4,a.children!==null?a.children:[],a.key,l),l.lanes=u,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function kS(a,l,u,g,N){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fi(0),this.expirationTimes=Fi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fi(0),this.identifierPrefix=g,this.onRecoverableError=N,this.mutableSourceEagerHydrationData=null}function Wm(a,l,u,g,N,_,L,Y,oe){return a=new kS(a,l,u,Y,oe),l===1?(l=1,_===!0&&(l|=8)):l=0,_=us(3,null,null,l),a.current=_,_.stateNode=a,_.memoizedState={element:g,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},im(_),a}function _S(a,l,u){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:g==null?null:""+g,children:a,containerInfo:l,implementation:u}}function Ov(a){if(!a)return ai;a=a._reactInternals;e:{if(dn(a)!==a||a.tag!==1)throw Error(r(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(An(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(r(171))}if(a.tag===1){var u=a.type;if(An(u))return l0(a,u,l)}return l}function Pv(a,l,u,g,N,_,L,Y,oe){return a=Wm(u,g,!0,a,N,_,L,Y,oe),a.context=Ov(null),u=a.current,g=Sn(),N=hi(u),_=Aa(g,N),_.callback=l??null,li(u,_,N),a.current.lanes=N,xa(a,N,g),Dn(a,g),a}function Du(a,l,u,g){var N=l.current,_=Sn(),L=hi(N);return u=Ov(u),l.context===null?l.context=u:l.pendingContext=u,l=Aa(_,L),l.payload={element:a},g=g===void 0?null:g,g!==null&&(l.callback=g),a=li(N,l,L),a!==null&&(Is(a,N,L,_),cu(a,N,L)),L}function Ru(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Mv(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var u=a.retryLane;a.retryLane=u!==0&&u<l?u:l}}function Km(a,l){Mv(a,l),(a=a.alternate)&&Mv(a,l)}function CS(){return null}var Lv=typeof reportError=="function"?reportError:function(a){console.error(a)};function Qm(a){this._internalRoot=a}Ou.prototype.render=Qm.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(r(409));Du(a,l,null,null)},Ou.prototype.unmount=Qm.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;to(function(){Du(null,a,null,null)}),l[Sa]=null}};function Ou(a){this._internalRoot=a}Ou.prototype.unstable_scheduleHydration=function(a){if(a){var l=Od();a={blockedOn:null,target:a,priority:l};for(var u=0;u<Cr.length&&l!==0&&l<Cr[u].priority;u++);Cr.splice(u,0,a),u===0&&Md(a)}};function Jm(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Pu(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function $v(){}function ES(a,l,u,g,N){if(N){if(typeof g=="function"){var _=g;g=function(){var Re=Ru(L);_.call(Re)}}var L=Pv(l,g,a,0,null,!1,!1,"",$v);return a._reactRootContainer=L,a[Sa]=L.current,dc(a.nodeType===8?a.parentNode:a),to(),L}for(;N=a.lastChild;)a.removeChild(N);if(typeof g=="function"){var Y=g;g=function(){var Re=Ru(oe);Y.call(Re)}}var oe=Wm(a,0,!1,null,null,!1,!1,"",$v);return a._reactRootContainer=oe,a[Sa]=oe.current,dc(a.nodeType===8?a.parentNode:a),to(function(){Du(l,oe,u,g)}),oe}function Mu(a,l,u,g,N){var _=u._reactRootContainer;if(_){var L=_;if(typeof N=="function"){var Y=N;N=function(){var oe=Ru(L);Y.call(oe)}}Du(l,L,a,N)}else L=ES(u,l,a,N,g);return Ru(L)}Rd=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var u=qa(l.pendingLanes);u!==0&&(Ao(l,u|1),Dn(l,Ht()),(qt&6)===0&&(nl=Ht()+500,ii()))}break;case 13:to(function(){var g=Ea(a,1);if(g!==null){var N=Sn();Is(g,a,1,N)}}),Km(a,1)}},Bt=function(a){if(a.tag===13){var l=Ea(a,134217728);if(l!==null){var u=Sn();Is(l,a,134217728,u)}Km(a,134217728)}},Wl=function(a){if(a.tag===13){var l=hi(a),u=Ea(a,l);if(u!==null){var g=Sn();Is(u,a,l,g)}Km(a,l)}},Od=function(){return zt},Pd=function(a,l){var u=zt;try{return zt=a,l()}finally{zt=u}},st=function(a,l,u){switch(l){case"input":if(Ne(a,u),l=u.name,u.type==="radio"&&l!=null){for(u=a;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<u.length;l++){var g=u[l];if(g!==a&&g.form===a.form){var N=Xd(g);if(!N)throw Error(r(90));J(g),Ne(g,N)}}}break;case"textarea":Le(a,u);break;case"select":l=u.value,l!=null&&xe(a,!!u.multiple,l,!1)}},Jr=Um,Or=to;var AS={usingClientEntryPoint:!1,Events:[fc,Go,Xd,_r,vn,Um]},Cc={findFiberByHostInstance:Wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IS={bundleType:Cc.bundleType,version:Cc.version,rendererPackageName:Cc.rendererPackageName,rendererConfig:Cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=ql(a),a===null?null:a.stateNode},findFiberByHostInstance:Cc.findFiberByHostInstance||CS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lu.isDisabled&&Lu.supportsFiber)try{Pi=Lu.inject(IS),bn=Lu}catch{}}return Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AS,Rn.createPortal=function(a,l){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jm(l))throw Error(r(200));return _S(a,l,null,u)},Rn.createRoot=function(a,l){if(!Jm(a))throw Error(r(299));var u=!1,g="",N=Lv;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(N=l.onRecoverableError)),l=Wm(a,1,!1,null,null,u,!1,g,N),a[Sa]=l.current,dc(a.nodeType===8?a.parentNode:a),new Qm(l)},Rn.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=ql(l),a=a===null?null:a.stateNode,a},Rn.flushSync=function(a){return to(a)},Rn.hydrate=function(a,l,u){if(!Pu(l))throw Error(r(200));return Mu(null,a,l,!0,u)},Rn.hydrateRoot=function(a,l,u){if(!Jm(a))throw Error(r(405));var g=u!=null&&u.hydratedSources||null,N=!1,_="",L=Lv;if(u!=null&&(u.unstable_strictMode===!0&&(N=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onRecoverableError!==void 0&&(L=u.onRecoverableError)),l=Pv(l,null,a,1,u??null,N,!1,_,L),a[Sa]=l.current,dc(a),g)for(a=0;a<g.length;a++)u=g[a],N=u._getVersion,N=N(u._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[u,N]:l.mutableSourceEagerHydrationData.push(u,N);return new Ou(l)},Rn.render=function(a,l,u){if(!Pu(l))throw Error(r(200));return Mu(null,a,l,!1,u)},Rn.unmountComponentAtNode=function(a){if(!Pu(a))throw Error(r(40));return a._reactRootContainer?(to(function(){Mu(null,null,a,!1,function(){a._reactRootContainer=null,a[Sa]=null})}),!0):!1},Rn.unstable_batchedUpdates=Um,Rn.unstable_renderSubtreeIntoContainer=function(a,l,u,g){if(!Pu(u))throw Error(r(200));if(a==null||a._reactInternals===void 0)throw Error(r(38));return Mu(a,l,u,!1,g)},Rn.version="18.3.1-next-f1338f8080-20240426",Rn}var Hv;function Iw(){if(Hv)return Xm.exports;Hv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Xm.exports=FS(),Xm.exports}var Wv;function BS(){if(Wv)return $u;Wv=1;var e=Iw();return $u.createRoot=e.createRoot,$u.hydrateRoot=e.hydrateRoot,$u}var US=BS();/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Kv="popstate";function zS(e={}){function t(s,o){let{pathname:i,search:c,hash:d}=s.location;return Fp("",{pathname:i,search:c,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(s,o){return typeof o=="string"?o:Kc(o)}return GS(t,r,null,e)}function lr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function gs(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function qS(){return Math.random().toString(36).substring(2,10)}function Qv(e,t){return{usr:e.state,key:e.key,idx:t}}function Fp(e,t,r=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Il(t):t,state:r,key:t&&t.key||s||qS()}}function Kc({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Il(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function GS(e,t,r,s={}){let{window:o=document.defaultView,v5Compat:i=!1}=s,c=o.history,d="POP",h=null,f=p();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function p(){return(c.state||{idx:null}).idx}function v(){d="POP";let C=p(),T=C==null?null:C-f;f=C,h&&h({action:d,location:S.location,delta:T})}function x(C,T){d="PUSH";let A=Fp(S.location,C,T);f=p()+1;let I=Qv(A,f),O=S.createHref(A);try{c.pushState(I,"",O)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;o.location.assign(O)}i&&h&&h({action:d,location:S.location,delta:1})}function w(C,T){d="REPLACE";let A=Fp(S.location,C,T);f=p();let I=Qv(A,f),O=S.createHref(A);c.replaceState(I,"",O),i&&h&&h({action:d,location:S.location,delta:0})}function y(C){return VS(C)}let S={get action(){return d},get location(){return e(o,c)},listen(C){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(Kv,v),h=C,()=>{o.removeEventListener(Kv,v),h=null}},createHref(C){return t(o,C)},createURL:y,encodeLocation(C){let T=y(C);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:x,replace:w,go(C){return c.go(C)}};return S}function VS(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),lr(r,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:Kc(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=r+s),new URL(s,r)}function Tw(e,t,r="/"){return HS(e,t,r,!1)}function HS(e,t,r,s){let o=typeof t=="string"?Il(t):t,i=Fa(o.pathname||"/",r);if(i==null)return null;let c=Dw(e);WS(c);let d=null;for(let h=0;d==null&&h<c.length;++h){let f=sk(i);d=rk(c[h],f,s)}return d}function Dw(e,t=[],r=[],s="",o=!1){let i=(c,d,h=o,f)=>{let p={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(s)&&h)return;lr(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length)}let v=La([s,p.relativePath]),x=r.concat(p);c.children&&c.children.length>0&&(lr(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),Dw(c.children,t,x,v,h)),!(c.path==null&&!c.index)&&t.push({path:v,score:ek(v,c.index),routesMeta:x})};return e.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))i(c,d);else for(let h of Rw(c.path))i(c,d,!0,h)}),t}function Rw(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,o=r.endsWith("?"),i=r.replace(/\?$/,"");if(s.length===0)return o?[i,""]:[i];let c=Rw(s.join("/")),d=[];return d.push(...c.map(h=>h===""?i:[i,h].join("/"))),o&&d.push(...c),d.map(h=>e.startsWith("/")&&h===""?"/":h)}function WS(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:tk(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}var KS=/^:[\w-]+$/,QS=3,JS=2,YS=1,ZS=10,XS=-2,Jv=e=>e==="*";function ek(e,t){let r=e.split("/"),s=r.length;return r.some(Jv)&&(s+=XS),t&&(s+=JS),r.filter(o=>!Jv(o)).reduce((o,i)=>o+(KS.test(i)?QS:i===""?YS:ZS),s)}function tk(e,t){return e.length===t.length&&e.slice(0,-1).every((s,o)=>s===t[o])?e[e.length-1]-t[t.length-1]:0}function rk(e,t,r=!1){let{routesMeta:s}=e,o={},i="/",c=[];for(let d=0;d<s.length;++d){let h=s[d],f=d===s.length-1,p=i==="/"?t:t.slice(i.length)||"/",v=xh({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},p),x=h.route;if(!v&&f&&r&&!s[s.length-1].route.index&&(v=xh({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!v)return null;Object.assign(o,v.params),c.push({params:o,pathname:La([i,v.pathname]),pathnameBase:lk(La([i,v.pathnameBase])),route:x}),v.pathnameBase!=="/"&&(i=La([i,v.pathnameBase]))}return c}function xh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=nk(e.path,e.caseSensitive,e.end),o=t.match(r);if(!o)return null;let i=o[0],c=i.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:s.reduce((f,{paramName:p,isOptional:v},x)=>{if(p==="*"){let y=d[x]||"";c=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const w=d[x];return v&&!w?f[p]=void 0:f[p]=(w||"").replace(/%2F/g,"/"),f},{}),pathname:i,pathnameBase:c,pattern:e}}function nk(e,t=!1,r=!0){gs(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,h)=>(s.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(s.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),s]}function sk(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return gs(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Fa(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function ak(e,t="/"){let{pathname:r,search:s="",hash:o=""}=typeof e=="string"?Il(e):e;return{pathname:r?r.startsWith("/")?r:ik(r,t):t,search:ck(s),hash:dk(o)}}function ik(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function rp(e,t,r,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ok(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Fg(e){let t=ok(e);return t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase)}function Bg(e,t,r,s=!1){let o;typeof e=="string"?o=Il(e):(o={...e},lr(!o.pathname||!o.pathname.includes("?"),rp("?","pathname","search",o)),lr(!o.pathname||!o.pathname.includes("#"),rp("#","pathname","hash",o)),lr(!o.search||!o.search.includes("#"),rp("#","search","hash",o)));let i=e===""||o.pathname==="",c=i?"/":o.pathname,d;if(c==null)d=r;else{let v=t.length-1;if(!s&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),v-=1;o.pathname=x.join("/")}d=v>=0?t[v]:"/"}let h=ak(o,d),f=c&&c!=="/"&&c.endsWith("/"),p=(i||c===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}var La=e=>e.join("/").replace(/\/\/+/g,"/"),lk=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ck=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,dk=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function uk(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Ow=["POST","PUT","PATCH","DELETE"];new Set(Ow);var hk=["GET",...Ow];new Set(hk);var Tl=j.createContext(null);Tl.displayName="DataRouter";var Zh=j.createContext(null);Zh.displayName="DataRouterState";j.createContext(!1);var Pw=j.createContext({isTransitioning:!1});Pw.displayName="ViewTransition";var fk=j.createContext(new Map);fk.displayName="Fetchers";var mk=j.createContext(null);mk.displayName="Await";var qs=j.createContext(null);qs.displayName="Navigation";var md=j.createContext(null);md.displayName="Location";var xs=j.createContext({outlet:null,matches:[],isDataRoute:!1});xs.displayName="Route";var Ug=j.createContext(null);Ug.displayName="RouteError";function pk(e,{relative:t}={}){lr(Dl(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:s}=j.useContext(qs),{hash:o,pathname:i,search:c}=pd(e,{relative:t}),d=i;return r!=="/"&&(d=i==="/"?r:La([r,i])),s.createHref({pathname:d,search:c,hash:o})}function Dl(){return j.useContext(md)!=null}function vs(){return lr(Dl(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(md).location}var Mw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Lw(e){j.useContext(qs).static||j.useLayoutEffect(e)}function Kr(){let{isDataRoute:e}=j.useContext(xs);return e?Ik():gk()}function gk(){lr(Dl(),"useNavigate() may be used only in the context of a <Router> component.");let e=j.useContext(Tl),{basename:t,navigator:r}=j.useContext(qs),{matches:s}=j.useContext(xs),{pathname:o}=vs(),i=JSON.stringify(Fg(s)),c=j.useRef(!1);return Lw(()=>{c.current=!0}),j.useCallback((h,f={})=>{if(gs(c.current,Mw),!c.current)return;if(typeof h=="number"){r.go(h);return}let p=Bg(h,JSON.parse(i),o,f.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:La([t,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[t,r,i,o,e])}var xk=j.createContext(null);function vk(e){let t=j.useContext(xs).outlet;return t&&j.createElement(xk.Provider,{value:e},t)}function Xh(){let{matches:e}=j.useContext(xs),t=e[e.length-1];return t?t.params:{}}function pd(e,{relative:t}={}){let{matches:r}=j.useContext(xs),{pathname:s}=vs(),o=JSON.stringify(Fg(r));return j.useMemo(()=>Bg(e,JSON.parse(o),s,t==="path"),[e,o,s,t])}function yk(e,t){return $w(e,t)}function $w(e,t,r,s,o){lr(Dl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=j.useContext(qs),{matches:c}=j.useContext(xs),d=c[c.length-1],h=d?d.params:{},f=d?d.pathname:"/",p=d?d.pathnameBase:"/",v=d&&d.route;{let A=v&&v.path||"";Fw(f,!v||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let x=vs(),w;if(t){let A=typeof t=="string"?Il(t):t;lr(p==="/"||A.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${A.pathname}" was given in the \`location\` prop.`),w=A}else w=x;let y=w.pathname||"/",S=y;if(p!=="/"){let A=p.replace(/^\//,"").split("/");S="/"+y.replace(/^\//,"").split("/").slice(A.length).join("/")}let C=Tw(e,{pathname:S});gs(v||C!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),gs(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=Sk(C&&C.map(A=>Object.assign({},A,{params:Object.assign({},h,A.params),pathname:La([p,i.encodeLocation?i.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?p:La([p,i.encodeLocation?i.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),c,r,s,o);return t&&T?j.createElement(md.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},T):T}function bk(){let e=Ak(),t=uk(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:i},"ErrorBoundary")," or"," ",j.createElement("code",{style:i},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),r?j.createElement("pre",{style:o},r):null,c)}var wk=j.createElement(bk,null),jk=class extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?j.createElement(xs.Provider,{value:this.props.routeContext},j.createElement(Ug.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Nk({routeContext:e,match:t,children:r}){let s=j.useContext(Tl);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(xs.Provider,{value:e},r)}function Sk(e,t=[],r=null,s=null,o=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,c=r?.errors;if(c!=null){let f=i.findIndex(p=>p.route.id&&c?.[p.route.id]!==void 0);lr(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),i=i.slice(0,Math.min(i.length,f+1))}let d=!1,h=-1;if(r)for(let f=0;f<i.length;f++){let p=i[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=f),p.route.id){let{loaderData:v,errors:x}=r,w=p.route.loader&&!v.hasOwnProperty(p.route.id)&&(!x||x[p.route.id]===void 0);if(p.route.lazy||w){d=!0,h>=0?i=i.slice(0,h+1):i=[i[0]];break}}}return i.reduceRight((f,p,v)=>{let x,w=!1,y=null,S=null;r&&(x=c&&p.route.id?c[p.route.id]:void 0,y=p.route.errorElement||wk,d&&(h<0&&v===0?(Fw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,S=null):h===v&&(w=!0,S=p.route.hydrateFallbackElement||null)));let C=t.concat(i.slice(0,v+1)),T=()=>{let A;return x?A=y:w?A=S:p.route.Component?A=j.createElement(p.route.Component,null):p.route.element?A=p.route.element:A=f,j.createElement(Nk,{match:p,routeContext:{outlet:f,matches:C,isDataRoute:r!=null},children:A})};return r&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?j.createElement(jk,{location:r.location,revalidation:r.revalidation,component:y,error:x,children:T(),routeContext:{outlet:null,matches:C,isDataRoute:!0},unstable_onError:s}):T()},null)}function zg(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kk(e){let t=j.useContext(Tl);return lr(t,zg(e)),t}function _k(e){let t=j.useContext(Zh);return lr(t,zg(e)),t}function Ck(e){let t=j.useContext(xs);return lr(t,zg(e)),t}function qg(e){let t=Ck(e),r=t.matches[t.matches.length-1];return lr(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function Ek(){return qg("useRouteId")}function Ak(){let e=j.useContext(Ug),t=_k("useRouteError"),r=qg("useRouteError");return e!==void 0?e:t.errors?.[r]}function Ik(){let{router:e}=kk("useNavigate"),t=qg("useNavigate"),r=j.useRef(!1);return Lw(()=>{r.current=!0}),j.useCallback(async(o,i={})=>{gs(r.current,Mw),r.current&&(typeof o=="number"?e.navigate(o):await e.navigate(o,{fromRouteId:t,...i}))},[e,t])}var Yv={};function Fw(e,t,r){!t&&!Yv[e]&&(Yv[e]=!0,gs(!1,r))}j.memo(Tk);function Tk({routes:e,future:t,state:r,unstable_onError:s}){return $w(e,void 0,r,s,t)}function Zv({to:e,replace:t,state:r,relative:s}){lr(Dl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=j.useContext(qs);gs(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=j.useContext(xs),{pathname:c}=vs(),d=Kr(),h=Bg(e,Fg(i),c,s==="path"),f=JSON.stringify(h);return j.useEffect(()=>{d(JSON.parse(f),{replace:t,state:r,relative:s})},[d,f,s,t,r]),null}function Dk(e){return vk(e.context)}function Mt(e){lr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Rk({basename:e="/",children:t=null,location:r,navigationType:s="POP",navigator:o,static:i=!1}){lr(!Dl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=e.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:c,navigator:o,static:i,future:{}}),[c,o,i]);typeof r=="string"&&(r=Il(r));let{pathname:h="/",search:f="",hash:p="",state:v=null,key:x="default"}=r,w=j.useMemo(()=>{let y=Fa(h,c);return y==null?null:{location:{pathname:y,search:f,hash:p,state:v,key:x},navigationType:s}},[c,h,f,p,v,x,s]);return gs(w!=null,`<Router basename="${c}"> is not able to match the URL "${h}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:j.createElement(qs.Provider,{value:d},j.createElement(md.Provider,{children:t,value:w}))}function Ok({children:e,location:t}){return yk(Bp(e),t)}function Bp(e,t=[]){let r=[];return j.Children.forEach(e,(s,o)=>{if(!j.isValidElement(s))return;let i=[...t,o];if(s.type===j.Fragment){r.push.apply(r,Bp(s.props.children,i));return}lr(s.type===Mt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),lr(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=Bp(s.props.children,i)),r.push(c)}),r}var rh="get",nh="application/x-www-form-urlencoded";function ef(e){return e!=null&&typeof e.tagName=="string"}function Pk(e){return ef(e)&&e.tagName.toLowerCase()==="button"}function Mk(e){return ef(e)&&e.tagName.toLowerCase()==="form"}function Lk(e){return ef(e)&&e.tagName.toLowerCase()==="input"}function $k(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Fk(e,t){return e.button===0&&(!t||t==="_self")&&!$k(e)}function Up(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let s=e[r];return t.concat(Array.isArray(s)?s.map(o=>[r,o]):[[r,s]])},[]))}function Bk(e,t){let r=Up(e);return t&&t.forEach((s,o)=>{r.has(o)||t.getAll(o).forEach(i=>{r.append(o,i)})}),r}var Fu=null;function Uk(){if(Fu===null)try{new FormData(document.createElement("form"),0),Fu=!1}catch{Fu=!0}return Fu}var zk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function np(e){return e!=null&&!zk.has(e)?(gs(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${nh}"`),null):e}function qk(e,t){let r,s,o,i,c;if(Mk(e)){let d=e.getAttribute("action");s=d?Fa(d,t):null,r=e.getAttribute("method")||rh,o=np(e.getAttribute("enctype"))||nh,i=new FormData(e)}else if(Pk(e)||Lk(e)&&(e.type==="submit"||e.type==="image")){let d=e.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=e.getAttribute("formaction")||d.getAttribute("action");if(s=h?Fa(h,t):null,r=e.getAttribute("formmethod")||d.getAttribute("method")||rh,o=np(e.getAttribute("formenctype"))||np(d.getAttribute("enctype"))||nh,i=new FormData(d,e),!Uk()){let{name:f,type:p,value:v}=e;if(p==="image"){let x=f?`${f}.`:"";i.append(`${x}x`,"0"),i.append(`${x}y`,"0")}else f&&i.append(f,v)}}else{if(ef(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=rh,s=null,o=nh,c=e}return i&&o==="text/plain"&&(c=i,i=void 0),{action:s,method:r.toLowerCase(),encType:o,formData:i,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Gg(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Gk(e,t,r){let s=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return s.pathname==="/"?s.pathname=`_root.${r}`:t&&Fa(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function Vk(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Hk(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Wk(e,t,r){let s=await Promise.all(e.map(async o=>{let i=t.routes[o.route.id];if(i){let c=await Vk(i,r);return c.links?c.links():[]}return[]}));return Yk(s.flat(1).filter(Hk).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Xv(e,t,r,s,o,i){let c=(h,f)=>r[f]?h.route.id!==r[f].route.id:!0,d=(h,f)=>r[f].pathname!==h.pathname||r[f].route.path?.endsWith("*")&&r[f].params["*"]!==h.params["*"];return i==="assets"?t.filter((h,f)=>c(h,f)||d(h,f)):i==="data"?t.filter((h,f)=>{let p=s.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(c(h,f)||d(h,f))return!0;if(h.route.shouldRevalidate){let v=h.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function Kk(e,t,{includeHydrateFallback:r}={}){return Qk(e.map(s=>{let o=t.routes[s.route.id];if(!o)return[];let i=[o.module];return o.clientActionModule&&(i=i.concat(o.clientActionModule)),o.clientLoaderModule&&(i=i.concat(o.clientLoaderModule)),r&&o.hydrateFallbackModule&&(i=i.concat(o.hydrateFallbackModule)),o.imports&&(i=i.concat(o.imports)),i}).flat(1))}function Qk(e){return[...new Set(e)]}function Jk(e){let t={},r=Object.keys(e).sort();for(let s of r)t[s]=e[s];return t}function Yk(e,t){let r=new Set;return new Set(t),e.reduce((s,o)=>{let i=JSON.stringify(Jk(o));return r.has(i)||(r.add(i),s.push({key:i,link:o})),s},[])}function Bw(){let e=j.useContext(Tl);return Gg(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Zk(){let e=j.useContext(Zh);return Gg(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Vg=j.createContext(void 0);Vg.displayName="FrameworkContext";function Uw(){let e=j.useContext(Vg);return Gg(e,"You must render this element inside a <HydratedRouter> element"),e}function Xk(e,t){let r=j.useContext(Vg),[s,o]=j.useState(!1),[i,c]=j.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:f,onMouseLeave:p,onTouchStart:v}=t,x=j.useRef(null);j.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let S=T=>{T.forEach(A=>{c(A.isIntersecting)})},C=new IntersectionObserver(S,{threshold:.5});return x.current&&C.observe(x.current),()=>{C.disconnect()}}},[e]),j.useEffect(()=>{if(s){let S=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(S)}}},[s]);let w=()=>{o(!0)},y=()=>{o(!1),c(!1)};return r?e!=="intent"?[i,x,{}]:[i,x,{onFocus:Ac(d,w),onBlur:Ac(h,y),onMouseEnter:Ac(f,w),onMouseLeave:Ac(p,y),onTouchStart:Ac(v,w)}]:[!1,x,{}]}function Ac(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function e_({page:e,...t}){let{router:r}=Bw(),s=j.useMemo(()=>Tw(r.routes,e,r.basename),[r.routes,e,r.basename]);return s?j.createElement(r_,{page:e,matches:s,...t}):null}function t_(e){let{manifest:t,routeModules:r}=Uw(),[s,o]=j.useState([]);return j.useEffect(()=>{let i=!1;return Wk(e,t,r).then(c=>{i||o(c)}),()=>{i=!0}},[e,t,r]),s}function r_({page:e,matches:t,...r}){let s=vs(),{manifest:o,routeModules:i}=Uw(),{basename:c}=Bw(),{loaderData:d,matches:h}=Zk(),f=j.useMemo(()=>Xv(e,t,h,o,s,"data"),[e,t,h,o,s]),p=j.useMemo(()=>Xv(e,t,h,o,s,"assets"),[e,t,h,o,s]),v=j.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let y=new Set,S=!1;if(t.forEach(T=>{let A=o.routes[T.route.id];!A||!A.hasLoader||(!f.some(I=>I.route.id===T.route.id)&&T.route.id in d&&i[T.route.id]?.shouldRevalidate||A.hasClientLoader?S=!0:y.add(T.route.id))}),y.size===0)return[];let C=Gk(e,c,"data");return S&&y.size>0&&C.searchParams.set("_routes",t.filter(T=>y.has(T.route.id)).map(T=>T.route.id).join(",")),[C.pathname+C.search]},[c,d,s,o,f,t,e,i]),x=j.useMemo(()=>Kk(p,o),[p,o]),w=t_(p);return j.createElement(j.Fragment,null,v.map(y=>j.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...r})),x.map(y=>j.createElement("link",{key:y,rel:"modulepreload",href:y,...r})),w.map(({key:y,link:S})=>j.createElement("link",{key:y,nonce:r.nonce,...S})))}function n_(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var zw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{zw&&(window.__reactRouterVersion="7.8.2")}catch{}function s_({basename:e,children:t,window:r}){let s=j.useRef();s.current==null&&(s.current=zS({window:r,v5Compat:!0}));let o=s.current,[i,c]=j.useState({action:o.action,location:o.location}),d=j.useCallback(h=>{j.startTransition(()=>c(h))},[c]);return j.useLayoutEffect(()=>o.listen(d),[o,d]),j.createElement(Rk,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:o})}var qw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Os=j.forwardRef(function({onClick:t,discover:r="render",prefetch:s="none",relative:o,reloadDocument:i,replace:c,state:d,target:h,to:f,preventScrollReset:p,viewTransition:v,...x},w){let{basename:y}=j.useContext(qs),S=typeof f=="string"&&qw.test(f),C,T=!1;if(typeof f=="string"&&S&&(C=f,zw))try{let ne=new URL(window.location.href),Ee=f.startsWith("//")?new URL(ne.protocol+f):new URL(f),Se=Fa(Ee.pathname,y);Ee.origin===ne.origin&&Se!=null?f=Se+Ee.search+Ee.hash:T=!0}catch{gs(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let A=pk(f,{relative:o}),[I,O,P]=Xk(s,x),$=o_(f,{replace:c,state:d,target:h,preventScrollReset:p,relative:o,viewTransition:v});function F(ne){t&&t(ne),ne.defaultPrevented||$(ne)}let te=j.createElement("a",{...x,...P,href:C||A,onClick:T||i?t:F,ref:n_(w,O),target:h,"data-discover":!S&&r==="render"?"true":void 0});return I&&!S?j.createElement(j.Fragment,null,te,j.createElement(e_,{page:A})):te});Os.displayName="Link";var zp=j.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:s="",end:o=!1,style:i,to:c,viewTransition:d,children:h,...f},p){let v=pd(c,{relative:f.relative}),x=vs(),w=j.useContext(Zh),{navigator:y,basename:S}=j.useContext(qs),C=w!=null&&h_(v)&&d===!0,T=y.encodeLocation?y.encodeLocation(v).pathname:v.pathname,A=x.pathname,I=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;r||(A=A.toLowerCase(),I=I?I.toLowerCase():null,T=T.toLowerCase()),I&&S&&(I=Fa(I,S)||I);const O=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let P=A===T||!o&&A.startsWith(T)&&A.charAt(O)==="/",$=I!=null&&(I===T||!o&&I.startsWith(T)&&I.charAt(T.length)==="/"),F={isActive:P,isPending:$,isTransitioning:C},te=P?t:void 0,ne;typeof s=="function"?ne=s(F):ne=[s,P?"active":null,$?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let Ee=typeof i=="function"?i(F):i;return j.createElement(Os,{...f,"aria-current":te,className:ne,ref:p,style:Ee,to:c,viewTransition:d},typeof h=="function"?h(F):h)});zp.displayName="NavLink";var a_=j.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:s,replace:o,state:i,method:c=rh,action:d,onSubmit:h,relative:f,preventScrollReset:p,viewTransition:v,...x},w)=>{let y=d_(),S=u_(d,{relative:f}),C=c.toLowerCase()==="get"?"get":"post",T=typeof d=="string"&&qw.test(d),A=I=>{if(h&&h(I),I.defaultPrevented)return;I.preventDefault();let O=I.nativeEvent.submitter,P=O?.getAttribute("formmethod")||c;y(O||I.currentTarget,{fetcherKey:t,method:P,navigate:r,replace:o,state:i,relative:f,preventScrollReset:p,viewTransition:v})};return j.createElement("form",{ref:w,method:C,action:S,onSubmit:s?h:A,...x,"data-discover":!T&&e==="render"?"true":void 0})});a_.displayName="Form";function i_(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Gw(e){let t=j.useContext(Tl);return lr(t,i_(e)),t}function o_(e,{target:t,replace:r,state:s,preventScrollReset:o,relative:i,viewTransition:c}={}){let d=Kr(),h=vs(),f=pd(e,{relative:i});return j.useCallback(p=>{if(Fk(p,t)){p.preventDefault();let v=r!==void 0?r:Kc(h)===Kc(f);d(e,{replace:v,state:s,preventScrollReset:o,relative:i,viewTransition:c})}},[h,d,f,r,s,t,e,o,i,c])}function tf(e){gs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=j.useRef(Up(e)),r=j.useRef(!1),s=vs(),o=j.useMemo(()=>Bk(s.search,r.current?null:t.current),[s.search]),i=Kr(),c=j.useCallback((d,h)=>{const f=Up(typeof d=="function"?d(new URLSearchParams(o)):d);r.current=!0,i("?"+f,h)},[i,o]);return[o,c]}var l_=0,c_=()=>`__${String(++l_)}__`;function d_(){let{router:e}=Gw("useSubmit"),{basename:t}=j.useContext(qs),r=Ek();return j.useCallback(async(s,o={})=>{let{action:i,method:c,encType:d,formData:h,body:f}=qk(s,t);if(o.navigate===!1){let p=o.fetcherKey||c_();await e.fetch(p,r,o.action||i,{preventScrollReset:o.preventScrollReset,formData:h,body:f,formMethod:o.method||c,formEncType:o.encType||d,flushSync:o.flushSync})}else await e.navigate(o.action||i,{preventScrollReset:o.preventScrollReset,formData:h,body:f,formMethod:o.method||c,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[e,t,r])}function u_(e,{relative:t}={}){let{basename:r}=j.useContext(qs),s=j.useContext(xs);lr(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),i={...pd(e||".",{relative:t})},c=vs();if(e==null){i.search=c.search;let d=new URLSearchParams(i.search),h=d.getAll("index");if(h.some(p=>p==="")){d.delete("index"),h.filter(v=>v).forEach(v=>d.append("index",v));let p=d.toString();i.search=p?`?${p}`:""}}return(!e||e===".")&&o.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:La([r,i.pathname])),Kc(i)}function h_(e,{relative:t}={}){let r=j.useContext(Pw);lr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Gw("useViewTransitionState"),o=pd(e,{relative:t});if(!r.isTransitioning)return!1;let i=Fa(r.currentLocation.pathname,s)||r.currentLocation.pathname,c=Fa(r.nextLocation.pathname,s)||r.nextLocation.pathname;return xh(o.pathname,c)!=null||xh(o.pathname,i)!=null}var Pa=Iw();const f_=Al(Pa),ey=e=>{let t;const r=new Set,s=(f,p)=>{const v=typeof f=="function"?f(t):f;if(!Object.is(v,t)){const x=t;t=p??(typeof v!="object"||v===null)?v:Object.assign({},t,v),r.forEach(w=>w(t,x))}},o=()=>t,d={setState:s,getState:o,getInitialState:()=>h,subscribe:f=>(r.add(f),()=>r.delete(f))},h=t=e(s,o,d);return d},m_=(e=>e?ey(e):ey),p_=e=>e;function g_(e,t=p_){const r=pt.useSyncExternalStore(e.subscribe,pt.useCallback(()=>t(e.getState()),[e,t]),pt.useCallback(()=>t(e.getInitialState()),[e,t]));return pt.useDebugValue(r),r}const x_=e=>{const t=m_(e),r=s=>g_(t,s);return Object.assign(r,t),r},v_=(e=>x_);function y_(e,t){let r;try{r=e()}catch{return}return{getItem:o=>{var i;const c=h=>h===null?null:JSON.parse(h,void 0),d=(i=r.getItem(o))!=null?i:null;return d instanceof Promise?d.then(c):c(d)},setItem:(o,i)=>r.setItem(o,JSON.stringify(i,void 0)),removeItem:o=>r.removeItem(o)}}const qp=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(s){return qp(s)(r)},catch(s){return this}}}catch(r){return{then(s){return this},catch(s){return qp(s)(r)}}}},b_=(e,t)=>(r,s,o)=>{let i={storage:y_(()=>localStorage),partialize:S=>S,version:0,merge:(S,C)=>({...C,...S}),...t},c=!1;const d=new Set,h=new Set;let f=i.storage;if(!f)return e((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...S)},s,o);const p=()=>{const S=i.partialize({...s()});return f.setItem(i.name,{state:S,version:i.version})},v=o.setState;o.setState=(S,C)=>(v(S,C),p());const x=e((...S)=>(r(...S),p()),s,o);o.getInitialState=()=>x;let w;const y=()=>{var S,C;if(!f)return;c=!1,d.forEach(A=>{var I;return A((I=s())!=null?I:x)});const T=((C=i.onRehydrateStorage)==null?void 0:C.call(i,(S=s())!=null?S:x))||void 0;return qp(f.getItem.bind(f))(i.name).then(A=>{if(A)if(typeof A.version=="number"&&A.version!==i.version){if(i.migrate){const I=i.migrate(A.state,A.version);return I instanceof Promise?I.then(O=>[!0,O]):[!0,I]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,A.state];return[!1,void 0]}).then(A=>{var I;const[O,P]=A;if(w=i.merge(P,(I=s())!=null?I:x),r(w,!0),O)return p()}).then(()=>{T?.(w,void 0),w=s(),c=!0,h.forEach(A=>A(w))}).catch(A=>{T?.(void 0,A)})};return o.persist={setOptions:S=>{i={...i,...S},S.storage&&(f=S.storage)},clearStorage:()=>{f?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>y(),hasHydrated:()=>c,onHydrate:S=>(d.add(S),()=>{d.delete(S)}),onFinishHydration:S=>(h.add(S),()=>{h.delete(S)})},i.skipHydration||y(),w||x},w_=b_;var Gp=function(e,t){return Gp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=s[o])},Gp(e,t)};function Vw(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Gp(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var vh=function(){return vh=Object.assign||function(t){for(var r,s=1,o=arguments.length;s<o;s++){r=arguments[s];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},vh.apply(this,arguments)};function Rl(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(r[s[o]]=e[s[o]]);return r}function Hw(e,t,r,s){var o=arguments.length,i=o<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,r):s,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,s);else for(var d=e.length-1;d>=0;d--)(c=e[d])&&(i=(o<3?c(i):o>3?c(t,r,i):c(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i}function Ww(e,t){return function(r,s){t(r,s,e)}}function Kw(e,t,r,s,o,i){function c(T){if(T!==void 0&&typeof T!="function")throw new TypeError("Function expected");return T}for(var d=s.kind,h=d==="getter"?"get":d==="setter"?"set":"value",f=!t&&e?s.static?e:e.prototype:null,p=t||(f?Object.getOwnPropertyDescriptor(f,s.name):{}),v,x=!1,w=r.length-1;w>=0;w--){var y={};for(var S in s)y[S]=S==="access"?{}:s[S];for(var S in s.access)y.access[S]=s.access[S];y.addInitializer=function(T){if(x)throw new TypeError("Cannot add initializers after decoration has completed");i.push(c(T||null))};var C=(0,r[w])(d==="accessor"?{get:p.get,set:p.set}:p[h],y);if(d==="accessor"){if(C===void 0)continue;if(C===null||typeof C!="object")throw new TypeError("Object expected");(v=c(C.get))&&(p.get=v),(v=c(C.set))&&(p.set=v),(v=c(C.init))&&o.unshift(v)}else(v=c(C))&&(d==="field"?o.unshift(v):p[h]=v)}f&&Object.defineProperty(f,s.name,p),x=!0}function Qw(e,t,r){for(var s=arguments.length>2,o=0;o<t.length;o++)r=s?t[o].call(e,r):t[o].call(e);return s?r:void 0}function Jw(e){return typeof e=="symbol"?e:"".concat(e)}function Yw(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function Zw(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function dt(e,t,r,s){function o(i){return i instanceof r?i:new r(function(c){c(i)})}return new(r||(r=Promise))(function(i,c){function d(p){try{f(s.next(p))}catch(v){c(v)}}function h(p){try{f(s.throw(p))}catch(v){c(v)}}function f(p){p.done?i(p.value):o(p.value).then(d,h)}f((s=s.apply(e,t||[])).next())})}function Xw(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},s,o,i,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=d(0),c.throw=d(1),c.return=d(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(f){return function(p){return h([f,p])}}function h(f){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,f[0]&&(r=0)),r;)try{if(s=1,o&&(i=f[0]&2?o.return:f[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,f[1])).done)return i;switch(o=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,o=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){r.label=f[1];break}if(f[0]===6&&r.label<i[1]){r.label=i[1],i=f;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(f);break}i[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(e,r)}catch(p){f=[6,p],o=0}finally{s=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var rf=Object.create?(function(e,t,r,s){s===void 0&&(s=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,o)}):(function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]});function e1(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&rf(t,e,r)}function yh(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],s=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hg(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var s=r.call(e),o,i=[],c;try{for(;(t===void 0||t-- >0)&&!(o=s.next()).done;)i.push(o.value)}catch(d){c={error:d}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(c)throw c.error}}return i}function t1(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Hg(arguments[t]));return e}function r1(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var s=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],c=0,d=i.length;c<d;c++,o++)s[o]=i[c];return s}function n1(e,t,r){if(r||arguments.length===2)for(var s=0,o=t.length,i;s<o;s++)(i||!(s in t))&&(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}function wl(e){return this instanceof wl?(this.v=e,this):new wl(e)}function s1(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r.apply(e,t||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(w){return function(y){return Promise.resolve(y).then(w,v)}}function d(w,y){s[w]&&(o[w]=function(S){return new Promise(function(C,T){i.push([w,S,C,T])>1||h(w,S)})},y&&(o[w]=y(o[w])))}function h(w,y){try{f(s[w](y))}catch(S){x(i[0][3],S)}}function f(w){w.value instanceof wl?Promise.resolve(w.value.v).then(p,v):x(i[0][2],w)}function p(w){h("next",w)}function v(w){h("throw",w)}function x(w,y){w(y),i.shift(),i.length&&h(i[0][0],i[0][1])}}function a1(e){var t,r;return t={},s("next"),s("throw",function(o){throw o}),s("return"),t[Symbol.iterator]=function(){return this},t;function s(o,i){t[o]=e[o]?function(c){return(r=!r)?{value:wl(e[o](c)),done:!1}:i?i(c):c}:i}}function i1(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof yh=="function"?yh(e):e[Symbol.iterator](),r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r);function s(i){r[i]=e[i]&&function(c){return new Promise(function(d,h){c=e[i](c),o(d,h,c.done,c.value)})}}function o(i,c,d,h){Promise.resolve(h).then(function(f){i({value:f,done:d})},c)}}function o1(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var j_=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},Vp=function(e){return Vp=Object.getOwnPropertyNames||function(t){var r=[];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[r.length]=s);return r},Vp(e)};function l1(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=Vp(e),s=0;s<r.length;s++)r[s]!=="default"&&rf(t,e,r[s]);return j_(t,e),t}function c1(e){return e&&e.__esModule?e:{default:e}}function d1(e,t,r,s){if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?s:r==="a"?s.call(e):s?s.value:t.get(e)}function u1(e,t,r,s,o){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r}function h1(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function f1(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var s,o;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=t[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=t[Symbol.dispose],r&&(o=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");o&&(s=function(){try{o.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:s,async:r})}else r&&e.stack.push({async:!0});return t}var N_=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var s=new Error(r);return s.name="SuppressedError",s.error=e,s.suppressed=t,s};function m1(e){function t(i){e.error=e.hasError?new N_(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var r,s=0;function o(){for(;r=e.stack.pop();)try{if(!r.async&&s===1)return s=0,e.stack.push(r),Promise.resolve().then(o);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return s|=2,Promise.resolve(i).then(o,function(c){return t(c),o()})}else s|=1}catch(c){t(c)}if(s===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return o()}function p1(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,s,o,i,c){return s?t?".jsx":".js":o&&(!i||!c)?r:o+i+"."+c.toLowerCase()+"js"}):e}const S_={__extends:Vw,__assign:vh,__rest:Rl,__decorate:Hw,__param:Ww,__esDecorate:Kw,__runInitializers:Qw,__propKey:Jw,__setFunctionName:Yw,__metadata:Zw,__awaiter:dt,__generator:Xw,__createBinding:rf,__exportStar:e1,__values:yh,__read:Hg,__spread:t1,__spreadArrays:r1,__spreadArray:n1,__await:wl,__asyncGenerator:s1,__asyncDelegator:a1,__asyncValues:i1,__makeTemplateObject:o1,__importStar:l1,__importDefault:c1,__classPrivateFieldGet:d1,__classPrivateFieldSet:u1,__classPrivateFieldIn:h1,__addDisposableResource:f1,__disposeResources:m1,__rewriteRelativeImportExtension:p1},k_=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:f1,get __assign(){return vh},__asyncDelegator:a1,__asyncGenerator:s1,__asyncValues:i1,__await:wl,__awaiter:dt,__classPrivateFieldGet:d1,__classPrivateFieldIn:h1,__classPrivateFieldSet:u1,__createBinding:rf,__decorate:Hw,__disposeResources:m1,__esDecorate:Kw,__exportStar:e1,__extends:Vw,__generator:Xw,__importDefault:c1,__importStar:l1,__makeTemplateObject:o1,__metadata:Zw,__param:Ww,__propKey:Jw,__read:Hg,__rest:Rl,__rewriteRelativeImportExtension:p1,__runInitializers:Qw,__setFunctionName:Yw,__spread:t1,__spreadArray:n1,__spreadArrays:r1,__values:yh,default:S_},Symbol.toStringTag,{value:"Module"})),g1="2.87.2",hl=30*1e3,Hp=3,sp=Hp*hl,__="http://localhost:9999",C_="supabase.auth.token",E_={"X-Client-Info":`gotrue-js/${g1}`},Wp="X-Supabase-Api-Version",x1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},A_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,I_=600*1e3;class jl extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function mt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class v1 extends jl{constructor(t,r,s){super(t,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function y1(e){return mt(e)&&e.name==="AuthApiError"}class vi extends jl{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class ha extends jl{constructor(t,r,s,o){super(t,s,o),this.name=r,this.status=s}}class On extends ha{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function b1(e){return mt(e)&&e.name==="AuthSessionMissingError"}class lo extends ha{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Lc extends ha{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class $c extends ha{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function w1(e){return mt(e)&&e.name==="AuthImplicitGrantRedirectError"}class Kp extends ha{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class j1 extends ha{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}function T_(e){return mt(e)&&e.name==="AuthPKCECodeVerifierMissingError"}class bh extends ha{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function sh(e){return mt(e)&&e.name==="AuthRetryableFetchError"}class Qp extends ha{constructor(t,r,s){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}function D_(e){return mt(e)&&e.name==="AuthWeakPasswordError"}class wh extends ha{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const jh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ty=` 	
\r=`.split(""),R_=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<ty.length;t+=1)e[ty[t].charCodeAt(0)]=-2;for(let t=0;t<jh.length;t+=1)e[jh[t].charCodeAt(0)]=t;return e})();function ry(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(jh[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(jh[s]),t.queuedBits-=6}}function N1(e,t,r){const s=R_[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function ny(e){const t=[],r=c=>{t.push(String.fromCodePoint(c))},s={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},i=c=>{M_(c,s,r)};for(let c=0;c<e.length;c+=1)N1(e.charCodeAt(c),o,i);return t.join("")}function O_(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function P_(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const o=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|o)+65536,r+=1}O_(s,t)}}function M_(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if((e>>7-s&1)===0){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function gl(e){const t=[],r={queue:0,queuedBits:0},s=o=>{t.push(o)};for(let o=0;o<e.length;o+=1)N1(e.charCodeAt(o),r,s);return new Uint8Array(t)}function L_(e){const t=[];return P_(e,r=>t.push(r)),new Uint8Array(t)}function po(e){const t=[],r={queue:0,queuedBits:0},s=o=>{t.push(o)};return e.forEach(o=>ry(o,r,s)),ry(null,r,s),t.join("")}function $_(e){return Math.round(Date.now()/1e3)+e}function F_(){return Symbol("auth-callback")}const nn=()=>typeof window<"u"&&typeof document<"u",ao={tested:!1,writable:!1},S1=()=>{if(!nn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ao.tested)return ao.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ao.tested=!0,ao.writable=!0}catch{ao.tested=!0,ao.writable=!1}return ao.writable};function B_(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((o,i)=>{t[i]=o})}catch{}return r.searchParams.forEach((s,o)=>{t[o]=s}),t}const k1=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),U_=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",fl=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},io=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},rn=async(e,t)=>{await e.removeItem(t)};class nf{constructor(){this.promise=new nf.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}nf.promiseConstructor=Promise;function ap(e){const t=e.split(".");if(t.length!==3)throw new wh("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!A_.test(t[s]))throw new wh("JWT not in base64url format");return{header:JSON.parse(ny(t[0])),payload:JSON.parse(ny(t[1])),signature:gl(t[2]),raw:{header:t[0],payload:t[1]}}}async function z_(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function q_(e,t){return new Promise((s,o)=>{(async()=>{for(let i=0;i<1/0;i++)try{const c=await e(i);if(!t(i,null,c)){s(c);return}}catch(c){if(!t(i,c)){o(c);return}}})()})}function G_(e){return("0"+e.toString(16)).substr(-2)}function V_(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let o="";for(let i=0;i<56;i++)o+=r.charAt(Math.floor(Math.random()*s));return o}return crypto.getRandomValues(t),Array.from(t,G_).join("")}async function H_(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),o=new Uint8Array(s);return Array.from(o).map(i=>String.fromCharCode(i)).join("")}async function W_(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await H_(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function al(e,t,r=!1){const s=V_();let o=s;r&&(o+="/PASSWORD_RECOVERY"),await fl(e,`${t}-code-verifier`,o);const i=await W_(s);return[i,s===i?"plain":"s256"]}const K_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Q_(e){const t=e.headers.get(Wp);if(!t||!t.match(K_))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function J_(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Y_(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Z_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function il(e){if(!Z_.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ip(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function X_(e,t){return new Proxy(e,{get:(r,s,o)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const i=s.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,s,o)}return!t.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,s,o)}})}function sy(e){return JSON.parse(JSON.stringify(e))}const co=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),eC=[502,503,504];async function ay(e){var t;if(!U_(e))throw new bh(co(e),0);if(eC.includes(e.status))throw new bh(co(e),e.status);let r;try{r=await e.json()}catch(i){throw new vi(co(i),i)}let s;const o=Q_(e);if(o&&o.getTime()>=x1["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new Qp(co(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new On}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,c)=>i&&typeof c=="string",!0))throw new Qp(co(r),e.status,r.weak_password.reasons);throw new v1(co(r),e.status||500,s)}const tC=(e,t,r,s)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),o.body=JSON.stringify(s),Object.assign(Object.assign({},o),r))};async function St(e,t,r,s){var o;const i=Object.assign({},s?.headers);i[Wp]||(i[Wp]=x1["2024-01-01"].name),s?.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const c=(o=s?.query)!==null&&o!==void 0?o:{};s?.redirectTo&&(c.redirect_to=s.redirectTo);const d=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",h=await rC(e,t,r+d,{headers:i,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(h):{data:Object.assign({},h),error:null}}async function rC(e,t,r,s,o,i){const c=tC(t,s,o,i);let d;try{d=await e(r,Object.assign({},c))}catch(h){throw console.error(h),new bh(co(h),0)}if(d.ok||await ay(d),s?.noResolveJson)return d;try{return await d.json()}catch(h){await ay(h)}}function Ts(e){var t;let r=null;aC(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=$_(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:s},error:null}}function iy(e){const t=Ts(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function yi(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function nC(e){return{data:e,error:null}}function sC(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:o,verification_type:i}=e,c=Rl(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:t,email_otp:r,hashed_token:s,redirect_to:o,verification_type:i},h=Object.assign({},c);return{data:{properties:d,user:h},error:null}}function oy(e){return e}function aC(e){return e.access_token&&e.refresh_token&&e.expires_in}const ah=["global","local","others"];class Wg{constructor({url:t="",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=k1(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=ah[0]){if(ah.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ah.join(", ")}`);try{return await St(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(mt(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await St(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:yi})}catch(s){if(mt(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=Rl(t,["options"]),o=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(o.new_email=s?.newEmail,delete o.newEmail),await St(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:sC,redirectTo:r?.redirectTo})}catch(r){if(mt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await St(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:yi})}catch(r){if(mt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,o,i,c,d,h;try{const f={nextPage:null,lastPage:0,total:0},p=await St(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&i!==void 0?i:""},xform:oy});if(p.error)throw p.error;const v=await p.json(),x=(c=p.headers.get("x-total-count"))!==null&&c!==void 0?c:0,w=(h=(d=p.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return w.length>0&&(w.forEach(y=>{const S=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(y.split(";")[1].split("=")[1]);f[`${C}Page`]=S}),f.total=parseInt(x)),{data:Object.assign(Object.assign({},v),f),error:null}}catch(f){if(mt(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){il(t);try{return await St(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:yi})}catch(r){if(mt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){il(t);try{return await St(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:yi})}catch(s){if(mt(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){il(t);try{return await St(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:yi})}catch(s){if(mt(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){il(t.userId);try{const{data:r,error:s}=await St(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:r,error:s}}catch(r){if(mt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){il(t.userId),il(t.id);try{return{data:await St(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(mt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,s,o,i,c,d,h;try{const f={nextPage:null,lastPage:0,total:0},p=await St(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&i!==void 0?i:""},xform:oy});if(p.error)throw p.error;const v=await p.json(),x=(c=p.headers.get("x-total-count"))!==null&&c!==void 0?c:0,w=(h=(d=p.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return w.length>0&&(w.forEach(y=>{const S=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(y.split(";")[1].split("=")[1]);f[`${C}Page`]=S}),f.total=parseInt(x)),{data:Object.assign(Object.assign({},v),f),error:null}}catch(f){if(mt(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(t){try{return await St(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(mt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await St(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(mt(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await St(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(mt(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(t){try{return await St(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(mt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await St(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(mt(r))return{data:null,error:r};throw r}}}function ly(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const uo={debug:!!(globalThis&&S1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Kg extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class _1 extends Kg{}class iC extends Kg{}async function C1(e,t,r){uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),uo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async o=>{if(o){uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await r()}finally{uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(t===0)throw uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new _1(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(uo.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}const cy={};async function oC(e,t,r){var s;const o=(s=cy[e])!==null&&s!==void 0?s:Promise.resolve(),i=Promise.race([o.catch(()=>null),t>=0?new Promise((c,d)=>{setTimeout(()=>{d(new iC(`Acquiring process lock with name "${e}" timed out`))},t)}):null].filter(c=>c)).catch(c=>{if(c&&c.isAcquireTimeout)throw c;return null}).then(async()=>await r());return cy[e]=i.catch(async c=>{if(c&&c.isAcquireTimeout)return await o,null;throw c}),await i}function lC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function E1(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function cC(e){return parseInt(e,16)}function dC(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,s=>s.toString(16).padStart(2,"0")).join("")}function uC(e){var t;const{chainId:r,domain:s,expirationTime:o,issuedAt:i=new Date,nonce:c,notBefore:d,requestId:h,resources:f,scheme:p,uri:v,version:x}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const w=E1(e.address),y=p?`${p}://${s}`:s,S=e.statement?`${e.statement}
`:"",C=`${y} wants you to sign in with your Ethereum account:
${w}

${S}`;let T=`URI: ${v}
Version: ${x}
Chain ID: ${r}${c?`
Nonce: ${c}`:""}
Issued At: ${i.toISOString()}`;if(o&&(T+=`
Expiration Time: ${o.toISOString()}`),d&&(T+=`
Not Before: ${d.toISOString()}`),h&&(T+=`
Request ID: ${h}`),f){let A=`
Resources:`;for(const I of f){if(!I||typeof I!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${I}`);A+=`
- ${I}`}T+=A}return`${C}
${T}`}class Nr extends Error{constructor({message:t,code:r,cause:s,name:o}){var i;super(t,{cause:s}),this.__isWebAuthnError=!0,this.name=(i=o??(s instanceof Error?s.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Nh extends Nr{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function hC({error:e,options:t}){var r,s,o;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Nr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Nr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Nr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((o=i.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Nr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Nr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Nr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new Nr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Nr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const c=window.location.hostname;if(A1(c)){if(i.rp.id!==c)return new Nr({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Nr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Nr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Nr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Nr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function fC({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Nr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Nr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(A1(s)){if(r.rpId!==s)return new Nr({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Nr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Nr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Nr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class mC{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const pC=new mC;function gC(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:s}=e,o=Rl(e,["challenge","user","excludeCredentials"]),i=gl(t).buffer,c=Object.assign(Object.assign({},r),{id:gl(r.id).buffer}),d=Object.assign(Object.assign({},o),{challenge:i,user:c});if(s&&s.length>0){d.excludeCredentials=new Array(s.length);for(let h=0;h<s.length;h++){const f=s[h];d.excludeCredentials[h]=Object.assign(Object.assign({},f),{id:gl(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return d}function xC(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,s=Rl(e,["challenge","allowCredentials"]),o=gl(t).buffer,i=Object.assign(Object.assign({},s),{challenge:o});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const d=r[c];i.allowCredentials[c]=Object.assign(Object.assign({},d),{id:gl(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return i}function vC(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:po(new Uint8Array(e.response.attestationObject)),clientDataJSON:po(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function yC(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,s=e.getClientExtensionResults(),o=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:po(new Uint8Array(o.authenticatorData)),clientDataJSON:po(new Uint8Array(o.clientDataJSON)),signature:po(new Uint8Array(o.signature)),userHandle:o.userHandle?po(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function A1(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function dy(){var e,t;return!!(nn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function bC(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Nh("Browser returned unexpected credential type",t)}:{data:null,error:new Nh("Empty credential response",t)}}catch(t){return{data:null,error:hC({error:t,options:e})}}}async function wC(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Nh("Browser returned unexpected credential type",t)}:{data:null,error:new Nh("Empty credential response",t)}}catch(t){return{data:null,error:fC({error:t,options:e})}}}const jC={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},NC={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Sh(...e){const t=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),r=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),s={};for(const o of e)if(o)for(const i in o){const c=o[i];if(c!==void 0)if(Array.isArray(c))s[i]=c;else if(r(c))s[i]=c;else if(t(c)){const d=s[i];t(d)?s[i]=Sh(d,c):s[i]=Sh(c)}else s[i]=c}return s}function SC(e,t){return Sh(jC,e,t||{})}function kC(e,t){return Sh(NC,e,t||{})}class _C{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:s,signal:o},i){try{const{data:c,error:d}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!c)return{data:null,error:d};const h=o??pC.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:f}=c.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${s}`),f.displayName||(f.displayName=f.name)}switch(c.webauthn.type){case"create":{const f=SC(c.webauthn.credential_options.publicKey,i?.create),{data:p,error:v}=await bC({publicKey:f,signal:h});return p?{data:{factorId:t,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:p}},error:null}:{data:null,error:v}}case"request":{const f=kC(c.webauthn.credential_options.publicKey,i?.request),{data:p,error:v}=await wC(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:f,signal:h}));return p?{data:{factorId:t,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:p}},error:null}:{data:null,error:v}}}}catch(c){return mt(c)?{data:null,error:c}:{data:null,error:new vi("Unexpected error in challenge",c)}}}async _verify({challengeId:t,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:s})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},i){if(!r)return{data:null,error:new jl("rpId is required for WebAuthn authentication")};try{if(!dy())return{data:null,error:new vi("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:s},signal:o},{request:i});if(!c)return{data:null,error:d};const{webauthn:h}=c;return this._verify({factorId:t,challengeId:c.challengeId,webauthn:{type:h.type,rpId:r,rpOrigins:s,credential_response:h.credential_response}})}catch(c){return mt(c)?{data:null,error:c}:{data:null,error:new vi("Unexpected error in authenticate",c)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},i){if(!r)return{data:null,error:new jl("rpId is required for WebAuthn registration")};try{if(!dy())return{data:null,error:new vi("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this._enroll({friendlyName:t});if(!c)return await this.client.mfa.listFactors().then(p=>{var v;return(v=p.data)===null||v===void 0?void 0:v.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===t&&x.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p?.id}):void 0),{data:null,error:d};const{data:h,error:f}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:o},{create:i});return h?this._verify({factorId:c.id,challengeId:h.challengeId,webauthn:{rpId:r,rpOrigins:s,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:f}}catch(c){return mt(c)?{data:null,error:c}:{data:null,error:new vi("Unexpected error in register",c)}}}}lC();const CC={url:__,storageKey:C_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:E_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function uy(e,t,r){return await r()}const ol={};class Nl{get jwks(){var t,r;return(r=(t=ol[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){ol[this.storageKey]=Object.assign(Object.assign({},ol[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=ol[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ol[this.storageKey]=Object.assign(Object.assign({},ol[this.storageKey]),{cachedAt:t})}constructor(t){var r,s,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},CC),t);if(this.storageKey=i.storageKey,this.instanceID=(r=Nl.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Nl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&nn()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Wg({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=k1(i.fetch),this.lock=i.lock||uy,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&nn()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=C1:this.lock=uy,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new _C(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:S1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ly(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=ly(this.memoryStorage)),nn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${g1}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},s="none";if(nn()&&(r=B_(window.location.href),this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce")),nn()&&this.detectSessionInUrl&&s!=="none"){const{data:o,error:i}=await this._getSessionFromURL(r,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),w1(i)){const h=(t=i.details)===null||t===void 0?void 0:t.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:c,redirectType:d}=o;return this._debug("#_initialize()","detected session in URL",c,"redirect type",d),await this._saveSession(c),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return mt(r)?this._returnResult({error:r}):this._returnResult({error:new vi("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,s,o;try{const i=await St(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(o=t?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Ts}),{data:c,error:d}=i;if(d||!c)return this._returnResult({data:{user:null,session:null},error:d});const h=c.session,f=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:f,session:h},error:null})}catch(i){if(mt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,s,o;try{let i;if("email"in t){const{email:p,password:v,options:x}=t;let w=null,y=null;this.flowType==="pkce"&&([w,y]=await al(this.storage,this.storageKey)),i=await St(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x?.emailRedirectTo,body:{email:p,password:v,data:(r=x?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:w,code_challenge_method:y},xform:Ts})}else if("phone"in t){const{phone:p,password:v,options:x}=t;i=await St(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:v,data:(s=x?.data)!==null&&s!==void 0?s:{},channel:(o=x?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:Ts})}else throw new Lc("You must provide either an email or phone number and a password");const{data:c,error:d}=i;if(d||!c)return await rn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const h=c.session,f=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:f,session:h},error:null})}catch(i){if(await rn(this.storage,`${this.storageKey}-code-verifier`),mt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:c,options:d}=t;r=await St(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:iy})}else if("phone"in t){const{phone:i,password:c,options:d}=t;r=await St(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:iy})}else throw new Lc("You must provide either an email or phone number and a password");const{data:s,error:o}=r;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!s||!s.session||!s.user){const i=new lo;return this._returnResult({data:{user:null,session:null},error:i})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:o})}catch(r){if(mt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,s,o,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,s,o,i,c,d,h,f,p,v,x;let w,y;if("message"in t)w=t.message,y=t.signature;else{const{chain:S,wallet:C,statement:T,options:A}=t;let I;if(nn())if(typeof C=="object")I=C;else{const ne=window;if("ethereum"in ne&&typeof ne.ethereum=="object"&&"request"in ne.ethereum&&typeof ne.ethereum.request=="function")I=ne.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!A?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=C}const O=new URL((r=A?.url)!==null&&r!==void 0?r:window.location.href),P=await I.request({method:"eth_requestAccounts"}).then(ne=>ne).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!P||P.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const $=E1(P[0]);let F=(s=A?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!F){const ne=await I.request({method:"eth_chainId"});F=cC(ne)}const te={domain:O.host,address:$,statement:T,uri:O.href,version:"1",chainId:F,nonce:(o=A?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(c=(i=A?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(d=A?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(h=A?.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(f=A?.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(p=A?.signInWithEthereum)===null||p===void 0?void 0:p.resources};w=uC(te),y=await I.request({method:"personal_sign",params:[dC(w),$]})}try{const{data:S,error:C}=await St(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:y},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Ts});if(C)throw C;if(!S||!S.session||!S.user){const T=new lo;return this._returnResult({data:{user:null,session:null},error:T})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:C})}catch(S){if(mt(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async signInWithSolana(t){var r,s,o,i,c,d,h,f,p,v,x,w;let y,S;if("message"in t)y=t.message,S=t.signature;else{const{chain:C,wallet:T,statement:A,options:I}=t;let O;if(nn())if(typeof T=="object")O=T;else{const $=window;if("solana"in $&&typeof $.solana=="object"&&("signIn"in $.solana&&typeof $.solana.signIn=="function"||"signMessage"in $.solana&&typeof $.solana.signMessage=="function"))O=$.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!I?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=T}const P=new URL((r=I?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in O&&O.signIn){const $=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},I?.signInWithSolana),{version:"1",domain:P.host,uri:P.href}),A?{statement:A}:null));let F;if(Array.isArray($)&&$[0]&&typeof $[0]=="object")F=$[0];else if($&&typeof $=="object"&&"signedMessage"in $&&"signature"in $)F=$;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)y=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),S=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${P.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${P.href}`,`Issued At: ${(o=(s=I?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((i=I?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${I.signInWithSolana.notBefore}`]:[],...!((c=I?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${I.signInWithSolana.expirationTime}`]:[],...!((d=I?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${I.signInWithSolana.chainId}`]:[],...!((h=I?.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${I.signInWithSolana.nonce}`]:[],...!((f=I?.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${I.signInWithSolana.requestId}`]:[],...!((v=(p=I?.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||v===void 0)&&v.length?["Resources",...I.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const $=await O.signMessage(new TextEncoder().encode(y),"utf8");if(!$||!($ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=$}}try{const{data:C,error:T}=await St(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:po(S)},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(w=t.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Ts});if(T)throw T;if(!C||!C.session||!C.user){const A=new lo;return this._returnResult({data:{user:null,session:null},error:A})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:T})}catch(C){if(mt(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(t){const r=await io(this.storage,`${this.storageKey}-code-verifier`),[s,o]=(r??"").split("/");try{if(!s&&this.flowType==="pkce")throw new j1;const{data:i,error:c}=await St(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:Ts});if(await rn(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!i||!i.session||!i.user){const d=new lo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:o??null}),error:c})}catch(i){if(await rn(this.storage,`${this.storageKey}-code-verifier`),mt(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:s,token:o,access_token:i,nonce:c}=t,d=await St(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:o,access_token:i,nonce:c,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Ts}),{data:h,error:f}=d;if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!h||!h.session||!h.user){const p=new lo;return this._returnResult({data:{user:null,session:null},error:p})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:f})}catch(r){if(mt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,s,o,i,c;try{if("email"in t){const{email:d,options:h}=t;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await al(this.storage,this.storageKey));const{error:v}=await St(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(r=h?.data)!==null&&r!==void 0?r:{},create_user:(s=h?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:f,code_challenge_method:p},redirectTo:h?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in t){const{phone:d,options:h}=t,{data:f,error:p}=await St(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(o=h?.data)!==null&&o!==void 0?o:{},create_user:(i=h?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:(c=h?.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:p})}throw new Lc("You must provide either an email or phone number.")}catch(d){if(await rn(this.storage,`${this.storageKey}-code-verifier`),mt(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(t){var r,s;try{let o,i;"options"in t&&(o=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:c,error:d}=await St(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:o,xform:Ts});if(d)throw d;if(!c)throw new Error("An error occurred on token verification.");const h=c.session,f=c.user;return h?.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:f,session:h},error:null})}catch(o){if(mt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(t){var r,s,o,i,c;try{let d=null,h=null;this.flowType==="pkce"&&([d,h]=await al(this.storage,this.storageKey));const f=await St(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((o=t?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:h}),headers:this.headers,xform:nC});return!((i=f.data)===null||i===void 0)&&i.url&&nn()&&!(!((c=t.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(f.data.url),this._returnResult(f)}catch(d){if(await rn(this.storage,`${this.storageKey}-code-verifier`),mt(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new On;const{error:o}=await St(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(t){if(mt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:s,type:o,options:i}=t,{error:c}=await St(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:o,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in t){const{phone:s,type:o,options:i}=t,{data:c,error:d}=await St(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:o,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c?.message_id},error:d})}throw new Lc("You must provide either an email or phone number and a type")}catch(r){if(mt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await io(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<sp:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const c=await io(this.userStorage,this.storageKey+"-user");c?.user?t.user=c.user:t.user=ip()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};t.user=X_(t.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:o,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await St(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:yi}):await this._useSession(async r=>{var s,o,i;const{data:c,error:d}=r;if(d)throw d;return!(!((s=c.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new On}:await St(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&i!==void 0?i:void 0,xform:yi})})}catch(r){if(mt(r))return b1(r)&&(await this._removeSession(),await rn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:o,error:i}=s;if(i)throw i;if(!o.session)throw new On;const c=o.session;let d=null,h=null;this.flowType==="pkce"&&t.email!=null&&([d,h]=await al(this.storage,this.storageKey));const{data:f,error:p}=await St(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:d,code_challenge_method:h}),jwt:c.access_token,xform:yi});if(p)throw p;return c.user=f.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(s){if(await rn(this.storage,`${this.storageKey}-code-verifier`),mt(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new On;const r=Date.now()/1e3;let s=r,o=!0,i=null;const{payload:c}=ap(t.access_token);if(c.exp&&(s=c.exp,o=s<=r),o){const{data:d,error:h}=await this._callRefreshToken(t.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!d)return{data:{user:null,session:null},error:null};i=d}else{const{data:d,error:h}=await this._getUser(t.access_token);if(h)throw h;i={access_token:t.access_token,refresh_token:t.refresh_token,user:d.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(mt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:c,error:d}=r;if(d)throw d;t=(s=c.session)!==null&&s!==void 0?s:void 0}if(!t?.refresh_token)throw new On;const{data:o,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(mt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!nn())throw new $c("No browser detected.");if(t.error||t.error_description||t.error_code)throw new $c(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Kp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new $c("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Kp("No code detected.");const{data:A,error:I}=await this._exchangeCodeForSession(t.code);if(I)throw I;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:o,access_token:i,refresh_token:c,expires_in:d,expires_at:h,token_type:f}=t;if(!i||!d||!c||!f)throw new $c("No session defined in URL");const p=Math.round(Date.now()/1e3),v=parseInt(d);let x=p+v;h&&(x=parseInt(h));const w=x-p;w*1e3<=hl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${v}s`);const y=x-v;p-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,x,p):p-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,x,p);const{data:S,error:C}=await this._getUser(i);if(C)throw C;const T={provider_token:s,provider_refresh_token:o,access_token:i,expires_in:v,expires_at:x,refresh_token:c,token_type:f,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:t.type},error:null})}catch(s){if(mt(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await io(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:o,error:i}=r;if(i)return this._returnResult({error:i});const c=(s=o.session)===null||s===void 0?void 0:s.access_token;if(c){const{error:d}=await this.admin.signOut(c,t);if(d&&!(y1(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return t!=="others"&&(await this._removeSession(),await rn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=F_(),s={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,o;try{const{data:{session:i},error:c}=r;if(c)throw c;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=await al(this.storage,this.storageKey,!0));try{return await St(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await rn(this.storage,`${this.storageKey}-code-verifier`),mt(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(mt(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:s,error:o}=await this._useSession(async i=>{var c,d,h,f,p;const{data:v,error:x}=i;if(x)throw x;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(c=t.options)===null||c===void 0?void 0:c.redirectTo,scopes:(d=t.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=t.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await St(this.fetch,"GET",w,{headers:this.headers,jwt:(p=(f=v.session)===null||f===void 0?void 0:f.access_token)!==null&&p!==void 0?p:void 0})});if(o)throw o;return nn()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s?.url),this._returnResult({data:{provider:t.provider,url:s?.url},error:null})}catch(s){if(mt(s))return this._returnResult({data:{provider:t.provider,url:null},error:s});throw s}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var s;try{const{error:o,data:{session:i}}=r;if(o)throw o;const{options:c,provider:d,token:h,access_token:f,nonce:p}=t,v=await St(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=i?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:d,id_token:h,access_token:f,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Ts}),{data:x,error:w}=v;return w?this._returnResult({data:{user:null,session:null},error:w}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new lo}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:w}))}catch(o){if(await rn(this.storage,`${this.storageKey}-code-verifier`),mt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,o;const{data:i,error:c}=r;if(c)throw c;return await St(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(mt(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await q_(async o=>(o>0&&await z_(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await St(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ts})),(o,i)=>{const c=200*Math.pow(2,o);return i&&sh(i)&&Date.now()+c-s<hl})}catch(s){if(this._debug(r,"error",s),mt(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",s),nn()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const o=await io(this.storage,this.storageKey);if(o&&this.userStorage){let c=await io(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:o.user},await fl(this.userStorage,this.storageKey+"-user",c)),o.user=(t=c?.user)!==null&&t!==void 0?t:ip()}else if(o&&!o.user&&!o.user){const c=await io(this.storage,this.storageKey+"-user");c&&c?.user?(o.user=c.user,await rn(this.storage,this.storageKey+"-user"),await fl(this.storage,this.storageKey,o)):o.user=ip()}if(this._debug(s,"session from storage",o),!this._isValidSession(o)){this._debug(s,"session is not valid"),o!==null&&await this._removeSession();return}const i=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<sp;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${sp}s`),i){if(this.autoRefreshToken&&o.refresh_token){const{error:c}=await this._callRefreshToken(o.refresh_token);c&&(console.error(c),sh(c)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:d}=await this._getUser(o.access_token);!d&&c?.user?(o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(s,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(s,"error",o),console.error(o);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var r,s;if(!t)throw new On;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new nf;const{data:i,error:c}=await this._refreshAccessToken(t);if(c)throw c;if(!i.session)throw new On;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const d={data:i.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(i){if(this._debug(o,"error",i),mt(i)){const c={data:null,error:i};return sh(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(c),c}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,r,s=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],c=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(t,r)}catch(h){i.push(h)}});if(await Promise.all(c),i.length>0){for(let d=0;d<i.length;d+=1)console.error(i[d]);throw i[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await rn(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await fl(this.userStorage,this.storageKey+"-user",{user:r.user});const o=Object.assign({},r);delete o.user;const i=sy(o);await fl(this.storage,this.storageKey,i)}else{const o=sy(r);await fl(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await rn(this.storage,this.storageKey),await rn(this.storage,this.storageKey+"-code-verifier"),await rn(this.storage,this.storageKey+"-user"),this.userStorage&&await rn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&nn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),hl);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((s.expires_at*1e3-t)/hl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${hl}ms, refresh threshold is ${Hp} ticks`),o<=Hp&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Kg)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!nn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,s){const o=[`provider=${encodeURIComponent(r)}`];if(s?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&o.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,c]=await al(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(c)}`});o.push(d.toString())}if(s?.queryParams){const i=new URLSearchParams(s.queryParams);o.push(i.toString())}return s?.skipBrowserRedirect&&o.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var s;const{data:o,error:i}=r;return i?this._returnResult({data:null,error:i}):await St(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(mt(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var s,o;const{data:i,error:c}=r;if(c)return this._returnResult({data:null,error:c});const d=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:h,error:f}=await St(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token});return f?this._returnResult({data:null,error:f}):(t.factorType==="totp"&&h.type==="totp"&&(!((o=h?.totp)===null||o===void 0)&&o.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(r){if(mt(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:o,error:i}=r;if(i)return this._returnResult({data:null,error:i});const c=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?vC(t.webauthn.credential_response):yC(t.webauthn.credential_response)})}:{code:t.code}),{data:d,error:h}=await St(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:c,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:h}))})}catch(r){if(mt(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:o,error:i}=r;if(i)return this._returnResult({data:null,error:i});const c=await St(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});if(c.error)return c;const{data:d}=c;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:gC(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:xC(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(mt(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:s}=await this._challenge({factorId:t.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const o={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r?.factors)!==null&&t!==void 0?t:[])o.all.push(i),i.status==="verified"&&o[i.factor_type].push(i);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:s},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=ap(s.access_token);let c=null;i.aal&&(c=i.aal);let d=c;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const f=i.amr||[];return{data:{currentLevel:c,nextLevel:d,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;return o?this._returnResult({data:null,error:o}):s?await St(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:s.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new On})})}catch(r){if(mt(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async s=>{const{data:{session:o},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!o)return this._returnResult({data:null,error:new On});const c=await St(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return c.data&&c.data.redirect_url&&nn()&&!r?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(s){if(mt(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(t,r){try{return await this._useSession(async s=>{const{data:{session:o},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!o)return this._returnResult({data:null,error:new On});const c=await St(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return c.data&&c.data.redirect_url&&nn()&&!r?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(s){if(mt(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?await St(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new On})})}catch(t){if(mt(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;return o?this._returnResult({data:null,error:o}):s?(await St(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new On})})}catch(r){if(mt(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let s=r.keys.find(d=>d.kid===t);if(s)return s;const o=Date.now();if(s=this.jwks.keys.find(d=>d.kid===t),s&&this.jwks_cached_at+I_>o)return s;const{data:i,error:c}=await St(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=o,s=i.keys.find(d=>d.kid===t),!s)?null:s}async getClaims(t,r={}){try{let s=t;if(!s){const{data:w,error:y}=await this.getSession();if(y||!w.session)return this._returnResult({data:null,error:y});s=w.session.access_token}const{header:o,payload:i,signature:c,raw:{header:d,payload:h}}=ap(s);r?.allowExpired||J_(i.exp);const f=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!f){const{error:w}=await this.getUser(s);if(w)throw w;return{data:{claims:i,header:o,signature:c},error:null}}const p=Y_(o.alg),v=await crypto.subtle.importKey("jwk",f,p,!0,["verify"]);if(!await crypto.subtle.verify(p,v,c,L_(`${d}.${h}`)))throw new wh("Invalid JWT signature");return{data:{claims:i,header:o,signature:c},error:null}}catch(s){if(mt(s))return this._returnResult({data:null,error:s});throw s}}}Nl.nextInstanceID={};const EC=Wg,AC=Nl,IC=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:EC,AuthApiError:v1,AuthClient:AC,AuthError:jl,AuthImplicitGrantRedirectError:$c,AuthInvalidCredentialsError:Lc,AuthInvalidJwtError:wh,AuthInvalidTokenResponseError:lo,AuthPKCECodeVerifierMissingError:j1,AuthPKCEGrantCodeExchangeError:Kp,AuthRetryableFetchError:bh,AuthSessionMissingError:On,AuthUnknownError:vi,AuthWeakPasswordError:Qp,CustomAuthError:ha,GoTrueAdminApi:Wg,GoTrueClient:Nl,NavigatorLockAcquireTimeoutError:_1,SIGN_OUT_SCOPES:ah,isAuthApiError:y1,isAuthError:mt,isAuthImplicitGrantRedirectError:w1,isAuthPKCECodeVerifierMissingError:T_,isAuthRetryableFetchError:sh,isAuthSessionMissingError:b1,isAuthWeakPasswordError:D_,lockInternals:uo,navigatorLock:C1,processLock:oC},Symbol.toStringTag,{value:"Module"}));var gn={};const Ol=fd(k_);var Bu={},Uu={},zu={},qu={},Gu={},Vu={},hy;function I1(){if(hy)return Vu;hy=1,Object.defineProperty(Vu,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Vu.default=e,Vu}var fy;function T1(){if(fy)return Gu;fy=1,Object.defineProperty(Gu,"__esModule",{value:!0});const t=Ol.__importDefault(I1());class r{constructor(o){var i,c;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(i=o.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=o.signal,this.isMaybeSingle=(c=o.isMaybeSingle)!==null&&c!==void 0?c:!1,o.fetch?this.fetch=o.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,i){return this.headers=new Headers(this.headers),this.headers.set(o,i),this}then(o,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let d=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var f,p,v,x;let w=null,y=null,S=null,C=h.status,T=h.statusText;if(h.ok){if(this.method!=="HEAD"){const P=await h.text();P===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?y=P:y=JSON.parse(P))}const I=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),O=(v=h.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");I&&O&&O.length>1&&(S=parseInt(O[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(w={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,S=null,C=406,T="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const I=await h.text();try{w=JSON.parse(I),Array.isArray(w)&&h.status===404&&(y=[],w=null,C=200,T="OK")}catch{h.status===404&&I===""?(C=204,T="No Content"):w={message:I}}if(w&&this.isMaybeSingle&&(!((x=w?.details)===null||x===void 0)&&x.includes("0 rows"))&&(w=null,C=200,T="OK"),w&&this.shouldThrowOnError)throw new t.default(w)}return{error:w,data:y,count:S,status:C,statusText:T}});return this.shouldThrowOnError||(d=d.catch(h=>{var f,p,v,x,w,y;let S="";const C=h?.cause;if(C){const T=(f=C?.message)!==null&&f!==void 0?f:"",A=(p=C?.code)!==null&&p!==void 0?p:"";S=`${(v=h?.name)!==null&&v!==void 0?v:"FetchError"}: ${h?.message}`,S+=`

Caused by: ${(x=C?.name)!==null&&x!==void 0?x:"Error"}: ${T}`,A&&(S+=` (${A})`),C?.stack&&(S+=`
${C.stack}`)}else S=(w=h?.stack)!==null&&w!==void 0?w:"";return{error:{message:`${(y=h?.name)!==null&&y!==void 0?y:"FetchError"}: ${h?.message}`,details:S,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),d.then(o,i)}returns(){return this}overrideTypes(){return this}}return Gu.default=r,Gu}var my;function D1(){if(my)return qu;my=1,Object.defineProperty(qu,"__esModule",{value:!0});const t=Ol.__importDefault(T1());class r extends t.default{select(o){let i=!1;const c=(o??"*").split("").map(d=>/\s/.test(d)&&!i?"":(d==='"'&&(i=!i),d)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:i=!0,nullsFirst:c,foreignTable:d,referencedTable:h=d}={}){const f=h?`${h}.order`:"order",p=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${p?`${p},`:""}${o}.${i?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:i,referencedTable:c=i}={}){const d=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${o}`),this}range(o,i,{foreignTable:c,referencedTable:d=c}={}){const h=typeof d>"u"?"offset":`${d}.offset`,f=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(h,`${o}`),this.url.searchParams.set(f,`${i-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:i=!1,settings:c=!1,buffers:d=!1,wal:h=!1,format:f="text"}={}){var p;const v=[o?"analyze":null,i?"verbose":null,c?"settings":null,d?"buffers":null,h?"wal":null].filter(Boolean).join("|"),x=(p=this.headers.get("Accept"))!==null&&p!==void 0?p:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${x}"; options=${v};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return qu.default=r,qu}var py;function Qg(){if(py)return zu;py=1,Object.defineProperty(zu,"__esModule",{value:!0});const t=Ol.__importDefault(D1()),r=new RegExp("[,()]");class s extends t.default{eq(i,c){return this.url.searchParams.append(i,`eq.${c}`),this}neq(i,c){return this.url.searchParams.append(i,`neq.${c}`),this}gt(i,c){return this.url.searchParams.append(i,`gt.${c}`),this}gte(i,c){return this.url.searchParams.append(i,`gte.${c}`),this}lt(i,c){return this.url.searchParams.append(i,`lt.${c}`),this}lte(i,c){return this.url.searchParams.append(i,`lte.${c}`),this}like(i,c){return this.url.searchParams.append(i,`like.${c}`),this}likeAllOf(i,c){return this.url.searchParams.append(i,`like(all).{${c.join(",")}}`),this}likeAnyOf(i,c){return this.url.searchParams.append(i,`like(any).{${c.join(",")}}`),this}ilike(i,c){return this.url.searchParams.append(i,`ilike.${c}`),this}ilikeAllOf(i,c){return this.url.searchParams.append(i,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(i,c){return this.url.searchParams.append(i,`ilike(any).{${c.join(",")}}`),this}regexMatch(i,c){return this.url.searchParams.append(i,`match.${c}`),this}regexIMatch(i,c){return this.url.searchParams.append(i,`imatch.${c}`),this}is(i,c){return this.url.searchParams.append(i,`is.${c}`),this}isDistinct(i,c){return this.url.searchParams.append(i,`isdistinct.${c}`),this}in(i,c){const d=Array.from(new Set(c)).map(h=>typeof h=="string"&&r.test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(i,`in.(${d})`),this}contains(i,c){return typeof c=="string"?this.url.searchParams.append(i,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(i,`cs.{${c.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(c)}`),this}containedBy(i,c){return typeof c=="string"?this.url.searchParams.append(i,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(i,`cd.{${c.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(c)}`),this}rangeGt(i,c){return this.url.searchParams.append(i,`sr.${c}`),this}rangeGte(i,c){return this.url.searchParams.append(i,`nxl.${c}`),this}rangeLt(i,c){return this.url.searchParams.append(i,`sl.${c}`),this}rangeLte(i,c){return this.url.searchParams.append(i,`nxr.${c}`),this}rangeAdjacent(i,c){return this.url.searchParams.append(i,`adj.${c}`),this}overlaps(i,c){return typeof c=="string"?this.url.searchParams.append(i,`ov.${c}`):this.url.searchParams.append(i,`ov.{${c.join(",")}}`),this}textSearch(i,c,{config:d,type:h}={}){let f="";h==="plain"?f="pl":h==="phrase"?f="ph":h==="websearch"&&(f="w");const p=d===void 0?"":`(${d})`;return this.url.searchParams.append(i,`${f}fts${p}.${c}`),this}match(i){return Object.entries(i).forEach(([c,d])=>{this.url.searchParams.append(c,`eq.${d}`)}),this}not(i,c,d){return this.url.searchParams.append(i,`not.${c}.${d}`),this}or(i,{foreignTable:c,referencedTable:d=c}={}){const h=d?`${d}.or`:"or";return this.url.searchParams.append(h,`(${i})`),this}filter(i,c,d){return this.url.searchParams.append(i,`${c}.${d}`),this}}return zu.default=s,zu}var gy;function R1(){if(gy)return Uu;gy=1,Object.defineProperty(Uu,"__esModule",{value:!0});const t=Ol.__importDefault(Qg());class r{constructor(o,{headers:i={},schema:c,fetch:d}){this.url=o,this.headers=new Headers(i),this.schema=c,this.fetch=d}select(o,i){const{head:c=!1,count:d}=i??{},h=c?"HEAD":"GET";let f=!1;const p=(o??"*").split("").map(v=>/\s/.test(v)&&!f?"":(v==='"'&&(f=!f),v)).join("");return this.url.searchParams.set("select",p),d&&this.headers.append("Prefer",`count=${d}`),new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:i,defaultToNull:c=!0}={}){var d;const h="POST";if(i&&this.headers.append("Prefer",`count=${i}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const f=o.reduce((p,v)=>p.concat(Object.keys(v)),[]);if(f.length>0){const p=[...new Set(f)].map(v=>`"${v}"`);this.url.searchParams.set("columns",p.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(o,{onConflict:i,ignoreDuplicates:c=!1,count:d,defaultToNull:h=!0}={}){var f;const p="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),d&&this.headers.append("Prefer",`count=${d}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const v=o.reduce((x,w)=>x.concat(Object.keys(w)),[]);if(v.length>0){const x=[...new Set(v)].map(w=>`"${w}"`);this.url.searchParams.set("columns",x.join(","))}}return new t.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(o,{count:i}={}){var c;const d="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:o}={}){var i;const c="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return Uu.default=r,Uu}var xy;function TC(){if(xy)return Bu;xy=1,Object.defineProperty(Bu,"__esModule",{value:!0});const e=Ol,t=e.__importDefault(R1()),r=e.__importDefault(Qg());class s{constructor(i,{headers:c={},schema:d,fetch:h}={}){this.url=i,this.headers=new Headers(c),this.schemaName=d,this.fetch=h}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const c=new URL(`${this.url}/${i}`);return new t.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new s(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,c={},{head:d=!1,get:h=!1,count:f}={}){var p;let v;const x=new URL(`${this.url}/rpc/${i}`);let w;d||h?(v=d?"HEAD":"GET",Object.entries(c).filter(([S,C])=>C!==void 0).map(([S,C])=>[S,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([S,C])=>{x.searchParams.append(S,C)})):(v="POST",w=c);const y=new Headers(this.headers);return f&&y.set("Prefer",`count=${f}`),new r.default({method:v,url:x,headers:y,schema:this.schemaName,body:w,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}}return Bu.default=s,Bu}var vy;function Jg(){if(vy)return gn;vy=1,Object.defineProperty(gn,"__esModule",{value:!0}),gn.PostgrestError=gn.PostgrestBuilder=gn.PostgrestTransformBuilder=gn.PostgrestFilterBuilder=gn.PostgrestQueryBuilder=gn.PostgrestClient=void 0;const e=Ol,t=e.__importDefault(TC());gn.PostgrestClient=t.default;const r=e.__importDefault(R1());gn.PostgrestQueryBuilder=r.default;const s=e.__importDefault(Qg());gn.PostgrestFilterBuilder=s.default;const o=e.__importDefault(D1());gn.PostgrestTransformBuilder=o.default;const i=e.__importDefault(T1());gn.PostgrestBuilder=i.default;const c=e.__importDefault(I1());return gn.PostgrestError=c.default,gn.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:i.default,PostgrestError:c.default},gn}var O1=Jg();const P1=Al(O1),DC=DS({__proto__:null,default:P1},[O1]),{PostgrestClient:EO,PostgrestQueryBuilder:AO,PostgrestFilterBuilder:IO,PostgrestTransformBuilder:TO,PostgrestBuilder:DO,PostgrestError:RO}=P1||DC,RC=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class sf extends Error{constructor(t,r="FunctionsError",s){super(t),this.name=r,this.context=s}}class M1 extends sf{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Jp extends sf{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Yp extends sf{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var kh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(kh||(kh={}));class OC{constructor(t,{headers:r={},customFetch:s,region:o=kh.Any}={}){this.url=t,this.headers=r,this.region=o,this.fetch=RC(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return dt(this,arguments,void 0,function*(r,s={}){var o;let i,c;try{const{headers:d,method:h,body:f,signal:p,timeout:v}=s;let x={},{region:w}=s;w||(w=this.region);const y=new URL(`${this.url}/${r}`);w&&w!=="any"&&(x["x-region"]=w,y.searchParams.set("forceFunctionRegion",w));let S;f&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",S=f):typeof f=="string"?(x["Content-Type"]="text/plain",S=f):typeof FormData<"u"&&f instanceof FormData?S=f:(x["Content-Type"]="application/json",S=JSON.stringify(f)):S=f;let C=p;v&&(c=new AbortController,i=setTimeout(()=>c.abort(),v),p?(C=c.signal,p.addEventListener("abort",()=>c.abort())):C=c.signal);const T=yield this.fetch(y.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),d),body:S,signal:C}).catch(P=>{throw new M1(P)}),A=T.headers.get("x-relay-error");if(A&&A==="true")throw new Jp(T);if(!T.ok)throw new Yp(T);let I=((o=T.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),O;return I==="application/json"?O=yield T.json():I==="application/octet-stream"||I==="application/pdf"?O=yield T.blob():I==="text/event-stream"?O=T:I==="multipart/form-data"?O=yield T.formData():O=yield T.text(),{data:O,error:null,response:T}}catch(d){return{data:null,error:d,response:d instanceof Yp||d instanceof Jp?d.context:void 0}}finally{i&&clearTimeout(i)}})}}const PC=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return kh},FunctionsClient:OC,FunctionsError:sf,FunctionsFetchError:M1,FunctionsHttpError:Yp,FunctionsRelayError:Jp},Symbol.toStringTag,{value:"Module"}));class L1{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,o=parseInt(s.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const s=this.getWebSocketConstructor();return new s(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const MC="2.87.2",LC=`realtime-js/${MC}`,$1="1.0.0",$C="2.0.0",yy=$1,Zp=1e4,FC=1e3,BC=100;var fo;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(fo||(fo={}));var jr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(jr||(jr={}));var Rs;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Rs||(Rs={}));var Xp;(function(e){e.websocket="websocket"})(Xp||(Xp={}));var mo;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(mo||(mo={}));class UC{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let s=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,s;const o=(s=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(t){var r,s;const o=(s=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:{},c=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(t,r,s){var o,i;const c=t.topic,d=(o=t.ref)!==null&&o!==void 0?o:"",h=(i=t.join_ref)!==null&&i!==void 0?i:"",f=t.payload.event,p=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},v=Object.keys(p).length===0?"":JSON.stringify(p);if(h.length>255)throw new Error(`joinRef length ${h.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`userEvent length ${f.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+d.length+c.length+f.length+v.length,w=new ArrayBuffer(this.HEADER_LENGTH+x);let y=new DataView(w),S=0;y.setUint8(S++,this.KINDS.userBroadcastPush),y.setUint8(S++,h.length),y.setUint8(S++,d.length),y.setUint8(S++,c.length),y.setUint8(S++,f.length),y.setUint8(S++,v.length),y.setUint8(S++,r),Array.from(h,T=>y.setUint8(S++,T.charCodeAt(0))),Array.from(d,T=>y.setUint8(S++,T.charCodeAt(0))),Array.from(c,T=>y.setUint8(S++,T.charCodeAt(0))),Array.from(f,T=>y.setUint8(S++,T.charCodeAt(0))),Array.from(v,T=>y.setUint8(S++,T.charCodeAt(0)));var C=new Uint8Array(w.byteLength+s.byteLength);return C.set(new Uint8Array(w),0),C.set(new Uint8Array(s),w.byteLength),C.buffer}decode(t,r){if(this._isArrayBuffer(t)){let s=this._binaryDecode(t);return r(s)}if(typeof t=="string"){const s=JSON.parse(t),[o,i,c,d,h]=s;return r({join_ref:o,ref:i,topic:c,event:d,payload:h})}return r({})}_binaryDecode(t){const r=new DataView(t),s=r.getUint8(0),o=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,o)}}_decodeUserBroadcast(t,r,s){const o=r.getUint8(1),i=r.getUint8(2),c=r.getUint8(3),d=r.getUint8(4);let h=this.HEADER_LENGTH+4;const f=s.decode(t.slice(h,h+o));h=h+o;const p=s.decode(t.slice(h,h+i));h=h+i;const v=s.decode(t.slice(h,h+c));h=h+c;const x=t.slice(h,t.byteLength),w=d===this.JSON_ENCODING?JSON.parse(s.decode(x)):x,y={type:this.BROADCAST_EVENT,event:p,payload:w};return c>0&&(y.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:f,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([s])=>r.includes(s)))}}class F1{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var er;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(er||(er={}));const by=(e,t,r={})=>{var s;const o=(s=r.skipTypes)!==null&&s!==void 0?s:[];return t?Object.keys(t).reduce((i,c)=>(i[c]=zC(c,e,t,o),i),{}):{}},zC=(e,t,r,s)=>{const o=t.find(d=>d.name===e),i=o?.type,c=r[e];return i&&!s.includes(i)?B1(i,c):eg(c)},B1=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return HC(t,r)}switch(e){case er.bool:return qC(t);case er.float4:case er.float8:case er.int2:case er.int4:case er.int8:case er.numeric:case er.oid:return GC(t);case er.json:case er.jsonb:return VC(t);case er.timestamp:return WC(t);case er.abstime:case er.date:case er.daterange:case er.int4range:case er.int8range:case er.money:case er.reltime:case er.text:case er.time:case er.timestamptz:case er.timetz:case er.tsrange:case er.tstzrange:return eg(t);default:return eg(t)}},eg=e=>e,qC=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},GC=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},VC=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},HC=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let i;const c=e.slice(1,r);try{i=JSON.parse("["+c+"]")}catch{i=c?c.split(","):[]}return i.map(d=>B1(t,d))}return e},WC=e=>typeof e=="string"?e.replace(" ","T"):e,U1=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class op{constructor(t,r,s={},o=Zp){this.channel=t,this.event=r,this.payload=s,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var tg;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(tg||(tg={}));class xl{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},o=>{const{onJoin:i,onLeave:c,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=xl.syncState(this.state,o,i,c),this.pendingDiffs.forEach(h=>{this.state=xl.syncDiff(this.state,h,i,c)}),this.pendingDiffs=[],d()}),this.channel._on(s.diff,{},o=>{const{onJoin:i,onLeave:c,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=xl.syncDiff(this.state,o,i,c),d())}),this.onJoin((o,i,c)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:i,newPresences:c})}),this.onLeave((o,i,c)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:i,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,s,o){const i=this.cloneDeep(t),c=this.transformState(r),d={},h={};return this.map(i,(f,p)=>{c[f]||(h[f]=p)}),this.map(c,(f,p)=>{const v=i[f];if(v){const x=p.map(C=>C.presence_ref),w=v.map(C=>C.presence_ref),y=p.filter(C=>w.indexOf(C.presence_ref)<0),S=v.filter(C=>x.indexOf(C.presence_ref)<0);y.length>0&&(d[f]=y),S.length>0&&(h[f]=S)}else d[f]=p}),this.syncDiff(i,{joins:d,leaves:h},s,o)}static syncDiff(t,r,s,o){const{joins:i,leaves:c}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),o||(o=()=>{}),this.map(i,(d,h)=>{var f;const p=(f=t[d])!==null&&f!==void 0?f:[];if(t[d]=this.cloneDeep(h),p.length>0){const v=t[d].map(w=>w.presence_ref),x=p.filter(w=>v.indexOf(w.presence_ref)<0);t[d].unshift(...x)}s(d,p,h)}),this.map(c,(d,h)=>{let f=t[d];if(!f)return;const p=h.map(v=>v.presence_ref);f=f.filter(v=>p.indexOf(v.presence_ref)<0),t[d]=f,o(d,f,h),f.length===0&&delete t[d]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const o=t[s];return"metas"in o?r[s]=o.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=o,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var rg;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(rg||(rg={}));var vl;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(vl||(vl={}));var la;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(la||(la={}));const KC=jr;class go{constructor(t,r={config:{}},s){var o,i;if(this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=jr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new op(this,Rs.join,this.params,this.timeout),this.rejoinTimer=new F1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=jr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=jr.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=jr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=jr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=jr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Rs.reply,{},(c,d)=>{this._trigger(this._replyEventName(d),c)}),this.presence=new xl(this),this.broadcastEndpointURL=U1(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var s,o,i;if(this.socket.isConnected()||this.socket.connect(),this.state==jr.closed){const{config:{broadcast:c,presence:d,private:h}}=this.params,f=(o=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(w=>w.filter))!==null&&o!==void 0?o:[],p=!!this.bindings[vl.PRESENCE]&&this.bindings[vl.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,v={},x={broadcast:c,presence:Object.assign(Object.assign({},d),{enabled:p}),postgres_changes:f,private:h};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(w=>t?.(la.CHANNEL_ERROR,w)),this._onClose(()=>t?.(la.CLOSED)),this.updateJoinPayload(Object.assign({config:x},v)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:w})=>{var y;if(this.socket._isManualToken()||this.socket.setAuth(),w===void 0){t?.(la.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,C=(y=S?.length)!==null&&y!==void 0?y:0,T=[];for(let A=0;A<C;A++){const I=S[A],{filter:{event:O,schema:P,table:$,filter:F}}=I,te=w&&w[A];if(te&&te.event===O&&go.isFilterValueEqual(te.schema,P)&&go.isFilterValueEqual(te.table,$)&&go.isFilterValueEqual(te.filter,F))T.push(Object.assign(Object.assign({},I),{id:te.id}));else{this.unsubscribe(),this.state=jr.errored,t?.(la.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,t&&t(la.SUBSCRIBED);return}}).receive("error",w=>{this.state=jr.errored,t?.(la.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{t?.(la.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,s){return this.state===jr.joined&&t===vl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,s)}async httpSend(t,r,s={}){var o;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);if(d.status===202)return{success:!0};let h=d.statusText;try{const f=await d.json();h=f.error||f.message||h}catch{}return Promise.reject(new Error(h))}async send(t,r={}){var s,o;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:c}=t,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:c,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((o=f.body)===null||o===void 0?void 0:o.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var c,d,h;const f=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((h=(d=(c=this.params)===null||c===void 0?void 0:c.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&i("ok"),f.receive("ok",()=>i("ok")),f.receive("error",()=>i("error")),f.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=jr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Rs.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(o=>{s=new op(this,Rs.leave,{},t),s.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=jr.closed,this.bindings={}}async _fetchWithTimeout(t,r,s){const o=new AbortController,i=setTimeout(()=>o.abort(),s),c=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:o.signal}));return clearTimeout(i),c}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new op(this,t,r,s);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>BC){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var o,i;const c=t.toLocaleLowerCase(),{close:d,error:h,leave:f,join:p}=Rs;if(s&&[d,h,f,p].indexOf(c)>=0&&s!==this._joinRef())return;let x=this._onMessage(c,r,s);if(r&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(w=>{var y,S,C;return((y=w.filter)===null||y===void 0?void 0:y.event)==="*"||((C=(S=w.filter)===null||S===void 0?void 0:S.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===c}).map(w=>w.callback(x,s)):(i=this.bindings[c])===null||i===void 0||i.filter(w=>{var y,S,C,T,A,I;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in w){const O=w.id,P=(y=w.filter)===null||y===void 0?void 0:y.event;return O&&((S=r.ids)===null||S===void 0?void 0:S.includes(O))&&(P==="*"||P?.toLocaleLowerCase()===((C=r.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const O=(A=(T=w?.filter)===null||T===void 0?void 0:T.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return O==="*"||O===((I=r?.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===c}).map(w=>{if(typeof x=="object"&&"ids"in x){const y=x.data,{schema:S,table:C,commit_timestamp:T,type:A,errors:I}=y;x=Object.assign(Object.assign({},{schema:S,table:C,commit_timestamp:T,eventType:A,new:{},old:{},errors:I}),this._getPayloadRecords(y))}w.callback(x,s)})}_isClosed(){return this.state===jr.closed}_isJoined(){return this.state===jr.joined}_isJoining(){return this.state===jr.joining}_isLeaving(){return this.state===jr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const o=t.toLocaleLowerCase(),i={type:o,filter:r,callback:s};return this.bindings[o]?this.bindings[o].push(i):this.bindings[o]=[i],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(o=>{var i;return!(((i=o.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&go.isEqual(o.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Rs.close,{},t)}_onError(t){this._on(Rs.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=jr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=by(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=by(t.columns,t.old_record)),r}}const lp=()=>{},Hu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},QC=[1e3,2e3,5e3,1e4],JC=1e4,YC=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ZC{constructor(t,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Zp,this.transport=null,this.heartbeatIntervalMs=Hu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=lp,this.ref=0,this.reconnectTimer=null,this.vsn=yy,this.logger=lp,this.conn=null,this.sendBuffer=[],this.serializer=new UC,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...i)=>o(...i):(...i)=>fetch(...i),!(!((s=r?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Xp.websocket}`,this.httpEndpoint=U1(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=L1.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case fo.connecting:return mo.Connecting;case fo.open:return mo.Open;case fo.closing:return mo.Closing;default:return mo.Closed}}isConnected(){return this.connectionState()===mo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const s=`realtime:${t}`,o=this.getChannels().find(i=>i.topic===s);if(o)return o;{const i=new go(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:s,payload:o,ref:i}=t,c=()=>{this.encode(t,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${r} ${s} (${i})`,o),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(FC,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Hu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:o,payload:i,ref:c}=r,d=c?`(${c})`:"",h=i.status||"";this.log("receive",`${h} ${s} ${o} ${d}`.trim(),i),this.channels.filter(f=>f._isMember(s)).forEach(f=>f._trigger(o,i,c)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===fo.open||this.conn.readyState===fo.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Rs.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\?/)?"&":"?",o=new URLSearchParams(r);return`${t}${s}${o}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([YC],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,s=!1;if(t)r=t,s=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),r=this.accessTokenValue}else r=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(o=>{const i={access_token:r,version:LC};r&&o.updateJoinPayload(i),o.joinedOnce&&o._isJoined()&&o._push(Rs.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(r)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new F1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Hu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,s,o,i,c,d,h,f,p,v,x,w;switch(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(s=t?.timeout)!==null&&s!==void 0?s:Zp,this.heartbeatIntervalMs=(o=t?.heartbeatIntervalMs)!==null&&o!==void 0?o:Hu.HEARTBEAT_INTERVAL,this.worker=(i=t?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(c=t?.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(d=t?.heartbeatCallback)!==null&&d!==void 0?d:lp,this.vsn=(h=t?.vsn)!==null&&h!==void 0?h:yy,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=t?.reconnectAfterMs)!==null&&f!==void 0?f:(y=>QC[y-1]||JC),this.vsn){case $1:this.encode=(p=t?.encode)!==null&&p!==void 0?p:((y,S)=>S(JSON.stringify(y))),this.decode=(v=t?.decode)!==null&&v!==void 0?v:((y,S)=>S(JSON.parse(y)));break;case $C:this.encode=(x=t?.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(w=t?.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}const XC=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:KC,get REALTIME_LISTEN_TYPES(){return vl},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return rg},get REALTIME_PRESENCE_LISTEN_EVENTS(){return tg},get REALTIME_SUBSCRIBE_STATES(){return la},RealtimeChannel:go,RealtimeClient:ZC,RealtimePresence:xl,WebSocketFactory:L1},Symbol.toStringTag,{value:"Module"}));var Da={},Wu={};const z1=fd(PC),q1=fd(XC);class gd extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function or(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class G1 extends gd{constructor(t,r,s){super(t),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class _h extends gd{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const Yg=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),e4=()=>Response,ng=e=>{if(Array.isArray(e))return e.map(r=>ng(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,s])=>{const o=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[o]=ng(s)}),t},t4=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},r4=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e),cp=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},n4=(e,t,r)=>dt(void 0,void 0,void 0,function*(){const s=yield e4();e instanceof s&&!r?.noResolveJson?e.json().then(o=>{const i=e.status||500,c=o?.statusCode||i+"";t(new G1(cp(o),i,c))}).catch(o=>{t(new _h(cp(o),o))}):t(new _h(cp(e),e))}),s4=(e,t,r,s)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"||!s?o:(t4(s)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(s)):o.body=s,t?.duplex&&(o.duplex=t.duplex),Object.assign(Object.assign({},o),r))};function xd(e,t,r,s,o,i){return dt(this,void 0,void 0,function*(){return new Promise((c,d)=>{e(r,s4(t,s,o,i)).then(h=>{if(!h.ok)throw h;return s?.noResolveJson?h:h.json()}).then(h=>c(h)).catch(h=>n4(h,d,s))})})}function Qc(e,t,r,s){return dt(this,void 0,void 0,function*(){return xd(e,"GET",t,r,s)})}function Ds(e,t,r,s,o){return dt(this,void 0,void 0,function*(){return xd(e,"POST",t,s,o,r)})}function sg(e,t,r,s,o){return dt(this,void 0,void 0,function*(){return xd(e,"PUT",t,s,o,r)})}function a4(e,t,r,s){return dt(this,void 0,void 0,function*(){return xd(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function Zg(e,t,r,s,o){return dt(this,void 0,void 0,function*(){return xd(e,"DELETE",t,s,o,r)})}class i4{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return dt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(or(t))return{data:null,error:t};throw t}})}}var V1;class o4{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[V1]="BlobDownloadBuilder",this.promise=null}asStream(){return new i4(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return dt(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(or(t))return{data:null,error:t};throw t}})}}V1=Symbol.toStringTag;const l4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},wy={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class c4{constructor(t,r={},s,o){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=s,this.fetch=Yg(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,s,o){return dt(this,void 0,void 0,function*(){try{let i;const c=Object.assign(Object.assign({},wy),o);let d=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(c.upsert)});const h=c.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",c.cacheControl),h&&i.append("metadata",this.encodeMetadata(h)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.has("cacheControl")||i.append("cacheControl",c.cacheControl),h&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(h))):(i=s,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType,h&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(h))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!c.duplex&&(c.duplex="half")),o?.headers&&(d=Object.assign(Object.assign({},d),o.headers));const f=this._removeEmptyFolders(r),p=this._getFinalPath(f),v=yield(t=="PUT"?sg:Ds)(this.fetch,`${this.url}/object/${p}`,i,Object.assign({headers:d},c?.duplex?{duplex:c.duplex}:{}));return{data:{path:f,id:v.Id,fullPath:v.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(or(i))return{data:null,error:i};throw i}})}upload(t,r,s){return dt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,s)})}uploadToSignedUrl(t,r,s,o){return dt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),c=this._getFinalPath(i),d=new URL(this.url+`/object/upload/sign/${c}`);d.searchParams.set("token",r);try{let h;const f=Object.assign({upsert:wy.upsert},o),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&s instanceof Blob?(h=new FormData,h.append("cacheControl",f.cacheControl),h.append("",s)):typeof FormData<"u"&&s instanceof FormData?(h=s,h.append("cacheControl",f.cacheControl)):(h=s,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType);const v=yield sg(this.fetch,d.toString(),h,{headers:p});return{data:{path:i,fullPath:v.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(or(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(t,r){return dt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const o=Object.assign({},this.headers);r?.upsert&&(o["x-upsert"]="true");const i=yield Ds(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:o}),c=new URL(this.url+i.url),d=c.searchParams.get("token");if(!d)throw new gd("No token returned by API");return{data:{signedUrl:c.toString(),path:t,token:d},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(or(s))return{data:null,error:s};throw s}})}update(t,r,s){return dt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,s)})}move(t,r,s){return dt(this,void 0,void 0,function*(){try{return{data:yield Ds(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(or(o))return{data:null,error:o};throw o}})}copy(t,r,s){return dt(this,void 0,void 0,function*(){try{return{data:{path:(yield Ds(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(or(o))return{data:null,error:o};throw o}})}createSignedUrl(t,r,s){return dt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t),i=yield Ds(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:r},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const c=s?.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${c}`)},{data:i,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(or(o))return{data:null,error:o};throw o}})}createSignedUrls(t,r,s){return dt(this,void 0,void 0,function*(){try{const o=yield Ds(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:o.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${i}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(or(o))return{data:null,error:o};throw o}})}download(t,r){const o=typeof r?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(r?.transform||{}),c=i?`?${i}`:"",d=this._getFinalPath(t),h=()=>Qc(this.fetch,`${this.url}/${o}/${d}${c}`,{headers:this.headers,noResolveJson:!0});return new o4(h,this.shouldThrowOnError)}info(t){return dt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const s=yield Qc(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:ng(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(or(s))return{data:null,error:s};throw s}})}exists(t){return dt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield a4(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(or(s)&&s instanceof _h){const o=s.originalError;if([400,404].includes(o?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,r){const s=this._getFinalPath(t),o=[],i=r?.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&o.push(i);const d=typeof r?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(r?.transform||{});h!==""&&o.push(h);let f=o.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${s}${f}`)}}}remove(t){return dt(this,void 0,void 0,function*(){try{return{data:yield Zg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}list(t,r,s){return dt(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},l4),r),{prefix:t||""});return{data:yield Ds(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},s),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(or(o))return{data:null,error:o};throw o}})}listV2(t,r){return dt(this,void 0,void 0,function*(){try{const s=Object.assign({},t);return{data:yield Ds(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(or(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const H1="2.87.2",W1={"X-Client-Info":`storage-js/${H1}`};class d4{constructor(t,r={},s,o){this.shouldThrowOnError=!1;const i=new URL(t);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},W1),r),this.fetch=Yg(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return dt(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield Qc(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}getBucket(t){return dt(this,void 0,void 0,function*(){try{return{data:yield Qc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}createBucket(t){return dt(this,arguments,void 0,function*(r,s={public:!1}){try{return{data:yield Ds(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(or(o))return{data:null,error:o};throw o}})}updateBucket(t,r){return dt(this,void 0,void 0,function*(){try{return{data:yield sg(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(or(s))return{data:null,error:s};throw s}})}emptyBucket(t){return dt(this,void 0,void 0,function*(){try{return{data:yield Ds(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}deleteBucket(t){return dt(this,void 0,void 0,function*(){try{return{data:yield Zg(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var Jc=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function u4(e,t,r){const s=new URL(t,e);if(r)for(const[o,i]of Object.entries(r))i!==void 0&&s.searchParams.set(o,i);return s.toString()}async function h4(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function f4(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:s,query:o,body:i,headers:c}){const d=u4(e.baseUrl,s,o),h=await h4(e.auth),f=await t(d,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...h,...c},body:i?JSON.stringify(i):void 0}),p=await f.text(),v=(f.headers.get("content-type")||"").includes("application/json"),x=v&&p?JSON.parse(p):p;if(!f.ok){const w=v?x:void 0,y=w?.error;throw new Jc(y?.message??`Request failed with status ${f.status}`,{status:f.status,icebergType:y?.type,icebergCode:y?.code,details:w})}return{status:f.status,headers:f.headers,data:x}}}}function Ku(e){return e.join("")}var m4=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Ku(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ku(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ku(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ku(e.namespace)}`}),!0}catch(t){if(t instanceof Jc&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Jc&&r.status===409)return;throw r}}};function ll(e){return e.join("")}var p4=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ll(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ll(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ll(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ll(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ll(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ll(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Jc&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Jc&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},g4=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=f4({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new m4(this.client,t),this.tableOps=new p4(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class K1{constructor(t,r={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},W1),r),this.fetch=Yg(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return dt(this,void 0,void 0,function*(){try{return{data:yield Ds(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}listBuckets(t){return dt(this,void 0,void 0,function*(){try{const r=new URLSearchParams;t?.limit!==void 0&&r.set("limit",t.limit.toString()),t?.offset!==void 0&&r.set("offset",t.offset.toString()),t?.sortColumn&&r.set("sortColumn",t.sortColumn),t?.sortOrder&&r.set("sortOrder",t.sortOrder),t?.search&&r.set("search",t.search);const s=r.toString(),o=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield Qc(this.fetch,o,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}deleteBucket(t){return dt(this,void 0,void 0,function*(){try{return{data:yield Zg(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}from(t){if(!r4(t))throw new gd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new g4({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>dt(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(r,{get(i,c){const d=i[c];return typeof d!="function"?d:(...h)=>dt(this,void 0,void 0,function*(){try{return{data:yield d.apply(i,h),error:null}}catch(f){if(s)throw f;return{data:null,error:f}}})}})}}const Xg={"X-Client-Info":`storage-js/${H1}`,"Content-Type":"application/json"};class ex extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Ln(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class ih extends ex{constructor(t,r,s){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Q1 extends ex{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var ag;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(ag||(ag={}));const af=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),x4=()=>Response,J1=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},v4=e=>Array.from(new Float32Array(e)),y4=(e,t)=>{if(t!==void 0&&e.float32.length!==t)throw new Error(`Vector dimension mismatch: expected ${t}, got ${e.float32.length}`)},jy=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),b4=(e,t,r)=>dt(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!r?.noResolveJson){const o=e.status||500,i=e;if(typeof i.json=="function")i.json().then(c=>{const d=c?.statusCode||c?.code||o+"";t(new ih(jy(c),o,d))}).catch(()=>{const c=o+"",d=i.statusText||`HTTP ${o} error`;t(new ih(d,o,c))});else{const c=o+"",d=i.statusText||`HTTP ${o} error`;t(new ih(d,o,c))}}else t(new Q1(jy(e),e))}),w4=(e,t,r,s)=>{const o={method:e,headers:t?.headers||{}};return s?(J1(s)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(s)):o.body=s,Object.assign(Object.assign({},o),r)):o};function j4(e,t,r,s,o,i){return dt(this,void 0,void 0,function*(){return new Promise((c,d)=>{e(r,w4(t,s,o,i)).then(h=>{if(!h.ok)throw h;if(s?.noResolveJson)return h;const f=h.headers.get("content-type");return!f||!f.includes("application/json")?{}:h.json()}).then(h=>c(h)).catch(h=>b4(h,d,s))})})}function Jn(e,t,r,s,o){return dt(this,void 0,void 0,function*(){return j4(e,"POST",t,s,o,r)})}class Y1{constructor(t,r={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Xg),r),this.fetch=af(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return dt(this,void 0,void 0,function*(){try{return{data:(yield Jn(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ln(r))return{data:null,error:r};throw r}})}getIndex(t,r){return dt(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ln(s))return{data:null,error:s};throw s}})}listIndexes(t){return dt(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ln(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return dt(this,void 0,void 0,function*(){try{return{data:(yield Jn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ln(s))return{data:null,error:s};throw s}})}}class Z1{constructor(t,r={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Xg),r),this.fetch=af(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return dt(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Jn(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ln(r))return{data:null,error:r};throw r}})}getVectors(t){return dt(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ln(r))return{data:null,error:r};throw r}})}listVectors(t){return dt(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Jn(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ln(r))return{data:null,error:r};throw r}})}queryVectors(t){return dt(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ln(r))return{data:null,error:r};throw r}})}deleteVectors(t){return dt(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Jn(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ln(r))return{data:null,error:r};throw r}})}}class X1{constructor(t,r={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Xg),r),this.fetch=af(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return dt(this,void 0,void 0,function*(){try{return{data:(yield Jn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ln(r))return{data:null,error:r};throw r}})}getBucket(t){return dt(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ln(r))return{data:null,error:r};throw r}})}listBuckets(){return dt(this,arguments,void 0,function*(t={}){try{return{data:yield Jn(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ln(r))return{data:null,error:r};throw r}})}deleteBucket(t){return dt(this,void 0,void 0,function*(){try{return{data:(yield Jn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ln(r))return{data:null,error:r};throw r}})}}class e2 extends X1{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new t2(this.url,this.headers,t,this.fetch)}createBucket(t){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return dt(this,void 0,void 0,function*(){return r.createBucket.call(this,t)})}getBucket(t){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return dt(this,void 0,void 0,function*(){return r.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return dt(this,arguments,void 0,function*(r={}){return t.listBuckets.call(this,r)})}deleteBucket(t){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return dt(this,void 0,void 0,function*(){return r.deleteBucket.call(this,t)})}}class t2 extends Y1{constructor(t,r,s,o){super(t,r,o),this.vectorBucketName=s}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return dt(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return dt(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return dt(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return dt(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new r2(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class r2 extends Z1{constructor(t,r,s,o,i){super(t,r,i),this.vectorBucketName=s,this.indexName=o}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return dt(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return dt(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return dt(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return dt(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return dt(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class N4 extends d4{constructor(t,r={},s,o){super(t,r,s,o)}from(t){return new c4(this.url,this.headers,t,this.fetch)}get vectors(){return new e2(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new K1(this.url+"/iceberg",this.headers,this.fetch)}}const S4=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:K1,StorageApiError:G1,StorageClient:N4,StorageError:gd,StorageUnknownError:_h,StorageVectorsApiError:ih,StorageVectorsClient:e2,StorageVectorsError:ex,get StorageVectorsErrorCode(){return ag},StorageVectorsUnknownError:Q1,VectorBucketApi:X1,VectorBucketScope:t2,VectorDataApi:Z1,VectorIndexApi:Y1,VectorIndexScope:r2,isPlainObject:J1,isStorageError:or,isStorageVectorsError:Ln,normalizeToFloat32:v4,resolveFetch:af,resolveResponse:x4,validateVectorDimension:y4},Symbol.toStringTag,{value:"Module"})),k4=fd(S4);var dp={},Ic={},Ny;function _4(){return Ny||(Ny=1,Object.defineProperty(Ic,"__esModule",{value:!0}),Ic.version=void 0,Ic.version="2.87.2"),Ic}var Sy;function C4(){return Sy||(Sy=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_REALTIME_OPTIONS=e.DEFAULT_AUTH_OPTIONS=e.DEFAULT_DB_OPTIONS=e.DEFAULT_GLOBAL_OPTIONS=e.DEFAULT_HEADERS=void 0;const t=_4();let r="";typeof Deno<"u"?r="deno":typeof document<"u"?r="web":typeof navigator<"u"&&navigator.product==="ReactNative"?r="react-native":r="node",e.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${r}/${t.version}`},e.DEFAULT_GLOBAL_OPTIONS={headers:e.DEFAULT_HEADERS},e.DEFAULT_DB_OPTIONS={schema:"public"},e.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},e.DEFAULT_REALTIME_OPTIONS={}})(dp)),dp}var up={},ky;function E4(){return ky||(ky=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchWithAuth=e.resolveHeadersConstructor=e.resolveFetch=void 0;const t=o=>o?(...i)=>o(...i):(...i)=>fetch(...i);e.resolveFetch=t;const r=()=>Headers;e.resolveHeadersConstructor=r;const s=(o,i,c)=>{const d=(0,e.resolveFetch)(c),h=(0,e.resolveHeadersConstructor)();return async(f,p)=>{var v;const x=(v=await i())!==null&&v!==void 0?v:o;let w=new h(p?.headers);return w.has("apikey")||w.set("apikey",o),w.has("Authorization")||w.set("Authorization",`Bearer ${x}`),d(f,Object.assign(Object.assign({},p),{headers:w}))}};e.fetchWithAuth=s})(up)),up}var Ra={},_y;function A4(){if(_y)return Ra;_y=1,Object.defineProperty(Ra,"__esModule",{value:!0}),Ra.isBrowser=void 0,Ra.uuid=e,Ra.ensureTrailingSlash=t,Ra.applySettingDefaults=s,Ra.validateSupabaseUrl=o;function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var c=Math.random()*16|0,d=i=="x"?c:c&3|8;return d.toString(16)})}function t(i){return i.endsWith("/")?i:i+"/"}const r=()=>typeof window<"u";Ra.isBrowser=r;function s(i,c){var d,h;const{db:f,auth:p,realtime:v,global:x}=i,{db:w,auth:y,realtime:S,global:C}=c,T={db:Object.assign(Object.assign({},w),f),auth:Object.assign(Object.assign({},y),p),realtime:Object.assign(Object.assign({},S),v),storage:{},global:Object.assign(Object.assign(Object.assign({},C),x),{headers:Object.assign(Object.assign({},(d=C?.headers)!==null&&d!==void 0?d:{}),(h=x?.headers)!==null&&h!==void 0?h:{})}),accessToken:async()=>""};return i.accessToken?T.accessToken=i.accessToken:delete T.accessToken,T}function o(i){const c=i?.trim();if(!c)throw new Error("supabaseUrl is required.");if(!c.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t(c))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return Ra}var Tc={};const n2=fd(IC);var Cy;function I4(){if(Cy)return Tc;Cy=1,Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.SupabaseAuthClient=void 0;const e=n2;let t=class extends e.AuthClient{constructor(s){super(s)}};return Tc.SupabaseAuthClient=t,Tc}var Ey;function Ay(){if(Ey)return Wu;Ey=1,Object.defineProperty(Wu,"__esModule",{value:!0});const e=z1,t=Jg(),r=q1,s=k4,o=C4(),i=E4(),c=A4(),d=I4();class h{constructor(p,v,x){var w,y,S;this.supabaseUrl=p,this.supabaseKey=v;const C=(0,c.validateSupabaseUrl)(p);if(!v)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",C),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",C),this.storageUrl=new URL("storage/v1",C),this.functionsUrl=new URL("functions/v1",C);const T=`sb-${C.hostname.split(".")[0]}-auth-token`,A={db:o.DEFAULT_DB_OPTIONS,realtime:o.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},o.DEFAULT_AUTH_OPTIONS),{storageKey:T}),global:o.DEFAULT_GLOBAL_OPTIONS},I=(0,c.applySettingDefaults)(x??{},A);this.storageKey=(w=I.auth.storageKey)!==null&&w!==void 0?w:"",this.headers=(y=I.global.headers)!==null&&y!==void 0?y:{},I.accessToken?(this.accessToken=I.accessToken,this.auth=new Proxy({},{get:(O,P)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(P)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((S=I.auth)!==null&&S!==void 0?S:{},this.headers,I.global.fetch),this.fetch=(0,i.fetchWithAuth)(v,this._getAccessToken.bind(this),I.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},I.realtime)),this.accessToken&&this.accessToken().then(O=>this.realtime.setAuth(O)).catch(O=>console.warn("Failed to set initial Realtime auth token:",O)),this.rest=new t.PostgrestClient(new URL("rest/v1",C).href,{headers:this.headers,schema:I.db.schema,fetch:this.fetch}),this.storage=new s.StorageClient(this.storageUrl.href,this.headers,this.fetch,x?.storage),I.accessToken||this._listenForAuthEvents()}get functions(){return new e.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(p){return this.rest.from(p)}schema(p){return this.rest.schema(p)}rpc(p,v={},x={head:!1,get:!1,count:void 0}){return this.rest.rpc(p,v,x)}channel(p,v={config:{}}){return this.realtime.channel(p,v)}getChannels(){return this.realtime.getChannels()}removeChannel(p){return this.realtime.removeChannel(p)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var p,v;if(this.accessToken)return await this.accessToken();const{data:x}=await this.auth.getSession();return(v=(p=x.session)===null||p===void 0?void 0:p.access_token)!==null&&v!==void 0?v:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:p,persistSession:v,detectSessionInUrl:x,storage:w,userStorage:y,storageKey:S,flowType:C,lock:T,debug:A,throwOnError:I},O,P){const $={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new d.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},$),O),storageKey:S,autoRefreshToken:p,persistSession:v,detectSessionInUrl:x,storage:w,userStorage:y,flowType:C,lock:T,debug:A,throwOnError:I,fetch:P,hasCustomAuthorizationHeader:Object.keys(this.headers).some(F=>F.toLowerCase()==="authorization")})}_initRealtimeClient(p){return new r.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},p),{params:Object.assign({apikey:this.supabaseKey},p?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((v,x)=>{this._handleTokenChanged(v,"CLIENT",x?.access_token)})}_handleTokenChanged(p,v,x){(p==="TOKEN_REFRESHED"||p==="SIGNED_IN")&&this.changedAccessToken!==x?(this.changedAccessToken=x,this.realtime.setAuth(x)):p==="SIGNED_OUT"&&(this.realtime.setAuth(),v=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return Wu.default=h,Wu}var Iy;function T4(){return Iy||(Iy=1,(function(e){var t=Da&&Da.__createBinding||(Object.create?(function(p,v,x,w){w===void 0&&(w=x);var y=Object.getOwnPropertyDescriptor(v,x);(!y||("get"in y?!v.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return v[x]}}),Object.defineProperty(p,w,y)}):(function(p,v,x,w){w===void 0&&(w=x),p[w]=v[x]})),r=Da&&Da.__exportStar||function(p,v){for(var x in p)x!=="default"&&!Object.prototype.hasOwnProperty.call(v,x)&&t(v,p,x)},s=Da&&Da.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0}),e.createClient=e.SupabaseClient=e.FunctionRegion=e.FunctionsError=e.FunctionsRelayError=e.FunctionsFetchError=e.FunctionsHttpError=e.PostgrestError=void 0;const o=s(Ay());r(n2,e);var i=Jg();Object.defineProperty(e,"PostgrestError",{enumerable:!0,get:function(){return i.PostgrestError}});var c=z1;Object.defineProperty(e,"FunctionsHttpError",{enumerable:!0,get:function(){return c.FunctionsHttpError}}),Object.defineProperty(e,"FunctionsFetchError",{enumerable:!0,get:function(){return c.FunctionsFetchError}}),Object.defineProperty(e,"FunctionsRelayError",{enumerable:!0,get:function(){return c.FunctionsRelayError}}),Object.defineProperty(e,"FunctionsError",{enumerable:!0,get:function(){return c.FunctionsError}}),Object.defineProperty(e,"FunctionRegion",{enumerable:!0,get:function(){return c.FunctionRegion}}),r(q1,e);var d=Ay();Object.defineProperty(e,"SupabaseClient",{enumerable:!0,get:function(){return s(d).default}});const h=(p,v,x)=>new o.default(p,v,x);e.createClient=h;function f(){if(typeof window<"u"||typeof process>"u")return!1;const p=process.version;if(p==null)return!1;const v=p.match(/^v(\d+)\./);return v?parseInt(v[1],10)<=18:!1}f()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(Da)),Da}var D4=T4();const R4=Al(D4),{SupabaseClient:PO,createClient:O4}=R4,P4=void 0,M4=void 0;console.warn("[Supabase] Faltan variables de entorno VITE_SUPABASE_URL o VITE_SUPABASE_PUBLISHABLE_KEY. Configralas en tu archivo de entorno (.env.local, .env.development, etc.). Nota: Tambin puedes usar VITE_SUPABASE_ANON_KEY para compatibilidad con keys antiguas.");const Ue=O4(P4,M4),ig=!1;console.log(" Modo produccin: usando Supabase");var oh={exports:{}},L4=oh.exports,Ty;function $4(){return Ty||(Ty=1,(function(e,t){(function(r,s){e.exports=s()})(L4,function(){var r=function(m,b){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,E){k.__proto__=E}||function(k,E){for(var D in E)Object.prototype.hasOwnProperty.call(E,D)&&(k[D]=E[D])})(m,b)},s=function(){return(s=Object.assign||function(m){for(var b,k=1,E=arguments.length;k<E;k++)for(var D in b=arguments[k])Object.prototype.hasOwnProperty.call(b,D)&&(m[D]=b[D]);return m}).apply(this,arguments)};function o(m,b,k){for(var E,D=0,M=b.length;D<M;D++)!E&&D in b||((E=E||Array.prototype.slice.call(b,0,D))[D]=b[D]);return m.concat(E||Array.prototype.slice.call(b))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:RS,c=Object.keys,d=Array.isArray;function h(m,b){return typeof b!="object"||c(b).forEach(function(k){m[k]=b[k]}),m}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var f=Object.getPrototypeOf,p={}.hasOwnProperty;function v(m,b){return p.call(m,b)}function x(m,b){typeof b=="function"&&(b=b(f(m))),(typeof Reflect>"u"?c:Reflect.ownKeys)(b).forEach(function(k){y(m,k,b[k])})}var w=Object.defineProperty;function y(m,b,k,E){w(m,b,h(k&&v(k,"get")&&typeof k.get=="function"?{get:k.get,set:k.set,configurable:!0}:{value:k,configurable:!0,writable:!0},E))}function S(m){return{from:function(b){return m.prototype=Object.create(b.prototype),y(m.prototype,"constructor",m),{extend:x.bind(null,m.prototype)}}}}var C=Object.getOwnPropertyDescriptor,T=[].slice;function A(m,b,k){return T.call(m,b,k)}function I(m,b){return b(m)}function O(m){if(!m)throw new Error("Assertion Failed")}function P(m){i.setImmediate?setImmediate(m):setTimeout(m,0)}function $(m,b){if(typeof b=="string"&&v(m,b))return m[b];if(!b)return m;if(typeof b!="string"){for(var k=[],E=0,D=b.length;E<D;++E){var M=$(m,b[E]);k.push(M)}return k}var G=b.indexOf(".");if(G!==-1){var Z=m[b.substr(0,G)];return Z==null?void 0:$(Z,b.substr(G+1))}}function F(m,b,k){if(m&&b!==void 0&&!("isFrozen"in Object&&Object.isFrozen(m)))if(typeof b!="string"&&"length"in b){O(typeof k!="string"&&"length"in k);for(var E=0,D=b.length;E<D;++E)F(m,b[E],k[E])}else{var M,G,Z=b.indexOf(".");Z!==-1?(M=b.substr(0,Z),(G=b.substr(Z+1))===""?k===void 0?d(m)&&!isNaN(parseInt(M))?m.splice(M,1):delete m[M]:m[M]=k:F(Z=!(Z=m[M])||!v(m,M)?m[M]={}:Z,G,k)):k===void 0?d(m)&&!isNaN(parseInt(b))?m.splice(b,1):delete m[b]:m[b]=k}}function te(m){var b,k={};for(b in m)v(m,b)&&(k[b]=m[b]);return k}var ne=[].concat;function Ee(m){return ne.apply([],m)}var nt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ee([8,16,32,64].map(function(m){return["Int","Uint","Float"].map(function(b){return b+m+"Array"})}))).filter(function(m){return i[m]}),Se=new Set(nt.map(function(m){return i[m]})),De=null;function U(m){return De=new WeakMap,m=(function b(k){if(!k||typeof k!="object")return k;var E=De.get(k);if(E)return E;if(d(k)){E=[],De.set(k,E);for(var D=0,M=k.length;D<M;++D)E.push(b(k[D]))}else if(Se.has(k.constructor))E=k;else{var G,Z=f(k);for(G in E=Z===Object.prototype?{}:Object.create(Z),De.set(k,E),k)v(k,G)&&(E[G]=b(k[G]))}return E})(m),De=null,m}var H={}.toString;function ye(m){return H.call(m).slice(8,-1)}var R=typeof Symbol<"u"?Symbol.iterator:"@@iterator",de=typeof R=="symbol"?function(m){var b;return m!=null&&(b=m[R])&&b.apply(m)}:function(){return null};function V(m,b){return b=m.indexOf(b),0<=b&&m.splice(b,1),0<=b}var he={};function K(m){var b,k,E,D;if(arguments.length===1){if(d(m))return m.slice();if(this===he&&typeof m=="string")return[m];if(D=de(m)){for(k=[];!(E=D.next()).done;)k.push(E.value);return k}if(m==null)return[m];if(typeof(b=m.length)!="number")return[m];for(k=new Array(b);b--;)k[b]=m[b];return k}for(b=arguments.length,k=new Array(b);b--;)k[b]=arguments[b];return k}var B=typeof Symbol<"u"?function(m){return m[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Fe=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],jn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Fe),re={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ae(m,b){this.name=m,this.message=b}function z(m,b){return m+". Errors: "+Object.keys(b).map(function(k){return b[k].toString()}).filter(function(k,E,D){return D.indexOf(k)===E}).join(`
`)}function ge(m,b,k,E){this.failures=b,this.failedKeys=E,this.successCount=k,this.message=z(m,b)}function Pe(m,b){this.name="BulkError",this.failures=Object.keys(b).map(function(k){return b[k]}),this.failuresByPos=b,this.message=z(m,this.failures)}S(ae).from(Error).extend({toString:function(){return this.name+": "+this.message}}),S(ge).from(ae),S(Pe).from(ae);var we=jn.reduce(function(m,b){return m[b]=b+"Error",m},{}),Q=ae,ke=jn.reduce(function(m,b){var k=b+"Error";function E(D,M){this.name=k,D?typeof D=="string"?(this.message="".concat(D).concat(M?`
 `+M:""),this.inner=M||null):typeof D=="object"&&(this.message="".concat(D.name," ").concat(D.message),this.inner=D):(this.message=re[b]||k,this.inner=null)}return S(E).from(Q),m[b]=E,m},{});ke.Syntax=SyntaxError,ke.Type=TypeError,ke.Range=RangeError;var q=Fe.reduce(function(m,b){return m[b+"Error"]=ke[b],m},{}),ce=jn.reduce(function(m,b){return["Syntax","Type","Range"].indexOf(b)===-1&&(m[b+"Error"]=ke[b]),m},{});function J(){}function qe(m){return m}function Be(m,b){return m==null||m===qe?b:function(k){return b(m(k))}}function ee(m,b){return function(){m.apply(this,arguments),b.apply(this,arguments)}}function Ye(m,b){return m===J?b:function(){var k=m.apply(this,arguments);k!==void 0&&(arguments[0]=k);var E=this.onsuccess,D=this.onerror;this.onsuccess=null,this.onerror=null;var M=b.apply(this,arguments);return E&&(this.onsuccess=this.onsuccess?ee(E,this.onsuccess):E),D&&(this.onerror=this.onerror?ee(D,this.onerror):D),M!==void 0?M:k}}function Ne(m,b){return m===J?b:function(){m.apply(this,arguments);var k=this.onsuccess,E=this.onerror;this.onsuccess=this.onerror=null,b.apply(this,arguments),k&&(this.onsuccess=this.onsuccess?ee(k,this.onsuccess):k),E&&(this.onerror=this.onerror?ee(E,this.onerror):E)}}function kt(m,b){return m===J?b:function(k){var E=m.apply(this,arguments);h(k,E);var D=this.onsuccess,M=this.onerror;return this.onsuccess=null,this.onerror=null,k=b.apply(this,arguments),D&&(this.onsuccess=this.onsuccess?ee(D,this.onsuccess):D),M&&(this.onerror=this.onerror?ee(M,this.onerror):M),E===void 0?k===void 0?void 0:k:h(E,k)}}function xt(m,b){return m===J?b:function(){return b.apply(this,arguments)!==!1&&m.apply(this,arguments)}}function X(m,b){return m===J?b:function(){var k=m.apply(this,arguments);if(k&&typeof k.then=="function"){for(var E=this,D=arguments.length,M=new Array(D);D--;)M[D]=arguments[D];return k.then(function(){return b.apply(E,M)})}return b.apply(this,arguments)}}ce.ModifyError=ge,ce.DexieError=ae,ce.BulkError=Pe;var xe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function W(m){xe=m}var Ae={},Le=100,nt=typeof Promise>"u"?[]:(function(){var m=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[m,f(m),m];var b=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[b,f(b),m]})(),Fe=nt[0],jn=nt[1],nt=nt[2],jn=jn&&jn.then,yt=Fe&&Fe.constructor,Nt=!!nt,Ft=function(m,b){qn.push([m,b]),It&&(queueMicrotask(Or),It=!1)},Rt=!0,It=!0,on=[],zn=[],ns=qe,ln={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:J,pgp:!1,env:{},finalize:J},lt=ln,qn=[],Qr=0,Hs=[];function st(m){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var b=this._PSD=lt;if(typeof m!="function"){if(m!==Ae)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&yr(this,this._value))}this._state=null,this._value=null,++b.ref,(function k(E,D){try{D(function(M){if(E._state===null){if(M===E)throw new TypeError("A promise cannot be resolved with itself.");var G=E._lib&&pr();M&&typeof M.then=="function"?k(E,function(Z,le){M instanceof st?M._then(Z,le):M.then(Z,le)}):(E._state=!0,E._value=M,_r(E)),G&&cn()}},yr.bind(null,E))}catch(M){yr(E,M)}})(this,m)}var ss={get:function(){var m=lt,b=Cn;function k(E,D){var M=this,G=!m.global&&(m!==lt||b!==Cn),Z=G&&!dn(),le=new st(function(ie,ve){vn(M,new Zt(Gl(E,m,G,Z),Gl(D,m,G,Z),ie,ve,m))});return this._consoleTask&&(le._consoleTask=this._consoleTask),le}return k.prototype=Ae,k},set:function(m){y(this,"then",m&&m.prototype===Ae?ss:{get:function(){return m},set:ss.set})}};function Zt(m,b,k,E,D){this.onFulfilled=typeof m=="function"?m:null,this.onRejected=typeof b=="function"?b:null,this.resolve=k,this.reject=E,this.psd=D}function yr(m,b){var k,E;zn.push(b),m._state===null&&(k=m._lib&&pr(),b=ns(b),m._state=!1,m._value=b,E=m,on.some(function(D){return D._value===E._value})||on.push(E),_r(m),k&&cn())}function _r(m){var b=m._listeners;m._listeners=[];for(var k=0,E=b.length;k<E;++k)vn(m,b[k]);var D=m._PSD;--D.ref||D.finalize(),Qr===0&&(++Qr,Ft(function(){--Qr==0&&Yt()},[]))}function vn(m,b){if(m._state!==null){var k=m._state?b.onFulfilled:b.onRejected;if(k===null)return(m._state?b.resolve:b.reject)(m._value);++b.psd.ref,++Qr,Ft(Jr,[k,m,b])}else m._listeners.push(b)}function Jr(m,b,k){try{var E,D=b._value;!b._state&&zn.length&&(zn=[]),E=xe&&b._consoleTask?b._consoleTask.run(function(){return m(D)}):m(D),b._state||zn.indexOf(D)!==-1||(function(M){for(var G=on.length;G;)if(on[--G]._value===M._value)return on.splice(G,1)})(b),k.resolve(E)}catch(M){k.reject(M)}finally{--Qr==0&&Yt(),--k.psd.ref||k.psd.finalize()}}function Or(){Qs(ln,function(){pr()&&cn()})}function pr(){var m=Rt;return It=Rt=!1,m}function cn(){var m,b,k;do for(;0<qn.length;)for(m=qn,qn=[],k=m.length,b=0;b<k;++b){var E=m[b];E[0].apply(null,E[1])}while(0<qn.length);It=Rt=!0}function Yt(){var m=on;on=[],m.forEach(function(E){E._PSD.onunhandled.call(null,E._value,E)});for(var b=Hs.slice(0),k=b.length;k;)b[--k]()}function Yr(m){return new st(Ae,!1,m)}function Ot(m,b){var k=lt;return function(){var E=pr(),D=lt;try{return Ks(k,!0),m.apply(this,arguments)}catch(M){b&&b(M)}finally{Ks(D,!1),E&&cn()}}}x(st.prototype,{then:ss,_then:function(m,b){vn(this,new Zt(null,null,m,b,lt))},catch:function(m){if(arguments.length===1)return this.then(null,m);var b=m,k=arguments[1];return typeof b=="function"?this.then(null,function(E){return(E instanceof b?k:Yr)(E)}):this.then(null,function(E){return(E&&E.name===b?k:Yr)(E)})},finally:function(m){return this.then(function(b){return st.resolve(m()).then(function(){return b})},function(b){return st.resolve(m()).then(function(){return Yr(b)})})},timeout:function(m,b){var k=this;return m<1/0?new st(function(E,D){var M=setTimeout(function(){return D(new ke.Timeout(b))},m);k.then(E,D).finally(clearTimeout.bind(null,M))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&y(st.prototype,Symbol.toStringTag,"Dexie.Promise"),ln.env=ql(),x(st,{all:function(){var m=K.apply(null,arguments).map(Ri);return new st(function(b,k){m.length===0&&b([]);var E=m.length;m.forEach(function(D,M){return st.resolve(D).then(function(G){m[M]=G,--E||b(m)},k)})})},resolve:function(m){return m instanceof st?m:m&&typeof m.then=="function"?new st(function(b,k){m.then(b,k)}):new st(Ae,!0,m)},reject:Yr,race:function(){var m=K.apply(null,arguments).map(Ri);return new st(function(b,k){m.map(function(E){return st.resolve(E).then(b,k)})})},PSD:{get:function(){return lt},set:function(m){return lt=m}},totalEchoes:{get:function(){return Cn}},newPSD:Ws,usePSD:Qs,scheduler:{get:function(){return Ft},set:function(m){Ft=m}},rejectionMapper:{get:function(){return ns},set:function(m){ns=m}},follow:function(m,b){return new st(function(k,E){return Ws(function(D,M){var G=lt;G.unhandleds=[],G.onunhandled=M,G.finalize=ee(function(){var Z,le=this;Z=function(){le.unhandleds.length===0?D():M(le.unhandleds[0])},Hs.push(function ie(){Z(),Hs.splice(Hs.indexOf(ie),1)}),++Qr,Ft(function(){--Qr==0&&Yt()},[])},G.finalize),m()},b,k,E)})}}),yt&&(yt.allSettled&&y(st,"allSettled",function(){var m=K.apply(null,arguments).map(Ri);return new st(function(b){m.length===0&&b([]);var k=m.length,E=new Array(k);m.forEach(function(D,M){return st.resolve(D).then(function(G){return E[M]={status:"fulfilled",value:G}},function(G){return E[M]={status:"rejected",reason:G}}).then(function(){return--k||b(E)})})})}),yt.any&&typeof AggregateError<"u"&&y(st,"any",function(){var m=K.apply(null,arguments).map(Ri);return new st(function(b,k){m.length===0&&k(new AggregateError([]));var E=m.length,D=new Array(E);m.forEach(function(M,G){return st.resolve(M).then(function(Z){return b(Z)},function(Z){D[G]=Z,--E||k(new AggregateError(D))})})})}),yt.withResolvers&&(st.withResolvers=yt.withResolvers));var Wt={awaits:0,echoes:0,id:0},Gn=0,yn=[],Pr=0,Cn=0,Di=0;function Ws(m,b,k,E){var D=lt,M=Object.create(D);return M.parent=D,M.ref=0,M.global=!1,M.id=++Di,ln.env,M.env=Nt?{Promise:st,PromiseProp:{value:st,configurable:!0,writable:!0},all:st.all,race:st.race,allSettled:st.allSettled,any:st.any,resolve:st.resolve,reject:st.reject}:{},b&&h(M,b),++D.ref,M.finalize=function(){--this.parent.ref||this.parent.finalize()},E=Qs(M,m,k,E),M.ref===0&&M.finalize(),E}function Ua(){return Wt.id||(Wt.id=++Gn),++Wt.awaits,Wt.echoes+=Le,Wt.id}function dn(){return!!Wt.awaits&&(--Wt.awaits==0&&(Wt.id=0),Wt.echoes=Wt.awaits*Le,!0)}function Ri(m){return Wt.echoes&&m&&m.constructor===yt?(Ua(),m.then(function(b){return dn(),b},function(b){return dn(),cr(b)})):m}function Ed(){var m=yn[yn.length-1];yn.pop(),Ks(m,!1)}function Ks(m,b){var k,E=lt;(b?!Wt.echoes||Pr++&&m===lt:!Pr||--Pr&&m===lt)||queueMicrotask(b?(function(D){++Cn,Wt.echoes&&--Wt.echoes!=0||(Wt.echoes=Wt.awaits=Wt.id=0),yn.push(lt),Ks(D,!0)}).bind(null,m):Ed),m!==lt&&(lt=m,E===ln&&(ln.env=ql()),Nt&&(k=ln.env.Promise,b=m.env,(E.global||m.global)&&(Object.defineProperty(i,"Promise",b.PromiseProp),k.all=b.all,k.race=b.race,k.resolve=b.resolve,k.reject=b.reject,b.allSettled&&(k.allSettled=b.allSettled),b.any&&(k.any=b.any))))}function ql(){var m=i.Promise;return Nt?{Promise:m,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:m.all,race:m.race,allSettled:m.allSettled,any:m.any,resolve:m.resolve,reject:m.reject}:{}}function Qs(m,b,k,E,D){var M=lt;try{return Ks(m,!0),b(k,E,D)}finally{Ks(M,!1)}}function Gl(m,b,k,E){return typeof m!="function"?m:function(){var D=lt;k&&Ua(),Ks(b,!0);try{return m.apply(this,arguments)}finally{Ks(D,!1),E&&queueMicrotask(dn)}}}function _o(m){Promise===yt&&Wt.echoes===0?Pr===0?m():enqueueNativeMicroTask(m):setTimeout(m,0)}(""+jn).indexOf("[native code]")===-1&&(Ua=dn=J);var cr=st.reject,ma="",Ht="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ad="String expected.",Js=[],Oi="__dbnames",za="readonly",Vl="readwrite";function Ys(m,b){return m?b?function(){return m.apply(this,arguments)&&b.apply(this,arguments)}:m:b}var Pi={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function bn(m){return typeof m!="string"||/\./.test(m)?function(b){return b}:function(b){return b[m]===void 0&&m in b&&delete(b=U(b))[m],b}}function Id(){throw ke.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function _t(m,b){try{var k=Td(m),E=Td(b);if(k!==E)return k==="Array"?1:E==="Array"?-1:k==="binary"?1:E==="binary"?-1:k==="string"?1:E==="string"?-1:k==="Date"?1:E!=="Date"?NaN:-1;switch(k){case"number":case"Date":case"string":return b<m?1:m<b?-1:0;case"binary":return(function(D,M){for(var G=D.length,Z=M.length,le=G<Z?G:Z,ie=0;ie<le;++ie)if(D[ie]!==M[ie])return D[ie]<M[ie]?-1:1;return G===Z?0:G<Z?-1:1})(Dd(m),Dd(b));case"Array":return(function(D,M){for(var G=D.length,Z=M.length,le=G<Z?G:Z,ie=0;ie<le;++ie){var ve=_t(D[ie],M[ie]);if(ve!==0)return ve}return G===Z?0:G<Z?-1:1})(m,b)}}catch{}return NaN}function Td(m){var b=typeof m;return b!="object"?b:ArrayBuffer.isView(m)?"binary":(m=ye(m),m==="ArrayBuffer"?"binary":m)}function Dd(m){return m instanceof Uint8Array?m:ArrayBuffer.isView(m)?new Uint8Array(m.buffer,m.byteOffset,m.byteLength):new Uint8Array(m)}function Co(m,b,k){var E=m.schema.yProps;return E?(b&&0<k.numFailures&&(b=b.filter(function(D,M){return!k.failures[M]})),Promise.all(E.map(function(D){return D=D.updatesTable,b?m.db.table(D).where("k").anyOf(b).delete():m.db.table(D).clear()})).then(function(){return k})):k}var Zs=(Mi.prototype.execute=function(m){var b=this["@@propmod"];if(b.add!==void 0){var k=b.add;if(d(k))return o(o([],d(m)?m:[],!0),k).sort();if(typeof k=="number")return(Number(m)||0)+k;if(typeof k=="bigint")try{return BigInt(m)+k}catch{return BigInt(0)+k}throw new TypeError("Invalid term ".concat(k))}if(b.remove!==void 0){var E=b.remove;if(d(E))return d(m)?m.filter(function(D){return!E.includes(D)}).sort():[];if(typeof E=="number")return Number(m)-E;if(typeof E=="bigint")try{return BigInt(m)-E}catch{return BigInt(0)-E}throw new TypeError("Invalid subtrahend ".concat(E))}return k=(k=b.replacePrefix)===null||k===void 0?void 0:k[0],k&&typeof m=="string"&&m.startsWith(k)?b.replacePrefix[1]+m.substring(k.length):m},Mi);function Mi(m){this["@@propmod"]=m}function qa(m,b){for(var k=c(b),E=k.length,D=!1,M=0;M<E;++M){var G=k[M],Z=b[G],le=$(m,G);Z instanceof Zs?(F(m,G,Z.execute(le)),D=!0):le!==Z&&(F(m,G,Z),D=!0)}return D}var Li=(Qt.prototype._trans=function(m,b,k){var E=this._tx||lt.trans,D=this.name,M=xe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(m==="readonly"?"read":"write"," ").concat(this.name));function G(ie,ve,se){if(!se.schema[D])throw new ke.NotFound("Table "+D+" not part of transaction");return b(se.idbtrans,se)}var Z=pr();try{var le=E&&E.db._novip===this.db._novip?E===lt.trans?E._promise(m,G,k):Ws(function(){return E._promise(m,G,k)},{trans:E,transless:lt.transless||lt}):(function ie(ve,se,je,ue){if(ve.idbdb&&(ve._state.openComplete||lt.letThrough||ve._vip)){var pe=ve._createTransaction(se,je,ve._dbSchema);try{pe.create(),ve._state.PR1398_maxLoop=3}catch(me){return me.name===we.InvalidState&&ve.isOpen()&&0<--ve._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ve.close({disableAutoOpen:!1}),ve.open().then(function(){return ie(ve,se,je,ue)})):cr(me)}return pe._promise(se,function(me,be){return Ws(function(){return lt.trans=pe,ue(me,be,pe)})}).then(function(me){if(se==="readwrite")try{pe.idbtrans.commit()}catch{}return se==="readonly"?me:pe._completion.then(function(){return me})})}if(ve._state.openComplete)return cr(new ke.DatabaseClosed(ve._state.dbOpenError));if(!ve._state.isBeingOpened){if(!ve._state.autoOpen)return cr(new ke.DatabaseClosed);ve.open().catch(J)}return ve._state.dbReadyPromise.then(function(){return ie(ve,se,je,ue)})})(this.db,m,[this.name],G);return M&&(le._consoleTask=M,le=le.catch(function(ie){return console.trace(ie),cr(ie)})),le}finally{Z&&cn()}},Qt.prototype.get=function(m,b){var k=this;return m&&m.constructor===Object?this.where(m).first(b):m==null?cr(new ke.Type("Invalid argument to Table.get()")):this._trans("readonly",function(E){return k.core.get({trans:E,key:m}).then(function(D){return k.hook.reading.fire(D)})}).then(b)},Qt.prototype.where=function(m){if(typeof m=="string")return new this.db.WhereClause(this,m);if(d(m))return new this.db.WhereClause(this,"[".concat(m.join("+"),"]"));var b=c(m);if(b.length===1)return this.where(b[0]).equals(m[b[0]]);var k=this.schema.indexes.concat(this.schema.primKey).filter(function(Z){if(Z.compound&&b.every(function(ie){return 0<=Z.keyPath.indexOf(ie)})){for(var le=0;le<b.length;++le)if(b.indexOf(Z.keyPath[le])===-1)return!1;return!0}return!1}).sort(function(Z,le){return Z.keyPath.length-le.keyPath.length})[0];if(k&&this.db._maxKey!==ma){var M=k.keyPath.slice(0,b.length);return this.where(M).equals(M.map(function(le){return m[le]}))}!k&&xe&&console.warn("The query ".concat(JSON.stringify(m)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(b.join("+"),"]"));var E=this.schema.idxByName;function D(Z,le){return _t(Z,le)===0}var G=b.reduce(function(se,le){var ie=se[0],ve=se[1],se=E[le],je=m[le];return[ie||se,ie||!se?Ys(ve,se&&se.multi?function(ue){return ue=$(ue,le),d(ue)&&ue.some(function(pe){return D(je,pe)})}:function(ue){return D(je,$(ue,le))}):ve]},[null,null]),M=G[0],G=G[1];return M?this.where(M.name).equals(m[M.keyPath]).filter(G):k?this.filter(G):this.where(b).equals("")},Qt.prototype.filter=function(m){return this.toCollection().and(m)},Qt.prototype.count=function(m){return this.toCollection().count(m)},Qt.prototype.offset=function(m){return this.toCollection().offset(m)},Qt.prototype.limit=function(m){return this.toCollection().limit(m)},Qt.prototype.each=function(m){return this.toCollection().each(m)},Qt.prototype.toArray=function(m){return this.toCollection().toArray(m)},Qt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Qt.prototype.orderBy=function(m){return new this.db.Collection(new this.db.WhereClause(this,d(m)?"[".concat(m.join("+"),"]"):m))},Qt.prototype.reverse=function(){return this.toCollection().reverse()},Qt.prototype.mapToClass=function(m){var b,k=this.db,E=this.name;function D(){return b!==null&&b.apply(this,arguments)||this}(this.schema.mappedClass=m).prototype instanceof Id&&((function(le,ie){if(typeof ie!="function"&&ie!==null)throw new TypeError("Class extends value "+String(ie)+" is not a constructor or null");function ve(){this.constructor=le}r(le,ie),le.prototype=ie===null?Object.create(ie):(ve.prototype=ie.prototype,new ve)})(D,b=m),Object.defineProperty(D.prototype,"db",{get:function(){return k},enumerable:!1,configurable:!0}),D.prototype.table=function(){return E},m=D);for(var M=new Set,G=m.prototype;G;G=f(G))Object.getOwnPropertyNames(G).forEach(function(le){return M.add(le)});function Z(le){if(!le)return le;var ie,ve=Object.create(m.prototype);for(ie in le)if(!M.has(ie))try{ve[ie]=le[ie]}catch{}return ve}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=Z,this.hook("reading",Z),m},Qt.prototype.defineClass=function(){return this.mapToClass(function(m){h(this,m)})},Qt.prototype.add=function(m,b){var k=this,E=this.schema.primKey,D=E.auto,M=E.keyPath,G=m;return M&&D&&(G=bn(M)(m)),this._trans("readwrite",function(Z){return k.core.mutate({trans:Z,type:"add",keys:b!=null?[b]:null,values:[G]})}).then(function(Z){return Z.numFailures?st.reject(Z.failures[0]):Z.lastResult}).then(function(Z){if(M)try{F(m,M,Z)}catch{}return Z})},Qt.prototype.upsert=function(m,b){var k=this,E=this.schema.primKey.keyPath;return this._trans("readwrite",function(D){return k.core.get({trans:D,key:m}).then(function(M){var G=M??{};return qa(G,b),E&&F(G,E,m),k.core.mutate({trans:D,type:"put",values:[G],keys:[m],upsert:!0,updates:{keys:[m],changeSpecs:[b]}}).then(function(Z){return Z.numFailures?st.reject(Z.failures[0]):!!M})})})},Qt.prototype.update=function(m,b){return typeof m!="object"||d(m)?this.where(":id").equals(m).modify(b):(m=$(m,this.schema.primKey.keyPath),m===void 0?cr(new ke.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(m).modify(b))},Qt.prototype.put=function(m,b){var k=this,E=this.schema.primKey,D=E.auto,M=E.keyPath,G=m;return M&&D&&(G=bn(M)(m)),this._trans("readwrite",function(Z){return k.core.mutate({trans:Z,type:"put",values:[G],keys:b!=null?[b]:null})}).then(function(Z){return Z.numFailures?st.reject(Z.failures[0]):Z.lastResult}).then(function(Z){if(M)try{F(m,M,Z)}catch{}return Z})},Qt.prototype.delete=function(m){var b=this;return this._trans("readwrite",function(k){return b.core.mutate({trans:k,type:"delete",keys:[m]}).then(function(E){return Co(b,[m],E)}).then(function(E){return E.numFailures?st.reject(E.failures[0]):void 0})})},Qt.prototype.clear=function(){var m=this;return this._trans("readwrite",function(b){return m.core.mutate({trans:b,type:"deleteRange",range:Pi}).then(function(k){return Co(m,null,k)})}).then(function(b){return b.numFailures?st.reject(b.failures[0]):void 0})},Qt.prototype.bulkGet=function(m){var b=this;return this._trans("readonly",function(k){return b.core.getMany({keys:m,trans:k}).then(function(E){return E.map(function(D){return b.hook.reading.fire(D)})})})},Qt.prototype.bulkAdd=function(m,b,k){var E=this,D=Array.isArray(b)?b:void 0,M=(k=k||(D?void 0:b))?k.allKeys:void 0;return this._trans("readwrite",function(G){var ie=E.schema.primKey,Z=ie.auto,ie=ie.keyPath;if(ie&&D)throw new ke.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(D&&D.length!==m.length)throw new ke.InvalidArgument("Arguments objects and keys must have the same length");var le=m.length,ie=ie&&Z?m.map(bn(ie)):m;return E.core.mutate({trans:G,type:"add",keys:D,values:ie,wantResults:M}).then(function(pe){var se=pe.numFailures,je=pe.results,ue=pe.lastResult,pe=pe.failures;if(se===0)return M?je:ue;throw new Pe("".concat(E.name,".bulkAdd(): ").concat(se," of ").concat(le," operations failed"),pe)})})},Qt.prototype.bulkPut=function(m,b,k){var E=this,D=Array.isArray(b)?b:void 0,M=(k=k||(D?void 0:b))?k.allKeys:void 0;return this._trans("readwrite",function(G){var ie=E.schema.primKey,Z=ie.auto,ie=ie.keyPath;if(ie&&D)throw new ke.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(D&&D.length!==m.length)throw new ke.InvalidArgument("Arguments objects and keys must have the same length");var le=m.length,ie=ie&&Z?m.map(bn(ie)):m;return E.core.mutate({trans:G,type:"put",keys:D,values:ie,wantResults:M}).then(function(pe){var se=pe.numFailures,je=pe.results,ue=pe.lastResult,pe=pe.failures;if(se===0)return M?je:ue;throw new Pe("".concat(E.name,".bulkPut(): ").concat(se," of ").concat(le," operations failed"),pe)})})},Qt.prototype.bulkUpdate=function(m){var b=this,k=this.core,E=m.map(function(G){return G.key}),D=m.map(function(G){return G.changes}),M=[];return this._trans("readwrite",function(G){return k.getMany({trans:G,keys:E,cache:"clone"}).then(function(Z){var le=[],ie=[];m.forEach(function(se,je){var ue=se.key,pe=se.changes,me=Z[je];if(me){for(var be=0,_e=Object.keys(pe);be<_e.length;be++){var Ie=_e[be],$e=pe[Ie];if(Ie===b.schema.primKey.keyPath){if(_t($e,ue)!==0)throw new ke.Constraint("Cannot update primary key in bulkUpdate()")}else F(me,Ie,$e)}M.push(je),le.push(ue),ie.push(me)}});var ve=le.length;return k.mutate({trans:G,type:"put",keys:le,values:ie,updates:{keys:E,changeSpecs:D}}).then(function(se){var je=se.numFailures,ue=se.failures;if(je===0)return ve;for(var pe=0,me=Object.keys(ue);pe<me.length;pe++){var be,_e=me[pe],Ie=M[Number(_e)];Ie!=null&&(be=ue[_e],delete ue[_e],ue[Ie]=be)}throw new Pe("".concat(b.name,".bulkUpdate(): ").concat(je," of ").concat(ve," operations failed"),ue)})})})},Qt.prototype.bulkDelete=function(m){var b=this,k=m.length;return this._trans("readwrite",function(E){return b.core.mutate({trans:E,type:"delete",keys:m}).then(function(D){return Co(b,m,D)})}).then(function(G){var D=G.numFailures,M=G.lastResult,G=G.failures;if(D===0)return M;throw new Pe("".concat(b.name,".bulkDelete(): ").concat(D," of ").concat(k," operations failed"),G)})},Qt);function Qt(){}function $i(m){function b(G,Z){if(Z){for(var le=arguments.length,ie=new Array(le-1);--le;)ie[le-1]=arguments[le];return k[G].subscribe.apply(null,ie),m}if(typeof G=="string")return k[G]}var k={};b.addEventType=M;for(var E=1,D=arguments.length;E<D;++E)M(arguments[E]);return b;function M(G,Z,le){if(typeof G!="object"){var ie;Z=Z||xt;var ve={subscribers:[],fire:le=le||J,subscribe:function(se){ve.subscribers.indexOf(se)===-1&&(ve.subscribers.push(se),ve.fire=Z(ve.fire,se))},unsubscribe:function(se){ve.subscribers=ve.subscribers.filter(function(je){return je!==se}),ve.fire=ve.subscribers.reduce(Z,le)}};return k[G]=b[G]=ve}c(ie=G).forEach(function(se){var je=ie[se];if(d(je))M(se,ie[se][0],ie[se][1]);else{if(je!=="asap")throw new ke.InvalidArgument("Invalid event config");var ue=M(se,qe,function(){for(var pe=arguments.length,me=new Array(pe);pe--;)me[pe]=arguments[pe];ue.subscribers.forEach(function(be){P(function(){be.apply(null,me)})})})}})}}function pa(m,b){return S(b).from({prototype:m}),b}function ga(m,b){return!(m.filter||m.algorithm||m.or)&&(b?m.justLimit:!m.replayFilter)}function Fi(m,b){m.filter=Ys(m.filter,b)}function xa(m,b,k){var E=m.replayFilter;m.replayFilter=E?function(){return Ys(E(),b())}:b,m.justLimit=k&&!E}function Eo(m,b){if(m.isPrimKey)return b.primaryKey;var k=b.getIndexByKeyPath(m.index);if(!k)throw new ke.Schema("KeyPath "+m.index+" on object store "+b.name+" is not indexed");return k}function Ao(m,b,k){var E=Eo(m,b.schema);return b.openCursor({trans:k,values:!m.keysOnly,reverse:m.dir==="prev",unique:!!m.unique,query:{index:E,range:m.range}})}function zt(m,b,k,E){var D=m.replayFilter?Ys(m.filter,m.replayFilter()):m.filter;if(m.or){var M={},G=function(Z,le,ie){var ve,se;D&&!D(le,ie,function(je){return le.stop(je)},function(je){return le.fail(je)})||((se=""+(ve=le.primaryKey))=="[object ArrayBuffer]"&&(se=""+new Uint8Array(ve)),v(M,se)||(M[se]=!0,b(Z,le,ie)))};return Promise.all([m.or._iterate(G,k),Hl(Ao(m,E,k),m.algorithm,G,!m.keysOnly&&m.valueMapper)])}return Hl(Ao(m,E,k),Ys(m.algorithm,D),b,!m.keysOnly&&m.valueMapper)}function Hl(m,b,k,E){var D=Ot(E?function(M,G,Z){return k(E(M),G,Z)}:k);return m.then(function(M){if(M)return M.start(function(){var G=function(){return M.continue()};b&&!b(M,function(Z){return G=Z},function(Z){M.stop(Z),G=J},function(Z){M.fail(Z),G=J})||D(M.value,M,function(Z){return G=Z}),G()})})}var Rd=(Bt.prototype._read=function(m,b){var k=this._ctx;return k.error?k.table._trans(null,cr.bind(null,k.error)):k.table._trans("readonly",m).then(b)},Bt.prototype._write=function(m){var b=this._ctx;return b.error?b.table._trans(null,cr.bind(null,b.error)):b.table._trans("readwrite",m,"locked")},Bt.prototype._addAlgorithm=function(m){var b=this._ctx;b.algorithm=Ys(b.algorithm,m)},Bt.prototype._iterate=function(m,b){return zt(this._ctx,m,b,this._ctx.table.core)},Bt.prototype.clone=function(m){var b=Object.create(this.constructor.prototype),k=Object.create(this._ctx);return m&&h(k,m),b._ctx=k,b},Bt.prototype.raw=function(){return this._ctx.valueMapper=null,this},Bt.prototype.each=function(m){var b=this._ctx;return this._read(function(k){return zt(b,m,k,b.table.core)})},Bt.prototype.count=function(m){var b=this;return this._read(function(k){var E=b._ctx,D=E.table.core;if(ga(E,!0))return D.count({trans:k,query:{index:Eo(E,D.schema),range:E.range}}).then(function(G){return Math.min(G,E.limit)});var M=0;return zt(E,function(){return++M,!1},k,D).then(function(){return M})}).then(m)},Bt.prototype.sortBy=function(m,b){var k=m.split(".").reverse(),E=k[0],D=k.length-1;function M(le,ie){return ie?M(le[k[ie]],ie-1):le[E]}var G=this._ctx.dir==="next"?1:-1;function Z(le,ie){return _t(M(le,D),M(ie,D))*G}return this.toArray(function(le){return le.sort(Z)}).then(b)},Bt.prototype.toArray=function(m){var b=this;return this._read(function(k){var E=b._ctx;if(E.dir==="next"&&ga(E,!0)&&0<E.limit){var D=E.valueMapper,M=Eo(E,E.table.core.schema);return E.table.core.query({trans:k,limit:E.limit,values:!0,query:{index:M,range:E.range}}).then(function(Z){return Z=Z.result,D?Z.map(D):Z})}var G=[];return zt(E,function(Z){return G.push(Z)},k,E.table.core).then(function(){return G})},m)},Bt.prototype.offset=function(m){var b=this._ctx;return m<=0||(b.offset+=m,ga(b)?xa(b,function(){var k=m;return function(E,D){return k===0||(k===1?--k:D(function(){E.advance(k),k=0}),!1)}}):xa(b,function(){var k=m;return function(){return--k<0}})),this},Bt.prototype.limit=function(m){return this._ctx.limit=Math.min(this._ctx.limit,m),xa(this._ctx,function(){var b=m;return function(k,E,D){return--b<=0&&E(D),0<=b}},!0),this},Bt.prototype.until=function(m,b){return Fi(this._ctx,function(k,E,D){return!m(k.value)||(E(D),b)}),this},Bt.prototype.first=function(m){return this.limit(1).toArray(function(b){return b[0]}).then(m)},Bt.prototype.last=function(m){return this.reverse().first(m)},Bt.prototype.filter=function(m){var b;return Fi(this._ctx,function(k){return m(k.value)}),(b=this._ctx).isMatch=Ys(b.isMatch,m),this},Bt.prototype.and=function(m){return this.filter(m)},Bt.prototype.or=function(m){return new this.db.WhereClause(this._ctx.table,m,this)},Bt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Bt.prototype.desc=function(){return this.reverse()},Bt.prototype.eachKey=function(m){var b=this._ctx;return b.keysOnly=!b.isMatch,this.each(function(k,E){m(E.key,E)})},Bt.prototype.eachUniqueKey=function(m){return this._ctx.unique="unique",this.eachKey(m)},Bt.prototype.eachPrimaryKey=function(m){var b=this._ctx;return b.keysOnly=!b.isMatch,this.each(function(k,E){m(E.primaryKey,E)})},Bt.prototype.keys=function(m){var b=this._ctx;b.keysOnly=!b.isMatch;var k=[];return this.each(function(E,D){k.push(D.key)}).then(function(){return k}).then(m)},Bt.prototype.primaryKeys=function(m){var b=this._ctx;if(b.dir==="next"&&ga(b,!0)&&0<b.limit)return this._read(function(E){var D=Eo(b,b.table.core.schema);return b.table.core.query({trans:E,values:!1,limit:b.limit,query:{index:D,range:b.range}})}).then(function(E){return E.result}).then(m);b.keysOnly=!b.isMatch;var k=[];return this.each(function(E,D){k.push(D.primaryKey)}).then(function(){return k}).then(m)},Bt.prototype.uniqueKeys=function(m){return this._ctx.unique="unique",this.keys(m)},Bt.prototype.firstKey=function(m){return this.limit(1).keys(function(b){return b[0]}).then(m)},Bt.prototype.lastKey=function(m){return this.reverse().firstKey(m)},Bt.prototype.distinct=function(){var m=this._ctx,m=m.index&&m.table.schema.idxByName[m.index];if(!m||!m.multi)return this;var b={};return Fi(this._ctx,function(D){var E=D.primaryKey.toString(),D=v(b,E);return b[E]=!0,!D}),this},Bt.prototype.modify=function(m){var b=this,k=this._ctx;return this._write(function(E){var D=typeof m=="function"?m:function(me){return qa(me,m)},M=k.table.core,ie=M.schema.primaryKey,G=ie.outbound,Z=ie.extractKey,le=200,ie=b.db._options.modifyChunkSize;ie&&(le=typeof ie=="object"?ie[M.name]||ie["*"]||200:ie);function ve(me,Ie){var _e=Ie.failures,Ie=Ie.numFailures;je+=me-Ie;for(var $e=0,ze=c(_e);$e<ze.length;$e++){var Qe=ze[$e];se.push(_e[Qe])}}var se=[],je=0,ue=[],pe=m===Wl;return b.clone().primaryKeys().then(function(me){function be(Ie){var $e=Math.min(le,me.length-Ie),ze=me.slice(Ie,Ie+$e);return(pe?Promise.resolve([]):M.getMany({trans:E,keys:ze,cache:"immutable"})).then(function(Qe){var tt=[],We=[],Je=G?[]:null,rt=pe?ze:[];if(!pe)for(var Xe=0;Xe<$e;++Xe){var it=Qe[Xe],At={value:U(it),primKey:me[Ie+Xe]};D.call(At,At.value,At)!==!1&&(At.value==null?rt.push(me[Ie+Xe]):G||_t(Z(it),Z(At.value))===0?(We.push(At.value),G&&Je.push(me[Ie+Xe])):(rt.push(me[Ie+Xe]),tt.push(At.value)))}return Promise.resolve(0<tt.length&&M.mutate({trans:E,type:"add",values:tt}).then(function(Tt){for(var Pt in Tt.failures)rt.splice(parseInt(Pt),1);ve(tt.length,Tt)})).then(function(){return(0<We.length||_e&&typeof m=="object")&&M.mutate({trans:E,type:"put",keys:Je,values:We,criteria:_e,changeSpec:typeof m!="function"&&m,isAdditionalChunk:0<Ie}).then(function(Tt){return ve(We.length,Tt)})}).then(function(){return(0<rt.length||_e&&pe)&&M.mutate({trans:E,type:"delete",keys:rt,criteria:_e,isAdditionalChunk:0<Ie}).then(function(Tt){return Co(k.table,rt,Tt)}).then(function(Tt){return ve(rt.length,Tt)})}).then(function(){return me.length>Ie+$e&&be(Ie+le)})})}var _e=ga(k)&&k.limit===1/0&&(typeof m!="function"||pe)&&{index:k.index,range:k.range};return be(0).then(function(){if(0<se.length)throw new ge("Error modifying one or more objects",se,je,ue);return me.length})})})},Bt.prototype.delete=function(){var m=this._ctx,b=m.range;return!ga(m)||m.table.schema.yProps||!m.isPrimKey&&b.type!==3?this.modify(Wl):this._write(function(k){var E=m.table.core.schema.primaryKey,D=b;return m.table.core.count({trans:k,query:{index:E,range:D}}).then(function(M){return m.table.core.mutate({trans:k,type:"deleteRange",range:D}).then(function(le){var Z=le.failures,le=le.numFailures;if(le)throw new ge("Could not delete some values",Object.keys(Z).map(function(ie){return Z[ie]}),M-le);return M-le})})})},Bt);function Bt(){}var Wl=function(m,b){return b.value=null};function Od(m,b){return m<b?-1:m===b?0:1}function Pd(m,b){return b<m?-1:m===b?0:1}function Zr(m,b,k){return m=m instanceof Ga?new m.Collection(m):m,m._ctx.error=new(k||TypeError)(b),m}function ys(m){return new m.Collection(m,function(){return bs("")}).limit(0)}function Vn(m,b,k,E){var D,M,G,Z,le,ie,ve,se=k.length;if(!k.every(function(pe){return typeof pe=="string"}))return Zr(m,Ad);function je(pe){D=pe==="next"?function(be){return be.toUpperCase()}:function(be){return be.toLowerCase()},M=pe==="next"?function(be){return be.toLowerCase()}:function(be){return be.toUpperCase()},G=pe==="next"?Od:Pd;var me=k.map(function(be){return{lower:M(be),upper:D(be)}}).sort(function(be,_e){return G(be.lower,_e.lower)});Z=me.map(function(be){return be.upper}),le=me.map(function(be){return be.lower}),ve=(ie=pe)==="next"?"":E}je("next"),m=new m.Collection(m,function(){return Xr(Z[0],le[se-1]+E)}),m._ondirectionchange=function(pe){je(pe)};var ue=0;return m._addAlgorithm(function(pe,me,be){var _e=pe.key;if(typeof _e!="string")return!1;var Ie=M(_e);if(b(Ie,le,ue))return!0;for(var $e=null,ze=ue;ze<se;++ze){var Qe=(function(tt,We,Je,rt,Xe,it){for(var At=Math.min(tt.length,rt.length),Tt=-1,Pt=0;Pt<At;++Pt){var un=We[Pt];if(un!==rt[Pt])return Xe(tt[Pt],Je[Pt])<0?tt.substr(0,Pt)+Je[Pt]+Je.substr(Pt+1):Xe(tt[Pt],rt[Pt])<0?tt.substr(0,Pt)+rt[Pt]+Je.substr(Pt+1):0<=Tt?tt.substr(0,Tt)+We[Tt]+Je.substr(Tt+1):null;Xe(tt[Pt],un)<0&&(Tt=Pt)}return At<rt.length&&it==="next"?tt+Je.substr(tt.length):At<tt.length&&it==="prev"?tt.substr(0,Je.length):Tt<0?null:tt.substr(0,Tt)+rt[Tt]+Je.substr(Tt+1)})(_e,Ie,Z[ze],le[ze],G,ie);Qe===null&&$e===null?ue=ze+1:($e===null||0<G($e,Qe))&&($e=Qe)}return me($e!==null?function(){pe.continue($e+ve)}:be),!1}),m}function Xr(m,b,k,E){return{type:2,lower:m,upper:b,lowerOpen:k,upperOpen:E}}function bs(m){return{type:1,lower:m,upper:m}}var Ga=(Object.defineProperty(sr.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),sr.prototype.between=function(m,b,k,E){k=k!==!1,E=E===!0;try{return 0<this._cmp(m,b)||this._cmp(m,b)===0&&(k||E)&&(!k||!E)?ys(this):new this.Collection(this,function(){return Xr(m,b,!k,!E)})}catch{return Zr(this,Ht)}},sr.prototype.equals=function(m){return m==null?Zr(this,Ht):new this.Collection(this,function(){return bs(m)})},sr.prototype.above=function(m){return m==null?Zr(this,Ht):new this.Collection(this,function(){return Xr(m,void 0,!0)})},sr.prototype.aboveOrEqual=function(m){return m==null?Zr(this,Ht):new this.Collection(this,function(){return Xr(m,void 0,!1)})},sr.prototype.below=function(m){return m==null?Zr(this,Ht):new this.Collection(this,function(){return Xr(void 0,m,!1,!0)})},sr.prototype.belowOrEqual=function(m){return m==null?Zr(this,Ht):new this.Collection(this,function(){return Xr(void 0,m)})},sr.prototype.startsWith=function(m){return typeof m!="string"?Zr(this,Ad):this.between(m,m+ma,!0,!0)},sr.prototype.startsWithIgnoreCase=function(m){return m===""?this.startsWith(m):Vn(this,function(b,k){return b.indexOf(k[0])===0},[m],ma)},sr.prototype.equalsIgnoreCase=function(m){return Vn(this,function(b,k){return b===k[0]},[m],"")},sr.prototype.anyOfIgnoreCase=function(){var m=K.apply(he,arguments);return m.length===0?ys(this):Vn(this,function(b,k){return k.indexOf(b)!==-1},m,"")},sr.prototype.startsWithAnyOfIgnoreCase=function(){var m=K.apply(he,arguments);return m.length===0?ys(this):Vn(this,function(b,k){return k.some(function(E){return b.indexOf(E)===0})},m,ma)},sr.prototype.anyOf=function(){var m=this,b=K.apply(he,arguments),k=this._cmp;try{b.sort(k)}catch{return Zr(this,Ht)}if(b.length===0)return ys(this);var E=new this.Collection(this,function(){return Xr(b[0],b[b.length-1])});E._ondirectionchange=function(M){k=M==="next"?m._ascending:m._descending,b.sort(k)};var D=0;return E._addAlgorithm(function(M,G,Z){for(var le=M.key;0<k(le,b[D]);)if(++D===b.length)return G(Z),!1;return k(le,b[D])===0||(G(function(){M.continue(b[D])}),!1)}),E},sr.prototype.notEqual=function(m){return this.inAnyRange([[-1/0,m],[m,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},sr.prototype.noneOf=function(){var m=K.apply(he,arguments);if(m.length===0)return new this.Collection(this);try{m.sort(this._ascending)}catch{return Zr(this,Ht)}var b=m.reduce(function(k,E){return k?k.concat([[k[k.length-1][1],E]]):[[-1/0,E]]},null);return b.push([m[m.length-1],this.db._maxKey]),this.inAnyRange(b,{includeLowers:!1,includeUppers:!1})},sr.prototype.inAnyRange=function(_e,b){var k=this,E=this._cmp,D=this._ascending,M=this._descending,G=this._min,Z=this._max;if(_e.length===0)return ys(this);if(!_e.every(function(Ie){return Ie[0]!==void 0&&Ie[1]!==void 0&&D(Ie[0],Ie[1])<=0}))return Zr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ke.InvalidArgument);var le=!b||b.includeLowers!==!1,ie=b&&b.includeUppers===!0,ve,se=D;function je(Ie,$e){return se(Ie[0],$e[0])}try{(ve=_e.reduce(function(Ie,$e){for(var ze=0,Qe=Ie.length;ze<Qe;++ze){var tt=Ie[ze];if(E($e[0],tt[1])<0&&0<E($e[1],tt[0])){tt[0]=G(tt[0],$e[0]),tt[1]=Z(tt[1],$e[1]);break}}return ze===Qe&&Ie.push($e),Ie},[])).sort(je)}catch{return Zr(this,Ht)}var ue=0,pe=ie?function(Ie){return 0<D(Ie,ve[ue][1])}:function(Ie){return 0<=D(Ie,ve[ue][1])},me=le?function(Ie){return 0<M(Ie,ve[ue][0])}:function(Ie){return 0<=M(Ie,ve[ue][0])},be=pe,_e=new this.Collection(this,function(){return Xr(ve[0][0],ve[ve.length-1][1],!le,!ie)});return _e._ondirectionchange=function(Ie){se=Ie==="next"?(be=pe,D):(be=me,M),ve.sort(je)},_e._addAlgorithm(function(Ie,$e,ze){for(var Qe,tt=Ie.key;be(tt);)if(++ue===ve.length)return $e(ze),!1;return!pe(Qe=tt)&&!me(Qe)||(k._cmp(tt,ve[ue][1])===0||k._cmp(tt,ve[ue][0])===0||$e(function(){se===D?Ie.continue(ve[ue][0]):Ie.continue(ve[ue][1])}),!1)}),_e},sr.prototype.startsWithAnyOf=function(){var m=K.apply(he,arguments);return m.every(function(b){return typeof b=="string"})?m.length===0?ys(this):this.inAnyRange(m.map(function(b){return[b,b+ma]})):Zr(this,"startsWithAnyOf() only works with strings")},sr);function sr(){}function Cr(m){return Ot(function(b){return Bi(b),m(b.target.error),!1})}function Bi(m){m.stopPropagation&&m.stopPropagation(),m.preventDefault&&m.preventDefault()}var Va="storagemutated",va="x-storagemutated-1",Xs=$i(null,Va),Md=(wn.prototype._lock=function(){return O(!lt.global),++this._reculock,this._reculock!==1||lt.global||(lt.lockOwnerFor=this),this},wn.prototype._unlock=function(){if(O(!lt.global),--this._reculock==0)for(lt.global||(lt.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var m=this._blockedFuncs.shift();try{Qs(m[1],m[0])}catch{}}return this},wn.prototype._locked=function(){return this._reculock&&lt.lockOwnerFor!==this},wn.prototype.create=function(m){var b=this;if(!this.mode)return this;var k=this.db.idbdb,E=this.db._state.dbOpenError;if(O(!this.idbtrans),!m&&!k)switch(E&&E.name){case"DatabaseClosedError":throw new ke.DatabaseClosed(E);case"MissingAPIError":throw new ke.MissingAPI(E.message,E);default:throw new ke.OpenFailed(E)}if(!this.active)throw new ke.TransactionInactive;return O(this._completion._state===null),(m=this.idbtrans=m||(this.db.core||k).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ot(function(D){Bi(D),b._reject(m.error)}),m.onabort=Ot(function(D){Bi(D),b.active&&b._reject(new ke.Abort(m.error)),b.active=!1,b.on("abort").fire(D)}),m.oncomplete=Ot(function(){b.active=!1,b._resolve(),"mutatedParts"in m&&Xs.storagemutated.fire(m.mutatedParts)}),this},wn.prototype._promise=function(m,b,k){var E=this;if(m==="readwrite"&&this.mode!=="readwrite")return cr(new ke.ReadOnly("Transaction is readonly"));if(!this.active)return cr(new ke.TransactionInactive);if(this._locked())return new st(function(M,G){E._blockedFuncs.push([function(){E._promise(m,b,k).then(M,G)},lt])});if(k)return Ws(function(){var M=new st(function(G,Z){E._lock();var le=b(G,Z,E);le&&le.then&&le.then(G,Z)});return M.finally(function(){return E._unlock()}),M._lib=!0,M});var D=new st(function(M,G){var Z=b(M,G,E);Z&&Z.then&&Z.then(M,G)});return D._lib=!0,D},wn.prototype._root=function(){return this.parent?this.parent._root():this},wn.prototype.waitFor=function(m){var b,k=this._root(),E=st.resolve(m);k._waitingFor?k._waitingFor=k._waitingFor.then(function(){return E}):(k._waitingFor=E,k._waitingQueue=[],b=k.idbtrans.objectStore(k.storeNames[0]),(function M(){for(++k._spinCount;k._waitingQueue.length;)k._waitingQueue.shift()();k._waitingFor&&(b.get(-1/0).onsuccess=M)})());var D=k._waitingFor;return new st(function(M,G){E.then(function(Z){return k._waitingQueue.push(Ot(M.bind(null,Z)))},function(Z){return k._waitingQueue.push(Ot(G.bind(null,Z)))}).finally(function(){k._waitingFor===D&&(k._waitingFor=null)})})},wn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ke.Abort))},wn.prototype.table=function(m){var b=this._memoizedTables||(this._memoizedTables={});if(v(b,m))return b[m];var k=this.schema[m];if(!k)throw new ke.NotFound("Table "+m+" not part of transaction");return k=new this.db.Table(m,k,this),k.core=this.db.core.table(m),b[m]=k},wn);function wn(){}function Io(m,b,k,E,D,M,G,Z){return{name:m,keyPath:b,unique:k,multi:E,auto:D,compound:M,src:(k&&!G?"&":"")+(E?"*":"")+(D?"++":"")+Ld(b),type:Z}}function Ld(m){return typeof m=="string"?m:m?"["+[].join.call(m,"+")+"]":""}function ya(m,b,k){return{name:m,primKey:b,indexes:k,mappedClass:null,idxByName:(E=function(D){return[D.name,D]},k.reduce(function(D,M,G){return G=E(M,G),G&&(D[G[0]]=G[1]),D},{}))};var E}var ws=function(m){try{return m.only([[]]),ws=function(){return[[]]},[[]]}catch{return ws=function(){return ma},ma}};function ea(m){return m==null?function(){}:typeof m=="string"?(b=m).split(".").length===1?function(k){return k[b]}:function(k){return $(k,b)}:function(k){return $(k,m)};var b}function Ui(m){return[].slice.call(m)}var Pf=0;function zi(m){return m==null?":id":typeof m=="string"?m:"[".concat(m.join("+"),"]")}function Kl(m,b,le){function E(be){if(be.type===3)return null;if(be.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var ue=be.lower,pe=be.upper,me=be.lowerOpen,be=be.upperOpen;return ue===void 0?pe===void 0?null:b.upperBound(pe,!!be):pe===void 0?b.lowerBound(ue,!!me):b.bound(ue,pe,!!me,!!be)}function D(je){var ue,pe=je.name;return{name:pe,schema:je,mutate:function(me){var be=me.trans,_e=me.type,Ie=me.keys,$e=me.values,ze=me.range;return new Promise(function(Qe,tt){Qe=Ot(Qe);var We=be.objectStore(pe),Je=We.keyPath==null,rt=_e==="put"||_e==="add";if(!rt&&_e!=="delete"&&_e!=="deleteRange")throw new Error("Invalid operation type: "+_e);var Xe,it=(Ie||$e||{length:1}).length;if(Ie&&$e&&Ie.length!==$e.length)throw new Error("Given keys array must have same length as given values array.");if(it===0)return Qe({numFailures:0,failures:{},results:[],lastResult:void 0});function At(Ar){++un,Bi(Ar)}var Tt=[],Pt=[],un=0;if(_e==="deleteRange"){if(ze.type===4)return Qe({numFailures:un,failures:Pt,results:[],lastResult:void 0});ze.type===3?Tt.push(Xe=We.clear()):Tt.push(Xe=We.delete(E(ze)))}else{var Je=rt?Je?[$e,Ie]:[$e,null]:[Ie,null],Et=Je[0],Er=Je[1];if(rt)for(var tr=0;tr<it;++tr)Tt.push(Xe=Er&&Er[tr]!==void 0?We[_e](Et[tr],Er[tr]):We[_e](Et[tr])),Xe.onerror=At;else for(tr=0;tr<it;++tr)Tt.push(Xe=We[_e](Et[tr])),Xe.onerror=At}function ri(Ar){Ar=Ar.target.result,Tt.forEach(function(Na,lc){return Na.error!=null&&(Pt[lc]=Na.error)}),Qe({numFailures:un,failures:Pt,results:_e==="delete"?Ie:Tt.map(function(Na){return Na.result}),lastResult:Ar})}Xe.onerror=function(Ar){At(Ar),ri(Ar)},Xe.onsuccess=ri})},getMany:function(me){var be=me.trans,_e=me.keys;return new Promise(function(Ie,$e){Ie=Ot(Ie);for(var ze,Qe=be.objectStore(pe),tt=_e.length,We=new Array(tt),Je=0,rt=0,Xe=function(Tt){Tt=Tt.target,We[Tt._pos]=Tt.result,++rt===Je&&Ie(We)},it=Cr($e),At=0;At<tt;++At)_e[At]!=null&&((ze=Qe.get(_e[At]))._pos=At,ze.onsuccess=Xe,ze.onerror=it,++Je);Je===0&&Ie(We)})},get:function(me){var be=me.trans,_e=me.key;return new Promise(function(Ie,$e){Ie=Ot(Ie);var ze=be.objectStore(pe).get(_e);ze.onsuccess=function(Qe){return Ie(Qe.target.result)},ze.onerror=Cr($e)})},query:(ue=ie,function(me){return new Promise(function(be,_e){be=Ot(be);var Ie,$e,ze,Je=me.trans,Qe=me.values,tt=me.limit,Xe=me.query,We=tt===1/0?void 0:tt,rt=Xe.index,Xe=Xe.range,Je=Je.objectStore(pe),rt=rt.isPrimaryKey?Je:Je.index(rt.name),Xe=E(Xe);if(tt===0)return be({result:[]});ue?((We=Qe?rt.getAll(Xe,We):rt.getAllKeys(Xe,We)).onsuccess=function(it){return be({result:it.target.result})},We.onerror=Cr(_e)):(Ie=0,$e=!Qe&&"openKeyCursor"in rt?rt.openKeyCursor(Xe):rt.openCursor(Xe),ze=[],$e.onsuccess=function(it){var At=$e.result;return At?(ze.push(Qe?At.value:At.primaryKey),++Ie===tt?be({result:ze}):void At.continue()):be({result:ze})},$e.onerror=Cr(_e))})}),openCursor:function(me){var be=me.trans,_e=me.values,Ie=me.query,$e=me.reverse,ze=me.unique;return new Promise(function(Qe,tt){Qe=Ot(Qe);var rt=Ie.index,We=Ie.range,Je=be.objectStore(pe),Je=rt.isPrimaryKey?Je:Je.index(rt.name),rt=$e?ze?"prevunique":"prev":ze?"nextunique":"next",Xe=!_e&&"openKeyCursor"in Je?Je.openKeyCursor(E(We),rt):Je.openCursor(E(We),rt);Xe.onerror=Cr(tt),Xe.onsuccess=Ot(function(it){var At,Tt,Pt,un,Et=Xe.result;Et?(Et.___id=++Pf,Et.done=!1,At=Et.continue.bind(Et),Tt=(Tt=Et.continuePrimaryKey)&&Tt.bind(Et),Pt=Et.advance.bind(Et),un=function(){throw new Error("Cursor not stopped")},Et.trans=be,Et.stop=Et.continue=Et.continuePrimaryKey=Et.advance=function(){throw new Error("Cursor not started")},Et.fail=Ot(tt),Et.next=function(){var Er=this,tr=1;return this.start(function(){return tr--?Er.continue():Er.stop()}).then(function(){return Er})},Et.start=function(Er){function tr(){if(Xe.result)try{Er()}catch(Ar){Et.fail(Ar)}else Et.done=!0,Et.start=function(){throw new Error("Cursor behind last entry")},Et.stop()}var ri=new Promise(function(Ar,Na){Ar=Ot(Ar),Xe.onerror=Cr(Na),Et.fail=Na,Et.stop=function(lc){Et.stop=Et.continue=Et.continuePrimaryKey=Et.advance=un,Ar(lc)}});return Xe.onsuccess=Ot(function(Ar){Xe.onsuccess=tr,tr()}),Et.continue=At,Et.continuePrimaryKey=Tt,Et.advance=Pt,tr(),ri},Qe(Et)):Qe(null)},tt)})},count:function(me){var be=me.query,_e=me.trans,Ie=be.index,$e=be.range;return new Promise(function(ze,Qe){var tt=_e.objectStore(pe),We=Ie.isPrimaryKey?tt:tt.index(Ie.name),tt=E($e),We=tt?We.count(tt):We.count();We.onsuccess=Ot(function(Je){return ze(Je.target.result)}),We.onerror=Cr(Qe)})}}}var M,G,Z,ve=(G=le,Z=Ui((M=m).objectStoreNames),{schema:{name:M.name,tables:Z.map(function(je){return G.objectStore(je)}).map(function(je){var ue=je.keyPath,be=je.autoIncrement,pe=d(ue),me={},be={name:je.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:ue==null,compound:pe,keyPath:ue,autoIncrement:be,unique:!0,extractKey:ea(ue)},indexes:Ui(je.indexNames).map(function(_e){return je.index(_e)}).map(function(ze){var Ie=ze.name,$e=ze.unique,Qe=ze.multiEntry,ze=ze.keyPath,Qe={name:Ie,compound:d(ze),keyPath:ze,unique:$e,multiEntry:Qe,extractKey:ea(ze)};return me[zi(ze)]=Qe}),getIndexByKeyPath:function(_e){return me[zi(_e)]}};return me[":id"]=be.primaryKey,ue!=null&&(me[zi(ue)]=be.primaryKey),be})},hasGetAll:0<Z.length&&"getAll"in G.objectStore(Z[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),le=ve.schema,ie=ve.hasGetAll,ve=le.tables.map(D),se={};return ve.forEach(function(je){return se[je.name]=je}),{stack:"dbcore",transaction:m.transaction.bind(m),table:function(je){if(!se[je])throw new Error("Table '".concat(je,"' not found"));return se[je]},MIN_KEY:-1/0,MAX_KEY:ws(b),schema:le}}function To(m,b,k,E){var D=k.IDBKeyRange;return k.indexedDB,{dbcore:(E=Kl(b,D,E),m.dbcore.reduce(function(M,G){return G=G.create,s(s({},M),G(M))},E))}}function Ha(m,E){var k=E.db,E=To(m._middlewares,k,m._deps,E);m.core=E.dbcore,m.tables.forEach(function(D){var M=D.name;m.core.schema.tables.some(function(G){return G.name===M})&&(D.core=m.core.table(M),m[M]instanceof m.Table&&(m[M].core=D.core))})}function qi(m,b,k,E){k.forEach(function(D){var M=E[D];b.forEach(function(G){var Z=(function le(ie,ve){return C(ie,ve)||(ie=f(ie))&&le(ie,ve)})(G,D);(!Z||"value"in Z&&Z.value===void 0)&&(G===m.Transaction.prototype||G instanceof m.Transaction?y(G,D,{get:function(){return this.table(D)},set:function(le){w(this,D,{value:le,writable:!0,configurable:!0,enumerable:!0})}}):G[D]=new m.Table(D,M))})})}function as(m,b){b.forEach(function(k){for(var E in k)k[E]instanceof m.Table&&delete k[E]})}function Ql(m,b){return m._cfg.version-b._cfg.version}function Do(m,b,k,E){var D=m._dbSchema;k.objectStoreNames.contains("$meta")&&!D.$meta&&(D.$meta=ya("$meta",Ja("")[0],[]),m._storeNames.push("$meta"));var M=m._createTransaction("readwrite",m._storeNames,D);M.create(k),M._completion.catch(E);var G=M._reject.bind(M),Z=lt.transless||lt;Ws(function(){return lt.trans=M,lt.transless=Z,b!==0?(Ha(m,k),ie=b,((le=M).storeNames.includes("$meta")?le.table("$meta").get("version").then(function(ve){return ve??ie}):st.resolve(ie)).then(function(ve){return je=ve,ue=M,pe=k,me=[],ve=(se=m)._versions,be=se._dbSchema=js(0,se.idbdb,pe),(ve=ve.filter(function(_e){return _e._cfg.version>=je})).length!==0?(ve.forEach(function(_e){me.push(function(){var Ie=be,$e=_e._cfg.dbschema;Qa(se,Ie,pe),Qa(se,$e,pe),be=se._dbSchema=$e;var ze=Wa(Ie,$e);ze.add.forEach(function(rt){Ka(pe,rt[0],rt[1].primKey,rt[1].indexes)}),ze.change.forEach(function(rt){if(rt.recreate)throw new ke.Upgrade("Not yet support for changing primary key");var Xe=pe.objectStore(rt.name);rt.add.forEach(function(it){return Mr(Xe,it)}),rt.change.forEach(function(it){Xe.deleteIndex(it.name),Mr(Xe,it)}),rt.del.forEach(function(it){return Xe.deleteIndex(it)})});var Qe=_e._cfg.contentUpgrade;if(Qe&&_e._cfg.version>je){Ha(se,pe),ue._memoizedTables={};var tt=te($e);ze.del.forEach(function(rt){tt[rt]=Ie[rt]}),as(se,[se.Transaction.prototype]),qi(se,[se.Transaction.prototype],c(tt),tt),ue.schema=tt;var We,Je=B(Qe);return Je&&Ua(),ze=st.follow(function(){var rt;(We=Qe(ue))&&Je&&(rt=dn.bind(null,null),We.then(rt,rt))}),We&&typeof We.then=="function"?st.resolve(We):ze.then(function(){return We})}}),me.push(function(Ie){var $e,ze,Qe=_e._cfg.dbschema;$e=Qe,ze=Ie,[].slice.call(ze.db.objectStoreNames).forEach(function(tt){return $e[tt]==null&&ze.db.deleteObjectStore(tt)}),as(se,[se.Transaction.prototype]),qi(se,[se.Transaction.prototype],se._storeNames,se._dbSchema),ue.schema=se._dbSchema}),me.push(function(Ie){se.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(se.idbdb.version/10)===_e._cfg.version?(se.idbdb.deleteObjectStore("$meta"),delete se._dbSchema.$meta,se._storeNames=se._storeNames.filter(function($e){return $e!=="$meta"})):Ie.objectStore("$meta").put(_e._cfg.version,"version"))})}),(function _e(){return me.length?st.resolve(me.shift()(ue.idbtrans)).then(_e):st.resolve()})().then(function(){Jl(be,pe)})):st.resolve();var se,je,ue,pe,me,be}).catch(G)):(c(D).forEach(function(ve){Ka(k,ve,D[ve].primKey,D[ve].indexes)}),Ha(m,k),void st.follow(function(){return m.on.populate.fire(M)}).catch(G));var le,ie})}function $d(m,b){Jl(m._dbSchema,b),b.db.version%10!=0||b.objectStoreNames.contains("$meta")||b.db.createObjectStore("$meta").add(Math.ceil(b.db.version/10-1),"version");var k=js(0,m.idbdb,b);Qa(m,m._dbSchema,b);for(var E=0,D=Wa(k,m._dbSchema).change;E<D.length;E++){var M=(function(G){if(G.change.length||G.recreate)return console.warn("Unable to patch indexes of table ".concat(G.name," because it has changes on the type of index or primary key.")),{value:void 0};var Z=b.objectStore(G.name);G.add.forEach(function(le){xe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(G.name,".").concat(le.src)),Mr(Z,le)})})(D[E]);if(typeof M=="object")return M.value}}function Wa(m,b){var k,E={del:[],add:[],change:[]};for(k in m)b[k]||E.del.push(k);for(k in b){var D=m[k],M=b[k];if(D){var G={name:k,def:M,recreate:!1,del:[],add:[],change:[]};if(""+(D.primKey.keyPath||"")!=""+(M.primKey.keyPath||"")||D.primKey.auto!==M.primKey.auto)G.recreate=!0,E.change.push(G);else{var Z=D.idxByName,le=M.idxByName,ie=void 0;for(ie in Z)le[ie]||G.del.push(ie);for(ie in le){var ve=Z[ie],se=le[ie];ve?ve.src!==se.src&&G.change.push(se):G.add.push(se)}(0<G.del.length||0<G.add.length||0<G.change.length)&&E.change.push(G)}}else E.add.push([k,M])}return E}function Ka(m,b,k,E){var D=m.db.createObjectStore(b,k.keyPath?{keyPath:k.keyPath,autoIncrement:k.auto}:{autoIncrement:k.auto});return E.forEach(function(M){return Mr(D,M)}),D}function Jl(m,b){c(m).forEach(function(k){b.db.objectStoreNames.contains(k)||(xe&&console.debug("Dexie: Creating missing table",k),Ka(b,k,m[k].primKey,m[k].indexes))})}function Mr(m,b){m.createIndex(b.name,b.keyPath,{unique:b.unique,multiEntry:b.multi})}function js(m,b,k){var E={};return A(b.objectStoreNames,0).forEach(function(D){for(var M=k.objectStore(D),G=Io(Ld(ie=M.keyPath),ie||"",!0,!1,!!M.autoIncrement,ie&&typeof ie!="string",!0),Z=[],le=0;le<M.indexNames.length;++le){var ve=M.index(M.indexNames[le]),ie=ve.keyPath,ve=Io(ve.name,ie,!!ve.unique,!!ve.multiEntry,!1,ie&&typeof ie!="string",!1);Z.push(ve)}E[D]=ya(D,G,Z)}),E}function Qa(m,b,k){for(var E=k.db.objectStoreNames,D=0;D<E.length;++D){var M=E[D],G=k.objectStore(M);m._hasGetAll="getAll"in G;for(var Z=0;Z<G.indexNames.length;++Z){var le=G.indexNames[Z],ie=G.index(le).keyPath,ve=typeof ie=="string"?ie:"["+A(ie).join("+")+"]";!b[M]||(ie=b[M].idxByName[ve])&&(ie.name=le,delete b[M].idxByName[ve],b[M].idxByName[le]=ie)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(m._hasGetAll=!1)}function Ja(m){return m.split(",").map(function(b,k){var M=b.split(":"),E=(D=M[1])===null||D===void 0?void 0:D.trim(),D=(b=M[0].trim()).replace(/([&*]|\+\+)/g,""),M=/^\[/.test(D)?D.match(/^\[(.*)\]$/)[1].split("+"):D;return Io(D,M||null,/\&/.test(b),/\*/.test(b),/\+\+/.test(b),d(M),k===0,E)})}var Mf=(ta.prototype._createTableSchema=ya,ta.prototype._parseIndexSyntax=Ja,ta.prototype._parseStoresSpec=function(m,b){var k=this;c(m).forEach(function(E){if(m[E]!==null){var D=k._parseIndexSyntax(m[E]),M=D.shift();if(!M)throw new ke.Schema("Invalid schema for table "+E+": "+m[E]);if(M.unique=!0,M.multi)throw new ke.Schema("Primary key cannot be multiEntry*");D.forEach(function(G){if(G.auto)throw new ke.Schema("Only primary key can be marked as autoIncrement (++)");if(!G.keyPath)throw new ke.Schema("Index must have a name and cannot be an empty string")}),D=k._createTableSchema(E,M,D),b[E]=D}})},ta.prototype.stores=function(k){var b=this.db;this._cfg.storesSource=this._cfg.storesSource?h(this._cfg.storesSource,k):k;var k=b._versions,E={},D={};return k.forEach(function(M){h(E,M._cfg.storesSource),D=M._cfg.dbschema={},M._parseStoresSpec(E,D)}),b._dbSchema=D,as(b,[b._allTables,b,b.Transaction.prototype]),qi(b,[b._allTables,b,b.Transaction.prototype,this._cfg.tables],c(D),D),b._storeNames=c(D),this},ta.prototype.upgrade=function(m){return this._cfg.contentUpgrade=X(this._cfg.contentUpgrade||J,m),this},ta);function ta(){}function Gi(m,b){var k=m._dbNamesDB;return k||(k=m._dbNamesDB=new Ss(Oi,{addons:[],indexedDB:m,IDBKeyRange:b})).version(1).stores({dbnames:"name"}),k.table("dbnames")}function ba(m){return m&&typeof m.databases=="function"}function Ya(m){return Ws(function(){return lt.letThrough=!0,m()})}function Ro(m){return!("from"in m)}var Lr=function(m,b){if(!this){var k=new Lr;return m&&"d"in m&&h(k,m),k}h(this,arguments.length?{d:1,from:m,to:1<arguments.length?b:m}:{d:0})};function Vi(m,b,k){var E=_t(b,k);if(!isNaN(E)){if(0<E)throw RangeError();if(Ro(m))return h(m,{from:b,to:k,d:1});var D=m.l,E=m.r;if(_t(k,m.from)<0)return D?Vi(D,b,k):m.l={from:b,to:k,d:1,l:null,r:null},Fd(m);if(0<_t(b,m.to))return E?Vi(E,b,k):m.r={from:b,to:k,d:1,l:null,r:null},Fd(m);_t(b,m.from)<0&&(m.from=b,m.l=null,m.d=E?E.d+1:1),0<_t(k,m.to)&&(m.to=k,m.r=null,m.d=m.l?m.l.d+1:1),k=!m.r,D&&!m.l&&Hi(m,D),E&&k&&Hi(m,E)}}function Hi(m,b){Ro(b)||(function k(E,le){var M=le.from,G=le.to,Z=le.l,le=le.r;Vi(E,M,G),Z&&k(E,Z),le&&k(E,le)})(m,b)}function Oo(m,b){var k=Po(b),E=k.next();if(E.done)return!1;for(var D=E.value,M=Po(m),G=M.next(D.from),Z=G.value;!E.done&&!G.done;){if(_t(Z.from,D.to)<=0&&0<=_t(Z.to,D.from))return!0;_t(D.from,Z.from)<0?D=(E=k.next(Z.from)).value:Z=(G=M.next(D.from)).value}return!1}function Po(m){var b=Ro(m)?null:{s:0,n:m};return{next:function(k){for(var E=0<arguments.length;b;)switch(b.s){case 0:if(b.s=1,E)for(;b.n.l&&_t(k,b.n.from)<0;)b={up:b,n:b.n.l,s:1};else for(;b.n.l;)b={up:b,n:b.n.l,s:1};case 1:if(b.s=2,!E||_t(k,b.n.to)<=0)return{value:b.n,done:!1};case 2:if(b.n.r){b.s=3,b={up:b,n:b.n.r,s:0};continue}case 3:b=b.up}return{done:!0}}}}function Fd(m){var b,k,E=(((b=m.r)===null||b===void 0?void 0:b.d)||0)-(((k=m.l)===null||k===void 0?void 0:k.d)||0),D=1<E?"r":E<-1?"l":"";D&&(b=D=="r"?"l":"r",k=s({},m),E=m[D],m.from=E.from,m.to=E.to,m[D]=E[D],k[D]=E[b],(m[b]=k).d=Bd(k)),m.d=Bd(m)}function Bd(k){var b=k.r,k=k.l;return(b?k?Math.max(b.d,k.d):b.d:k?k.d:0)+1}function Mo(m,b){return c(b).forEach(function(k){m[k]?Hi(m[k],b[k]):m[k]=(function E(D){var M,G,Z={};for(M in D)v(D,M)&&(G=D[M],Z[M]=!G||typeof G!="object"||Se.has(G.constructor)?G:E(G));return Z})(b[k])}),m}function Yl(m,b){return m.all||b.all||Object.keys(m).some(function(k){return b[k]&&Oo(b[k],m[k])})}x(Lr.prototype,((jn={add:function(m){return Hi(this,m),this},addKey:function(m){return Vi(this,m,m),this},addKeys:function(m){var b=this;return m.forEach(function(k){return Vi(b,k,k)}),this},hasKey:function(m){var b=Po(this).next(m).value;return b&&_t(b.from,m)<=0&&0<=_t(b.to,m)}})[R]=function(){return Po(this)},jn));var ra={},Zl={},Xl=!1;function Lo(m){Mo(Zl,m),Xl||(Xl=!0,setTimeout(function(){Xl=!1,ec(Zl,!(Zl={}))},0))}function ec(m,b){b===void 0&&(b=!1);var k=new Set;if(m.all)for(var E=0,D=Object.values(ra);E<D.length;E++)$o(G=D[E],m,k,b);else for(var M in m){var G,Z=/^idb\:\/\/(.*)\/(.*)\//.exec(M);Z&&(M=Z[1],Z=Z[2],(G=ra["idb://".concat(M,"/").concat(Z)])&&$o(G,m,k,b))}k.forEach(function(le){return le()})}function $o(m,b,k,E){for(var D=[],M=0,G=Object.entries(m.queries.query);M<G.length;M++){for(var Z=G[M],le=Z[0],ie=[],ve=0,se=Z[1];ve<se.length;ve++){var je=se[ve];Yl(b,je.obsSet)?je.subscribers.forEach(function(be){return k.add(be)}):E&&ie.push(je)}E&&D.push([le,ie])}if(E)for(var ue=0,pe=D;ue<pe.length;ue++){var me=pe[ue],le=me[0],ie=me[1];m.queries.query[le]=ie}}function Lf(m){var b=m._state,k=m._deps.indexedDB;if(b.isBeingOpened||m.idbdb)return b.dbReadyPromise.then(function(){return b.dbOpenError?cr(b.dbOpenError):m});b.isBeingOpened=!0,b.dbOpenError=null,b.openComplete=!1;var E=b.openCanceller,D=Math.round(10*m.verno),M=!1;function G(){if(b.openCanceller!==E)throw new ke.DatabaseClosed("db.open() was cancelled")}function Z(){return new st(function(je,ue){if(G(),!k)throw new ke.MissingAPI;var pe=m.name,me=b.autoSchema||!D?k.open(pe):k.open(pe,D);if(!me)throw new ke.MissingAPI;me.onerror=Cr(ue),me.onblocked=Ot(m._fireOnBlocked),me.onupgradeneeded=Ot(function(be){var _e;ve=me.transaction,b.autoSchema&&!m._options.allowEmptyDB?(me.onerror=Bi,ve.abort(),me.result.close(),(_e=k.deleteDatabase(pe)).onsuccess=_e.onerror=Ot(function(){ue(new ke.NoSuchDatabase("Database ".concat(pe," doesnt exist")))})):(ve.onerror=Cr(ue),be=be.oldVersion>Math.pow(2,62)?0:be.oldVersion,se=be<1,m.idbdb=me.result,M&&$d(m,ve),Do(m,be/10,ve,ue))},ue),me.onsuccess=Ot(function(){ve=null;var be,_e,Ie,$e,ze,Qe=m.idbdb=me.result,tt=A(Qe.objectStoreNames);if(0<tt.length)try{var We=Qe.transaction(($e=tt).length===1?$e[0]:$e,"readonly");if(b.autoSchema)_e=Qe,Ie=We,(be=m).verno=_e.version/10,Ie=be._dbSchema=js(0,_e,Ie),be._storeNames=A(_e.objectStoreNames,0),qi(be,[be._allTables],c(Ie),Ie);else if(Qa(m,m._dbSchema,We),((ze=Wa(js(0,(ze=m).idbdb,We),ze._dbSchema)).add.length||ze.change.some(function(Je){return Je.add.length||Je.change.length}))&&!M)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Qe.close(),D=Qe.version+1,M=!0,je(Z());Ha(m,We)}catch{}Js.push(m),Qe.onversionchange=Ot(function(Je){b.vcFired=!0,m.on("versionchange").fire(Je)}),Qe.onclose=Ot(function(){m.close({disableAutoOpen:!1})}),se&&(ze=m._deps,We=pe,Qe=ze.indexedDB,ze=ze.IDBKeyRange,ba(Qe)||We===Oi||Gi(Qe,ze).put({name:We}).catch(J)),je()},ue)}).catch(function(je){switch(je?.name){case"UnknownError":if(0<b.PR1398_maxLoop)return b.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),Z();break;case"VersionError":if(0<D)return D=0,Z()}return st.reject(je)})}var le,ie=b.dbReadyResolve,ve=null,se=!1;return st.race([E,(typeof navigator>"u"?st.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(je){function ue(){return indexedDB.databases().finally(je)}le=setInterval(ue,100),ue()}).finally(function(){return clearInterval(le)}):Promise.resolve()).then(Z)]).then(function(){return G(),b.onReadyBeingFired=[],st.resolve(Ya(function(){return m.on.ready.fire(m.vip)})).then(function je(){if(0<b.onReadyBeingFired.length){var ue=b.onReadyBeingFired.reduce(X,J);return b.onReadyBeingFired=[],st.resolve(Ya(function(){return ue(m.vip)})).then(je)}})}).finally(function(){b.openCanceller===E&&(b.onReadyBeingFired=null,b.isBeingOpened=!1)}).catch(function(je){b.dbOpenError=je;try{ve&&ve.abort()}catch{}return E===b.openCanceller&&m._close(),cr(je)}).finally(function(){b.openComplete=!0,ie()}).then(function(){var je;return se&&(je={},m.tables.forEach(function(ue){ue.schema.indexes.forEach(function(pe){pe.name&&(je["idb://".concat(m.name,"/").concat(ue.name,"/").concat(pe.name)]=new Lr(-1/0,[[[]]]))}),je["idb://".concat(m.name,"/").concat(ue.name,"/")]=je["idb://".concat(m.name,"/").concat(ue.name,"/:dels")]=new Lr(-1/0,[[[]]])}),Xs(Va).fire(je),ec(je,!0)),m})}function tc(m){function b(M){return m.next(M)}var k=D(b),E=D(function(M){return m.throw(M)});function D(M){return function(le){var Z=M(le),le=Z.value;return Z.done?le:le&&typeof le.then=="function"?le.then(k,E):d(le)?Promise.all(le).then(k,E):k(le)}}return D(b)()}function Fo(m,b,k){for(var E=d(m)?m.slice():[m],D=0;D<k;++D)E.push(b);return E}var Ud={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(m){return s(s({},m),{table:function(b){var k=m.table(b),E=k.schema,D={},M=[];function G(se,je,ue){var pe=zi(se),me=D[pe]=D[pe]||[],be=se==null?0:typeof se=="string"?1:se.length,_e=0<je,_e=s(s({},ue),{name:_e?"".concat(pe,"(virtual-from:").concat(ue.name,")"):ue.name,lowLevelIndex:ue,isVirtual:_e,keyTail:je,keyLength:be,extractKey:ea(se),unique:!_e&&ue.unique});return me.push(_e),_e.isPrimaryKey||M.push(_e),1<be&&G(be===2?se[0]:se.slice(0,be-1),je+1,ue),me.sort(function(Ie,$e){return Ie.keyTail-$e.keyTail}),_e}b=G(E.primaryKey.keyPath,0,E.primaryKey),D[":id"]=[b];for(var Z=0,le=E.indexes;Z<le.length;Z++){var ie=le[Z];G(ie.keyPath,0,ie)}function ve(se){var je,ue=se.query.index;return ue.isVirtual?s(s({},se),{query:{index:ue.lowLevelIndex,range:(je=se.query.range,ue=ue.keyTail,{type:je.type===1?2:je.type,lower:Fo(je.lower,je.lowerOpen?m.MAX_KEY:m.MIN_KEY,ue),lowerOpen:!0,upper:Fo(je.upper,je.upperOpen?m.MIN_KEY:m.MAX_KEY,ue),upperOpen:!0})}}):se}return s(s({},k),{schema:s(s({},E),{primaryKey:b,indexes:M,getIndexByKeyPath:function(se){return(se=D[zi(se)])&&se[0]}}),count:function(se){return k.count(ve(se))},query:function(se){return k.query(ve(se))},openCursor:function(se){var je=se.query.index,ue=je.keyTail,pe=je.isVirtual,me=je.keyLength;return pe?k.openCursor(ve(se)).then(function(_e){return _e&&be(_e)}):k.openCursor(se);function be(_e){return Object.create(_e,{continue:{value:function(Ie){Ie!=null?_e.continue(Fo(Ie,se.reverse?m.MAX_KEY:m.MIN_KEY,ue)):se.unique?_e.continue(_e.key.slice(0,me).concat(se.reverse?m.MIN_KEY:m.MAX_KEY,ue)):_e.continue()}},continuePrimaryKey:{value:function(Ie,$e){_e.continuePrimaryKey(Fo(Ie,m.MAX_KEY,ue),$e)}},primaryKey:{get:function(){return _e.primaryKey}},key:{get:function(){var Ie=_e.key;return me===1?Ie[0]:Ie.slice(0,me)}},value:{get:function(){return _e.value}}})}}})}})}};function rc(m,b,k,E){return k=k||{},E=E||"",c(m).forEach(function(D){var M,G,Z;v(b,D)?(M=m[D],G=b[D],typeof M=="object"&&typeof G=="object"&&M&&G?(Z=ye(M))!==ye(G)?k[E+D]=b[D]:Z==="Object"?rc(M,G,k,E+D+"."):M!==G&&(k[E+D]=b[D]):M!==G&&(k[E+D]=b[D])):k[E+D]=void 0}),c(b).forEach(function(D){v(m,D)||(k[E+D]=b[D])}),k}function nc(m,b){return b.type==="delete"?b.keys:b.keys||b.values.map(m.extractKey)}var $f={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(m){return s(s({},m),{table:function(b){var k=m.table(b),E=k.schema.primaryKey;return s(s({},k),{mutate:function(D){var M=lt.trans,G=M.table(b).hook,Z=G.deleting,le=G.creating,ie=G.updating;switch(D.type){case"add":if(le.fire===J)break;return M._promise("readwrite",function(){return ve(D)},!0);case"put":if(le.fire===J&&ie.fire===J)break;return M._promise("readwrite",function(){return ve(D)},!0);case"delete":if(Z.fire===J)break;return M._promise("readwrite",function(){return ve(D)},!0);case"deleteRange":if(Z.fire===J)break;return M._promise("readwrite",function(){return(function se(je,ue,pe){return k.query({trans:je,values:!1,query:{index:E,range:ue},limit:pe}).then(function(me){var be=me.result;return ve({type:"delete",keys:be,trans:je}).then(function(_e){return 0<_e.numFailures?Promise.reject(_e.failures[0]):be.length<pe?{failures:[],numFailures:0,lastResult:void 0}:se(je,s(s({},ue),{lower:be[be.length-1],lowerOpen:!0}),pe)})})})(D.trans,D.range,1e4)},!0)}return k.mutate(D);function ve(se){var je,ue,pe,me=lt.trans,be=se.keys||nc(E,se);if(!be)throw new Error("Keys missing");return(se=se.type==="add"||se.type==="put"?s(s({},se),{keys:be}):s({},se)).type!=="delete"&&(se.values=o([],se.values)),se.keys&&(se.keys=o([],se.keys)),je=k,pe=be,((ue=se).type==="add"?Promise.resolve([]):je.getMany({trans:ue.trans,keys:pe,cache:"immutable"})).then(function(_e){var Ie=be.map(function($e,ze){var Qe,tt,We,Je=_e[ze],rt={onerror:null,onsuccess:null};return se.type==="delete"?Z.fire.call(rt,$e,Je,me):se.type==="add"||Je===void 0?(Qe=le.fire.call(rt,$e,se.values[ze],me),$e==null&&Qe!=null&&(se.keys[ze]=$e=Qe,E.outbound||F(se.values[ze],E.keyPath,$e))):(Qe=rc(Je,se.values[ze]),(tt=ie.fire.call(rt,Qe,$e,Je,me))&&(We=se.values[ze],Object.keys(tt).forEach(function(Xe){v(We,Xe)?We[Xe]=tt[Xe]:F(We,Xe,tt[Xe])}))),rt});return k.mutate(se).then(function($e){for(var ze=$e.failures,Qe=$e.results,tt=$e.numFailures,$e=$e.lastResult,We=0;We<be.length;++We){var Je=(Qe||be)[We],rt=Ie[We];Je==null?rt.onerror&&rt.onerror(ze[We]):rt.onsuccess&&rt.onsuccess(se.type==="put"&&_e[We]?se.values[We]:Je)}return{failures:ze,results:Qe,numFailures:tt,lastResult:$e}}).catch(function($e){return Ie.forEach(function(ze){return ze.onerror&&ze.onerror($e)}),Promise.reject($e)})})}}})}})}};function zd(m,b,k){try{if(!b||b.keys.length<m.length)return null;for(var E=[],D=0,M=0;D<b.keys.length&&M<m.length;++D)_t(b.keys[D],m[M])===0&&(E.push(k?U(b.values[D]):b.values[D]),++M);return E.length===m.length?E:null}catch{return null}}var Ff={stack:"dbcore",level:-1,create:function(m){return{table:function(b){var k=m.table(b);return s(s({},k),{getMany:function(E){if(!E.cache)return k.getMany(E);var D=zd(E.keys,E.trans._cache,E.cache==="clone");return D?st.resolve(D):k.getMany(E).then(function(M){return E.trans._cache={keys:E.keys,values:E.cache==="clone"?U(M):M},M})},mutate:function(E){return E.type!=="add"&&(E.trans._cache=null),k.mutate(E)}})}}}};function qd(m,b){return m.trans.mode==="readonly"&&!!m.subscr&&!m.trans.explicit&&m.trans.db._options.cache!=="disabled"&&!b.schema.primaryKey.outbound}function Gd(m,b){switch(m){case"query":return b.values&&!b.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var sc={stack:"dbcore",level:0,name:"Observability",create:function(m){var b=m.schema.name,k=new Lr(m.MIN_KEY,m.MAX_KEY);return s(s({},m),{transaction:function(E,D,M){if(lt.subscr&&D!=="readonly")throw new ke.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(lt.querier));return m.transaction(E,D,M)},table:function(E){var D=m.table(E),M=D.schema,G=M.primaryKey,se=M.indexes,Z=G.extractKey,le=G.outbound,ie=G.autoIncrement&&se.filter(function(ue){return ue.compound&&ue.keyPath.includes(G.keyPath)}),ve=s(s({},D),{mutate:function(ue){function pe(Xe){return Xe="idb://".concat(b,"/").concat(E,"/").concat(Xe),$e[Xe]||($e[Xe]=new Lr)}var me,be,_e,Ie=ue.trans,$e=ue.mutatedParts||(ue.mutatedParts={}),ze=pe(""),Qe=pe(":dels"),tt=ue.type,rt=ue.type==="deleteRange"?[ue.range]:ue.type==="delete"?[ue.keys]:ue.values.length<50?[nc(G,ue).filter(function(Xe){return Xe}),ue.values]:[],We=rt[0],Je=rt[1],rt=ue.trans._cache;return d(We)?(ze.addKeys(We),(rt=tt==="delete"||We.length===Je.length?zd(We,rt):null)||Qe.addKeys(We),(rt||Je)&&(me=pe,be=rt,_e=Je,M.indexes.forEach(function(Xe){var it=me(Xe.name||"");function At(Pt){return Pt!=null?Xe.extractKey(Pt):null}function Tt(Pt){return Xe.multiEntry&&d(Pt)?Pt.forEach(function(un){return it.addKey(un)}):it.addKey(Pt)}(be||_e).forEach(function(Pt,Er){var Et=be&&At(be[Er]),Er=_e&&At(_e[Er]);_t(Et,Er)!==0&&(Et!=null&&Tt(Et),Er!=null&&Tt(Er))})}))):We?(Je={from:(Je=We.lower)!==null&&Je!==void 0?Je:m.MIN_KEY,to:(Je=We.upper)!==null&&Je!==void 0?Je:m.MAX_KEY},Qe.add(Je),ze.add(Je)):(ze.add(k),Qe.add(k),M.indexes.forEach(function(Xe){return pe(Xe.name).add(k)})),D.mutate(ue).then(function(Xe){return!We||ue.type!=="add"&&ue.type!=="put"||(ze.addKeys(Xe.results),ie&&ie.forEach(function(it){for(var At=ue.values.map(function(Et){return it.extractKey(Et)}),Tt=it.keyPath.findIndex(function(Et){return Et===G.keyPath}),Pt=0,un=Xe.results.length;Pt<un;++Pt)At[Pt][Tt]=Xe.results[Pt];pe(it.name).addKeys(At)})),Ie.mutatedParts=Mo(Ie.mutatedParts||{},$e),Xe})}}),se=function(pe){var me=pe.query,pe=me.index,me=me.range;return[pe,new Lr((pe=me.lower)!==null&&pe!==void 0?pe:m.MIN_KEY,(me=me.upper)!==null&&me!==void 0?me:m.MAX_KEY)]},je={get:function(ue){return[G,new Lr(ue.key)]},getMany:function(ue){return[G,new Lr().addKeys(ue.keys)]},count:se,query:se,openCursor:se};return c(je).forEach(function(ue){ve[ue]=function(pe){var me=lt.subscr,be=!!me,_e=qd(lt,D)&&Gd(ue,pe)?pe.obsSet={}:me;if(be){var Ie=function(Je){return Je="idb://".concat(b,"/").concat(E,"/").concat(Je),_e[Je]||(_e[Je]=new Lr)},$e=Ie(""),ze=Ie(":dels"),me=je[ue](pe),be=me[0],me=me[1];if((ue==="query"&&be.isPrimaryKey&&!pe.values?ze:Ie(be.name||"")).add(me),!be.isPrimaryKey){if(ue!=="count"){var Qe=ue==="query"&&le&&pe.values&&D.query(s(s({},pe),{values:!1}));return D[ue].apply(this,arguments).then(function(Je){if(ue==="query"){if(le&&pe.values)return Qe.then(function(At){return At=At.result,$e.addKeys(At),Je});var rt=pe.values?Je.result.map(Z):Je.result;(pe.values?$e:ze).addKeys(rt)}else if(ue==="openCursor"){var Xe=Je,it=pe.values;return Xe&&Object.create(Xe,{key:{get:function(){return ze.addKey(Xe.primaryKey),Xe.key}},primaryKey:{get:function(){var At=Xe.primaryKey;return ze.addKey(At),At}},value:{get:function(){return it&&$e.addKey(Xe.primaryKey),Xe.value}}})}return Je})}ze.add(k)}}return D[ue].apply(this,arguments)}}),ve}})}};function Za(m,b,k){if(k.numFailures===0)return b;if(b.type==="deleteRange")return null;var E=b.keys?b.keys.length:"values"in b&&b.values?b.values.length:1;return k.numFailures===E?null:(b=s({},b),d(b.keys)&&(b.keys=b.keys.filter(function(D,M){return!(M in k.failures)})),"values"in b&&d(b.values)&&(b.values=b.values.filter(function(D,M){return!(M in k.failures)})),b)}function ac(m,b){return k=m,((E=b).lower===void 0||(E.lowerOpen?0<_t(k,E.lower):0<=_t(k,E.lower)))&&(m=m,(b=b).upper===void 0||(b.upperOpen?_t(m,b.upper)<0:_t(m,b.upper)<=0));var k,E}function ic(m,b,je,E,D,M){if(!je||je.length===0)return m;var G=b.query.index,Z=G.multiEntry,le=b.query.range,ie=E.schema.primaryKey.extractKey,ve=G.extractKey,se=(G.lowLevelIndex||G).extractKey,je=je.reduce(function(ue,pe){var me=ue,be=[];if(pe.type==="add"||pe.type==="put")for(var _e=new Lr,Ie=pe.values.length-1;0<=Ie;--Ie){var $e,ze=pe.values[Ie],Qe=ie(ze);_e.hasKey(Qe)||($e=ve(ze),(Z&&d($e)?$e.some(function(Xe){return ac(Xe,le)}):ac($e,le))&&(_e.addKey(Qe),be.push(ze)))}switch(pe.type){case"add":var tt=new Lr().addKeys(b.values?ue.map(function(it){return ie(it)}):ue),me=ue.concat(b.values?be.filter(function(it){return it=ie(it),!tt.hasKey(it)&&(tt.addKey(it),!0)}):be.map(function(it){return ie(it)}).filter(function(it){return!tt.hasKey(it)&&(tt.addKey(it),!0)}));break;case"put":var We=new Lr().addKeys(pe.values.map(function(it){return ie(it)}));me=ue.filter(function(it){return!We.hasKey(b.values?ie(it):it)}).concat(b.values?be:be.map(function(it){return ie(it)}));break;case"delete":var Je=new Lr().addKeys(pe.keys);me=ue.filter(function(it){return!Je.hasKey(b.values?ie(it):it)});break;case"deleteRange":var rt=pe.range;me=ue.filter(function(it){return!ac(ie(it),rt)})}return me},m);return je===m?m:(je.sort(function(ue,pe){return _t(se(ue),se(pe))||_t(ie(ue),ie(pe))}),b.limit&&b.limit<1/0&&(je.length>b.limit?je.length=b.limit:m.length===b.limit&&je.length<b.limit&&(D.dirty=!0)),M?Object.freeze(je):je)}function oc(m,b){return _t(m.lower,b.lower)===0&&_t(m.upper,b.upper)===0&&!!m.lowerOpen==!!b.lowerOpen&&!!m.upperOpen==!!b.upperOpen}function Vd(m,b){return(function(k,E,D,M){if(k===void 0)return E!==void 0?-1:0;if(E===void 0)return 1;if((E=_t(k,E))===0){if(D&&M)return 0;if(D)return 1;if(M)return-1}return E})(m.lower,b.lower,m.lowerOpen,b.lowerOpen)<=0&&0<=(function(k,E,D,M){if(k===void 0)return E!==void 0?1:0;if(E===void 0)return-1;if((E=_t(k,E))===0){if(D&&M)return 0;if(D)return-1;if(M)return 1}return E})(m.upper,b.upper,m.upperOpen,b.upperOpen)}function Hd(m,b,k,E){m.subscribers.add(k),E.addEventListener("abort",function(){var D,M;m.subscribers.delete(k),m.subscribers.size===0&&(D=m,M=b,setTimeout(function(){D.subscribers.size===0&&V(M,D)},3e3))})}var Wd={stack:"dbcore",level:0,name:"Cache",create:function(m){var b=m.schema.name;return s(s({},m),{transaction:function(k,E,D){var M,G,Z=m.transaction(k,E,D);return E==="readwrite"&&(G=(M=new AbortController).signal,D=function(le){return function(){if(M.abort(),E==="readwrite"){for(var ie=new Set,ve=0,se=k;ve<se.length;ve++){var je=se[ve],ue=ra["idb://".concat(b,"/").concat(je)];if(ue){var pe=m.table(je),me=ue.optimisticOps.filter(function(it){return it.trans===Z});if(Z._explicit&&le&&Z.mutatedParts)for(var be=0,_e=Object.values(ue.queries.query);be<_e.length;be++)for(var Ie=0,$e=(tt=_e[be]).slice();Ie<$e.length;Ie++)Yl((We=$e[Ie]).obsSet,Z.mutatedParts)&&(V(tt,We),We.subscribers.forEach(function(it){return ie.add(it)}));else if(0<me.length){ue.optimisticOps=ue.optimisticOps.filter(function(it){return it.trans!==Z});for(var ze=0,Qe=Object.values(ue.queries.query);ze<Qe.length;ze++)for(var tt,We,Je,rt=0,Xe=(tt=Qe[ze]).slice();rt<Xe.length;rt++)(We=Xe[rt]).res!=null&&Z.mutatedParts&&(le&&!We.dirty?(Je=Object.isFrozen(We.res),Je=ic(We.res,We.req,me,pe,We,Je),We.dirty?(V(tt,We),We.subscribers.forEach(function(it){return ie.add(it)})):Je!==We.res&&(We.res=Je,We.promise=st.resolve({result:Je}))):(We.dirty&&V(tt,We),We.subscribers.forEach(function(it){return ie.add(it)})))}}}ie.forEach(function(it){return it()})}}},Z.addEventListener("abort",D(!1),{signal:G}),Z.addEventListener("error",D(!1),{signal:G}),Z.addEventListener("complete",D(!0),{signal:G})),Z},table:function(k){var E=m.table(k),D=E.schema.primaryKey;return s(s({},E),{mutate:function(M){var G=lt.trans;if(D.outbound||G.db._options.cache==="disabled"||G.explicit||G.idbtrans.mode!=="readwrite")return E.mutate(M);var Z=ra["idb://".concat(b,"/").concat(k)];return Z?(G=E.mutate(M),M.type!=="add"&&M.type!=="put"||!(50<=M.values.length||nc(D,M).some(function(le){return le==null}))?(Z.optimisticOps.push(M),M.mutatedParts&&Lo(M.mutatedParts),G.then(function(le){0<le.numFailures&&(V(Z.optimisticOps,M),(le=Za(0,M,le))&&Z.optimisticOps.push(le),M.mutatedParts&&Lo(M.mutatedParts))}),G.catch(function(){V(Z.optimisticOps,M),M.mutatedParts&&Lo(M.mutatedParts)})):G.then(function(le){var ie=Za(0,s(s({},M),{values:M.values.map(function(ve,se){var je;return le.failures[se]?ve:(ve=(je=D.keyPath)!==null&&je!==void 0&&je.includes(".")?U(ve):s({},ve),F(ve,D.keyPath,le.results[se]),ve)})}),le);Z.optimisticOps.push(ie),queueMicrotask(function(){return M.mutatedParts&&Lo(M.mutatedParts)})}),G):E.mutate(M)},query:function(M){if(!qd(lt,E)||!Gd("query",M))return E.query(M);var G=((ie=lt.trans)===null||ie===void 0?void 0:ie.db._options.cache)==="immutable",se=lt,Z=se.requery,le=se.signal,ie=(function(pe,me,be,_e){var Ie=ra["idb://".concat(pe,"/").concat(me)];if(!Ie)return[];if(!(me=Ie.queries[be]))return[null,!1,Ie,null];var $e=me[(_e.query?_e.query.index.name:null)||""];if(!$e)return[null,!1,Ie,null];switch(be){case"query":var ze=$e.find(function(Qe){return Qe.req.limit===_e.limit&&Qe.req.values===_e.values&&oc(Qe.req.query.range,_e.query.range)});return ze?[ze,!0,Ie,$e]:[$e.find(function(Qe){return("limit"in Qe.req?Qe.req.limit:1/0)>=_e.limit&&(!_e.values||Qe.req.values)&&Vd(Qe.req.query.range,_e.query.range)}),!1,Ie,$e];case"count":return ze=$e.find(function(Qe){return oc(Qe.req.query.range,_e.query.range)}),[ze,!!ze,Ie,$e]}})(b,k,"query",M),ve=ie[0],se=ie[1],je=ie[2],ue=ie[3];return ve&&se?ve.obsSet=M.obsSet:(se=E.query(M).then(function(pe){var me=pe.result;if(ve&&(ve.res=me),G){for(var be=0,_e=me.length;be<_e;++be)Object.freeze(me[be]);Object.freeze(me)}else pe.result=U(me);return pe}).catch(function(pe){return ue&&ve&&V(ue,ve),Promise.reject(pe)}),ve={obsSet:M.obsSet,promise:se,subscribers:new Set,type:"query",req:M,dirty:!1},ue?ue.push(ve):(ue=[ve],(je=je||(ra["idb://".concat(b,"/").concat(k)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[M.query.index.name||""]=ue)),Hd(ve,ue,Z,le),ve.promise.then(function(pe){return{result:ic(pe.result,M,je?.optimisticOps,E,ve,G)}})}})}})}};function Ns(m,b){return new Proxy(m,{get:function(k,E,D){return E==="db"?b:Reflect.get(k,E,D)}})}var Ss=(dr.prototype.version=function(m){if(isNaN(m)||m<.1)throw new ke.Type("Given version is not a positive number");if(m=Math.round(10*m)/10,this.idbdb||this._state.isBeingOpened)throw new ke.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,m);var b=this._versions,k=b.filter(function(E){return E._cfg.version===m})[0];return k||(k=new this.Version(m),b.push(k),b.sort(Ql),k.stores({}),this._state.autoSchema=!1,k)},dr.prototype._whenReady=function(m){var b=this;return this.idbdb&&(this._state.openComplete||lt.letThrough||this._vip)?m():new st(function(k,E){if(b._state.openComplete)return E(new ke.DatabaseClosed(b._state.dbOpenError));if(!b._state.isBeingOpened){if(!b._state.autoOpen)return void E(new ke.DatabaseClosed);b.open().catch(J)}b._state.dbReadyPromise.then(k,E)}).then(m)},dr.prototype.use=function(m){var b=m.stack,k=m.create,E=m.level,D=m.name;return D&&this.unuse({stack:b,name:D}),m=this._middlewares[b]||(this._middlewares[b]=[]),m.push({stack:b,create:k,level:E??10,name:D}),m.sort(function(M,G){return M.level-G.level}),this},dr.prototype.unuse=function(m){var b=m.stack,k=m.name,E=m.create;return b&&this._middlewares[b]&&(this._middlewares[b]=this._middlewares[b].filter(function(D){return E?D.create!==E:!!k&&D.name!==k})),this},dr.prototype.open=function(){var m=this;return Qs(ln,function(){return Lf(m)})},dr.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var m=this._state,b=Js.indexOf(this);if(0<=b&&Js.splice(b,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}m.isBeingOpened||(m.dbReadyPromise=new st(function(k){m.dbReadyResolve=k}),m.openCanceller=new st(function(k,E){m.cancelOpen=E}))},dr.prototype.close=function(k){var b=(k===void 0?{disableAutoOpen:!0}:k).disableAutoOpen,k=this._state;b?(k.isBeingOpened&&k.cancelOpen(new ke.DatabaseClosed),this._close(),k.autoOpen=!1,k.dbOpenError=new ke.DatabaseClosed):(this._close(),k.autoOpen=this._options.autoOpen||k.isBeingOpened,k.openComplete=!1,k.dbOpenError=null)},dr.prototype.delete=function(m){var b=this;m===void 0&&(m={disableAutoOpen:!0});var k=0<arguments.length&&typeof arguments[0]!="object",E=this._state;return new st(function(D,M){function G(){b.close(m);var Z=b._deps.indexedDB.deleteDatabase(b.name);Z.onsuccess=Ot(function(){var le,ie,ve;le=b._deps,ie=b.name,ve=le.indexedDB,le=le.IDBKeyRange,ba(ve)||ie===Oi||Gi(ve,le).delete(ie).catch(J),D()}),Z.onerror=Cr(M),Z.onblocked=b._fireOnBlocked}if(k)throw new ke.InvalidArgument("Invalid closeOptions argument to db.delete()");E.isBeingOpened?E.dbReadyPromise.then(G):G()})},dr.prototype.backendDB=function(){return this.idbdb},dr.prototype.isOpen=function(){return this.idbdb!==null},dr.prototype.hasBeenClosed=function(){var m=this._state.dbOpenError;return m&&m.name==="DatabaseClosed"},dr.prototype.hasFailed=function(){return this._state.dbOpenError!==null},dr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(dr.prototype,"tables",{get:function(){var m=this;return c(this._allTables).map(function(b){return m._allTables[b]})},enumerable:!1,configurable:!0}),dr.prototype.transaction=function(){var m=(function(b,k,E){var D=arguments.length;if(D<2)throw new ke.InvalidArgument("Too few arguments");for(var M=new Array(D-1);--D;)M[D-1]=arguments[D];return E=M.pop(),[b,Ee(M),E]}).apply(this,arguments);return this._transaction.apply(this,m)},dr.prototype._transaction=function(m,b,k){var E=this,D=lt.trans;D&&D.db===this&&m.indexOf("!")===-1||(D=null);var M,G,Z=m.indexOf("?")!==-1;m=m.replace("!","").replace("?","");try{if(G=b.map(function(ie){if(ie=ie instanceof E.Table?ie.name:ie,typeof ie!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return ie}),m=="r"||m===za)M=za;else{if(m!="rw"&&m!=Vl)throw new ke.InvalidArgument("Invalid transaction mode: "+m);M=Vl}if(D){if(D.mode===za&&M===Vl){if(!Z)throw new ke.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");D=null}D&&G.forEach(function(ie){if(D&&D.storeNames.indexOf(ie)===-1){if(!Z)throw new ke.SubTransaction("Table "+ie+" not included in parent transaction.");D=null}}),Z&&D&&!D.active&&(D=null)}}catch(ie){return D?D._promise(null,function(ve,se){se(ie)}):cr(ie)}var le=(function ie(ve,se,je,ue,pe){return st.resolve().then(function(){var me=lt.transless||lt,be=ve._createTransaction(se,je,ve._dbSchema,ue);if(be.explicit=!0,me={trans:be,transless:me},ue)be.idbtrans=ue.idbtrans;else try{be.create(),be.idbtrans._explicit=!0,ve._state.PR1398_maxLoop=3}catch($e){return $e.name===we.InvalidState&&ve.isOpen()&&0<--ve._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ve.close({disableAutoOpen:!1}),ve.open().then(function(){return ie(ve,se,je,null,pe)})):cr($e)}var _e,Ie=B(pe);return Ie&&Ua(),me=st.follow(function(){var $e;(_e=pe.call(be,be))&&(Ie?($e=dn.bind(null,null),_e.then($e,$e)):typeof _e.next=="function"&&typeof _e.throw=="function"&&(_e=tc(_e)))},me),(_e&&typeof _e.then=="function"?st.resolve(_e).then(function($e){return be.active?$e:cr(new ke.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):me.then(function(){return _e})).then(function($e){return ue&&be._resolve(),be._completion.then(function(){return $e})}).catch(function($e){return be._reject($e),cr($e)})})}).bind(null,this,M,G,D,k);return D?D._promise(M,le,"lock"):lt.trans?Qs(lt.transless,function(){return E._whenReady(le)}):this._whenReady(le)},dr.prototype.table=function(m){if(!v(this._allTables,m))throw new ke.InvalidTable("Table ".concat(m," does not exist"));return this._allTables[m]},dr);function dr(m,b){var k=this;this._middlewares={},this.verno=0;var E=dr.dependencies;this._options=b=s({addons:dr.addons,autoOpen:!0,indexedDB:E.indexedDB,IDBKeyRange:E.IDBKeyRange,cache:"cloned"},b),this._deps={indexedDB:b.indexedDB,IDBKeyRange:b.IDBKeyRange},E=b.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var D,M,G,Z,le,ie={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:J,dbReadyPromise:null,cancelOpen:J,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:b.autoOpen};ie.dbReadyPromise=new st(function(se){ie.dbReadyResolve=se}),ie.openCanceller=new st(function(se,je){ie.cancelOpen=je}),this._state=ie,this.name=m,this.on=$i(this,"populate","blocked","versionchange","close",{ready:[X,J]}),this.once=function(se,je){var ue=function(){for(var pe=[],me=0;me<arguments.length;me++)pe[me]=arguments[me];k.on(se).unsubscribe(ue),je.apply(k,pe)};return k.on(se,ue)},this.on.ready.subscribe=I(this.on.ready.subscribe,function(se){return function(je,ue){dr.vip(function(){var pe,me=k._state;me.openComplete?(me.dbOpenError||st.resolve().then(je),ue&&se(je)):me.onReadyBeingFired?(me.onReadyBeingFired.push(je),ue&&se(je)):(se(je),pe=k,ue||se(function be(){pe.on.ready.unsubscribe(je),pe.on.ready.unsubscribe(be)}))})}}),this.Collection=(D=this,pa(Rd.prototype,function(_e,be){this.db=D;var ue=Pi,pe=null;if(be)try{ue=be()}catch(Ie){pe=Ie}var me=_e._ctx,be=me.table,_e=be.hook.reading.fire;this._ctx={table:be,index:me.index,isPrimKey:!me.index||be.schema.primKey.keyPath&&me.index===be.schema.primKey.name,range:ue,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:pe,or:me.or,valueMapper:_e!==qe?_e:null}})),this.Table=(M=this,pa(Li.prototype,function(se,je,ue){this.db=M,this._tx=ue,this.name=se,this.schema=je,this.hook=M._allTables[se]?M._allTables[se].hook:$i(null,{creating:[Ye,J],reading:[Be,qe],updating:[kt,J],deleting:[Ne,J]})})),this.Transaction=(G=this,pa(Md.prototype,function(se,je,ue,pe,me){var be=this;se!=="readonly"&&je.forEach(function(_e){_e=(_e=ue[_e])===null||_e===void 0?void 0:_e.yProps,_e&&(je=je.concat(_e.map(function(Ie){return Ie.updatesTable})))}),this.db=G,this.mode=se,this.storeNames=je,this.schema=ue,this.chromeTransactionDurability=pe,this.idbtrans=null,this.on=$i(this,"complete","error","abort"),this.parent=me||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new st(function(_e,Ie){be._resolve=_e,be._reject=Ie}),this._completion.then(function(){be.active=!1,be.on.complete.fire()},function(_e){var Ie=be.active;return be.active=!1,be.on.error.fire(_e),be.parent?be.parent._reject(_e):Ie&&be.idbtrans&&be.idbtrans.abort(),cr(_e)})})),this.Version=(Z=this,pa(Mf.prototype,function(se){this.db=Z,this._cfg={version:se,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(le=this,pa(Ga.prototype,function(se,je,ue){if(this.db=le,this._ctx={table:se,index:je===":id"?null:je,or:ue},this._cmp=this._ascending=_t,this._descending=function(pe,me){return _t(me,pe)},this._max=function(pe,me){return 0<_t(pe,me)?pe:me},this._min=function(pe,me){return _t(pe,me)<0?pe:me},this._IDBKeyRange=le._deps.IDBKeyRange,!this._IDBKeyRange)throw new ke.MissingAPI})),this.on("versionchange",function(se){0<se.newVersion?console.warn("Another connection wants to upgrade database '".concat(k.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(k.name,"'. Closing db now to resume the delete request.")),k.close({disableAutoOpen:!1})}),this.on("blocked",function(se){!se.newVersion||se.newVersion<se.oldVersion?console.warn("Dexie.delete('".concat(k.name,"') was blocked")):console.warn("Upgrade '".concat(k.name,"' blocked by other connection holding version ").concat(se.oldVersion/10))}),this._maxKey=ws(b.IDBKeyRange),this._createTransaction=function(se,je,ue,pe){return new k.Transaction(se,je,ue,k._options.chromeTransactionDurability,pe)},this._fireOnBlocked=function(se){k.on("blocked").fire(se),Js.filter(function(je){return je.name===k.name&&je!==k&&!je._state.vcFired}).map(function(je){return je.on("versionchange").fire(se)})},this.use(Ff),this.use(Wd),this.use(sc),this.use(Ud),this.use($f);var ve=new Proxy(this,{get:function(se,je,ue){if(je==="_vip")return!0;if(je==="table")return function(me){return Ns(k.table(me),ve)};var pe=Reflect.get(se,je,ue);return pe instanceof Li?Ns(pe,ve):je==="tables"?pe.map(function(me){return Ns(me,ve)}):je==="_createTransaction"?function(){return Ns(pe.apply(this,arguments),ve)}:pe}});this.vip=ve,E.forEach(function(se){return se(k)})}var Bo,jn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Kd=(wa.prototype.subscribe=function(m,b,k){return this._subscribe(m&&typeof m!="function"?m:{next:m,error:b,complete:k})},wa.prototype[jn]=function(){return this},wa);function wa(m){this._subscribe=m}try{Bo={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{Bo={indexedDB:null,IDBKeyRange:null}}function Xa(m){var b,k=!1,E=new Kd(function(D){var M=B(m),G,Z=!1,le={},ie={},ve={get closed(){return Z},unsubscribe:function(){Z||(Z=!0,G&&G.abort(),se&&Xs.storagemutated.unsubscribe(ue))}};D.start&&D.start(ve);var se=!1,je=function(){return _o(pe)},ue=function(me){Mo(le,me),Yl(ie,le)&&je()},pe=function(){var me,be,_e;!Z&&Bo.indexedDB&&(le={},me={},G&&G.abort(),G=new AbortController,_e=(function(Ie){var $e=pr();try{M&&Ua();var ze=Ws(m,Ie);return ze=M?ze.finally(dn):ze}finally{$e&&cn()}})(be={subscr:me,signal:G.signal,requery:je,querier:m,trans:null}),Promise.resolve(_e).then(function(Ie){k=!0,b=Ie,Z||be.signal.aborted||(le={},(function($e){for(var ze in $e)if(v($e,ze))return;return 1})(ie=me)||se||(Xs(Va,ue),se=!0),_o(function(){return!Z&&D.next&&D.next(Ie)}))},function(Ie){k=!1,["DatabaseClosedError","AbortError"].includes(Ie?.name)||Z||_o(function(){Z||D.error&&D.error(Ie)})}))};return setTimeout(je,0),ve});return E.hasValue=function(){return k},E.getValue=function(){return b},E}var ja=Ss;function ei(m){var b=ks;try{ks=!0,Xs.storagemutated.fire(m),ec(m,!0)}finally{ks=b}}x(ja,s(s({},ce),{delete:function(m){return new ja(m,{addons:[]}).delete()},exists:function(m){return new ja(m,{addons:[]}).open().then(function(b){return b.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(m){try{return b=ja.dependencies,k=b.indexedDB,b=b.IDBKeyRange,(ba(k)?Promise.resolve(k.databases()).then(function(E){return E.map(function(D){return D.name}).filter(function(D){return D!==Oi})}):Gi(k,b).toCollection().primaryKeys()).then(m)}catch{return cr(new ke.MissingAPI)}var b,k},defineClass:function(){return function(m){h(this,m)}},ignoreTransaction:function(m){return lt.trans?Qs(lt.transless,m):m()},vip:Ya,async:function(m){return function(){try{var b=tc(m.apply(this,arguments));return b&&typeof b.then=="function"?b:st.resolve(b)}catch(k){return cr(k)}}},spawn:function(m,b,k){try{var E=tc(m.apply(k,b||[]));return E&&typeof E.then=="function"?E:st.resolve(E)}catch(D){return cr(D)}},currentTransaction:{get:function(){return lt.trans||null}},waitFor:function(m,b){return b=st.resolve(typeof m=="function"?ja.ignoreTransaction(m):m).timeout(b||6e4),lt.trans?lt.trans.waitFor(b):b},Promise:st,debug:{get:function(){return xe},set:function(m){W(m)}},derive:S,extend:h,props:x,override:I,Events:$i,on:Xs,liveQuery:Xa,extendObservabilitySet:Mo,getByKeyPath:$,setByKeyPath:F,delByKeyPath:function(m,b){typeof b=="string"?F(m,b,void 0):"length"in b&&[].map.call(b,function(k){F(m,k,void 0)})},shallowClone:te,deepClone:U,getObjectDiff:rc,cmp:_t,asap:P,minKey:-1/0,addons:[],connections:Js,errnames:we,dependencies:Bo,cache:ra,semVer:"4.2.1",version:"4.2.1".split(".").map(function(m){return parseInt(m)}).reduce(function(m,b,k){return m+b/Math.pow(10,2*k)})})),ja.maxKey=ws(ja.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Xs(Va,function(m){ks||(m=new CustomEvent(va,{detail:m}),ks=!0,dispatchEvent(m),ks=!1)}),addEventListener(va,function(m){m=m.detail,ks||ei(m)}));var ti,ks=!1,Uo=function(){};return typeof BroadcastChannel<"u"&&((Uo=function(){(ti=new BroadcastChannel(va)).onmessage=function(m){return m.data&&ei(m.data)}})(),typeof ti.unref=="function"&&ti.unref(),Xs(Va,function(m){ks||ti.postMessage(m)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(m){if(!Ss.disableBfCache&&m.persisted){xe&&console.debug("Dexie: handling persisted pagehide"),ti?.close();for(var b=0,k=Js;b<k.length;b++)k[b].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(m){!Ss.disableBfCache&&m.persisted&&(xe&&console.debug("Dexie: handling persisted pageshow"),Uo(),ei({all:new Lr(-1/0,[[]])}))})),st.rejectionMapper=function(m,b){return!m||m instanceof ae||m instanceof TypeError||m instanceof SyntaxError||!m.name||!q[m.name]?m:(b=new q[m.name](b||m.message,m),"stack"in m&&y(b,"stack",{get:function(){return this.inner.stack}}),b)},W(xe),s(Ss,Object.freeze({__proto__:null,Dexie:Ss,liveQuery:Xa,Entity:Id,cmp:_t,PropModification:Zs,replacePrefix:function(m,b){return new Zs({replacePrefix:[m,b]})},add:function(m){return new Zs({add:m})},remove:function(m){return new Zs({remove:m})},default:Ss,RangeSet:Lr,mergeRanges:Hi,rangesOverlap:Oo}),{default:Ss}),Ss})})(oh)),oh.exports}var F4=$4();const og=Al(F4),Dy=Symbol.for("Dexie"),Ch=globalThis[Dy]||(globalThis[Dy]=og);if(og.semVer!==Ch.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${og.semVer} and ${Ch.semVer}`);const{liveQuery:MO,mergeRanges:LO,rangesOverlap:$O,RangeSet:FO,cmp:BO,Entity:UO,PropModification:zO,replacePrefix:qO,add:GO,remove:VO,DexieYProvider:HO}=Ch;class B4 extends Ch{constructor(){super("HTLocalDB"),this.version(4).stores({users:"id, email, role, grupoAsignado, isActive, [email+role]",classes:"id, classCode, teacherId, isArchived, [teacherId+isArchived]",classMembers:"id, classId, userId, [classId+userId]",topics:"id, classId",streamItems:"id, classId, type, authorId, isArchived, [classId+type], [classId+isArchived], [type+isArchived]",assignments:"id, streamItemId, isDeleted, [streamItemId+isDeleted]",assignmentStudents:"id, assignmentId, studentId, [assignmentId+studentId]",assignmentSubmissions:"id, assignmentId, studentId, status, [assignmentId+studentId]",quizzes:"id, streamItemId",quizQuestions:"id, quizId, order, [quizId+order]",quizStudents:"id, quizId, studentId, [quizId+studentId]",quizSubmissions:"id, quizId, studentId, status, [quizId+studentId], [quizId+status]",materials:"id, streamItemId",materialStudents:"id, materialId, studentId, [materialId+studentId]",attachments:"id, streamItemId, type",grades:"id, classId, studentId, assignmentId, quizId, [classId+studentId]"})}}const WO=new B4;typeof process<"u"&&process&&typeof process.nextTick=="function"&&(typeof setImmediate=="function"?setImmediate:process.nextTick);const U4="modulepreload",z4=function(e){return"/"+e},Ry={},Yc=function(t,r,s){let o=Promise.resolve();if(r&&r.length>0){let f=function(p){return Promise.all(p.map(v=>Promise.resolve(v).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};var c=f;document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=d?.nonce||d?.getAttribute("nonce");o=f(r.map(p=>{if(p=z4(p),p in Ry)return;Ry[p]=!0;const v=p.endsWith(".css"),x=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${x}`))return;const w=document.createElement("link");if(w.rel=v?"stylesheet":U4,v||(w.as="script"),w.crossOrigin="",w.href=p,h&&w.setAttribute("nonce",h),document.head.appendChild(w),v)return new Promise((y,S)=>{w.addEventListener("load",y),w.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${p}`)))})}))}function i(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return o.then(d=>{for(const h of d||[])h.status==="rejected"&&i(h.reason);return t().catch(i)})},q4=async(e,t)=>{try{const{data:r,error:s}=await Ue.from("users").select("id, email, first_name, last_name, role, avatar, password_hash, is_active, grupo_asignado").eq("email",e).single();if(s||!r)throw new Error("Usuario no encontrado o credenciales incorrectas");if(!r.is_active)throw new Error("Usuario inactivo. Contacta al administrador.");if(!r.password_hash)console.warn("Usuario sin contrasea configurada, permitiendo login sin verificacin");else{console.log(" Verificando password para:",e),console.log("   # Hash en DB:",r.password_hash.substring(0,10)+"..."),console.log("    Password ingresado length:",t.length);const{data:c,error:d}=await Ue.rpc("verify_password",{user_password_hash:r.password_hash,input_password:t});if(console.log("    Resultado RPC verify_password:",{passwordValid:c,passwordError:d}),d)throw console.error("Error verificando contrasea:",d),new Error("Sistema de autenticacin no configurado. La funcin verify_password no est disponible en Supabase. Contacta al administrador.");if(!c)throw new Error("Contrasea incorrecta")}const o={id:r.id,email:r.email,firstName:r.first_name||"",lastName:r.last_name||"",role:r.role||"student",avatar:r.avatar||"",grupoAsignado:r.grupo_asignado||void 0,createdAt:new Date().toISOString()},i=btoa(JSON.stringify({userId:o.id,email:o.email,timestamp:Date.now()}));return{user:o,token:i}}catch(r){throw console.error("Error en login:",r),new Error(r.message||"Error al iniciar sesin")}},G4=async e=>{try{const{data:t,error:r}=await Ue.from("users").select("id, email, first_name, last_name, role, avatar, is_active, grupo_asignado").eq("id",e).single();return r||!t?null:{id:t.id,email:t.email,firstName:t.first_name||"",lastName:t.last_name||"",role:t.role||"student",avatar:t.avatar||"",grupoAsignado:t.grupo_asignado||void 0,createdAt:new Date().toISOString()}}catch(t){return console.error("Error obteniendo usuario:",t),null}},$t=v_()(w_((e,t)=>({user:null,token:null,isAuthenticated:!1,login:async(r,s)=>{console.log("Intentando login con tabla users",r);try{const{user:o,token:i}=await q4(r,s);e({user:o,token:i,isAuthenticated:!0}),localStorage.setItem("token",i),console.log(" Login exitoso",{email:o.email,role:o.role})}catch(o){throw console.error("Error en login:",o),new Error(o.message||"Error al iniciar sesin")}},register:async r=>{try{throw new Error("El registro debe hacerse a travs de un administrador. Contacta al administrador del sistema.")}catch(s){throw console.error("Error en registro:",s),new Error(s.message||"Error al registrar usuario")}},logout:()=>{e({user:null,token:null,isAuthenticated:!1}),localStorage.removeItem("token")},checkAuth:()=>{const r=t();if(r.user&&r.token){(async()=>{try{const s=await G4(r.user.id);s?e({isAuthenticated:!0,user:s}):(e({user:null,token:null,isAuthenticated:!1}),localStorage.removeItem("token"))}catch(s){console.error("Error verificando usuario:",s),e({user:null,token:null,isAuthenticated:!1}),localStorage.removeItem("token")}})();return}e({user:null,token:null,isAuthenticated:!1})},setUser:r=>e({user:r})}),{name:"auth-storage",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated})})),V4=({children:e,allowedRoles:t})=>{const{isAuthenticated:r,user:s}=$t(),o=vs();return r?t&&s&&!t.includes(s.role)?n.jsx(Zv,{to:"/unauthorized",replace:!0}):n.jsx(n.Fragment,{children:e}):n.jsx(Zv,{to:"/login",state:{from:o},replace:!0})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var H4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Oe=(e,t)=>{const r=j.forwardRef(({color:s="currentColor",size:o=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:d="",children:h,...f},p)=>j.createElement("svg",{ref:p,...H4,width:o,height:o,stroke:s,strokeWidth:c?Number(i)*24/Number(o):i,className:["lucide",`lucide-${W4(e)}`,d].join(" "),...f},[...t.map(([v,x])=>j.createElement(v,x)),...Array.isArray(h)?h:[h]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=Oe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=Oe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=Oe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=Oe("Angry",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["path",{d:"M7.5 8 10 9",key:"olxxln"}],["path",{d:"m14 9 2.5-1",key:"1j6cij"}],["path",{d:"M9 10h0",key:"1vxvly"}],["path",{d:"M15 10h0",key:"1j6oav"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=Oe("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=Oe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=Oe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=Oe("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=Oe("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=Oe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=Oe("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=Oe("BatteryLow",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}],["line",{x1:"6",x2:"6",y1:"11",y2:"13",key:"1wd6dw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=Oe("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=Oe("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=Oe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=Oe("BluetoothOff",[["path",{d:"m17 17-5 5V12l-5 5",key:"v5aci6"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M14.5 9.5 17 7l-5-5v4.5",key:"1kddfz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=Oe("Bluetooth",[["path",{d:"m7 7 10 10-5 5V2l5 5L7 17",key:"1q5490"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const of=Oe("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=Oe("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=Oe("BookmarkCheck",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=Oe("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=Oe("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=Oe("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=Oe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=Oe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=Oe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=Oe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eh=Oe("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=Oe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=Oe("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=Oe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=Oe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=Oe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=Oe("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=Oe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=Oe("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=Oe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=Oe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=Oe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lf=Oe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=Oe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=Oe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=Oe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=Oe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=Oe("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=Oe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=Oe("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=Oe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=Oe("Fingerprint",[["path",{d:"M2 12C2 6.5 6.5 2 12 2a10 10 0 0 1 8 4",key:"1jc9o5"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12c0-.7.12-1.37.34-2",key:"1mxgy1"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2c0 .47 0 1.17-.02 2",key:"1fgabc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=Oe("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=Oe("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=Oe("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=Oe("Frown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=Oe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=Oe("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=Oe("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0",key:"aigmz7"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2",key:"1n6bmn"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8",key:"a9iiix"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jE=Oe("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=Oe("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=Oe("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"12sd6o"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=Oe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=Oe("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=Oe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=Oe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=Oe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=Oe("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=Oe("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=Oe("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=Oe("Laugh",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M18 13a6 6 0 0 1-6 5 6 6 0 0 1-6-5h12Z",key:"b2q4dd"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=Oe("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=Oe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=Oe("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=Oe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=Oe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=Oe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=Oe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=Oe("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=Oe("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=Oe("Meh",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"8",x2:"16",y1:"15",y2:"15",key:"1xb1d9"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=Oe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=Oe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=Oe("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=Oe("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=Oe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=Oe("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $E=Oe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=Oe("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=Oe("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=Oe("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=Oe("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=Oe("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=Oe("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=Oe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=Oe("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=Oe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=Oe("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=Oe("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=Oe("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=Oe("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=Oe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=Oe("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=Oe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=Oe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=Oe("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=Oe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=Oe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=Oe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=Oe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=Oe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=Oe("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YE=Oe("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=Oe("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=Oe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=Oe("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=Oe("Speaker",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["circle",{cx:"12",cy:"14",r:"4",key:"1jruaj"}],["path",{d:"M12 14h.01",key:"1etili"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=Oe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=Oe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=Oe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=Oe("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=Oe("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=Oe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=Oe("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=Oe("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=Oe("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=Oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=Oe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=Oe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=Oe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=Oe("Tv",[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=Oe("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=Oe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=Oe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=Oe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=Oe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=Oe("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=Oe("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=Oe("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=Oe("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=Oe("Watch",[["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["polyline",{points:"12 10 12 12 13 13",key:"19dquz"}],["path",{d:"m16.13 7.66-.81-4.05a2 2 0 0 0-2-1.61h-2.68a2 2 0 0 0-2 1.61l-.78 4.05",key:"18k57s"}],["path",{d:"m7.88 16.36.8 4a2 2 0 0 0 2 1.61h2.72a2 2 0 0 0 2-1.61l.81-4.05",key:"16ny36"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=Oe("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=Oe("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=Oe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=Oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=Oe("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=Oe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),at=({children:e,className:t="",padding:r="md"})=>{const s={none:"",sm:"p-4",md:"p-6",lg:"p-8"};return n.jsx("div",{className:`dark:bg-black bg-white border dark:border-white/20 border-gray-200 dark:text-white text-gray-900 rounded-lg shadow-md ${s[r]} ${t}`,children:e})},j3=50,lh=[],Ly=new Set,N3=console.error,S3=e=>{let t=0;for(let r=0;r<e.length;r++){const s=e.charCodeAt(r);t=(t<<5)-t+s,t=t&t}return t.toString()},hp=async e=>{try{const t=S3(e);if(Ly.has(t))return;Ly.add(t);const r=$t.getState().user;await Ue.from("bug_reports").insert({id:crypto.randomUUID(),description:`[AUTO - CAPTURED] ${e} `,user_id:r?.id||null,status:"open",type:"auto",error_hash:t})}catch{}},k3=()=>{console.error=(...e)=>{N3.apply(console,e);try{const t=e.map(o=>{if(o instanceof Error)return`${o.message} 
${o.stack} `;if(typeof o=="object")try{return JSON.stringify(o)}catch{return String(o)}return String(o)}).join(" "),s=`[ERROR] ${new Date().toISOString()}: ${t} `;fp(s),hp(t)}catch{}},window.onerror=(e,t,r,s,o)=>{const i=`[GLOBAL ERROR] ${e} at ${t}:${r}:${s} 
${o?.stack||""} `;fp(i),hp(i)},window.onunhandledrejection=e=>{const t=`[UNHANDLED REJECTION] ${e.reason} `;fp(t),hp(t)}},fp=e=>{lh.push(e),lh.length>j3&&lh.shift()},_3=()=>lh.join(`

`),C3=({isOpen:e,onClose:t})=>{const[r,s]=j.useState(""),[o,i]=j.useState(!1),[c,d]=j.useState(!1),{user:h}=$t();if(!e)return null;const f=async p=>{p.preventDefault(),i(!0);try{const v=_3(),x=r+(v?`

--- Console Logs ---
${v}`:""),{error:w}=await Ue.from("bug_reports").insert({id:crypto.randomUUID(),description:x,user_id:h?.id,status:"open"});if(w)throw w;d(!0),setTimeout(()=>{d(!1),s(""),t()},2e3)}catch(v){console.error("Error submitting bug report:",v),alert("Error submitting report. Please try again.")}finally{i(!1)}};return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:n.jsxs(at,{className:"w-full max-w-md bg-white shadow-xl relative animate-in fade-in zoom-in duration-200",children:[n.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Rr,{className:"w-5 h-5"})}),n.jsxs("div",{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2 uppercase",children:"Report a Bug"}),n.jsx("p",{className:"text-sm text-gray-500 mb-6 uppercase",children:"Found an issue? Let us know so we can fix it."}),c?n.jsx("div",{className:"bg-green-50 text-green-700 p-4 rounded-lg text-center uppercase font-medium",children:"Report submitted successfully!"}):n.jsxs("form",{onSubmit:f,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"description",className:"block text-xs font-bold text-gray-700 uppercase mb-1",children:"Description"}),n.jsx("textarea",{id:"description",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none text-gray-900 bg-white placeholder-gray-400",placeholder:"Describe the bug you encountered...",value:r,onChange:p=>s(p.target.value),required:!0})]}),n.jsx("div",{className:"flex justify-end pt-2",children:n.jsxs("button",{type:"submit",disabled:o||!r.trim(),className:`flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-bold uppercase text-sm rounded-lg transition-colors ${o||!r.trim()?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx(uf,{className:"w-4 h-4"}),o?"Sending...":"Send Report"]})})]})]})]})})},E3=({user:e,collapsed:t})=>{if(t)return null;const r=e?.email||"Usuario",s=e?.role||"",o=e?.grupoAsignado||"",c=(p=>{switch(p){case"admin":return"Administrador";case"teacher":return"Profesor";case"student":return"Estudiante";case"parent":return"Padre";default:return p||""}})(s),d=c&&o&&c.toLowerCase()===o.toLowerCase(),h=c&&!d,f=o;return n.jsx("div",{className:"px-6 py-4 border-b dark:border-white/20 border-gray-200",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-10 h-10 dark:bg-black dark:border border-white/20 bg-gray-200 rounded-full flex items-center justify-center flex-shrink-0",children:n.jsx(es,{className:"w-6 h-6 dark:text-white text-gray-900"})}),n.jsxs("div",{className:"ml-3 min-w-0 flex-1 overflow-hidden",children:[n.jsx("p",{className:"text-sm font-medium dark:text-white text-gray-900 uppercase hidden",children:e?.firstName&&e?.lastName?`${e.firstName} ${e.lastName}`.toUpperCase():"Usuario"}),n.jsx("p",{className:"text-[10px] dark:text-white text-gray-900 uppercase truncate",children:r.toUpperCase()}),(h||f)&&n.jsxs("div",{className:"mt-1 space-y-0.5",children:[h&&n.jsx("p",{className:"text-[9px] dark:text-white/80 text-gray-700 uppercase truncate",children:c.toUpperCase()}),f&&n.jsx("p",{className:"text-[9px] dark:text-white/80 text-gray-700 truncate",children:o})]})]})]})})},A3=({item:e,collapsed:t,expandedMenus:r,onToggleSubmenu:s})=>{if(e.to==="/dashboard/profile"||e.to==="/dashboard/settings")return null;const o="flex";if(e.submenu){const i=e.key||e.to||e.id||"",c=r.includes(i);return n.jsxs("div",{className:"",children:[n.jsxs("button",{onClick:()=>!t&&s(i),className:`flex items-center w-full ${t?"justify-center":""} px-3 py-2 rounded-lg text-sm font-medium transition-colors group relative text-gray-900 hover:bg-gray-100 hover:text-gray-700 uppercase`,title:t?e.label:"",children:[n.jsx(e.icon,{className:"w-5 h-5 transition-all duration-200 mr-0"}),!t&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"ml-3 uppercase",children:e.label.toUpperCase()}),n.jsx(rx,{className:`w-4 h-4 ml-auto transition-transform duration-200 ${c?"rotate-90":""}`})]}),t&&n.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 dark:bg-black dark:border border-white/20 bg-gray-700 dark:text-white text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50 uppercase",children:e.label.toUpperCase()})]}),!t&&c&&n.jsx("div",{className:"ml-4 mt-1 space-y-1",children:e.submenu.map(d=>n.jsxs(zp,{to:d.to,className:({isActive:h})=>"flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors group relative "+(h?"bg-gray-100 text-gray-900":"text-gray-900 hover:bg-gray-100 hover:text-gray-700"),children:[n.jsx(d.icon,{className:"w-4 h-4 mr-3"}),n.jsx("span",{className:"uppercase",children:d.label.toUpperCase()})]},d.to))})]},e.key||e.to||e.id||"submenu")}return e.googleSheetUrl?n.jsxs("a",{href:e.googleSheetUrl,target:"_blank",rel:"noopener noreferrer",className:`${o} items-center ${t?"justify-center":""} px-3 py-2 rounded-lg text-sm font-medium transition-colors group relative dark:text-white text-gray-700 dark:hover:bg-white/10 hover:bg-gray-100 dark:hover:text-white hover:text-gray-900 uppercase`,title:t?`${e.label} (Google Sheets)`:"",children:[n.jsx(e.icon,{className:"w-5 h-5 transition-all duration-200 mr-0"}),!t&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"ml-3 uppercase",children:e.label.toUpperCase()}),n.jsx("span",{className:"ml-auto text-xs text-blue-500",children:""})]}),t&&n.jsxs("div",{className:"absolute left-full ml-2 px-2 py-1 dark:bg-gray-800 bg-gray-700 dark:text-white text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50 uppercase",children:[e.label.toUpperCase()," (GOOGLE SHEETS)"]})]},e.key||e.to||e.id||"google-sheets"):e.external?n.jsxs("a",{href:e.to,target:"_blank",rel:"noopener noreferrer",className:`${o} items-center ${t?"justify-center":""} px-3 py-2 rounded-lg text-sm font-medium transition-colors group relative dark:text-white text-gray-700 dark:hover:bg-white/10 hover:bg-gray-100 dark:hover:text-white hover:text-gray-900 uppercase`,title:t?`${e.label} (Nueva Ventana)`:"",children:[n.jsx(e.icon,{className:"w-5 h-5 transition-all duration-200 mr-0"}),!t&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"ml-3 uppercase",children:e.label.toUpperCase()}),n.jsx("span",{className:"ml-auto text-xs text-blue-500",children:""})]}),t&&n.jsxs("div",{className:"absolute left-full ml-2 px-2 py-1 dark:bg-gray-800 bg-gray-700 dark:text-white text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50 uppercase",children:[e.label.toUpperCase()," (NUEVA VENTANA)"]})]},e.to||e.key||e.id||"external-link"):e.to?n.jsxs(zp,{to:e.to,end:e.to==="/dashboard",className:({isActive:i})=>`${e.to==="/dashboard/db"?"hidden md:flex":o} items-center ${t?"justify-center":""} px-3 py-2 rounded-lg text-sm font-medium transition-colors group relative `+(i?"bg-gray-100 text-gray-900":"text-gray-900 hover:bg-gray-100 hover:text-gray-700"),title:t?e.label:"",children:[n.jsx(e.icon,{className:"w-5 h-5 transition-all duration-200 mr-0"}),!t&&n.jsx("span",{className:"ml-3 uppercase",children:e.label.toUpperCase()}),t&&n.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 dark:bg-black dark:border border-white/20 bg-gray-700 dark:text-white text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50 uppercase",children:e.label.toUpperCase()})]},e.to||e.key||e.id||"nav-link"):(console.warn('NavigationItem sin "to" definido:',e),null)};class I3{async getMenuItems(t){return this.getDefaultMenuItems(t)}getDefaultMenuItems(t){const r=new Date,o=$t.getState().user?.email==="ark2784@gmail.com",i=[{id:"1",label:"HOME",icon:"Home",to:"/dashboard",order:0,isActive:!0,role:"admin",createdAt:r,updatedAt:r},{id:"2",label:"CALENDAR",icon:"Calendar",to:"/dashboard/calendar",order:1,isActive:!0,role:"admin",createdAt:r,updatedAt:r},{id:"3",label:"TEACHING",icon:"BookOpen",to:"/dashboard/teaching",order:2,isActive:!0,role:"admin",createdAt:r,updatedAt:r},{id:"4",label:"ARCHIVED",icon:"Archive",to:"/dashboard/archived-classes",order:3,isActive:!0,role:"admin",createdAt:r,updatedAt:r},{id:"5",label:"SETTINGS",icon:"Settings",order:4,isActive:!0,role:"admin",createdAt:r,updatedAt:r}];return o&&i.push({id:"restricted-users-menu",label:"USERS",icon:"Users",to:"/dashboard/restricted-users",order:i.length,isActive:!0,role:"admin",createdAt:r,updatedAt:r}),i.push({id:"configuration-menu",label:"CONFIGURATION",icon:"User",to:"/dashboard/configuration",order:i.length,isActive:!0,role:"admin",createdAt:r,updatedAt:r}),i.push({id:"bug-reports-menu",label:"REPORTS",icon:"FileText",to:"/dashboard/bug-reports",order:i.length,isActive:!0,role:"admin",createdAt:r,updatedAt:r}),t==="student"?[{id:"s1",label:"HOME",icon:"Home",to:"/dashboard",order:0,isActive:!0,role:"student",createdAt:r,updatedAt:r},{id:"s2",label:"MY CLASSES",icon:"BookOpen",to:"/dashboard/classes",order:1,isActive:!0,role:"student",createdAt:r,updatedAt:r},{id:"s3",label:"CALENDAR",icon:"Calendar",to:"/dashboard/calendar",order:2,isActive:!0,role:"student",createdAt:r,updatedAt:r}]:t==="teacher"?[{id:"t1",label:"HOME",icon:"Home",to:"/dashboard",order:0,isActive:!0,role:"teacher",createdAt:r,updatedAt:r},{id:"t2",label:"MY CLASSES",icon:"BookOpen",to:"/dashboard/classes",order:1,isActive:!0,role:"teacher",createdAt:r,updatedAt:r},{id:"t3",label:"TEACHING",icon:"BookOpen",to:"/dashboard/teaching",order:2,isActive:!0,role:"teacher",createdAt:r,updatedAt:r},{id:"t4",label:"CALENDAR",icon:"Calendar",to:"/dashboard/calendar",order:3,isActive:!0,role:"teacher",createdAt:r,updatedAt:r}]:i.filter(c=>c.role===t||t==="admin")}async getAllMenuItems(){return this.getDefaultMenuItems("admin")}async createMenuItem(t){throw new Error("El men es hardcodeado. No se pueden crear nuevos elementos.")}async updateMenuItem(t,r){throw new Error("El men es hardcodeado. No se pueden actualizar elementos.")}async deleteMenuItem(t){throw new Error("El men es hardcodeado. No se pueden eliminar elementos.")}async reorderMenuItems(t){throw new Error("El men es hardcodeado. No se puede reordenar.")}async toggleMenuItem(t){throw new Error("El men es hardcodeado. No se pueden desactivar elementos.")}async restoreMenuItem(t){throw new Error("El men es hardcodeado. No se pueden restaurar elementos.")}async getAllMenuItemsWithHidden(){return this.getAllMenuItems()}async getAvailableIcons(){return["Home","Users","FileText","ShoppingCart","Building2","CheckSquare","Settings","User","Plus","List","BookOpen","Calendar","ClipboardList","BarChart3","Database","MessageCircle","Layers","ExternalLink","UserPlus","Mail","Phone","MapPin","Clock","Star","Heart","Download","Upload","Edit","Trash2","Save","Search","Filter","RefreshCw","Eye","EyeOff","Lock","Unlock","Shield","Key","Bell","BellOff","Volume2","VolumeX","Play","Pause","Stop","SkipBack","SkipForward","Repeat","Shuffle","Music","Video","Camera","Image","File","Folder","FolderOpen","Archive","Tag","Tags","Flag","Bookmark","BookmarkCheck","ThumbsUp","ThumbsDown","Smile","Frown","Meh","Laugh","Angry","Sad","Wink","Tongue","Kiss","HeartHandshake","Hand","Handshake","Fingerprint","Scan","QrCode","Barcode","CreditCard","Wallet","Coins","Banknote","Receipt","Calculator","Percent","TrendingUp","TrendingDown","Activity","Pulse","Zap","Battery","BatteryLow","Wifi","WifiOff","Bluetooth","BluetoothOff","Radio","Tv","Monitor","Laptop","Smartphone","Tablet","Watch","Headphones","Speaker","Mic","MicOff","Volume1"]}}const x2=new I3,cl=x2,v2=e=>{const[t,r]=j.useState([]),[s,o]=j.useState(!0),[i,c]=j.useState(null),d=j.useCallback(async()=>{try{o(!0),c(null);const w=await cl.getMenuItems(e);r(w.sort((y,S)=>y.order-S.order))}catch(w){c(w instanceof Error?w.message:"Error al cargar men")}finally{o(!1)}},[e]),h=j.useCallback(async w=>{try{c(null);const y=await cl.createMenuItem(w);return r(S=>[...S,y].sort((C,T)=>C.order-T.order)),y}catch(y){throw c(y instanceof Error?y.message:"Error al crear elemento"),y}},[]),f=j.useCallback(async(w,y)=>{try{c(null);const S=await cl.updateMenuItem(w,y);return r(C=>C.map(T=>T.id===w?S:T).sort((T,A)=>T.order-A.order)),S}catch(S){throw c(S instanceof Error?S.message:"Error al actualizar elemento"),S}},[]),p=j.useCallback(async w=>{try{c(null),await cl.deleteMenuItem(w),r(y=>y.filter(S=>S.id!==w))}catch(y){throw c(y instanceof Error?y.message:"Error al eliminar elemento"),y}},[]),v=j.useCallback(async w=>{try{c(null);const y=w.map((S,C)=>({id:S,order:C+1}));await cl.reorderMenuItems(y),r(S=>{const C=w.map(A=>S.find(I=>I.id===A)).filter(Boolean),T=S.filter(A=>!w.includes(A.id));return[...C,...T]})}catch(y){throw c(y instanceof Error?y.message:"Error al reordenar elementos"),y}},[]),x=j.useCallback(async w=>{try{c(null);const y=await cl.toggleMenuItem(w);return r(S=>S.map(C=>C.id===w?y:C).sort((C,T)=>C.order-T.order)),y}catch(y){throw c(y instanceof Error?y.message:"Error al cambiar estado del elemento"),y}},[]);return j.useEffect(()=>{d()},[d]),{menuItems:t.filter(w=>w.isActive),allMenuItems:t,loading:s,error:i,createMenuItem:h,updateMenuItem:f,deleteMenuItem:p,reorderMenuItems:v,toggleMenuItem:x,refreshMenu:d}},$y={Home:cg,Users:Sr,FileText:fr,ShoppingCart:QE,Building2:lE,CheckSquare:uE,Settings:p2,User:es,Plus:Hr,List:h2,BookOpen:of,Calendar:Fs,ClipboardList:nx,BarChart3:i2,Database:c2,MessageCircle:ml,Layers:TE,ExternalLink:Sl,UserPlus:Bc,Mail:Ba,Phone:df,MapPin:sx,Clock:Xn,Star:ax,Heart:u2,Download:Zc,Upload:ug,Edit:Bn,Trash2:Gr,Save:Gs,Search:Ii,Filter:gE,RefreshCw:Ma,Eye:Ai,EyeOff:cf,Lock:Th,Unlock:h3,Shield:g2,Key:EE,Bell:rE,BellOff:tE,Volume2:m3,VolumeX:p3,Play:qE,Pause:UE,SkipBack:YE,SkipForward:ZE,Repeat:f2,Shuffle:JE,Music:FE,Video:f3,Camera:dE,Image:kE,File:pE,Folder:lg,FolderOpen:Us,Archive:da,Tag:s3,Tags:a3,Flag:vE,Bookmark:iE,BookmarkCheck:aE,ThumbsUp:o3,ThumbsDown:i3,Smile:e3,Frown:yE,Meh:OE,Laugh:IE,Angry:Q4,HeartHandshake:SE,Hand:wE,Handshake:jE,Fingerprint:xE,Scan:KE,QrCode:VE,Barcode:Z4,CreditCard:fE,Wallet:g3,Coins:hE,Banknote:Y4,Receipt:WE,Calculator:cE,Percent:zE,TrendingUp:c3,TrendingDown:l3,Activity:K4,Zap:w3,Battery:eE,BatteryLow:X4,Wifi:y3,WifiOff:v3,Bluetooth:sE,BluetoothOff:nE,Radio:HE,Tv:u3,Monitor:LE,Laptop:AE,Smartphone:XE,Tablet:n3,Watch:x3,Headphones:NE,Speaker:t3,Mic:ME,MicOff:PE,DollarSign:lf,Package:Dh,ArrowLeft:a2,ArrowRight:J4,CheckCircle:sn,AlertCircle:Ei,AlertTriangle:s2,Trophy:d3,Palette:BE,Factory:mE,Globe:bE,Send:uf,X:Rr,Minus:dg,GripVertical:d2},T3=e=>{const t=$y[e.icon]||cg,r=e.to||(e.label==="SETTINGS"?"/dashboard/settings":void 0);!e.to&&e.label!=="SETTINGS"&&console.warn('DynamicMenuItem sin "to" definido:',e);const s={to:r,key:e.key,icon:t,label:e.label,googleSheetUrl:e.googleSheetUrl,id:e.id};return e.submenu&&e.submenu.length>0&&(s.submenu=e.submenu.map(o=>({to:o.to,icon:$y[o.icon]||cg,label:o.label}))),s},y2=j.createContext(void 0),D3=({children:e})=>{const[t,r]=j.useState(!1),s=j.useCallback(c=>{document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light")},[]);j.useEffect(()=>{s(!1)},[s]),j.useEffect(()=>{t&&r(!1),s(!1)},[t,s]),j.useEffect(()=>{const c=d=>{d.key==="theme"&&d.newValue==="dark"&&s(!1)};return window.addEventListener("storage",c),()=>{window.removeEventListener("storage",c)}},[s]);const o=j.useCallback(c=>{r(!1)},[]),i=j.useCallback(()=>{r(!1)},[]);return n.jsx(y2.Provider,{value:{dark:t,setDark:o,toggleTheme:i},children:e})},b2=()=>{const e=j.useContext(y2);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},R3=({collapsed:e})=>{const{dark:t,toggleTheme:r}=b2();return n.jsxs("button",{onClick:r,className:`hidden flex items-center w-full px-3 py-2 text-sm font-medium dark:text-white text-gray-900 dark:hover:bg-white/10 hover:bg-gray-100 dark:hover:text-white hover:text-gray-700 rounded-lg transition-colors group relative uppercase ${e?"justify-center":""}`,title:e?t?"Modo Claro":"Modo Oscuro":"","aria-label":t?"Cambiar a modo claro":"Cambiar a modo oscuro",children:[t?n.jsx(r3,{className:"w-5 h-5 mr-0"}):n.jsx($E,{className:"w-5 h-5 mr-0"}),!e&&n.jsx("span",{className:"ml-3 uppercase",children:t?"Modo Claro":"Modo Oscuro"}),e&&n.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 dark:bg-black dark:border border-white/20 bg-gray-700 dark:text-white text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50 uppercase",children:t?"MODO CLARO":"MODO OSCURO"})]})};function hf(){try{const{dark:e,setDark:t}=b2();return[e,t]}catch{const e=localStorage.getItem("theme");return[e?e==="dark":!0,()=>{}]}}const Bs="/assets/logohappy-BoT4hAQf.png",O3=({collapsed:e,onToggleCollapse:t,role:r,expandedMenus:s,onToggleSubmenu:o,onLogout:i})=>{const c=Kr(),{user:d}=$t(),{menuItems:h,loading:f,error:p}=v2(r),[v]=hf(),[x,w]=j.useState(!1),y=Bs,S=pt.useMemo(()=>h.filter(T=>!(!T.to&&T.label==="SETTINGS")).map(T3),[h]);return f?n.jsx("div",{className:`fixed inset-y-0 left-0 ${e?"w-16":"w-64"} bg-sidebar shadow-lg border-r border-border transition-all duration-200`,children:n.jsx("div",{className:"flex flex-col h-full items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-accent"})})}):p?n.jsx("div",{className:`fixed inset-y-0 left-0 ${e?"w-16":"w-64"} bg-sidebar shadow-lg border-r border-border transition-all duration-200`,children:n.jsx("div",{className:"flex flex-col h-full items-center justify-center p-4",children:n.jsxs("div",{className:"text-red-500 text-sm text-center",children:["Error al cargar men: ",p]})})}):n.jsxs("div",{className:`fixed inset-y-0 left-0 ${e?"w-16":"w-64"} bg-white shadow-lg border-r border-gray-200 transition-all duration-200 z-50`,children:[n.jsxs("div",{className:"flex flex-col h-full relative",children:[n.jsx("button",{onClick:t,className:"absolute top-1/2 -right-4 z-20 transform -translate-y-1/2 bg-white shadow-lg border border-gray-200 p-2 rounded-full hover:bg-gray-100 transition","aria-label":e?"Expandir men":"Colapsar men",style:{boxShadow:"0 2px 8px rgba(0,0,0,0.12)"},children:e?n.jsx(rx,{className:"w-5 h-5 text-gray-900"}):n.jsx(l2,{className:"w-5 h-5 text-gray-900"})}),n.jsx("div",{className:"flex items-center border-b border-gray-200 bg-white transition-all duration-200",children:n.jsx("div",{className:`flex items-center transition-all duration-200 cursor-pointer hover:opacity-80 ${e?"justify-center w-16 py-4":"justify-center w-full py-6"}`,onClick:()=>c("/dashboard"),children:n.jsx("img",{src:e?Bs:y,alt:"La Productora Logo",className:`transition-all duration-200 ${e?"h-8 w-8":"h-20 w-auto"}`})})}),n.jsx(E3,{user:d,collapsed:e}),n.jsx("nav",{className:"flex-1 px-2 py-4 space-y-2",children:S.map((C,T)=>n.jsx(A3,{item:C,collapsed:e,expandedMenus:s,onToggleSubmenu:o},C.key||C.to||C.id||`menu-item-${T}`))}),n.jsxs("div",{className:"border-t dark:border-white/20 border-gray-200 transition-all duration-200 px-2 py-4",children:[n.jsx("div",{className:"mb-2",children:n.jsx(R3,{collapsed:e})}),!1,n.jsxs("div",{className:`flex ${e?"flex-col gap-2":"flex-row gap-1"} mt-1`,children:[n.jsxs("button",{onClick:i,className:`flex items-center ${e?"w-full justify-center":"flex-1"} px-3 py-2 text-sm font-medium dark:text-white text-gray-900 dark:hover:bg-white/10 hover:bg-gray-100 dark:hover:text-white hover:text-gray-700 rounded-lg transition-colors group relative uppercase`,title:e?"Cerrar Sesin":"",children:[n.jsx(DE,{className:"w-5 h-5 mr-0"}),!e&&n.jsx("span",{className:"ml-3 uppercase",children:"Cerrar Sesin"}),e&&n.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 dark:bg-black dark:border border-white/20 bg-gray-700 dark:text-white text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50 uppercase",children:"CERRAR SESIN"})]}),n.jsxs("button",{onClick:()=>w(!0),className:`flex items-center ${e?"w-full justify-center":"w-auto"} px-2 py-2 text-sm font-medium dark:text-gray-400 text-gray-400 dark:hover:bg-white/10 hover:bg-gray-100 dark:hover:text-gray-200 hover:text-gray-600 rounded-lg transition-colors group relative uppercase`,title:"Reportar Error",children:[n.jsx(o2,{className:"w-5 h-5"}),n.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-700 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50 uppercase",children:"REPORTAR ERROR"})]})]})]})]}),n.jsx(C3,{isOpen:x,onClose:()=>w(!1)})]})},P3=()=>{const[e,t]=j.useState(!1),[r,s]=j.useState([]);return{collapsed:e,expandedMenus:r,toggleCollapse:()=>{t(c=>!c)},toggleSubmenu:c=>{s(d=>d.includes(c)?d.filter(h=>h!==c):[...d,c])}}},M3=()=>{const e=Kr(),{collapsed:t,expandedMenus:r,toggleCollapse:s,toggleSubmenu:o}=P3(),{logout:i,user:c}=$t(),d=()=>{i(),e("/login")},h=c?.role||"admin";return n.jsxs("div",{className:"min-h-screen dark:bg-black bg-white",children:[n.jsx(O3,{collapsed:t,onToggleCollapse:s,role:h,expandedMenus:r,onToggleSubmenu:o,onLogout:d}),n.jsx("div",{className:`${t?"ml-16":"ml-16 md:ml-64"} dark:bg-black bg-white transition-all duration-200 overflow-y-auto h-screen`,children:n.jsx("main",{className:"p-0 md:p-6 dark:text-gray-400 text-gray-800 uppercase",children:n.jsx(Dk,{})})})]})};function L3(e={}){const{immediate:t=!1,onNeedRefresh:r,onOfflineReady:s,onRegistered:o,onRegisteredSW:i,onRegisterError:c}=e;let d,h;const f=async(v=!0)=>{await h};async function p(){if("serviceWorker"in navigator){if(d=await Yc(async()=>{const{Workbox:v}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:v}},[]).then(({Workbox:v})=>new v("/sw.js",{scope:"/",type:"classic"})).catch(v=>{c?.(v)}),!d)return;d.addEventListener("activated",v=>{(v.isUpdate||v.isExternal)&&window.location.reload()}),d.addEventListener("installed",v=>{v.isUpdate||s?.()}),d.register({immediate:t}).then(v=>{i?i("/sw.js",v):o?.(v)}).catch(v=>{c?.(v)})}}return h=p(),f}function $3(e={}){const{immediate:t=!0,onNeedRefresh:r,onOfflineReady:s,onRegistered:o,onRegisteredSW:i,onRegisterError:c}=e,[d,h]=j.useState(!1),[f,p]=j.useState(!1),[v]=j.useState(()=>L3({immediate:t,onOfflineReady(){p(!0),s?.()},onNeedRefresh(){h(!0),r?.()},onRegistered:o,onRegisteredSW:i,onRegisterError:c}));return{needRefresh:[d,h],offlineReady:[f,p],updateServiceWorker:v}}function F3(){const{offlineReady:[e,t],needRefresh:[r,s],updateServiceWorker:o}=$3({onRegistered(c){console.log("SW Registered:",c)},onRegisterError(c){console.log("SW registration error",c)}});j.useEffect(()=>{e&&console.log("App is ready for offline work.")},[e]);const i=()=>{t(!1),s(!1)};return!e&&!r?null:n.jsxs("div",{className:"fixed bottom-0 right-0 m-4 p-4 bg-gray-800 text-white rounded-lg shadow-lg z-50 flex flex-col gap-2 max-w-sm",children:[n.jsx("div",{className:"text-sm",children:e?n.jsx("span",{children:"App lista para trabajar offline"}):n.jsx("span",{children:"Nueva versin disponible, recargar?"})}),n.jsxs("div",{className:"flex gap-2",children:[r&&n.jsx("button",{className:"px-3 py-1 bg-blue-400 rounded hover:bg-blue-500 text-xs font-bold",onClick:()=>o(!0),children:"Recargar"}),n.jsx("button",{className:"px-3 py-1 bg-gray-600 rounded hover:bg-gray-700 text-xs",onClick:i,children:"Cerrar"})]})]})}const He=({children:e,variant:t="primary",size:r="md",onClick:s,type:o="button",disabled:i=!1,className:c=""})=>{const d="font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2",h={primary:"bg-[#A5C64C] border-2 border-[#A5C64C] text-white hover:bg-[#4B8B3B] hover:border-[#4B8B3B] focus:ring-[#A5C64C] font-semibold",secondary:"bg-transparent dark:text-white text-[#6A3A1E] hover:bg-[#A5C64C]/10 dark:hover:text-[#A5C64C] focus:ring-[#A5C64C]",outline:"border-2 border-[#A5C64C] dark:text-[#A5C64C] text-[#A5C64C] hover:bg-[#A5C64C]/10 dark:hover:bg-[#A5C64C]/10 focus:ring-[#A5C64C]",danger:"bg-transparent border-2 border-error text-error hover:bg-error/10 focus:ring-error"},f={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"},p=i?"opacity-50 cursor-not-allowed":"";return n.jsx("button",{type:o,onClick:s,disabled:i,className:`${d} ${h[t]} ${f[r]} ${p} ${c}`,children:e})},B3=()=>{const e=[{icon:u2,title:"Educacin del Corazn",description:"Nacimos 100% del corazn, con Daniela educando en casa a su hija, incorporando mtodos educativos especializados"},{icon:Sr,title:"Comunidad Impulsada",description:"Hemos crecido a 70 estudiantes, 100% impulsados por la comunidad que reconoce nuestros resultados"},{icon:oE,title:"Inclusin Neurodiversa",description:"nica oferta educativa para nios neurodiversos en Puerto Aventuras (Autismo, ADHD, otros)"}],t=["Ms de 100 nios impactados positivamente","Mtodo educativo personalizado y efectivo","Inclusin de nios neurodiversos","Educacin basada en proyectos transversales","Desarrollo de habilidades para la vida","Comunidad multicultural y solidaria"],r=[{question:"Qu hace nico a Happy Tribe?",answer:"Somos la nica oferta educativa para nios neurodiversos en Puerto Aventuras, con un mtodo personalizado que combina educacin del corazn con tcnicas especializadas."},{question:"Cmo funciona el mtodo educativo?",answer:"Nuestro mtodo se basa en proyectos transversales que desarrollan habilidades para la vida, adaptndose a las necesidades individuales de cada nio."},{question:"Qu edades atienden?",answer:"Atendemos nios de diferentes edades, desde preescolar hasta primaria, con programas adaptados a cada etapa del desarrollo."}],[s,o]=hf();return n.jsxs("div",{className:"min-h-screen bg-white",children:[n.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex justify-between items-center py-4",children:[n.jsx("div",{className:"flex items-center",children:n.jsx("img",{src:Bs,alt:"Happy Tribe Logo",className:"h-16 w-auto"})}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("a",{href:"https://www.instagram.com/happytribe.mx",target:"_blank",rel:"noopener noreferrer",className:"text-black hover:text-pink-600 transition-colors flex items-center","aria-label":"Instagram",children:n.jsx(CE,{className:"w-6 h-6"})}),n.jsx(Os,{to:"/login",className:"text-black hover:text-brand-green-medium transition-colors font-medium",children:"Iniciar Sesin"})]})]})})}),n.jsx("section",{className:"py-20 bg-white",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"flex justify-center mb-8",children:n.jsx("img",{src:Bs,alt:"Happy Tribe Logo",className:"h-32 w-auto"})}),n.jsxs("h1",{className:"text-5xl font-bold text-black mb-6",children:["Educacin del Corazn",n.jsx("span",{className:"text-black block hidden",children:"Para Nios Neurodiversos"})]}),n.jsx("p",{className:"text-xl text-black mb-8 max-w-3xl mx-auto",children:"nica oferta educativa especializada en Puerto Aventuras. Ms de 100 nios impactados positivamente con nuestro mtodo personalizado."}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[n.jsx(Os,{to:"/register",className:"hidden",children:n.jsx(He,{variant:"outline",size:"lg",className:"border-2 border-brand-green-light text-brand-green-light hover:bg-brand-green-light hover:text-white font-semibold shadow-lg",children:"Registrarse"})}),n.jsx(Os,{to:"/login",children:n.jsx(He,{variant:"primary",size:"lg",className:"bg-white text-gray-900 border-2 border-white hover:bg-gray-100 hover:border-gray-100 font-semibold shadow-lg",children:"Iniciar Sesin"})})]})]})})}),n.jsx("section",{className:"py-20",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-3xl font-bold text-black mb-4",children:"Por qu elegir Happy Tribe?"}),n.jsx("p",{className:"text-lg text-black max-w-2xl mx-auto",children:"Nacimos del corazn y crecimos con la comunidad. Ofrecemos educacin especializada para nios neurodiversos."})]}),n.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:e.map((i,c)=>n.jsxs("div",{className:"text-center p-6 rounded-lg border border-gray-200 hover:shadow-lg transition-shadow bg-white",children:[n.jsx("div",{className:"w-16 h-16 bg-brand-green-light rounded-lg flex items-center justify-center mx-auto mb-4 shadow-sm",children:n.jsx(i.icon,{className:"w-8 h-8 text-white"})}),n.jsx("h3",{className:"text-xl font-semibold text-black mb-2",children:i.title}),n.jsx("p",{className:"text-black leading-relaxed",children:i.description})]},c))})]})}),n.jsx("section",{className:"py-20 bg-gray-50",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-black mb-6",children:"Quines Somos?"}),n.jsx("p",{className:"text-lg text-black mb-6",children:"Happy Tribe naci del corazn de Daniela, quien comenz educando en casa a su hija, incorporando mtodos educativos especializados para nios neurodiversos."}),n.jsx("p",{className:"text-lg text-black mb-6",children:"Hemos crecido a 70 estudiantes, 100% impulsados por la comunidad que reconoce nuestros resultados y la transformacin positiva en los nios."}),n.jsxs("div",{className:"flex items-center text-brand-green-medium font-semibold text-lg",children:[n.jsx($a,{className:"w-5 h-5 mr-2 text-brand-green-medium"}),n.jsx("span",{className:"text-black",children:"Ms de 100 nios impactados positivamente"})]})]}),n.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg border border-gray-200",children:[n.jsx("h3",{className:"text-2xl font-bold text-black mb-4",children:"Nuestra Misin"}),n.jsx("p",{className:"text-black mb-6",children:"Proporcionar educacin de calidad, inclusiva y personalizada para nios neurodiversos, desarrollando sus habilidades y potencial nico."}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(sn,{className:"w-5 h-5 text-brand-green-medium mr-3"}),n.jsx("span",{className:"text-black",children:"Inclusin neurodiversa"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(sn,{className:"w-5 h-5 text-brand-green-medium mr-3"}),n.jsx("span",{className:"text-black",children:"Mtodo personalizado"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(sn,{className:"w-5 h-5 text-brand-green-medium mr-3"}),n.jsx("span",{className:"text-black",children:"Comunidad solidaria"})]})]})]})]})})}),n.jsx("section",{className:"py-20 bg-white",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-3xl font-bold text-black mb-4",children:"Nuestro Impacto"}),n.jsx("p",{className:"text-lg text-black max-w-2xl mx-auto",children:"Hemos transformado la vida de ms de 100 nios y sus familias a travs de nuestro enfoque educativo nico."})]}),n.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((i,c)=>n.jsxs("div",{className:"flex items-center p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[n.jsx(sn,{className:"w-5 h-5 text-brand-green-medium mr-3 flex-shrink-0"}),n.jsx("span",{className:"text-black font-medium",children:i})]},c))})]})}),n.jsx("section",{className:"py-20 bg-gray-50",children:n.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-3xl font-bold text-black mb-4",children:"Preguntas Frecuentes"}),n.jsx("p",{className:"text-lg text-black",children:"Resolvemos las dudas ms comunes sobre nuestro programa educativo."})]}),n.jsx("div",{className:"space-y-6",children:r.map((i,c)=>n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:[n.jsx("h3",{className:"text-lg font-semibold text-black mb-3",children:i.question}),n.jsx("p",{className:"text-black leading-relaxed",children:i.answer})]},c))})]})}),n.jsx("section",{className:"py-20 bg-white",children:n.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[n.jsx("h2",{className:"text-3xl font-bold text-black mb-4",children:"Listo para comenzar el viaje educativo de tu hijo?"}),n.jsx("p",{className:"text-xl text-black mb-8",children:"nete a nuestra comunidad y descubre cmo podemos ayudar a tu hijo a alcanzar su mximo potencial."}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[n.jsx(Os,{to:"/register",className:"hidden",children:n.jsx(He,{variant:"outline",size:"lg",className:"border-2 border-brand-green-light text-brand-green-light hover:bg-brand-green-light hover:text-white font-semibold shadow-lg",children:"Registrarse"})}),n.jsx(Os,{to:"/login",children:n.jsx(He,{variant:"primary",size:"lg",className:"bg-white text-gray-900 border-2 border-white hover:bg-gray-100 hover:border-gray-100 font-semibold shadow-lg",children:"Iniciar Sesin"})})]})]})}),n.jsx("footer",{id:"landing-footer",className:"bg-white text-gray-900 py-12",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[n.jsxs("div",{children:[n.jsx("div",{className:"flex items-center mb-4",children:n.jsx("img",{src:Bs,alt:"Happy Tribe Logo",className:"h-12 w-auto"})}),n.jsx("p",{className:"text-gray-600",children:"Educacin del corazn para nios neurodiversos. Transformando vidas a travs de la educacin personalizada."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Programas"}),n.jsxs("ul",{className:"space-y-2 text-gray-600",children:[n.jsx("li",{children:"Educacin Preescolar"}),n.jsx("li",{children:"Educacin Primaria"}),n.jsx("li",{children:"Apoyo Neurodiverso"}),n.jsx("li",{children:"Habilidades para la Vida"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Recursos"}),n.jsxs("ul",{className:"space-y-2 text-gray-600",children:[n.jsx("li",{children:"Mtodo Educativo"}),n.jsx("li",{children:"Proyectos Transversales"}),n.jsx("li",{children:"Inclusin"}),n.jsx("li",{children:"Comunidad"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Contacto"}),n.jsxs("ul",{className:"space-y-2 text-gray-600",children:[n.jsxs("li",{className:"flex items-center",children:[n.jsx(sx,{className:"w-4 h-4 mr-2"}),"Puerto Aventuras, Mxico"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx(df,{className:"w-4 h-4 mr-2"}),"+52 984 123 4567"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx(Ba,{className:"w-4 h-4 mr-2"}),"info@happytribe.edu"]})]})]})]}),n.jsx("div",{className:"border-t border-gray-200 mt-8 pt-8 text-center text-gray-500",children:n.jsx("p",{children:" 2024 Happy Tribe. Todos los derechos reservados."})})]})})]})};var vd=e=>e.type==="checkbox",xo=e=>e instanceof Date,Mn=e=>e==null;const w2=e=>typeof e=="object";var kr=e=>!Mn(e)&&!Array.isArray(e)&&w2(e)&&!xo(e),U3=e=>kr(e)&&e.target?vd(e.target)?e.target.checked:e.target.value:e,z3=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,q3=(e,t)=>e.has(z3(t)),G3=e=>{const t=e.constructor&&e.constructor.prototype;return kr(t)&&t.hasOwnProperty("isPrototypeOf")},ix=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ur(e){let t;const r=Array.isArray(e),s=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(ix&&(e instanceof Blob||s))&&(r||kr(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!G3(e))t=e;else for(const o in e)e.hasOwnProperty(o)&&(t[o]=Ur(e[o]));else return e;return t}var ff=e=>/^\w*$/.test(e),xr=e=>e===void 0,ox=e=>Array.isArray(e)?e.filter(Boolean):[],lx=e=>ox(e.replace(/["|']|\]/g,"").split(/\.|\[/)),ft=(e,t,r)=>{if(!t||!kr(e))return r;const s=(ff(t)?[t]:lx(t)).reduce((o,i)=>Mn(o)?o:o[i],e);return xr(s)||s===e?xr(e[t])?r:e[t]:s},ca=e=>typeof e=="boolean",ir=(e,t,r)=>{let s=-1;const o=ff(t)?[t]:lx(t),i=o.length,c=i-1;for(;++s<i;){const d=o[s];let h=r;if(s!==c){const f=e[d];h=kr(f)||Array.isArray(f)?f:isNaN(+o[s+1])?{}:[]}if(d==="__proto__"||d==="constructor"||d==="prototype")return;e[d]=h,e=e[d]}};const Fy={BLUR:"blur",FOCUS_OUT:"focusout"},Ps={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Oa={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},V3=pt.createContext(null);V3.displayName="HookFormContext";var H3=(e,t,r,s=!0)=>{const o={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(o,i,{get:()=>{const c=i;return t._proxyFormState[c]!==Ps.all&&(t._proxyFormState[c]=!s||Ps.all),e[c]}});return o};const W3=typeof window<"u"?pt.useLayoutEffect:pt.useEffect;var Yn=e=>typeof e=="string",K3=(e,t,r,s,o)=>Yn(e)?(s&&t.watch.add(e),ft(r,e,o)):Array.isArray(e)?e.map(i=>(s&&t.watch.add(i),ft(r,i))):(s&&(t.watchAll=!0),r),hg=e=>Mn(e)||!w2(e);function bi(e,t,r=new WeakSet){if(hg(e)||hg(t))return Object.is(e,t);if(xo(e)&&xo(t))return e.getTime()===t.getTime();const s=Object.keys(e),o=Object.keys(t);if(s.length!==o.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of s){const c=e[i];if(!o.includes(i))return!1;if(i!=="ref"){const d=t[i];if(xo(c)&&xo(d)||kr(c)&&kr(d)||Array.isArray(c)&&Array.isArray(d)?!bi(c,d,r):!Object.is(c,d))return!1}}return!0}var Q3=(e,t,r,s,o)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:o||!0}}:{},Uc=e=>Array.isArray(e)?e:[e],By=()=>{let e=[];return{get observers(){return e},next:o=>{for(const i of e)i.next&&i.next(o)},subscribe:o=>(e.push(o),{unsubscribe:()=>{e=e.filter(i=>i!==o)}}),unsubscribe:()=>{e=[]}}};function j2(e,t){const r={};for(const s in e)if(e.hasOwnProperty(s)){const o=e[s],i=t[s];if(o&&kr(o)&&i){const c=j2(o,i);kr(c)&&(r[s]=c)}else e[s]&&(r[s]=i)}return r}var _n=e=>kr(e)&&!Object.keys(e).length,cx=e=>e.type==="file",Ms=e=>typeof e=="function",Rh=e=>{if(!ix)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},N2=e=>e.type==="select-multiple",dx=e=>e.type==="radio",J3=e=>dx(e)||vd(e),mp=e=>Rh(e)&&e.isConnected;function Y3(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=xr(e)?s++:e[t[s++]];return e}function Z3(e){for(const t in e)if(e.hasOwnProperty(t)&&!xr(e[t]))return!1;return!0}function wr(e,t){const r=Array.isArray(t)?t:ff(t)?[t]:lx(t),s=r.length===1?e:Y3(e,r),o=r.length-1,i=r[o];return s&&delete s[i],o!==0&&(kr(s)&&_n(s)||Array.isArray(s)&&Z3(s))&&wr(e,r.slice(0,-1)),e}var X3=e=>{for(const t in e)if(Ms(e[t]))return!0;return!1};function S2(e){return Array.isArray(e)||kr(e)&&!X3(e)}function fg(e,t={}){for(const r in e){const s=e[r];S2(s)?(t[r]=Array.isArray(s)?[]:{},fg(s,t[r])):xr(s)||(t[r]=!0)}return t}function pl(e,t,r){r||(r=fg(t));for(const s in e){const o=e[s];if(S2(o))xr(t)||hg(r[s])?r[s]=fg(o,Array.isArray(o)?[]:{}):pl(o,Mn(t)?{}:t[s],r[s]);else{const i=t[s];r[s]=!bi(o,i)}}return r}const Uy={value:!1,isValid:!1},zy={value:!0,isValid:!0};var k2=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!xr(e[0].attributes.value)?xr(e[0].value)||e[0].value===""?zy:{value:e[0].value,isValid:!0}:zy:Uy}return Uy},_2=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>xr(e)?e:t?e===""?NaN:e&&+e:r&&Yn(e)?new Date(e):s?s(e):e;const qy={isValid:!1,value:null};var C2=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,qy):qy;function Gy(e){const t=e.ref;return cx(t)?t.files:dx(t)?C2(e.refs).value:N2(t)?[...t.selectedOptions].map(({value:r})=>r):vd(t)?k2(e.refs).value:_2(xr(t.value)?e.ref.value:t.value,e)}var e5=(e,t,r,s)=>{const o={};for(const i of e){const c=ft(t,i);c&&ir(o,i,c._f)}return{criteriaMode:r,names:[...e],fields:o,shouldUseNativeValidation:s}},Oh=e=>e instanceof RegExp,Dc=e=>xr(e)?e:Oh(e)?e.source:kr(e)?Oh(e.value)?e.value.source:e.value:e,Vy=e=>({isOnSubmit:!e||e===Ps.onSubmit,isOnBlur:e===Ps.onBlur,isOnChange:e===Ps.onChange,isOnAll:e===Ps.all,isOnTouch:e===Ps.onTouched});const Hy="AsyncFunction";var t5=e=>!!e&&!!e.validate&&!!(Ms(e.validate)&&e.validate.constructor.name===Hy||kr(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Hy)),r5=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Wy=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const zc=(e,t,r,s)=>{for(const o of r||Object.keys(e)){const i=ft(e,o);if(i){const{_f:c,...d}=i;if(c){if(c.refs&&c.refs[0]&&t(c.refs[0],o)&&!s)return!0;if(c.ref&&t(c.ref,c.name)&&!s)return!0;if(zc(d,t))break}else if(kr(d)&&zc(d,t))break}}};function Ky(e,t,r){const s=ft(e,r);if(s||ff(r))return{error:s,name:r};const o=r.split(".");for(;o.length;){const i=o.join("."),c=ft(t,i),d=ft(e,i);if(c&&!Array.isArray(c)&&r!==i)return{name:r};if(d&&d.type)return{name:i,error:d};if(d&&d.root&&d.root.type)return{name:`${i}.root`,error:d.root};o.pop()}return{name:r}}var n5=(e,t,r,s)=>{r(e);const{name:o,...i}=e;return _n(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(c=>t[c]===(!s||Ps.all))},s5=(e,t,r)=>!e||!t||e===t||Uc(e).some(s=>s&&(r?s===t:s.startsWith(t)||t.startsWith(s))),a5=(e,t,r,s,o)=>o.isOnAll?!1:!r&&o.isOnTouch?!(t||e):(r?s.isOnBlur:o.isOnBlur)?!e:(r?s.isOnChange:o.isOnChange)?e:!0,i5=(e,t)=>!ox(ft(e,t)).length&&wr(e,t),o5=(e,t,r)=>{const s=Uc(ft(e,r));return ir(s,"root",t[r]),ir(e,r,s),e};function Qy(e,t,r="validate"){if(Yn(e)||Array.isArray(e)&&e.every(Yn)||ca(e)&&!e)return{type:r,message:Yn(e)?e:"",ref:t}}var dl=e=>kr(e)&&!Oh(e)?e:{value:e,message:""},Jy=async(e,t,r,s,o,i)=>{const{ref:c,refs:d,required:h,maxLength:f,minLength:p,min:v,max:x,pattern:w,validate:y,name:S,valueAsNumber:C,mount:T}=e._f,A=ft(r,S);if(!T||t.has(S))return{};const I=d?d[0]:c,O=De=>{o&&I.reportValidity&&(I.setCustomValidity(ca(De)?"":De||""),I.reportValidity())},P={},$=dx(c),F=vd(c),te=$||F,ne=(C||cx(c))&&xr(c.value)&&xr(A)||Rh(c)&&c.value===""||A===""||Array.isArray(A)&&!A.length,Ee=Q3.bind(null,S,s,P),Se=(De,U,H,ye=Oa.maxLength,R=Oa.minLength)=>{const de=De?U:H;P[S]={type:De?ye:R,message:de,ref:c,...Ee(De?ye:R,de)}};if(i?!Array.isArray(A)||!A.length:h&&(!te&&(ne||Mn(A))||ca(A)&&!A||F&&!k2(d).isValid||$&&!C2(d).isValid)){const{value:De,message:U}=Yn(h)?{value:!!h,message:h}:dl(h);if(De&&(P[S]={type:Oa.required,message:U,ref:I,...Ee(Oa.required,U)},!s))return O(U),P}if(!ne&&(!Mn(v)||!Mn(x))){let De,U;const H=dl(x),ye=dl(v);if(!Mn(A)&&!isNaN(A)){const R=c.valueAsNumber||A&&+A;Mn(H.value)||(De=R>H.value),Mn(ye.value)||(U=R<ye.value)}else{const R=c.valueAsDate||new Date(A),de=K=>new Date(new Date().toDateString()+" "+K),V=c.type=="time",he=c.type=="week";Yn(H.value)&&A&&(De=V?de(A)>de(H.value):he?A>H.value:R>new Date(H.value)),Yn(ye.value)&&A&&(U=V?de(A)<de(ye.value):he?A<ye.value:R<new Date(ye.value))}if((De||U)&&(Se(!!De,H.message,ye.message,Oa.max,Oa.min),!s))return O(P[S].message),P}if((f||p)&&!ne&&(Yn(A)||i&&Array.isArray(A))){const De=dl(f),U=dl(p),H=!Mn(De.value)&&A.length>+De.value,ye=!Mn(U.value)&&A.length<+U.value;if((H||ye)&&(Se(H,De.message,U.message),!s))return O(P[S].message),P}if(w&&!ne&&Yn(A)){const{value:De,message:U}=dl(w);if(Oh(De)&&!A.match(De)&&(P[S]={type:Oa.pattern,message:U,ref:c,...Ee(Oa.pattern,U)},!s))return O(U),P}if(y){if(Ms(y)){const De=await y(A,r),U=Qy(De,I);if(U&&(P[S]={...U,...Ee(Oa.validate,U.message)},!s))return O(U.message),P}else if(kr(y)){let De={};for(const U in y){if(!_n(De)&&!s)break;const H=Qy(await y[U](A,r),I,U);H&&(De={...H,...Ee(U,H.message)},O(H.message),s&&(P[S]=De))}if(!_n(De)&&(P[S]={ref:I,...De},!s))return P}}return O(!0),P};const l5={mode:Ps.onSubmit,reValidateMode:Ps.onChange,shouldFocusError:!0};function c5(e={}){let t={...l5,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ms(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},o=kr(t.defaultValues)||kr(t.values)?Ur(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Ur(o),c={action:!1,mount:!1,watch:!1},d={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},h,f=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let v={...p};const x={array:By(),state:By()},w=t.criteriaMode===Ps.all,y=X=>xe=>{clearTimeout(f),f=setTimeout(X,xe)},S=async X=>{if(!t.disabled&&(p.isValid||v.isValid||X)){const xe=t.resolver?_n((await F()).errors):await ne(s,!0);xe!==r.isValid&&x.state.next({isValid:xe})}},C=(X,xe)=>{!t.disabled&&(p.isValidating||p.validatingFields||v.isValidating||v.validatingFields)&&((X||Array.from(d.mount)).forEach(W=>{W&&(xe?ir(r.validatingFields,W,xe):wr(r.validatingFields,W))}),x.state.next({validatingFields:r.validatingFields,isValidating:!_n(r.validatingFields)}))},T=(X,xe=[],W,Ae,Le=!0,Fe=!0)=>{if(Ae&&W&&!t.disabled){if(c.action=!0,Fe&&Array.isArray(ft(s,X))){const nt=W(ft(s,X),Ae.argA,Ae.argB);Le&&ir(s,X,nt)}if(Fe&&Array.isArray(ft(r.errors,X))){const nt=W(ft(r.errors,X),Ae.argA,Ae.argB);Le&&ir(r.errors,X,nt),i5(r.errors,X)}if((p.touchedFields||v.touchedFields)&&Fe&&Array.isArray(ft(r.touchedFields,X))){const nt=W(ft(r.touchedFields,X),Ae.argA,Ae.argB);Le&&ir(r.touchedFields,X,nt)}(p.dirtyFields||v.dirtyFields)&&(r.dirtyFields=pl(o,i)),x.state.next({name:X,isDirty:Se(X,xe),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else ir(i,X,xe)},A=(X,xe)=>{ir(r.errors,X,xe),x.state.next({errors:r.errors})},I=X=>{r.errors=X,x.state.next({errors:r.errors,isValid:!1})},O=(X,xe,W,Ae)=>{const Le=ft(s,X);if(Le){const Fe=ft(i,X,xr(W)?ft(o,X):W);xr(Fe)||Ae&&Ae.defaultChecked||xe?ir(i,X,xe?Fe:Gy(Le._f)):H(X,Fe),c.mount&&!c.action&&S()}},P=(X,xe,W,Ae,Le)=>{let Fe=!1,nt=!1;const yt={name:X};if(!t.disabled){if(!W||Ae){(p.isDirty||v.isDirty)&&(nt=r.isDirty,r.isDirty=yt.isDirty=Se(),Fe=nt!==yt.isDirty);const Nt=bi(ft(o,X),xe);nt=!!ft(r.dirtyFields,X),Nt?wr(r.dirtyFields,X):ir(r.dirtyFields,X,!0),yt.dirtyFields=r.dirtyFields,Fe=Fe||(p.dirtyFields||v.dirtyFields)&&nt!==!Nt}if(W){const Nt=ft(r.touchedFields,X);Nt||(ir(r.touchedFields,X,W),yt.touchedFields=r.touchedFields,Fe=Fe||(p.touchedFields||v.touchedFields)&&Nt!==W)}Fe&&Le&&x.state.next(yt)}return Fe?yt:{}},$=(X,xe,W,Ae)=>{const Le=ft(r.errors,X),Fe=(p.isValid||v.isValid)&&ca(xe)&&r.isValid!==xe;if(t.delayError&&W?(h=y(()=>A(X,W)),h(t.delayError)):(clearTimeout(f),h=null,W?ir(r.errors,X,W):wr(r.errors,X)),(W?!bi(Le,W):Le)||!_n(Ae)||Fe){const nt={...Ae,...Fe&&ca(xe)?{isValid:xe}:{},errors:r.errors,name:X};r={...r,...nt},x.state.next(nt)}},F=async X=>{C(X,!0);const xe=await t.resolver(i,t.context,e5(X||d.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return C(X),xe},te=async X=>{const{errors:xe}=await F(X);if(X)for(const W of X){const Ae=ft(xe,W);Ae?ir(r.errors,W,Ae):wr(r.errors,W)}else r.errors=xe;return xe},ne=async(X,xe,W={valid:!0})=>{for(const Ae in X){const Le=X[Ae];if(Le){const{_f:Fe,...nt}=Le;if(Fe){const yt=d.array.has(Fe.name),Nt=Le._f&&t5(Le._f);Nt&&p.validatingFields&&C([Fe.name],!0);const Ft=await Jy(Le,d.disabled,i,w,t.shouldUseNativeValidation&&!xe,yt);if(Nt&&p.validatingFields&&C([Fe.name]),Ft[Fe.name]&&(W.valid=!1,xe))break;!xe&&(ft(Ft,Fe.name)?yt?o5(r.errors,Ft,Fe.name):ir(r.errors,Fe.name,Ft[Fe.name]):wr(r.errors,Fe.name))}!_n(nt)&&await ne(nt,xe,W)}}return W.valid},Ee=()=>{for(const X of d.unMount){const xe=ft(s,X);xe&&(xe._f.refs?xe._f.refs.every(W=>!mp(W)):!mp(xe._f.ref))&&we(X)}d.unMount=new Set},Se=(X,xe)=>!t.disabled&&(X&&xe&&ir(i,X,xe),!bi(K(),o)),De=(X,xe,W)=>K3(X,d,{...c.mount?i:xr(xe)?o:Yn(X)?{[X]:xe}:xe},W,xe),U=X=>ox(ft(c.mount?i:o,X,t.shouldUnregister?ft(o,X,[]):[])),H=(X,xe,W={})=>{const Ae=ft(s,X);let Le=xe;if(Ae){const Fe=Ae._f;Fe&&(!Fe.disabled&&ir(i,X,_2(xe,Fe)),Le=Rh(Fe.ref)&&Mn(xe)?"":xe,N2(Fe.ref)?[...Fe.ref.options].forEach(nt=>nt.selected=Le.includes(nt.value)):Fe.refs?vd(Fe.ref)?Fe.refs.forEach(nt=>{(!nt.defaultChecked||!nt.disabled)&&(Array.isArray(Le)?nt.checked=!!Le.find(yt=>yt===nt.value):nt.checked=Le===nt.value||!!Le)}):Fe.refs.forEach(nt=>nt.checked=nt.value===Le):cx(Fe.ref)?Fe.ref.value="":(Fe.ref.value=Le,Fe.ref.type||x.state.next({name:X,values:Ur(i)})))}(W.shouldDirty||W.shouldTouch)&&P(X,Le,W.shouldTouch,W.shouldDirty,!0),W.shouldValidate&&he(X)},ye=(X,xe,W)=>{for(const Ae in xe){if(!xe.hasOwnProperty(Ae))return;const Le=xe[Ae],Fe=X+"."+Ae,nt=ft(s,Fe);(d.array.has(X)||kr(Le)||nt&&!nt._f)&&!xo(Le)?ye(Fe,Le,W):H(Fe,Le,W)}},R=(X,xe,W={})=>{const Ae=ft(s,X),Le=d.array.has(X),Fe=Ur(xe);ir(i,X,Fe),Le?(x.array.next({name:X,values:Ur(i)}),(p.isDirty||p.dirtyFields||v.isDirty||v.dirtyFields)&&W.shouldDirty&&x.state.next({name:X,dirtyFields:pl(o,i),isDirty:Se(X,Fe)})):Ae&&!Ae._f&&!Mn(Fe)?ye(X,Fe,W):H(X,Fe,W),Wy(X,d)&&x.state.next({...r,name:X}),x.state.next({name:c.mount?X:void 0,values:Ur(i)})},de=async X=>{c.mount=!0;const xe=X.target;let W=xe.name,Ae=!0;const Le=ft(s,W),Fe=Nt=>{Ae=Number.isNaN(Nt)||xo(Nt)&&isNaN(Nt.getTime())||bi(Nt,ft(i,W,Nt))},nt=Vy(t.mode),yt=Vy(t.reValidateMode);if(Le){let Nt,Ft;const Rt=xe.type?Gy(Le._f):U3(X),It=X.type===Fy.BLUR||X.type===Fy.FOCUS_OUT,on=!r5(Le._f)&&!t.resolver&&!ft(r.errors,W)&&!Le._f.deps||a5(It,ft(r.touchedFields,W),r.isSubmitted,yt,nt),zn=Wy(W,d,It);ir(i,W,Rt),It?(!xe||!xe.readOnly)&&(Le._f.onBlur&&Le._f.onBlur(X),h&&h(0)):Le._f.onChange&&Le._f.onChange(X);const ns=P(W,Rt,It),ln=!_n(ns)||zn;if(!It&&x.state.next({name:W,type:X.type,values:Ur(i)}),on)return(p.isValid||v.isValid)&&(t.mode==="onBlur"?It&&S():It||S()),ln&&x.state.next({name:W,...zn?{}:ns});if(!It&&zn&&x.state.next({...r}),t.resolver){const{errors:lt}=await F([W]);if(Fe(Rt),Ae){const qn=Ky(r.errors,s,W),Qr=Ky(lt,s,qn.name||W);Nt=Qr.error,W=Qr.name,Ft=_n(lt)}}else C([W],!0),Nt=(await Jy(Le,d.disabled,i,w,t.shouldUseNativeValidation))[W],C([W]),Fe(Rt),Ae&&(Nt?Ft=!1:(p.isValid||v.isValid)&&(Ft=await ne(s,!0)));Ae&&(Le._f.deps&&(!Array.isArray(Le._f.deps)||Le._f.deps.length>0)&&he(Le._f.deps),$(W,Ft,Nt,ns))}},V=(X,xe)=>{if(ft(r.errors,xe)&&X.focus)return X.focus(),1},he=async(X,xe={})=>{let W,Ae;const Le=Uc(X);if(t.resolver){const Fe=await te(xr(X)?X:Le);W=_n(Fe),Ae=X?!Le.some(nt=>ft(Fe,nt)):W}else X?(Ae=(await Promise.all(Le.map(async Fe=>{const nt=ft(s,Fe);return await ne(nt&&nt._f?{[Fe]:nt}:nt)}))).every(Boolean),!(!Ae&&!r.isValid)&&S()):Ae=W=await ne(s);return x.state.next({...!Yn(X)||(p.isValid||v.isValid)&&W!==r.isValid?{}:{name:X},...t.resolver||!X?{isValid:W}:{},errors:r.errors}),xe.shouldFocus&&!Ae&&zc(s,V,X?Le:d.mount),Ae},K=(X,xe)=>{let W={...c.mount?i:o};return xe&&(W=j2(xe.dirtyFields?r.dirtyFields:r.touchedFields,W)),xr(X)?W:Yn(X)?ft(W,X):X.map(Ae=>ft(W,Ae))},B=(X,xe)=>({invalid:!!ft((xe||r).errors,X),isDirty:!!ft((xe||r).dirtyFields,X),error:ft((xe||r).errors,X),isValidating:!!ft(r.validatingFields,X),isTouched:!!ft((xe||r).touchedFields,X)}),re=X=>{X&&Uc(X).forEach(xe=>wr(r.errors,xe)),x.state.next({errors:X?r.errors:{}})},ae=(X,xe,W)=>{const Ae=(ft(s,X,{_f:{}})._f||{}).ref,Le=ft(r.errors,X)||{},{ref:Fe,message:nt,type:yt,...Nt}=Le;ir(r.errors,X,{...Nt,...xe,ref:Ae}),x.state.next({name:X,errors:r.errors,isValid:!1}),W&&W.shouldFocus&&Ae&&Ae.focus&&Ae.focus()},z=(X,xe)=>Ms(X)?x.state.subscribe({next:W=>"values"in W&&X(De(void 0,xe),W)}):De(X,xe,!0),ge=X=>x.state.subscribe({next:xe=>{s5(X.name,xe.name,X.exact)&&n5(xe,X.formState||p,Ne,X.reRenderRoot)&&X.callback({values:{...i},...r,...xe,defaultValues:o})}}).unsubscribe,Pe=X=>(c.mount=!0,v={...v,...X.formState},ge({...X,formState:v})),we=(X,xe={})=>{for(const W of X?Uc(X):d.mount)d.mount.delete(W),d.array.delete(W),xe.keepValue||(wr(s,W),wr(i,W)),!xe.keepError&&wr(r.errors,W),!xe.keepDirty&&wr(r.dirtyFields,W),!xe.keepTouched&&wr(r.touchedFields,W),!xe.keepIsValidating&&wr(r.validatingFields,W),!t.shouldUnregister&&!xe.keepDefaultValue&&wr(o,W);x.state.next({values:Ur(i)}),x.state.next({...r,...xe.keepDirty?{isDirty:Se()}:{}}),!xe.keepIsValid&&S()},Q=({disabled:X,name:xe})=>{(ca(X)&&c.mount||X||d.disabled.has(xe))&&(X?d.disabled.add(xe):d.disabled.delete(xe))},ke=(X,xe={})=>{let W=ft(s,X);const Ae=ca(xe.disabled)||ca(t.disabled);return ir(s,X,{...W||{},_f:{...W&&W._f?W._f:{ref:{name:X}},name:X,mount:!0,...xe}}),d.mount.add(X),W?Q({disabled:ca(xe.disabled)?xe.disabled:t.disabled,name:X}):O(X,!0,xe.value),{...Ae?{disabled:xe.disabled||t.disabled}:{},...t.progressive?{required:!!xe.required,min:Dc(xe.min),max:Dc(xe.max),minLength:Dc(xe.minLength),maxLength:Dc(xe.maxLength),pattern:Dc(xe.pattern)}:{},name:X,onChange:de,onBlur:de,ref:Le=>{if(Le){ke(X,xe),W=ft(s,X);const Fe=xr(Le.value)&&Le.querySelectorAll&&Le.querySelectorAll("input,select,textarea")[0]||Le,nt=J3(Fe),yt=W._f.refs||[];if(nt?yt.find(Nt=>Nt===Fe):Fe===W._f.ref)return;ir(s,X,{_f:{...W._f,...nt?{refs:[...yt.filter(mp),Fe,...Array.isArray(ft(o,X))?[{}]:[]],ref:{type:Fe.type,name:X}}:{ref:Fe}}}),O(X,!1,void 0,Fe)}else W=ft(s,X,{}),W._f&&(W._f.mount=!1),(t.shouldUnregister||xe.shouldUnregister)&&!(q3(d.array,X)&&c.action)&&d.unMount.add(X)}}},q=()=>t.shouldFocusError&&zc(s,V,d.mount),ce=X=>{ca(X)&&(x.state.next({disabled:X}),zc(s,(xe,W)=>{const Ae=ft(s,W);Ae&&(xe.disabled=Ae._f.disabled||X,Array.isArray(Ae._f.refs)&&Ae._f.refs.forEach(Le=>{Le.disabled=Ae._f.disabled||X}))},0,!1))},J=(X,xe)=>async W=>{let Ae;W&&(W.preventDefault&&W.preventDefault(),W.persist&&W.persist());let Le=Ur(i);if(x.state.next({isSubmitting:!0}),t.resolver){const{errors:Fe,values:nt}=await F();r.errors=Fe,Le=Ur(nt)}else await ne(s);if(d.disabled.size)for(const Fe of d.disabled)wr(Le,Fe);if(wr(r.errors,"root"),_n(r.errors)){x.state.next({errors:{}});try{await X(Le,W)}catch(Fe){Ae=Fe}}else xe&&await xe({...r.errors},W),q(),setTimeout(q);if(x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:_n(r.errors)&&!Ae,submitCount:r.submitCount+1,errors:r.errors}),Ae)throw Ae},qe=(X,xe={})=>{ft(s,X)&&(xr(xe.defaultValue)?R(X,Ur(ft(o,X))):(R(X,xe.defaultValue),ir(o,X,Ur(xe.defaultValue))),xe.keepTouched||wr(r.touchedFields,X),xe.keepDirty||(wr(r.dirtyFields,X),r.isDirty=xe.defaultValue?Se(X,Ur(ft(o,X))):Se()),xe.keepError||(wr(r.errors,X),p.isValid&&S()),x.state.next({...r}))},Be=(X,xe={})=>{const W=X?Ur(X):o,Ae=Ur(W),Le=_n(X),Fe=Le?o:Ae;if(xe.keepDefaultValues||(o=W),!xe.keepValues){if(xe.keepDirtyValues){const nt=new Set([...d.mount,...Object.keys(pl(o,i))]);for(const yt of Array.from(nt))ft(r.dirtyFields,yt)?ir(Fe,yt,ft(i,yt)):R(yt,ft(Fe,yt))}else{if(ix&&xr(X))for(const nt of d.mount){const yt=ft(s,nt);if(yt&&yt._f){const Nt=Array.isArray(yt._f.refs)?yt._f.refs[0]:yt._f.ref;if(Rh(Nt)){const Ft=Nt.closest("form");if(Ft){Ft.reset();break}}}}if(xe.keepFieldsRef)for(const nt of d.mount)R(nt,ft(Fe,nt));else s={}}i=t.shouldUnregister?xe.keepDefaultValues?Ur(o):{}:Ur(Fe),x.array.next({values:{...Fe}}),x.state.next({values:{...Fe}})}d={mount:xe.keepDirtyValues?d.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},c.mount=!p.isValid||!!xe.keepIsValid||!!xe.keepDirtyValues||!t.shouldUnregister&&!_n(Fe),c.watch=!!t.shouldUnregister,c.action=!1,xe.keepErrors||(r.errors={}),x.state.next({submitCount:xe.keepSubmitCount?r.submitCount:0,isDirty:Le?!1:xe.keepDirty?r.isDirty:!!(xe.keepDefaultValues&&!bi(X,o)),isSubmitted:xe.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Le?{}:xe.keepDirtyValues?xe.keepDefaultValues&&i?pl(o,i):r.dirtyFields:xe.keepDefaultValues&&X?pl(o,X):xe.keepDirty?r.dirtyFields:{},touchedFields:xe.keepTouched?r.touchedFields:{},errors:xe.keepErrors?r.errors:{},isSubmitSuccessful:xe.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:o})},ee=(X,xe)=>Be(Ms(X)?X(i):X,xe),Ye=(X,xe={})=>{const W=ft(s,X),Ae=W&&W._f;if(Ae){const Le=Ae.refs?Ae.refs[0]:Ae.ref;Le.focus&&(Le.focus(),xe.shouldSelect&&Ms(Le.select)&&Le.select())}},Ne=X=>{r={...r,...X}},xt={control:{register:ke,unregister:we,getFieldState:B,handleSubmit:J,setError:ae,_subscribe:ge,_runSchema:F,_focusError:q,_getWatch:De,_getDirty:Se,_setValid:S,_setFieldArray:T,_setDisabledField:Q,_setErrors:I,_getFieldArray:U,_reset:Be,_resetDefaultValues:()=>Ms(t.defaultValues)&&t.defaultValues().then(X=>{ee(X,t.resetOptions),x.state.next({isLoading:!1})}),_removeUnmounted:Ee,_disableForm:ce,_subjects:x,_proxyFormState:p,get _fields(){return s},get _formValues(){return i},get _state(){return c},set _state(X){c=X},get _defaultValues(){return o},get _names(){return d},set _names(X){d=X},get _formState(){return r},get _options(){return t},set _options(X){t={...t,...X}}},subscribe:Pe,trigger:he,register:ke,handleSubmit:J,watch:z,setValue:R,getValues:K,reset:ee,resetField:qe,clearErrors:re,unregister:we,setError:ae,setFocus:Ye,getFieldState:B};return{...xt,formControl:xt}}function E2(e={}){const t=pt.useRef(void 0),r=pt.useRef(void 0),[s,o]=pt.useState({isDirty:!1,isValidating:!1,isLoading:Ms(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Ms(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:s},e.defaultValues&&!Ms(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:c,...d}=c5(e);t.current={...d,formState:s}}const i=t.current.control;return i._options=e,W3(()=>{const c=i._subscribe({formState:i._proxyFormState,callback:()=>o({...i._formState}),reRenderRoot:!0});return o(d=>({...d,isReady:!0})),i._formState.isReady=!0,c},[i]),pt.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),pt.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),pt.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),pt.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),pt.useEffect(()=>{if(i._proxyFormState.isDirty){const c=i._getDirty();c!==s.isDirty&&i._subjects.state.next({isDirty:c})}},[i,s.isDirty]),pt.useEffect(()=>{var c;e.values&&!bi(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),!((c=i._options.resetOptions)===null||c===void 0)&&c.keepIsValid||i._setValid(),r.current=e.values,o(d=>({...d}))):i._resetDefaultValues()},[i,e.values]),pt.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=H3(s,i),t.current}const d5=()=>{const[e,t]=j.useState(!1),[r,s]=j.useState(!1),[o,i]=j.useState(""),c=Kr();vs();const{login:d}=$t(),[h]=hf(),f=Bs,{register:p,handleSubmit:v,formState:{errors:x}}=E2(),w=async y=>{console.log("Submit ejecutado",y),s(!0),i("");try{await d(y.email,y.password),c("/dashboard",{replace:!0})}catch(S){i(S.message||"Error al iniciar sesin")}finally{s(!1)}};return n.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center p-4",children:n.jsxs("div",{className:"w-full max-w-md",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"flex items-center justify-center mb-4",children:n.jsx("img",{src:f,alt:"HappyTribe Logo",className:"h-16 w-auto"})}),n.jsx("p",{className:"text-gray-700 mt-2 text-lg font-medium",children:"Ingresa a tu cuenta"})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 border border-gray-200",children:[o&&n.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:o}),n.jsxs("form",{onSubmit:v(w),className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Correo Electrnico"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ba,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"email",...p("email",{required:"Correo Electrnico es requerido",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Correo Electrnico invlido"}}),className:"w-full pl-10 pr-3 py-2.5 border border-gray-300 bg-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4B8B3B] focus:border-[#4B8B3B] placeholder-gray-400",placeholder:"tu@email.com"})]}),typeof x.email?.message=="string"&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.email.message})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Contrasea"}),n.jsxs("div",{className:"relative",children:[n.jsx(Th,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsx("input",{type:e?"text":"password",...p("password",{required:"Contrasea es requerida"}),className:"w-full pl-10 pr-10 py-2.5 border border-gray-300 bg-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4B8B3B] focus:border-[#4B8B3B] placeholder-gray-400",placeholder:""}),n.jsxs("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",onClick:()=>t(y=>!y),tabIndex:-1,children:[e?n.jsx(cf,{className:"w-5 h-5"}):n.jsx(Ai,{className:"w-5 h-5"}),n.jsx("span",{className:"sr-only",children:e?"Ocultar contrasea":"Mostrar contrasea"})]})]}),typeof x.password?.message=="string"&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.password.message})]}),n.jsx(He,{type:"submit",className:"w-full",disabled:r,size:"lg",children:"Iniciar Sesin"})]}),n.jsx("div",{className:"mt-6 text-center",children:n.jsxs("p",{className:"text-gray-600 text-sm",children:["No tienes cuenta?"," ",n.jsx(Os,{to:"/register",className:"text-brand-green-medium hover:text-brand-green-dark font-medium underline",children:"Regstrate aqu"})]})}),n.jsx("div",{className:"mt-4 text-center",children:n.jsx(Os,{to:"/",className:"text-gray-600 hover:text-gray-900 font-medium underline transition-colors text-sm",children:" Volver al inicio"})})]})]})})},u5=()=>{const[e,t]=j.useState(!1),[r,s]=j.useState(!1),[o,i]=j.useState(""),c=Kr(),{register:d}=$t(),[h]=hf(),f=Bs,{register:p,handleSubmit:v,formState:{errors:x},watch:w}=E2(),y=w("password"),S=async C=>{s(!0),i("");try{const{confirmPassword:T,...A}=C;await d({...A,role:A.role||"coordinador"}),c("/dashboard")}catch(T){i(T.message||"Error al registrar usuario")}finally{s(!1)}};return n.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center p-4",children:n.jsxs("div",{className:"w-full max-w-md",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"flex items-center justify-center mb-4",children:n.jsx("img",{src:f,alt:"HappyTribe Logo",className:"h-16 w-auto"})}),n.jsx("p",{className:"text-gray-700 mt-2 text-lg font-medium",children:"Crea tu cuenta"})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 border border-gray-200",children:[o&&n.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:"Error al registrar usuario"}),n.jsxs("form",{onSubmit:v(S),className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Nombre"}),n.jsxs("div",{className:"relative",children:[n.jsx(es,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",...p("firstName",{required:"Nombre es requerido",minLength:{value:2,message:"El nombre debe tener al menos 2 caracteres"}}),className:"w-full pl-10 pr-3 py-2.5 border border-gray-300 bg-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4B8B3B] focus:border-[#4B8B3B] placeholder-gray-400",placeholder:"Nombre"})]}),typeof x.firstName?.message=="string"&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.firstName.message})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Apellido"}),n.jsx("input",{type:"text",...p("lastName",{required:"Apellido es requerido",minLength:{value:2,message:"El apellido debe tener al menos 2 caracteres"}}),className:"w-full px-3 py-2.5 border border-gray-300 bg-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4B8B3B] focus:border-[#4B8B3B] placeholder-gray-400",placeholder:"Apellido"}),typeof x.lastName?.message=="string"&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.lastName.message})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Correo Electrnico"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ba,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"email",...p("email",{required:"Correo Electrnico es requerido",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Correo invlido"}}),className:"w-full pl-10 pr-3 py-2.5 border border-gray-300 bg-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4B8B3B] focus:border-[#4B8B3B] placeholder-gray-400",placeholder:"correo@ejemplo.com"})]}),typeof x.email?.message=="string"&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.email.message})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Rol"}),n.jsxs("select",{...p("role",{required:"Rol es requerido"}),className:"w-full px-3 py-2.5 border border-gray-300 bg-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4B8B3B] focus:border-[#4B8B3B]",children:[n.jsx("option",{value:"coordinador",children:"Coordinador"}),n.jsx("option",{value:"productor",children:"Productor"}),n.jsx("option",{value:"admin",children:"Admin"})]}),typeof x.role?.message=="string"&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.role.message})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Contrasea"}),n.jsxs("div",{className:"relative",children:[n.jsx(Th,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsx("input",{type:e?"text":"password",...p("password",{required:"Contrasea es requerida",minLength:{value:6,message:"La contrasea debe tener al menos 6 caracteres"}}),className:"w-full pl-10 pr-10 py-2.5 border border-gray-300 bg-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4B8B3B] focus:border-[#4B8B3B] placeholder-gray-400",placeholder:""}),n.jsx("button",{type:"button",onClick:()=>t(!e),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:e?n.jsx(cf,{className:"w-5 h-5"}):n.jsx(Ai,{className:"w-5 h-5"})})]}),typeof x.password?.message=="string"&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.password.message})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Confirmar Contrasea"}),n.jsxs("div",{className:"relative",children:[n.jsx(Th,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsx("input",{type:e?"text":"password",...p("confirmPassword",{required:"Confirmar Contrasea es requerido",validate:C=>C===y||"Las contraseas no coinciden"}),className:"w-full pl-10 pr-3 py-2.5 border border-gray-300 bg-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4B8B3B] focus:border-[#4B8B3B] placeholder-gray-400",placeholder:""})]}),typeof x.confirmPassword?.message=="string"&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.confirmPassword.message})]}),n.jsx(He,{type:"submit",disabled:r,className:"w-full",size:"lg",children:r?"Registrando...":"Registrarse"})]}),n.jsx("div",{className:"mt-6 text-center",children:n.jsxs("p",{className:"text-gray-600 text-sm",children:["Ya tienes cuenta?"," ",n.jsx(Os,{to:"/login",className:"text-brand-green-medium hover:text-brand-green-dark font-medium underline",children:"Inicia sesin"})]})}),n.jsx("div",{className:"mt-4 text-center",children:n.jsx(Os,{to:"/",className:"text-gray-600 hover:text-gray-900 font-medium underline transition-colors text-sm",children:" Volver al inicio"})})]})]})})},ux=async()=>{try{const{data:e,error:t}=await Ue.from("users").select("grupo_asignado").not("grupo_asignado","is",null).neq("grupo_asignado","");if(t)throw t;return[...new Set((e||[]).map(s=>s.grupo_asignado).filter(Boolean))].sort()}catch(e){throw console.error("Error loading groups:",e),e}},hx=async e=>{try{const{data:t,error:r}=await Ue.from("users").select("id, email, first_name, last_name, role, avatar, grupo_asignado").eq("grupo_asignado",e).eq("role","student").order("first_name",{ascending:!0});if(r)throw r;return(t||[]).map(s=>({id:s.id,email:s.email,firstName:s.first_name||"",lastName:s.last_name||"",role:s.role,avatar:s.avatar||void 0,grupoAsignado:s.grupo_asignado||void 0}))}catch(t){throw console.error("Error loading students by group:",t),t}},fx=async()=>{try{const{data:e,error:t}=await Ue.from("users").select("id, email, first_name, last_name, role, avatar, grupo_asignado").eq("role","student").order("first_name",{ascending:!0});if(t)throw t;return(e||[]).map(r=>({id:r.id,email:r.email,firstName:r.first_name||"",lastName:r.last_name||"",role:r.role,avatar:r.avatar||void 0,grupoAsignado:r.grupo_asignado||void 0}))}catch(e){throw console.error("Error loading all students:",e),e}},h5=async()=>{try{const{data:e,error:t}=await Ue.from("users").select("id, email, first_name, last_name, role, avatar, grupo_asignado").in("role",["teacher","admin"]).eq("is_active",!0).order("first_name",{ascending:!0});if(t)throw t;return(e||[]).map(r=>({id:r.id,email:r.email,firstName:r.first_name||"",lastName:r.last_name||"",role:r.role,avatar:r.avatar||void 0,grupoAsignado:r.grupo_asignado||void 0}))}catch(e){throw console.error("Error loading teachers:",e),e}},Yy=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),ed=async e=>{try{const t=new Date().toISOString(),r={stream_item_id:e.streamItemId,points:e.points||null,due_date:e.dueDate?new Date(e.dueDate).toISOString().split("T")[0]:null,due_time:e.dueTime||null,instructions:e.instructions||null,assign_to_all:e.assignToAll??!0,assigned_groups:e.assignedGroups||[],updated_at:t},{data:s}=await Ue.from("assignments").select("id").eq("stream_item_id",e.streamItemId).maybeSingle();let o;if(s){o=s.id;const{error:i}=await Ue.from("assignments").update(r).eq("id",o);if(i)throw i;await Ue.from("assignment_students").delete().eq("assignment_id",o)}else{r.id=Yy(),r.created_at=t;const{data:i,error:c}=await Ue.from("assignments").insert(r).select("id").single();if(c)throw c;if(!i)throw new Error("Failed to create assignment");o=i.id}if(!e.assignToAll){let i=[];if(e.assignedGroups&&e.assignedGroups.length>0){const c=e.assignedGroups.map(f=>hx(f)),h=(await Promise.all(c)).flat().map(f=>f.id);i=[...new Set([...i,...h])]}if(e.selectedStudents&&e.selectedStudents.length>0&&(i=[...new Set([...i,...e.selectedStudents])]),i.length>0){const c=i.map(h=>({id:Yy(),assignment_id:o,student_id:h})),{error:d}=await Ue.from("assignment_students").insert(c);d&&console.error("Error assigning students:",d)}}}catch(t){throw console.error("Error saving assignment:",t),t}},wi=async e=>{try{const{data:t,error:r}=await Ue.from("assignments").select(`
        *,
        stream_item:stream_items(
          id,
          title,
          is_archived,
          attachments(*)
        ),
        assignment_students(student_id)
      `).eq("stream_item_id",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?{streamItemId:t.stream_item_id,title:t.stream_item?.title||"",points:t.points||void 0,dueDate:t.due_date||void 0,dueTime:t.due_time||void 0,instructions:t.instructions||void 0,assignToAll:t.assign_to_all,assignedGroups:t.assigned_groups||[],selectedStudents:(t.assignment_students||[]).map(s=>s.student_id),isArchived:t.stream_item?.is_archived||!1,attachments:(t.stream_item?.attachments||[]).map(s=>({id:s.id,type:s.type,name:s.name,url:s.url||void 0,filePath:s.file_path||void 0,fileSize:s.file_size?Number(s.file_size):void 0,mimeType:s.mime_type||void 0}))}:null}catch(t){throw console.error("Error loading assignment:",t),t}},mx=async()=>{try{const{data:e,error:t}=await Ue.from("assignments").select(`
        *,
        stream_item:stream_items(
          id,
          class_id,
          title,
          content,
          author_id,
          created_at,
          is_archived,
          class:classes(
            id,
            title
          ),
          author:users(
            id,
            first_name,
            last_name,
            avatar
          ),
          attachments(*)
        ),
        assignment_students(count)
      `).eq("is_deleted",!1).order("created_at",{ascending:!1});if(t)throw t;return(e||[]).map(r=>({id:r.id,streamItemId:r.stream_item_id,type:"assignment",classId:r.stream_item?.class_id||"",className:r.stream_item?.class?.title||"Sin clase",title:r.stream_item?.title||"",instructions:r.instructions||void 0,points:r.points||void 0,dueDate:r.due_date||void 0,dueTime:r.due_time||void 0,assignToAll:r.assign_to_all,assignedGroups:r.assigned_groups||[],author:{id:r.stream_item?.author_id||"",name:`${r.stream_item?.author?.first_name||""} ${r.stream_item?.author?.last_name||""}`.trim()||"Usuario",avatar:r.stream_item?.author?.avatar||void 0},createdAt:r.created_at,studentCount:r.assignment_students?.[0]?.count||0,pendingReviewCount:0,isArchived:r.stream_item?.is_archived||!1,attachments:(r.stream_item?.attachments||[]).map(s=>({id:s.id,type:s.type,name:s.name,url:s.url||void 0,filePath:s.file_path||void 0,fileSize:s.file_size?Number(s.file_size):void 0,mimeType:s.mime_type||void 0}))}))}catch(e){throw console.error("Error loading all assignments:",e),e}},f5=async(e,t=!1)=>{try{let r=Ue.from("assignments").select(`
        *,
        stream_item:stream_items!inner(
          id,
          class_id,
          title,
          content,
          author_id,
          created_at,
          is_archived,
          author:users(
            id,
            first_name,
            last_name,
            avatar
          ),
          attachments(*)
        ),
        assignment_students(count)
      `).eq("is_deleted",!1).order("created_at",{ascending:!1});t||(r=r.eq("stream_item.class_id",e));const{data:s,error:o}=await r;if(o)throw o;return(s||[]).map(i=>({id:i.id,streamItemId:i.stream_item_id,title:i.stream_item?.title||"",classId:i.stream_item?.class_id,instructions:i.instructions||void 0,points:i.points||void 0,dueDate:i.due_date||void 0,dueTime:i.due_time||void 0,assignToAll:i.assign_to_all,assignedGroups:i.assigned_groups||[],author:{id:i.stream_item?.author_id||"",name:`${i.stream_item?.author?.first_name||""} ${i.stream_item?.author?.last_name||""}`.trim()||"Usuario",avatar:i.stream_item?.author?.avatar||void 0},createdAt:i.created_at,studentCount:i.assignment_students?.[0]?.count||0,pendingReviewCount:0,isArchived:i.stream_item?.is_archived||!1,attachments:(i.stream_item?.attachments||[]).map(c=>({id:c.id,type:c.type,name:c.name,url:c.url||void 0,filePath:c.file_path||void 0,fileSize:c.file_size?Number(c.file_size):void 0,mimeType:c.mime_type||void 0}))}))}catch(r){throw console.error("Error loading assignments by class:",r),r}},m5=async e=>{try{const{error:t}=await Ue.from("assignments").update({is_deleted:!0,deleted_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",e);if(t)throw t}catch(t){throw console.error("Error deleting assignment:",t),t}},p5=async()=>{try{const{data:e,error:t}=await Ue.from("assignments").select(`
        *,
        stream_item:stream_items(
          id,
          class_id,
          title,
          content,
          author_id,
          created_at,
          is_archived,
          class:classes(
            id,
            title
          ),
          author:users(
            id,
            first_name,
            last_name,
            avatar
          )
        ),
        assignment_students(count)
      `).eq("is_deleted",!1).eq("stream_item.is_archived",!0).order("created_at",{ascending:!1});if(t)throw t;return(e||[]).map(r=>({id:r.id,streamItemId:r.stream_item_id,type:"assignment",classId:r.stream_item?.class_id||"",className:r.stream_item?.class?.title||"Sin clase",title:r.stream_item?.title||"",instructions:r.instructions||void 0,points:r.points||void 0,dueDate:r.due_date||void 0,dueTime:r.due_time||void 0,assignToAll:r.assign_to_all,assignedGroups:r.assigned_groups||[],author:{id:r.stream_item?.author_id||"",name:`${r.stream_item?.author?.first_name||""} ${r.stream_item?.author?.last_name||""}`.trim()||"Usuario",avatar:r.stream_item?.author?.avatar||void 0},createdAt:r.created_at,studentCount:r.assignment_students?.[0]?.count||0}))}catch(e){throw console.error("Error loading archived assignments:",e),e}},Zy=async(e,t)=>{try{const{error:r}=await Ue.from("stream_items").update({is_archived:!1,updated_at:new Date().toISOString()}).eq("id",e);if(r)throw r}catch(r){throw console.error("Error unarchiving assignment:",r),r}},td=async(e,t)=>{try{const{data:r,error:s}=await Ue.from("assignments").select(`
        *,
        stream_item:stream_items(
          id,
          class_id,
          title,
          content,
          author_id,
          created_at,
          is_archived,
          class:classes(
            id,
            title
          ),
          author:users(
            id,
            first_name,
            last_name,
            avatar
          )
        ),
        assignment_students!inner(student_id)
      `).eq("is_deleted",!1).eq("stream_item.is_archived",!1).eq("assignment_students.student_id",e);if(s&&s.code!=="PGRST116")throw s;const{data:o,error:i}=await Ue.from("assignments").select(`
        *,
        stream_item:stream_items(
          id,
          class_id,
          title,
          content,
          author_id,
          created_at,
          is_archived,
          class:classes(
            id,
            title
          ),
          author:users(
            id,
            first_name,
            last_name,
            avatar
          )
        )
      `).eq("is_deleted",!1).eq("stream_item.is_archived",!1).eq("assign_to_all",!0);if(i)throw i;let c=[];if(t){const{data:h,error:f}=await Ue.from("assignments").select(`
          *,
          stream_item:stream_items(
            id,
            class_id,
            title,
            content,
            author_id,
            created_at,
            is_archived,
            class:classes(
              id,
              title
            ),
            author:users(
              id,
              first_name,
              last_name,
              avatar
            )
          )
        `).eq("is_deleted",!1).eq("stream_item.is_archived",!1).eq("assign_to_all",!1).contains("assigned_groups",[t]);f?console.error("Error loading group assignments:",f):c=h||[]}const d=new Map;return(r||[]).forEach(h=>{d.set(h.id,h)}),(o||[]).forEach(h=>{d.set(h.id,h)}),c.forEach(h=>{d.set(h.id,h)}),Array.from(d.values()).map(h=>({id:h.id,streamItemId:h.stream_item_id,classId:h.stream_item?.class_id||"",className:h.stream_item?.class?.title||"Sin clase",title:h.stream_item?.title||"",instructions:h.instructions||void 0,points:h.points||void 0,dueDate:h.due_date||void 0,dueTime:h.due_time||void 0,assignToAll:h.assign_to_all,assignedGroups:h.assigned_groups||[],author:{id:h.stream_item?.author_id||"",name:`${h.stream_item?.author?.first_name||""} ${h.stream_item?.author?.last_name||""}`.trim()||"Usuario",avatar:h.stream_item?.author?.avatar||void 0},createdAt:h.stream_item?.created_at||h.created_at,isArchived:h.stream_item?.is_archived||!1})).sort((h,f)=>new Date(f.createdAt).getTime()-new Date(h.createdAt).getTime())}catch(r){throw console.error("Error loading assignments for student:",r),r}},pp=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),Ph=async e=>{try{const t=new Date().toISOString(),r={stream_item_id:e.streamItemId,points:e.points||null,due_date:e.dueDate?new Date(e.dueDate).toISOString().split("T")[0]:null,due_time:e.dueTime||null,description:e.description||null,assign_to_all:e.assignToAll??!0,assigned_groups:e.assignedGroups||[],updated_at:t},{data:s,error:o}=await Ue.from("quizzes").select("id").eq("stream_item_id",e.streamItemId).maybeSingle();let i;if(o&&o.code!=="PGRST116")throw o;if(s){const{error:c}=await Ue.from("quizzes").update(r).eq("id",s.id);if(c)throw c;i=s.id,await Ue.from("quiz_questions").delete().eq("quiz_id",i),await Ue.from("quiz_students").delete().eq("quiz_id",i)}else{r.id=pp(),r.created_at=t;const{data:c,error:d}=await Ue.from("quizzes").insert(r).select("id").single();if(d)throw d;if(!c)throw new Error("Failed to create quiz");i=c.id}if(e.questions&&e.questions.length>0){const c=e.questions.map((h,f)=>({id:pp(),quiz_id:i,title:h.title,description:h.description||null,type:h.type,required:h.required??!1,points:h.points??0,correct_answer:h.correctAnswer||null,options:h.options||null,order:h.order??f,created_at:t,updated_at:t})),{error:d}=await Ue.from("quiz_questions").insert(c);if(d)throw console.error("Error saving questions:",d),d}if(!e.assignToAll){let c=[];if(e.assignedGroups&&e.assignedGroups.length>0){const d=e.assignedGroups.map(p=>hx(p)),f=(await Promise.all(d)).flat().map(p=>p.id);c=[...new Set([...c,...f])]}if(e.selectedStudents&&e.selectedStudents.length>0&&(c=[...new Set([...c,...e.selectedStudents])]),c.length>0){const d=c.map(f=>({id:pp(),quiz_id:i,student_id:f})),{error:h}=await Ue.from("quiz_students").insert(d);h&&console.error("Error assigning students:",h)}}}catch(t){throw console.error("Error saving quiz:",t),t}},yl=async e=>{try{const{data:t,error:r}=await Ue.from("quizzes").select(`
        *,
        stream_item:stream_items(
          is_archived
        ),
        quiz_students(student_id),
        questions:quiz_questions(*)
      `).eq("stream_item_id",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?{streamItemId:t.stream_item_id,points:t.points||void 0,dueDate:t.due_date||void 0,dueTime:t.due_time||void 0,description:t.description||void 0,assignToAll:t.assign_to_all,assignedGroups:t.assigned_groups||[],selectedStudents:(t.quiz_students||[]).map(s=>s.student_id),isArchived:t.stream_item?.is_archived||!1,questions:(t.questions||[]).map(s=>({id:s.id,title:s.title,description:s.description||void 0,type:s.type,required:s.required,points:s.points,correctAnswer:s.correct_answer,options:s.options,order:s.order}))}:null}catch(t){throw console.error("Error loading quiz:",t),t}},px=async()=>{try{const{data:e,error:t}=await Ue.from("quizzes").select(`
        id,
        stream_item_id,
        points,
        due_date,
        due_time,
        description,
        assign_to_all,
        assigned_groups,
        created_at,
        stream_item:stream_items!inner(
          id,
          class_id,
          title,
          content,
          is_archived,
          created_at,
          class:classes(
            id,
            title
          ),
          author:users(
            id,
            firstName:first_name,
            lastName:last_name
          )
        ),
        quiz_students(count)
      `).order("created_at",{ascending:!1});if(t)throw t;return(e||[]).map(r=>({id:r.id,streamItemId:r.stream_item_id,type:"quiz",classId:r.stream_item?.class_id||"",className:r.stream_item?.class?.title||"Sin clase",title:r.stream_item?.title||"",description:r.description||void 0,points:r.points||void 0,dueDate:r.due_date||void 0,dueTime:r.due_time||void 0,assignToAll:r.assign_to_all,assignedGroups:r.assigned_groups||[],isArchived:r.stream_item?.is_archived||!1,createdAt:r.created_at,author:r.stream_item?.author?{id:r.stream_item.author.id,name:`${r.stream_item.author.firstName||""} ${r.stream_item.author.lastName||""}`.trim()||"Usuario"}:void 0,studentCount:r.quiz_students?.[0]?.count||0,pendingReviewCount:0}))}catch(e){throw console.error("Error loading quizzes:",e),e}},g5=async(e,t=!1)=>{try{let r=Ue.from("quizzes").select(`
        id,
        stream_item_id,
        points,
        due_date,
        due_time,
        description,
        assign_to_all,
        assigned_groups,
        created_at,
        stream_item:stream_items!inner(
          id,
          class_id,
          title,
          content,
          is_archived,
          created_at,
          author:users(
            id,
            firstName:first_name,
            lastName:last_name
          )
        ),
        quiz_students(count)
           `).eq("stream_item.class_id",e);const{data:s,error:o}=await r.order("created_at",{ascending:!1});if(o)throw o;return(s||[]).map(i=>({id:i.id,streamItemId:i.stream_item_id,type:"quiz",classId:i.stream_item?.class_id||"",title:i.stream_item?.title||"",description:i.description||void 0,points:i.points||void 0,dueDate:i.due_date||void 0,dueTime:i.due_time||void 0,assignToAll:i.assign_to_all,assignedGroups:i.assigned_groups||[],isArchived:i.stream_item?.is_archived||!1,createdAt:i.created_at,author:i.stream_item?.author?{id:i.stream_item.author.id,name:`${i.stream_item.author.firstName||""} ${i.stream_item.author.lastName||""}`.trim()||"Usuario"}:void 0,studentCount:i.quiz_students?.[0]?.count||0,pendingReviewCount:0}))}catch(r){throw console.error("Error loading quizzes by class:",r),r}},A2=async(e,t)=>{try{const{data:r,error:s}=await Ue.from("quizzes").select(`
        *,
        stream_item:stream_items(
          id,
          class_id,
          title,
          content,
          author_id,
          created_at,
          is_archived,
          class:classes(
            id,
            title
          ),
          author:users(
            id,
            first_name,
            last_name,
            avatar
          )
        ),
        quiz_students!inner(student_id)
      `).eq("stream_item.is_archived",!1).eq("quiz_students.student_id",e);if(s&&s.code!=="PGRST116")throw s;const{data:o,error:i}=await Ue.from("quizzes").select(`
        *,
        stream_item:stream_items!quizzes_stream_item_id_fkey(
          id,
          class_id,
          title,
          content,
          author_id,
          created_at,
          is_archived,
          class:classes!stream_items_class_id_fkey(
            id,
            title
          ),
          author:users!stream_items_author_id_fkey(
            id,
            first_name,
            last_name,
            avatar
          )
        )
      `).eq("stream_item.is_archived",!1).eq("assign_to_all",!0);if(i)throw i;let c=[];if(t){const{data:h,error:f}=await Ue.from("quizzes").select(`
          *,
          stream_item:stream_items(
            id,
            class_id,
            title,
            content,
            author_id,
            created_at,
            is_archived,
            class:classes(
              id,
              title
            ),
            author:users(
              id,
              first_name,
              last_name,
              avatar
            )
          )
        `).eq("stream_item.is_archived",!1).eq("assign_to_all",!1).contains("assigned_groups",[t]);f?console.error("Error loading group quizzes:",f):c=h||[]}const d=new Map;return(r||[]).forEach(h=>{h.stream_item&&d.set(h.id,{id:h.id,streamItemId:h.stream_item_id,classId:h.stream_item.class_id,className:h.stream_item.class?.title||"Sin clase",title:h.stream_item.title,description:h.description,points:h.points,dueDate:h.due_date,dueTime:h.due_time,assignToAll:h.assign_to_all,assignedGroups:h.assigned_groups||[],author:{id:h.stream_item.author?.id||"",name:`${h.stream_item.author?.first_name||""} ${h.stream_item.author?.last_name||""}`.trim()||"Usuario",avatar:h.stream_item.author?.avatar},createdAt:h.stream_item.created_at,isArchived:h.stream_item.is_archived})}),(o||[]).forEach(h=>{h.stream_item&&!d.has(h.id)&&d.set(h.id,{id:h.id,streamItemId:h.stream_item_id,classId:h.stream_item.class_id,className:h.stream_item.class?.title||"Sin clase",title:h.stream_item.title,description:h.description,points:h.points,dueDate:h.due_date,dueTime:h.due_time,assignToAll:h.assign_to_all,assignedGroups:h.assigned_groups||[],author:{id:h.stream_item.author?.id||"",name:`${h.stream_item.author?.first_name||""} ${h.stream_item.author?.last_name||""}`.trim()||"Usuario",avatar:h.stream_item.author?.avatar},createdAt:h.stream_item.created_at,isArchived:h.stream_item.is_archived})}),c.forEach(h=>{h.stream_item&&!d.has(h.id)&&d.set(h.id,{id:h.id,streamItemId:h.stream_item_id,classId:h.stream_item.class_id,className:h.stream_item.class?.title||"Sin clase",title:h.stream_item.title,description:h.description,points:h.points,dueDate:h.due_date,dueTime:h.due_time,assignToAll:h.assign_to_all,assignedGroups:h.assigned_groups||[],author:{id:h.stream_item.author?.id||"",name:`${h.stream_item.author?.first_name||""} ${h.stream_item.author?.last_name||""}`.trim()||"Usuario",avatar:h.stream_item.author?.avatar},createdAt:h.stream_item.created_at,isArchived:h.stream_item.is_archived})}),Array.from(d.values())}catch(r){throw console.error("Error loading quizzes for student:",r),r}},Xy=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),Mh=async e=>{try{const t=new Date().toISOString(),r={stream_item_id:e.streamItemId,description:e.description||null,assign_to_all:e.assignToAll??!0,assigned_groups:e.assignedGroups||[],updated_at:t},{data:s}=await Ue.from("materials").select("id").eq("stream_item_id",e.streamItemId).maybeSingle();let o;if(s){const{error:i}=await Ue.from("materials").update(r).eq("id",s.id);if(i)throw i;o=s.id,await Ue.from("material_students").delete().eq("material_id",o)}else{r.id=Xy(),r.created_at=t;const{data:i,error:c}=await Ue.from("materials").insert(r).select("id").single();if(c)throw c;if(!i)throw new Error("Failed to create material");o=i.id}if(!e.assignToAll){let i=[];if(e.assignedGroups&&e.assignedGroups.length>0){const c=e.assignedGroups.map(f=>hx(f)),h=(await Promise.all(c)).flat().map(f=>f.id);i=[...new Set([...i,...h])]}if(e.selectedStudents&&e.selectedStudents.length>0&&(i=[...new Set([...i,...e.selectedStudents])]),i.length>0){const c=i.map(h=>({id:Xy(),material_id:o,student_id:h})),{error:d}=await Ue.from("material_students").insert(c);d&&console.error("Error assigning students:",d)}}}catch(t){throw console.error("Error saving material:",t),t}},ch=async e=>{try{const{data:t,error:r}=await Ue.from("materials").select(`
        *,
        stream_item:stream_items(
          is_archived,
          attachments(*)
        ),
        material_students(student_id)
      `).eq("stream_item_id",e).maybeSingle();if(r){if(r.code==="PGRST116")return null;throw r}return t?{streamItemId:t.stream_item_id,description:t.description||void 0,assignToAll:t.assign_to_all,assignedGroups:t.assigned_groups||[],selectedStudents:(t.material_students||[]).map(s=>s.student_id),isArchived:t.stream_item?.is_archived||!1,attachments:(t.stream_item?.attachments||[]).map(s=>({id:s.id,type:s.type,name:s.name,url:s.url||void 0,filePath:s.file_path||void 0,fileSize:s.file_size?Number(s.file_size):void 0,mimeType:s.mime_type||void 0}))}:null}catch(t){throw console.error("Error loading material:",t),t}},I2=async()=>{try{const{data:e,error:t}=await Ue.from("materials").select(`
        id,
        stream_item_id,
        description,
        assign_to_all,
        created_at,
        stream_item:stream_items!inner(
          id,
          class_id,
          title,
          content,
          is_archived,
          created_at,
          class:classes(
            id,
            title
          ),
          author:users(
            id,
            firstName:first_name,
            lastName:last_name
          )
        ),
        material_students(count)
      `).order("created_at",{ascending:!1});if(t)throw t;return(e||[]).map(r=>({id:r.id,streamItemId:r.stream_item_id,type:"material",classId:r.stream_item?.class_id||"",className:r.stream_item?.class?.title||"Sin clase",title:r.stream_item?.title||"",description:r.description||void 0,assignToAll:r.assign_to_all,isArchived:r.stream_item?.is_archived||!1,createdAt:r.created_at,author:r.stream_item?.author?{id:r.stream_item.author.id,name:`${r.stream_item.author.firstName||""} ${r.stream_item.author.lastName||""}`.trim()||"Usuario"}:void 0,studentCount:r.material_students?.[0]?.count||0}))}catch(e){throw console.error("Error loading materials:",e),e}},x5=async(e,t=!1)=>{try{let r=Ue.from("materials").select(`
        id,
        stream_item_id,
        description,
        assign_to_all,
        created_at,
        stream_item:stream_items(
          id,
          class_id,
          title,
          content,
          is_archived,
          created_at,
          author:users(
            id,
            firstName:first_name,
            lastName:last_name
          )
        ),
        material_students(count)
           `).eq("stream_item.class_id",e);const{data:s,error:o}=await r.order("created_at",{ascending:!1});if(o)throw o;return(s||[]).map(i=>({id:i.id,streamItemId:i.stream_item_id,type:"material",classId:i.stream_item?.class_id||"",title:i.stream_item?.title||"",description:i.description||void 0,assignToAll:i.assign_to_all,isArchived:i.stream_item?.is_archived||!1,createdAt:i.created_at,author:i.stream_item?.author?{id:i.stream_item.author.id,name:`${i.stream_item.author.firstName||""} ${i.stream_item.author.lastName||""}`.trim()||"Usuario"}:void 0,studentCount:i.material_students?.[0]?.count||0}))}catch(r){throw console.error("Error loading materials by class:",r),r}},v5=async(e,t)=>{try{const{data:r,error:s}=await Ue.from("materials").select(`
        *,
        stream_item:stream_items(
          id,
          class_id,
          title,
          content,
          author_id,
          created_at,
          is_archived,
          class:classes(
            id,
            title
          ),
          author:users(
            id,
            first_name,
            last_name,
            avatar
          )
        ),
        material_students!inner(student_id)
      `).eq("stream_item.is_archived",!1).eq("material_students.student_id",e);if(s&&s.code!=="PGRST116")throw s;const{data:o,error:i}=await Ue.from("materials").select(`
        *,
        stream_item:stream_items!materials_stream_item_id_fkey(
          id,
          class_id,
          title,
          content,
          author_id,
          created_at,
          is_archived,
          class:classes!stream_items_class_id_fkey(
            id,
            title
          ),
          author:users!stream_items_author_id_fkey(
            id,
            first_name,
            last_name,
            avatar
          )
        )
      `).eq("stream_item.is_archived",!1).eq("assign_to_all",!0);if(i)throw i;let c=[];if(t){const{data:h,error:f}=await Ue.from("materials").select(`
          *,
          stream_item:stream_items(
            id,
            class_id,
            title,
            content,
            author_id,
            created_at,
            is_archived,
            class:classes(
              id,
              title
            ),
            author:users(
              id,
              first_name,
              last_name,
              avatar
            )
          )
        `).eq("stream_item.is_archived",!1).eq("assign_to_all",!1).contains("assigned_groups",[t]);f?console.error("Error loading group materials:",f):c=h||[]}const d=new Map;return(r||[]).forEach(h=>{h.stream_item&&d.set(h.id,{id:h.id,streamItemId:h.stream_item_id,classId:h.stream_item.class_id,className:h.stream_item.class?.title||"Sin clase",title:h.stream_item.title,description:h.description,assignToAll:h.assign_to_all,assignedGroups:h.assigned_groups||[],author:{id:h.stream_item.author?.id||"",name:`${h.stream_item.author?.first_name||""} ${h.stream_item.author?.last_name||""}`.trim()||"Usuario",avatar:h.stream_item.author?.avatar},createdAt:h.stream_item.created_at,isArchived:h.stream_item.is_archived})}),(o||[]).forEach(h=>{h.stream_item&&!d.has(h.id)&&d.set(h.id,{id:h.id,streamItemId:h.stream_item_id,classId:h.stream_item.class_id,className:h.stream_item.class?.title||"Sin clase",title:h.stream_item.title,description:h.description,assignToAll:h.assign_to_all,assignedGroups:h.assigned_groups||[],author:{id:h.stream_item.author?.id||"",name:`${h.stream_item.author?.first_name||""} ${h.stream_item.author?.last_name||""}`.trim()||"Usuario",avatar:h.stream_item.author?.avatar},createdAt:h.stream_item.created_at,isArchived:h.stream_item.is_archived})}),c.forEach(h=>{h.stream_item&&!d.has(h.id)&&d.set(h.id,{id:h.id,streamItemId:h.stream_item_id,classId:h.stream_item.class_id,className:h.stream_item.class?.title||"Sin clase",title:h.stream_item.title,description:h.description,assignToAll:h.assign_to_all,assignedGroups:h.assigned_groups||[],author:{id:h.stream_item.author?.id||"",name:`${h.stream_item.author?.first_name||""} ${h.stream_item.author?.last_name||""}`.trim()||"Usuario",avatar:h.stream_item.author?.avatar},createdAt:h.stream_item.created_at,isArchived:h.stream_item.is_archived})}),Array.from(d.values())}catch(r){throw console.error("Error loading materials for student:",r),r}},ko=async e=>{try{const t=$t.getState().user,r=e||t?.id;if(!r)throw console.warn("Authentication check failed: No teacherId available"),new Error("Usuario no autenticado");const s=t?.role==="admin";let o=Ue.from("classes").select(`
        *,
        teacher:users!classes_teacher_id_fkey(id, firstName:first_name, lastName:last_name),
        module:modules(id, title)
      `).eq("is_archived",!1).order("created_at",{ascending:!1});s||(o=o.eq("teacher_id",r));const{data:i,error:c}=await o;if(c)throw console.error("Supabase query error:",c),c;return(i||[]).map(d=>({id:d.id,title:d.title,description:d.description||void 0,classCode:d.class_code,section:d.section||void 0,subject:d.subject||void 0,room:d.room||void 0,teacherId:d.teacher_id,moduleId:d.module_id||void 0,backgroundImage:d.background_image||void 0,isArchived:d.is_archived,status:d.status,teacher:d.teacher?{id:d.teacher.id,firstName:d.teacher.firstName,lastName:d.teacher.lastName}:void 0,module:d.module?{id:d.module.id,title:d.module.title}:void 0}))}catch(t){throw console.error("Error loading classes:",t),t}},mf=async e=>{try{const{data:t,error:r}=await Ue.from("classes").select(`
        *,
        teacher: users!classes_teacher_id_fkey(id, firstName: first_name, lastName: last_name),
          module: modules(id, title)
            `).eq("id",e).single();if(r)throw r;return t?{id:t.id,title:t.title,description:t.description||void 0,classCode:t.class_code,section:t.section||void 0,subject:t.subject||void 0,room:t.room||void 0,teacherId:t.teacher_id,moduleId:t.module_id||void 0,backgroundImage:t.background_image||void 0,isArchived:t.is_archived,status:t.status,teacher:t.teacher?{id:t.teacher.id,firstName:t.teacher.firstName,lastName:t.teacher.lastName}:void 0,module:t.module?{id:t.module.id,title:t.module.title}:void 0}:null}catch(t){throw console.error("Error loading class:",t),t}},y5=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),pf=async e=>{try{const t=$t.getState().user;if(console.log(" createClass calling with user:",t?`${t.firstName} (${t.role})`:"NULL"),!t)throw new Error("Usuario no autenticado (createClass service)");const s=t.role==="admin"&&e.teacherId?e.teacherId:t.id,o=y5();let i=e.classCode;if(!i){i=Math.random().toString(36).substring(2,10).toUpperCase();const{data:v}=await Ue.from("classes").select("id").eq("class_code",i).maybeSingle();v&&(i=Math.random().toString(36).substring(2,10).toUpperCase())}const c=new Date().toISOString(),{data:d}=await Ue.from("classes").select("id").eq("title",e.title).eq("teacher_id",s).maybeSingle();let h,f;if(d)throw console.log(" Clase ya existe (Supabase), mostrando error al usuario:",e.title),new Error("A class with this name already exists.");{const{data:v,error:x}=await Ue.from("classes").insert({id:o,title:e.title,description:e.description,class_code:i,section:e.section,subject:e.subject,room:e.room,teacher_id:s,module_id:e.moduleId,background_image:e.backgroundImage,status:e.status||"active",created_at:c,updated_at:c}).select(`
              *,
              teacher: users!classes_teacher_id_fkey(id, firstName: first_name, lastName: last_name)
                `).single();h=v,f=x}if(f)throw f;if(!h)throw new Error("Failed to create/update class");const p=h;return{id:p.id,title:p.title,description:p.description||void 0,classCode:p.class_code,section:p.section||void 0,subject:p.subject||void 0,room:p.room||void 0,teacherId:p.teacher_id,moduleId:p.module_id||void 0,backgroundImage:p.background_image||void 0,isArchived:p.is_archived,status:p.status,teacher:p.teacher?{id:p.teacher.id,firstName:p.teacher.firstName,lastName:p.teacher.lastName}:void 0}}catch(t){throw console.error("Error creating class:",t),t}},Lh=async(e,t)=>{try{const r={};t.title!==void 0&&(r.title=t.title),t.description!==void 0&&(r.description=t.description),t.section!==void 0&&(r.section=t.section),t.subject!==void 0&&(r.subject=t.subject),t.room!==void 0&&(r.room=t.room),t.moduleId!==void 0&&(r.module_id=t.moduleId),t.backgroundImage!==void 0&&(r.background_image=t.backgroundImage),t.isArchived!==void 0&&(r.is_archived=t.isArchived),t.status!==void 0&&(r.status=t.status);const{data:s,error:o}=await Ue.from("classes").update(r).eq("id",e).select(`
                *,
                teacher: users!classes_teacher_id_fkey(id, firstName: first_name, lastName: last_name),
                  module: modules(id, title)
                    `).single();if(o)throw o;if(!s)throw new Error("Failed to update class");return{id:s.id,title:s.title,description:s.description||void 0,classCode:s.class_code,section:s.section||void 0,subject:s.subject||void 0,room:s.room||void 0,teacherId:s.teacher_id,moduleId:s.module_id||void 0,backgroundImage:s.background_image||void 0,isArchived:s.is_archived,status:s.status,teacher:s.teacher?{id:s.teacher.id,firstName:s.teacher.firstName,lastName:s.teacher.lastName}:void 0,module:s.module?{id:s.module.id,title:s.module.title}:void 0}}catch(r){throw console.error("Error updating class:",r),r}},T2=async e=>{try{const{error:t}=await Ue.from("stream_items").update({class_id:null}).eq("class_id",e);t&&console.error("Error updating stream items:",t);const{error:r}=await Ue.from("classes").delete().eq("id",e);if(r)throw r}catch(t){throw console.error("Error deleting class:",t),t}},mg=async()=>{try{const e=$t.getState().user,t=e?.id;if(!t)throw console.warn("Authentication check failed: No teacherId available"),new Error("Usuario no autenticado");const r=e?.role==="admin";let s=Ue.from("classes").select(`
                    *,
                    teacher: users!classes_teacher_id_fkey(id, firstName: first_name, lastName: last_name),
                      module: modules(id, title)
                        `).order("created_at",{ascending:!1});r?s=s.eq("is_archived",!0):s=s.eq("teacher_id",t).eq("is_archived",!0);const{data:o,error:i}=await s;if(i)throw console.error("Supabase query error:",i),i;return(o||[]).map(c=>({id:c.id,title:c.title,description:c.description||void 0,classCode:c.class_code,section:c.section||void 0,subject:c.subject||void 0,room:c.room||void 0,teacherId:c.teacher_id,moduleId:c.module_id||void 0,backgroundImage:c.background_image||void 0,isArchived:c.is_archived,status:c.status,teacher:c.teacher?{id:c.teacher.id,firstName:c.teacher.firstName,lastName:c.teacher.lastName}:void 0,module:c.module?{id:c.module.id,title:c.module.title}:void 0}))}catch(e){throw console.error("Error loading archived classes:",e),e}},D2=async e=>{try{const{data:t,error:r}=await Ue.from("class_members").select(`
  class: classes!inner(
    id, title, description, class_code, section, subject, room, is_archived, status, created_at, updated_at,
    teacher: users!classes_teacher_id_fkey(id, firstName: first_name, lastName: last_name),
    module: modules(id, title)
  )
    `).eq("user_id",e).eq("role","student").eq("class.is_archived",!1).eq("class.is_archived",!1);if(console.log("Fetching student classes without order"),r)throw r;return t&&t.length>0&&(console.log("Sample class member keys:",Object.keys(t[0])),t[0].class&&console.log("Sample class keys:",Object.keys(t[0].class))),(t||[]).map(s=>({id:s.class.id,title:s.class.title,description:s.class.description,classCode:s.class.class_code,section:s.class.section,subject:s.class.subject,room:s.class.room,teacherId:s.class.teacher?.id,teacher:s.class.teacher?{id:s.class.teacher.id,firstName:s.class.teacher.firstName,lastName:s.class.teacher.lastName}:void 0,moduleId:s.class.module?.id,module:s.class.module?{id:s.class.module.id,title:s.class.module.title}:void 0,isArchived:s.class.is_archived,status:s.class.status,createdAt:s.class.created_at,updatedAt:s.class.updated_at}))}catch(t){throw console.error("Error loading student classes:",t),t}},dh=async e=>{try{const{data:t,error:r}=await Ue.from("class_members").select(`
  user: users!class_members_user_id_fkey(
    id, first_name, last_name, email, avatar
  )
    `).eq("class_id",e).eq("role","student");if(r)throw r;return(t||[]).map(s=>({id:s.user.id,firstName:s.user.first_name,lastName:s.user.last_name,email:s.user.email,avatar:s.user.avatar}))}catch(t){return console.error("Error loading class students:",t),[]}},R2=Object.freeze(Object.defineProperty({__proto__:null,createClass:pf,deleteClass:T2,getStudentClasses:D2,getStudentsByClass:dh,loadArchivedClasses:mg,loadClass:mf,loadClasses:ko,updateClass:Lh},Symbol.toStringTag,{value:"Module"})),b5=async e=>{try{const r=$t.getState().user?.role==="admin";let s=Ue.from("stream_items").select(`
        *,
        author:users(id, firstName:first_name, lastName:last_name, avatar),
        attachments(*),
        topic:topics(id, name),
        class:classes(id, title)
      `).eq("is_archived",!1).order("created_at",{ascending:!1});!r&&e&&(s=s.eq("class_id",e));const{data:o,error:i}=await s;if(i)throw i;return(o||[]).map(c=>({id:c.id,classId:c.class_id||c.class?.id,type:c.type,title:c.title,content:c.content||void 0,authorId:c.author_id,topicId:c.topic_id||void 0,createdAt:c.created_at,isArchived:c.is_archived||!1,author:{name:`${c.author?.firstName||""} ${c.author?.lastName||""}`.trim()||"Usuario",avatar:c.author?.avatar||void 0},attachments:(c.attachments||[]).map(d=>({id:d.id,type:d.type,name:d.name,url:d.url||void 0,filePath:d.file_path||void 0,fileSize:d.file_size?Number(d.file_size):void 0,mimeType:d.mime_type||void 0})),className:c.class?.title||void 0}))}catch(t){throw console.error("Error loading stream items:",t),t}},pg=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),yo=async e=>{try{const t=pg(),r=new Date().toISOString(),{data:s,error:o}=await Ue.from("stream_items").insert({id:t,class_id:e.classId,type:e.type,title:e.title,content:e.content,author_id:e.authorId,topic_id:e.topicId,created_at:r,updated_at:r}).select(`
        *,
        author:users(id, firstName:first_name, lastName:last_name, avatar)
      `).single();if(o)throw o;if(!s)throw new Error("Failed to create stream item");if(e.attachments&&e.attachments.length>0){const d=e.attachments.map((f,p)=>({id:pg(),stream_item_id:s.id,type:f.type,name:f.name,url:f.url,file_path:f.filePath,file_size:f.fileSize||null,mime_type:f.mimeType,order:p})),{error:h}=await Ue.from("attachments").insert(d);h&&console.warn("Error creating attachments:",h)}const{data:i,error:c}=await Ue.from("stream_items").select(`
        *,
        author:users(id, firstName:first_name, lastName:last_name, avatar),
        attachments(*)
      `).eq("id",s.id).single();if(c)throw c;if(!i)throw new Error("Failed to reload stream item");return{id:i.id,classId:i.class_id,type:i.type,title:i.title,content:i.content||void 0,authorId:i.author_id,topicId:i.topic_id||void 0,createdAt:i.created_at,author:{name:`${i.author?.firstName||""} ${i.author?.lastName||""}`.trim()||"Usuario",avatar:i.author?.avatar||void 0},attachments:(i.attachments||[]).map(d=>({id:d.id,type:d.type,name:d.name,url:d.url||void 0,filePath:d.file_path||void 0,fileSize:d.file_size?Number(d.file_size):void 0,mimeType:d.mime_type||void 0}))}}catch(t){throw console.error("Error saving stream item:",t),t}},uh=async(e,t)=>{try{const r={};t.title!==void 0&&(r.title=t.title),t.content!==void 0&&(r.content=t.content),t.topicId!==void 0&&(r.topic_id=t.topicId);const{data:s,error:o}=await Ue.from("stream_items").update(r).eq("id",e).select(`
        *,
        author:users(id, firstName:first_name, lastName:last_name, avatar),
        attachments(*)
      `).single();if(o)throw o;if(!s)throw new Error("Failed to update stream item");if(t.attachments!==void 0){if(await Ue.from("attachments").delete().eq("stream_item_id",e),t.attachments.length>0){const d=t.attachments.map((f,p)=>({id:pg(),stream_item_id:e,type:f.type,name:f.name,url:f.url,file_path:f.filePath,file_size:f.fileSize||null,mime_type:f.mimeType,order:p})),{error:h}=await Ue.from("attachments").insert(d);h&&console.warn("Error updating attachments:",h)}const{data:i,error:c}=await Ue.from("stream_items").select(`
          *,
          author:users(id, firstName:first_name, lastName:last_name, avatar),
          attachments(*)
        `).eq("id",e).single();if(c)throw c;if(!i)throw new Error("Failed to reload stream item");return{id:i.id,classId:i.class_id,type:i.type,title:i.title,content:i.content||void 0,authorId:i.author_id,topicId:i.topic_id||void 0,createdAt:i.created_at,author:{name:`${i.author?.firstName||""} ${i.author?.lastName||""}`.trim()||"Usuario",avatar:i.author?.avatar||void 0},attachments:(i.attachments||[]).map(d=>({id:d.id,type:d.type,name:d.name,url:d.url||void 0,filePath:d.file_path||void 0,fileSize:d.file_size?Number(d.file_size):void 0,mimeType:d.mime_type||void 0}))}}return{id:s.id,classId:s.class_id,type:s.type,title:s.title,content:s.content||void 0,authorId:s.author_id,topicId:s.topic_id||void 0,createdAt:s.created_at,author:{name:`${s.author?.firstName||""} ${s.author?.lastName||""}`.trim()||"Usuario",avatar:s.author?.avatar||void 0},attachments:(s.attachments||[]).map(i=>({id:i.id,type:i.type,name:i.name,url:i.url||void 0,filePath:i.file_path||void 0,fileSize:i.file_size?Number(i.file_size):void 0,mimeType:i.mime_type||void 0}))}}catch(r){throw console.error("Error updating stream item:",r),r}},w5=async e=>{try{const{error:t}=await Ue.from("stream_items").delete().eq("id",e);if(t)throw t}catch(t){throw console.error("Error deleting stream item:",t),t}},eb=async e=>{try{const t=$t.getState().user,r=t?.role==="admin";let s=Ue.from("stream_items").select(`
        *,
        author:users(id, firstName:first_name, lastName:last_name, avatar),
        attachments(*),
        topic:topics(id, name),
        class:classes(id, title)
      `).eq("is_archived",!0).order("created_at",{ascending:!1});if(e&&(s=s.eq("type",e)),!r&&t){const{data:c}=await Ue.from("classes").select("id").or(`teacher_id.eq.${t.id},id.in.(select class_id from class_members where user_id.eq.${t.id})`);if(c&&c.length>0){const d=c.map(h=>h.id);s=s.in("class_id",d)}else return[]}const{data:o,error:i}=await s;if(i)throw i;return(o||[]).map(c=>({id:c.id,classId:c.class_id||c.class?.id,type:c.type,title:c.title,content:c.content||void 0,authorId:c.author_id,topicId:c.topic_id||void 0,createdAt:c.created_at,isArchived:c.is_archived||!1,author:{name:`${c.author?.firstName||""} ${c.author?.lastName||""}`.trim()||"Usuario",avatar:c.author?.avatar||void 0},attachments:(c.attachments||[]).map(d=>({id:d.id,type:d.type,name:d.name,url:d.url||void 0,filePath:d.file_path||void 0,fileSize:d.file_size?Number(d.file_size):void 0,mimeType:d.mime_type||void 0})),className:c.class?.title||void 0}))}catch(t){throw console.error("Error loading archived stream items:",t),t}},j5=async e=>{try{const{error:t}=await Ue.from("stream_items").update({is_archived:!0,updated_at:new Date().toISOString()}).eq("id",e);if(t)throw t}catch(t){throw console.error("Error archiving stream item:",t),t}},gg=async(e,t)=>{try{const{error:r}=await Ue.from("stream_items").update({is_archived:!1,updated_at:new Date().toISOString()}).eq("id",e);if(r)throw r}catch(r){throw console.error("Error unarchiving stream item:",r),r}},N5=()=>{const{user:e}=$t(),[t,r]=j.useState("Idle"),[s,o]=j.useState([]),i=d=>o(h=>[...h,`${new Date().toLocaleTimeString()} - ${d}`]),c=async()=>{if(!e){i(" Error: No user logged in. Please login as ark2784@gmail.com first.");return}r("Running..."),i(" Starting Stress Test...");try{i("Creating 5 Assignments...");let h=(await ko(e.id))[0]?.id;h||(i('Creating "Stress Test Class"...'),h=(await pf({title:"Clase de Prueba de Estrs",subject:"Testing",section:"A",room:"101",teacherId:e.id})).id),i(`Using Class ID: ${h}`);const f=async(y,S,C,T)=>(await yo({classId:C,type:y,title:S,content:T,authorId:e.id})).id;for(let y=1;y<=5;y++){const S=await f("assignment",`Test Assignment ${y}`,h,`Auto generated ${y}`);await ed({streamItemId:S,points:100,dueDate:new Date(Date.now()+864e5*y).toISOString().split("T")[0],assignToAll:!0,assignedGroups:[],selectedStudents:[]})}i(" 5 Assignments Created"),i("Creating Mega Quiz...");const v={streamItemId:await f("quiz","MEGA QUIZ - All Types",h,"Comprehensive test"),points:100,description:"This quiz tests every question type.",questions:[{id:"q1",type:"short-answer",title:"What is your name?",description:"Short answer test",required:!0,points:10,order:0},{id:"q2",type:"paragraph",title:"Write a biography",description:"Long answer test",required:!1,points:20,order:1},{id:"q3",type:"multiple-choice",title:"Choose a color",options:["Red","Blue","Green"],required:!0,points:5,order:2},{id:"q4",type:"checkboxes",title:"Select hobbies",options:["Reading","Coding","Sleeping"],required:!0,points:5,order:3},{id:"q5",type:"dropdown",title:"Select Country",options:["Mexico","USA","Canada"],required:!0,points:5,order:4},{id:"q6",type:"linear-scale",title:"Rate this app",options:[],required:!0,points:10,order:5}],assignToAll:!0,assignedGroups:[],selectedStudents:[]};await Ph(v),i(" Mega Quiz Created"),i("Creating Materials...");const x=await f("material","Test Material - Link",h,"Material with link");await Mh({streamItemId:x,description:"A material with a link",assignToAll:!0});const w=await f("material","Test Material - Video",h,"Material with video");await Mh({streamItemId:w,description:"A material with a video",assignToAll:!0}),i(" Materials Created"),i(" Stress Test COMPLETED Successfully!"),r("Finished")}catch(d){console.error(d),r("Error"),i(` FAILED: ${d.message}`)}};return n.jsxs("div",{className:"p-10 max-w-4xl mx-auto",children:[n.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Exhaustive Stress Test Runner"}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-gray-200 mb-6",children:[n.jsxs("p",{className:"mb-4",children:["Current User: ",n.jsx("strong",{children:e?.email||"Not logged in"})]}),n.jsxs("div",{className:"mb-6 text-gray-600",children:["This tool will automatically create:",n.jsxs("ul",{className:"list-disc ml-6 mt-2",children:[n.jsx("li",{children:"1 Class (if none exists)"}),n.jsx("li",{children:"5 Assignments"}),n.jsx("li",{children:"1 Mega Quiz with all question types"}),n.jsx("li",{children:"2 Materials (Link & Video)"})]})]}),n.jsx(He,{onClick:c,disabled:t==="Running"||!e,className:"w-full text-lg py-3",children:t==="Running"?"Running Tests...":" Run Exhaustive Test"})]}),n.jsxs("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm min-h-[300px] overflow-auto",children:[s.map((d,h)=>n.jsx("div",{children:d},h)),s.length===0&&n.jsx("div",{className:"text-gray-500",children:"// Logs will appear here..."})]})]})},S5=(e,t,r,s)=>{const o=[r,{code:t,...s||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(o,"warn","react-i18next::",!0);bo(o[0])&&(o[0]=`react-i18next:: ${o[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...o):console?.warn&&console.warn(...o)},tb={},xg=(e,t,r,s)=>{bo(r)&&tb[r]||(bo(r)&&(tb[r]=new Date),S5(e,t,r,s))},O2=(e,t)=>()=>{if(e.isInitialized)t();else{const r=()=>{setTimeout(()=>{e.off("initialized",r)},0),t()};e.on("initialized",r)}},vg=(e,t,r)=>{e.loadNamespaces(t,O2(e,r))},rb=(e,t,r,s)=>{if(bo(r)&&(r=[r]),e.options.preload&&e.options.preload.indexOf(t)>-1)return vg(e,r,s);r.forEach(o=>{e.options.ns.indexOf(o)<0&&e.options.ns.push(o)}),e.loadLanguages(t,O2(e,s))},k5=(e,t,r={})=>!t.languages||!t.languages.length?(xg(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:r.lng,precheck:(s,o)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!o(s.isLanguageChangingTo,e))return!1}}),bo=e=>typeof e=="string",_5=e=>typeof e=="object"&&e!==null,C5=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,E5={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},A5=e=>E5[e],I5=e=>e.replace(C5,A5);let T5={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:I5};const D5=()=>T5;let R5;const O5=()=>R5,P5=j.createContext();class M5{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const L5=(e,t)=>{const r=j.useRef();return j.useEffect(()=>{r.current=e},[e,t]),r.current},P2=(e,t,r,s)=>e.getFixedT(t,r,s),$5=(e,t,r,s)=>j.useCallback(P2(e,t,r,s),[e,t,r,s]),fa=(e,t={})=>{const{i18n:r}=t,{i18n:s,defaultNS:o}=j.useContext(P5)||{},i=r||s||O5();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new M5),!i){xg(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const O=($,F)=>bo(F)?F:_5(F)&&bo(F.defaultValue)?F.defaultValue:Array.isArray($)?$[$.length-1]:$,P=[O,{},!1];return P.t=O,P.i18n={},P.ready=!1,P}i.options.react?.wait&&xg(i,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const c={...D5(),...i.options.react,...t},{useSuspense:d,keyPrefix:h}=c;let f=o||i.options?.defaultNS;f=bo(f)?[f]:f||["translation"],i.reportNamespaces.addUsedNamespaces?.(f);const p=(i.isInitialized||i.initializedStoreOnce)&&f.every(O=>k5(O,i,c)),v=$5(i,t.lng||null,c.nsMode==="fallback"?f:f[0],h),x=()=>v,w=()=>P2(i,t.lng||null,c.nsMode==="fallback"?f:f[0],h),[y,S]=j.useState(x);let C=f.join();t.lng&&(C=`${t.lng}${C}`);const T=L5(C),A=j.useRef(!0);j.useEffect(()=>{const{bindI18n:O,bindI18nStore:P}=c;A.current=!0,!p&&!d&&(t.lng?rb(i,t.lng,f,()=>{A.current&&S(w)}):vg(i,f,()=>{A.current&&S(w)})),p&&T&&T!==C&&A.current&&S(w);const $=()=>{A.current&&S(w)};return O&&i?.on(O,$),P&&i?.store.on(P,$),()=>{A.current=!1,i&&O&&O?.split(" ").forEach(F=>i.off(F,$)),P&&i&&P.split(" ").forEach(F=>i.store.off(F,$))}},[i,C]),j.useEffect(()=>{A.current&&p&&S(x)},[i,h,p]);const I=[y,i,p];if(I.t=y,I.i18n=i,I.ready=p,p||!p&&!d)return I;throw new Promise(O=>{t.lng?rb(i,t.lng,f,()=>O()):vg(i,f,()=>O())})},F5=["eventos","gastos_evento","usuarios","items","cotizaciones","cotizacion_items","clientes"],M2=async()=>{const e=[];for(const t of F5)try{const{count:r,error:s}=await Ue.from(t).select("*",{count:"exact",head:!0});if(s){console.warn(`[Supabase DB] No se pudo obtener info de la tabla "${t}":`,s.message);continue}const o={eventos:"Eventos de produccin",gastos_evento:"Gastos asociados a eventos",usuarios:"Colaboradores de la empresa",items:"Catlogo de equipos, servicios y personal",cotizaciones:"Cotizaciones de eventos",cotizacion_items:"Items en cotizaciones con das de renta",clientes:"Clientes del CRM"};e.push({name:t,count:r??0,size:"N/A",description:o[t]||"Tabla Supabase"})}catch(r){console.error(`[Supabase DB] Error inesperado con la tabla "${t}":`,r)}return e},B5=async()=>{const e=await M2(),t=e.length,r=e.reduce((s,o)=>s+(o.count||0),0);return{totalTables:t,totalRecords:r,totalSize:"N/A",lastUpdate:new Date}},gx=async()=>{const{data:e,error:t}=await Ue.from("usuarios").select("*").eq("activo",!0).order("nombre",{ascending:!0});if(t)throw console.error("[Supabase DB] Error al obtener usuarios:",t),new Error(t.message||"Error al cargar usuarios");return(e||[]).map(r=>({id:r.id,nombre:r.nombre,apellido:r.apellido,email:r.email,telefono:r.telefono,rol:r.rol||"colaborador",activo:r.activo!==!1}))},U5=()=>{const{t:e}=fa(),[t,r]=j.useState([]),[s,o]=j.useState(!0),[i,c]=j.useState({}),[d,h]=j.useState(!1),[f,p]=j.useState(null),[v,x]=j.useState([]),[w,y]=j.useState(!1),[S,C]=j.useState(null),[T,A]=j.useState([]),[I,O]=j.useState(""),[P,$]=j.useState(!1),[F,te]=j.useState(!1),[ne,Ee]=j.useState(null),[Se,De]=j.useState({nombre:"",apellido:"",email:"",telefono:"",rol:"colaborador"}),[U,H]=j.useState({nombre:"",apellido:"",email:"",telefono:"",rol:"colaborador",activo:!0});j.useEffect(()=>{(async()=>{try{o(!0),p(null);const ge=(await gx()).map(Pe=>({id:Pe.id,firstName:Pe.nombre,lastName:Pe.apellido||"",email:Pe.email||"",telefono:Pe.telefono||"",role:Pe.rol,status:Pe.activo?"active":"suspended",notes:"",hours:0,createdAt:Pe.id}));r(ge)}catch(z){console.error("Error inesperado cargando usuarios desde Supabase:",z),p(z.message||"Error inesperado al cargar usuarios"),r([])}finally{o(!1)}})()},[]),j.useEffect(()=>{if(f&&f.includes("guardados correctamente")){const ae=setTimeout(()=>p(null),7e3);return()=>clearTimeout(ae)}},[f]),j.useEffect(()=>{x([{id:"1",name:"Dashboard",description:"Panel principal"},{id:"2",name:"Usuarios",description:"Gestin de usuarios"},{id:"3",name:"Cotizaciones",description:"Gestin de cotizaciones"},{id:"4",name:"CRM",description:"Gestin de clientes"},{id:"5",name:"Reportes",description:"Generacin de reportes"}])},[]);const ye=()=>{y(!1),C(null),A([])},R=ae=>{A(z=>z.includes(ae)?z.filter(ge=>ge!==ae):[...z,ae])},de=async()=>{S&&(console.log("Guardando mdulos para usuario:",S.id,"Mdulos:",T),p("Mdulos asignados correctamente"),ye())},V=async ae=>{if(window.confirm("Seguro que quieres eliminar este usuario?")){h(!0),p(null);try{const{error:z}=await Ue.from("usuarios").delete().eq("id",ae);if(z)throw new Error(z.message||"Error al eliminar usuario");r(ge=>ge.filter(Pe=>Pe.id!==ae)),p("Usuario eliminado correctamente")}catch(z){p(z.message||"Error al eliminar usuario")}finally{h(!1)}}},he=async()=>{if(!Se.nombre||!Se.rol){p("Por favor completa nombre y rol");return}try{h(!0),p(null);const{data:ae,error:z}=await Ue.from("usuarios").insert({nombre:Se.nombre,apellido:Se.apellido||null,email:Se.email||null,telefono:Se.telefono||null,rol:Se.rol,activo:!0}).select().single();if(z)throw new Error(z.message||"Error al crear usuario");const ge={id:ae.id,firstName:ae.nombre,lastName:ae.apellido||"",email:ae.email||"",telefono:ae.telefono||"",role:ae.rol,status:ae.activo?"active":"suspended",notes:"",hours:0,createdAt:ae.created_at};r([ge,...t]),De({nombre:"",apellido:"",email:"",telefono:"",rol:"colaborador"}),$(!1),p("Usuario creado correctamente")}catch(ae){p(ae.message||"Error al crear usuario")}finally{h(!1)}},K=ae=>{Ee(ae),H({nombre:ae.firstName,apellido:ae.lastName||"",email:ae.email||"",telefono:ae.telefono||"",rol:ae.role,activo:ae.status==="active"}),te(!0)},B=async()=>{if(!ne||!U.nombre||!U.rol){p("Por favor completa nombre y rol");return}try{h(!0),p(null);const{data:ae,error:z}=await Ue.from("usuarios").update({nombre:U.nombre,apellido:U.apellido||null,email:U.email||null,telefono:U.telefono||null,rol:U.rol,activo:U.activo}).eq("id",ne.id).select().single();if(z)throw new Error(z.message||"Error al actualizar usuario");const ge={id:ae.id,firstName:ae.nombre,lastName:ae.apellido||"",email:ae.email||"",telefono:ae.telefono||"",role:ae.rol,status:ae.activo?"active":"suspended",notes:"",hours:0,createdAt:ae.created_at};r(t.map(Pe=>Pe.id===ne.id?ge:Pe)),te(!1),Ee(null),p("Usuario actualizado correctamente")}catch(ae){p(ae.message||"Error al actualizar usuario")}finally{h(!1)}},re=t.filter(ae=>{const z=I.toLowerCase();return ae.firstName.toLowerCase().includes(z)||ae.lastName.toLowerCase().includes(z)||ae.email.toLowerCase().includes(z)||ae.role.toLowerCase().includes(z)});return n.jsxs("div",{className:"space-y-4 md:space-y-6 dark:bg-black bg-white min-h-screen p-0 md:p-6 overflow-y-auto",children:[n.jsx("div",{className:"flex-none p-4 md:p-0",children:n.jsxs("div",{className:"flex flex-row justify-between items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl md:text-3xl font-bold uppercase dark:text-white text-gray-900 mb-0 md:mb-2",children:e("adminDashboard.allUsers","Todos los Usuarios")}),n.jsx("p",{className:"dark:text-white text-gray-900 uppercase text-sm hidden md:block",children:"Gestin de colaboradores de la empresa"})]}),n.jsxs(He,{onClick:()=>$(!0),className:"uppercase !p-2 md:!px-4 md:!py-2",children:[n.jsx(Hr,{className:"w-5 h-5 md:mr-2"}),n.jsx("span",{className:"hidden md:inline",children:"Nuevo Usuario"})]})]})}),n.jsx(at,{className:"dark:bg-black/80 bg-white/80 backdrop-blur-sm dark:border-white/20 border-gray-200 mx-4 md:mx-0",padding:"none",children:n.jsx("div",{className:"p-3 md:p-4",children:n.jsxs("div",{className:"relative",children:[n.jsx(Ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 md:w-5 md:h-5 dark:text-white text-gray-900"}),n.jsx("input",{type:"text",placeholder:"Buscar usuarios...",value:I,onChange:ae=>O(ae.target.value),className:"w-full pl-9 md:pl-10 pr-3 py-1.5 md:py-2 text-sm md:text-base border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase dark:placeholder-gray-400 placeholder-gray-500"})]})})}),f&&n.jsx(at,{className:`${f.includes("Error")?"bg-red-900/20 border-red-800":"bg-green-900/20 border-green-800"}`,children:n.jsx("div",{className:"p-4",children:n.jsx("p",{className:`uppercase text-sm ${f.includes("Error")?"text-red-400":"text-green-400"}`,children:f})})}),P&&n.jsx("div",{className:"fixed inset-0 dark:bg-black/80 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:n.jsx(at,{className:"dark:bg-black bg-white dark:border-white/20 border-gray-200 w-full max-w-2xl",children:n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsx("h2",{className:"text-2xl font-bold uppercase dark:text-white text-gray-900",children:"Nuevo Usuario"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase dark:text-white text-gray-900",children:"Nombre *"}),n.jsx("input",{type:"text",value:Se.nombre,onChange:ae=>De({...Se,nombre:ae.target.value}),className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase",placeholder:"Nombre"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase dark:text-white text-gray-900",children:"Apellido"}),n.jsx("input",{type:"text",value:Se.apellido,onChange:ae=>De({...Se,apellido:ae.target.value}),className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase",placeholder:"Apellido"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase dark:text-white text-gray-900",children:"Email"}),n.jsx("input",{type:"email",value:Se.email,onChange:ae=>De({...Se,email:ae.target.value}),className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600",placeholder:"email@ejemplo.com"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase dark:text-white text-gray-900",children:"Telfono"}),n.jsx("input",{type:"text",value:Se.telefono,onChange:ae=>De({...Se,telefono:ae.target.value}),className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600",placeholder:"Telfono"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase dark:text-white text-gray-900",children:"Rol *"}),n.jsxs("select",{value:Se.rol,onChange:ae=>De({...Se,rol:ae.target.value}),className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase",children:[n.jsx("option",{value:"colaborador",children:"Colaborador"}),n.jsx("option",{value:"productor",children:"Productor"}),n.jsx("option",{value:"coordinador",children:"Coordinador"}),n.jsx("option",{value:"iluminacion",children:"Iluminacin"}),n.jsx("option",{value:"audio",children:"Audio"}),n.jsx("option",{value:"escenografia",children:"Escenografa"}),n.jsx("option",{value:"transporte",children:"Transporte"}),n.jsx("option",{value:"admin",children:"Admin"})]})]})]}),n.jsxs("div",{className:"flex gap-4 justify-end",children:[n.jsx(He,{variant:"outline",onClick:()=>{$(!1),De({nombre:"",apellido:"",email:"",telefono:"",rol:"colaborador"})},className:"uppercase",children:"Cancelar"}),n.jsx(He,{onClick:he,className:"uppercase",disabled:d,children:d?"Creando...":"Crear Usuario"})]})]})})}),F&&ne&&n.jsx("div",{className:"fixed inset-0 dark:bg-black/80 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:n.jsx(at,{className:"dark:bg-black bg-white dark:border-white/20 border-gray-200 w-full max-w-2xl",children:n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsx("h2",{className:"text-2xl font-bold uppercase dark:text-white text-gray-900",children:"Editar Usuario"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase dark:text-white text-gray-900",children:"Nombre *"}),n.jsx("input",{type:"text",value:U.nombre,onChange:ae=>H({...U,nombre:ae.target.value}),className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase",placeholder:"Nombre"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase dark:text-white text-gray-900",children:"Apellido"}),n.jsx("input",{type:"text",value:U.apellido,onChange:ae=>H({...U,apellido:ae.target.value}),className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase",placeholder:"Apellido"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase dark:text-white text-gray-900",children:"Email"}),n.jsx("input",{type:"email",value:U.email,onChange:ae=>H({...U,email:ae.target.value}),className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600",placeholder:"email@ejemplo.com"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase text-white",children:"Telfono"}),n.jsx("input",{type:"text",value:U.telefono,onChange:ae=>H({...U,telefono:ae.target.value}),className:"w-full px-3 py-2 border border-gray-700 bg-black/50 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600",placeholder:"Telfono"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase dark:text-white text-gray-900",children:"Rol *"}),n.jsxs("select",{value:U.rol,onChange:ae=>H({...U,rol:ae.target.value}),className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase",children:[n.jsx("option",{value:"colaborador",children:"Colaborador"}),n.jsx("option",{value:"productor",children:"Productor"}),n.jsx("option",{value:"coordinador",children:"Coordinador"}),n.jsx("option",{value:"iluminacion",children:"Iluminacin"}),n.jsx("option",{value:"audio",children:"Audio"}),n.jsx("option",{value:"escenografia",children:"Escenografa"}),n.jsx("option",{value:"transporte",children:"Transporte"}),n.jsx("option",{value:"admin",children:"Admin"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase dark:text-white text-gray-900",children:"Estado"}),n.jsxs("select",{value:U.activo?"active":"suspended",onChange:ae=>H({...U,activo:ae.target.value==="active"}),className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase",children:[n.jsx("option",{value:"active",children:"Activo"}),n.jsx("option",{value:"suspended",children:"Suspendido"})]})]})]}),n.jsxs("div",{className:"flex gap-4 justify-end",children:[n.jsx(He,{variant:"outline",onClick:()=>{te(!1),Ee(null)},className:"uppercase",children:"Cancelar"}),n.jsx(He,{onClick:B,className:"uppercase",disabled:d,children:d?"Guardando...":"Guardar Cambios"})]})]})})}),n.jsx(at,{className:"bg-black/80 backdrop-blur-sm border-gray-800",children:n.jsx("div",{className:"overflow-x-auto max-h-[calc(100vh-400px)] overflow-y-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-800",children:[n.jsx("th",{className:"text-left py-3 px-4 font-medium text-white uppercase",children:"Nombre"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-white uppercase",children:"Email"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-white uppercase",children:"Telfono"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-white uppercase",children:"Rol"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-white uppercase",children:"Estado"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-white uppercase",children:"Acciones"})]})}),n.jsx("tbody",{children:s?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"py-6 text-center dark:text-white text-gray-900 uppercase",children:e("loading","Cargando...")})}):re.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"py-6 text-center dark:text-white text-gray-900 uppercase",children:e("adminDashboard.noUsers","No hay usuarios")})}):re.map(ae=>n.jsxs("tr",{className:"border-b dark:border-white/20 border-gray-200 dark:hover:bg-white/5 hover:bg-gray-100/50 transition-colors",children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"font-medium dark:text-white text-gray-900 uppercase",children:[ae.firstName," ",ae.lastName]})}),n.jsx("td",{className:"py-3 px-4 dark:text-white text-gray-900",children:ae.email||"-"}),n.jsx("td",{className:"py-3 px-4 dark:text-white text-gray-900",children:ae.telefono||"-"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-medium uppercase dark:bg-white/10 bg-gray-200 dark:text-white text-gray-900 dark:border border-white/20",children:ae.role})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium uppercase ${ae.status==="active"?"bg-green-900/30 text-green-400 border border-green-800":"bg-red-900/30 text-red-400 border border-red-800"}`,children:ae.status==="active"?"Activo":"Suspendido"})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>K(ae),disabled:d,className:"p-2 text-white hover:text-blue-400 hover:bg-gray-900 rounded-lg transition-colors disabled:opacity-50",title:"Editar",children:n.jsx(Bn,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>V(ae.id),disabled:d,className:"p-2 text-white hover:text-red-400 hover:bg-gray-900 rounded-lg transition-colors disabled:opacity-50",title:"Eliminar",children:n.jsx(Gr,{className:"w-4 h-4"})})]})})]},ae.id))})]})})}),w&&S&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60",children:n.jsxs("div",{className:"bg-panel rounded-lg shadow-2xl p-8 w-full max-w-md border border-border relative",children:[n.jsx("button",{className:"absolute top-2 right-2 text-text-secondary hover:text-text",onClick:ye,children:""}),n.jsxs("h2",{className:"text-2xl font-bold mb-4 text-text",children:["Asignar mdulos a ",S.firstName," ",S.lastName]}),n.jsx("div",{className:"mb-4 space-y-2 max-h-64 overflow-y-auto",children:v.map(ae=>n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:T.includes(ae.id),onChange:()=>R(ae.id)}),n.jsx("span",{className:"text-text",children:ae.title})]},ae.id))}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsx(He,{size:"sm",variant:"primary",onClick:de,children:"Guardar"}),n.jsx(He,{size:"sm",variant:"outline",onClick:ye,children:"Cancelar"})]})]})})]})},z5=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),yg=async e=>{try{const t=new Date().toISOString(),r=e.status==="submitted"||e.status==="to_review",s=e.status==="reviewed",{data:o}=await Ue.from("assignment_submissions").select("id").eq("assignment_id",e.assignmentId).eq("student_id",e.studentId).maybeSingle(),i={assignment_id:e.assignmentId,student_id:e.studentId,content:e.content||null,attachments:e.attachments||null,status:e.status||"draft",grade:e.grade||null,student_comments:e.studentComments||null,teacher_comments:e.teacherComments||null,updated_at:t};if(r&&(i.submitted_at=t),s&&(i.reviewed_at=t),o){const{error:c}=await Ue.from("assignment_submissions").update(i).eq("id",o.id);if(c)throw c}else{i.id=z5(),i.created_at=t;const{error:c}=await Ue.from("assignment_submissions").insert(i);if(c)throw c}}catch(t){throw console.error("Error saving submission:",t),t}},ji=async(e,t)=>{try{const{data:r,error:s}=await Ue.from("assignment_submissions").select("*").eq("assignment_id",e).eq("student_id",t).maybeSingle();if(s&&s.code!=="PGRST116")throw s;return r?{id:r.id,assignmentId:r.assignment_id,studentId:r.student_id,content:r.content,attachments:r.attachments,status:r.status,grade:r.grade?parseFloat(r.grade):null,studentComments:r.student_comments,teacherComments:r.teacher_comments,submittedAt:r.submitted_at,returnedAt:r.returned_at,gradedAt:r.graded_at,reviewedAt:r.reviewed_at,createdAt:r.created_at,updatedAt:r.updated_at}:null}catch(r){throw console.error("Error loading submission:",r),r}},L2=async e=>{try{const{data:t,error:r}=await Ue.from("assignment_submissions").select(`
        *,
        student:users!assignment_submissions_student_id_fkey(
          id,
          first_name,
          last_name,
          avatar
        )
      `).eq("assignment_id",e).order("submitted_at",{ascending:!1,nullsFirst:!1});if(r)throw r;return(t||[]).map(s=>({id:s.id,assignmentId:s.assignment_id,studentId:s.student_id,content:s.content,attachments:s.attachments,status:s.status,grade:s.grade?parseFloat(s.grade):null,studentComments:s.student_comments,teacherComments:s.teacher_comments,submittedAt:s.submitted_at,returnedAt:s.returned_at,gradedAt:s.graded_at,reviewedAt:s.reviewed_at,createdAt:s.created_at,student:{id:s.student?.id,name:`${s.student?.first_name||""} ${s.student?.last_name||""}`.trim()||"Estudiante",avatar:s.student?.avatar,group:s.student?.grupo_asignado}}))}catch(t){throw console.error("Error loading submissions:",t),t}},$2=async(e,t,r)=>{try{console.log(" service.markAsReviewed called",{submissionId:e,grade:r});const s={status:"reviewed",reviewed_at:new Date().toISOString(),updated_at:new Date().toISOString()};t!==void 0&&(s.teacher_comments=t),r!==void 0&&(s.grade=r),console.log(" Updating assignment_submissions with:",s);const{error:o}=await Ue.from("assignment_submissions").update(s).eq("id",e);if(o)throw console.error(" Supabase error updating submission:",o),o;console.log(" Submission marked as reviewed in DB")}catch(s){throw console.error("Error marking submission as reviewed:",s),s}},F2=Object.freeze(Object.defineProperty({__proto__:null,getSubmission:ji,getSubmissionsByAssignment:L2,markAsReviewed:$2,saveSubmission:yg},Symbol.toStringTag,{value:"Module"})),rd=({isOpen:e,onClose:t,assignmentId:r,streamItemId:s,assignmentTitle:o,instructions:i,dueDate:c,dueTime:d,onSubmitted:h})=>{const{user:f}=$t(),[p,v]=j.useState(""),[x,w]=j.useState([]),[y,S]=j.useState(""),[C,T]=j.useState("draft"),[A,I]=j.useState(!1),[O,P]=j.useState(!1),[$,F]=j.useState({});j.useEffect(()=>{e&&f?.id?te():e||(v(""),w([]),S(""),T("draft"),F({}))},[e,r,f?.id]);const te=async()=>{if(f?.id)try{const R=await ji(r,f.id);if(R&&(v(R.content||""),T(R.status),R.attachments&&Array.isArray(R.attachments))){const de=R.attachments.filter(V=>V.type==="drive"&&V.url).map(V=>V.url);w(de)}}catch(R){console.error("Error loading submission:",R)}},ne=()=>{if(!y.trim()){F({driveLink:"Por favor ingresa un link vlido"});return}if(!y.includes("drive.google.com")&&!y.includes("docs.google.com")){F({driveLink:"Por favor ingresa un link vlido de Google Drive"});return}if(x.includes(y.trim())){F({driveLink:"Este link ya fue agregado"});return}w([...x,y.trim()]),S(""),F({})},Ee=R=>{w(x.filter((de,V)=>V!==R))},Se=async()=>{if(f?.id){P(!0);try{const R=x.map(de=>({type:"drive",name:"Google Drive Link",url:de}));await yg({assignmentId:r,studentId:f.id,content:p.trim()||void 0,attachments:R.length>0?R:void 0,status:"draft"}),alert("Borrador guardado correctamente")}catch(R){console.error("Error saving draft:",R),alert("Error al guardar el borrador")}finally{P(!1)}}},De=async()=>{if(console.log(" handleSubmit llamado"),!f?.id){console.error(" No hay usuario");return}if(console.log(" Contenido:",p),console.log(" Drive links:",x),console.log(" Assignment ID:",r),!p.trim()&&x.length===0){console.warn(" No hay contenido ni attachments"),F({submit:"Por favor agrega una respuesta o al menos un archivo adjunto"});return}if(c){const R=new Date(c);if(d){const[V,he]=d.split(":");R.setHours(parseInt(V),parseInt(he))}if(new Date>R&&!confirm("La fecha de vencimiento ya pas. Deseas enviar de todas formas?"))return}I(!0),F({});try{const R=x.map(de=>({type:"drive",name:"Google Drive Link",url:de}));console.log(" Guardando submission con:",{assignmentId:r,studentId:f.id,content:p.trim()||void 0,attachments:R.length>0?R:void 0,status:"submitted"}),await yg({assignmentId:r,studentId:f.id,content:p.trim()||void 0,attachments:R.length>0?R:void 0,status:"submitted"}),console.log(" Submission guardada exitosamente"),T("submitted"),alert("Respuesta enviada correctamente"),h&&h(),t()}catch(R){console.error(" Error submitting assignment:",R),alert("Error al enviar la respuesta: "+(R instanceof Error?R.message:String(R)))}finally{I(!1)}};if(console.log(" AssignmentSubmissionModal render - isOpen:",e,"assignmentId:",r,"assignmentTitle:",o),!e)return console.log(" Modal no est abierto, retornando null"),null;const U=c&&new Date(c)<new Date,H=C==="draft"||C==="returned";console.log(" Renderizando modal con z-50");const ye=n.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black bg-opacity-50",style:{zIndex:9999},children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:o}),U&&n.jsxs("p",{className:"text-sm text-red-600 mt-1 flex items-center gap-1",children:[n.jsx(Ei,{className:"w-4 h-4"}),"La fecha de vencimiento ya pas"]})]}),n.jsx("button",{onClick:t,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full transition-colors",children:n.jsx(Rr,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"px-6 py-4 space-y-6",children:[i&&n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Instrucciones"}),n.jsx("p",{className:"text-sm text-blue-800 whitespace-pre-wrap",children:i})]}),c&&n.jsxs("div",{className:"text-sm text-gray-600",children:[n.jsx("strong",{children:"Fecha de vencimiento:"})," ",new Date(c).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),d&&` a las ${d}`]}),C!=="draft"&&n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${C==="submitted"?"bg-blue-100 text-blue-800":C==="returned"?"bg-yellow-100 text-yellow-800":C==="graded"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:C==="submitted"?"Enviado":C==="returned"?"Devuelto para correcciones":C==="graded"?"Calificado":"Borrador"})}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tu respuesta ",!H&&C==="submitted"&&"(Ya enviada)"]}),n.jsx("textarea",{value:p,onChange:R=>v(R.target.value),disabled:!H,placeholder:"Escribe tu respuesta aqu...",className:"w-full min-h-[200px] px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsxs("label",{className:"block text-sm font-medium text-blue-900 mb-3 flex items-center gap-2",children:[n.jsx(Fc,{className:"w-5 h-5"}),"Enlaces de Google Drive"]}),x.length>0&&n.jsx("div",{className:"space-y-2 mb-4",children:x.map((R,de)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-blue-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[n.jsx(Fc,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}),n.jsx("a",{href:R,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline truncate",children:R})]}),H&&n.jsx("button",{onClick:()=>Ee(de),className:"ml-2 text-red-600 hover:text-red-800 text-sm font-medium",children:"Eliminar"})]},de))}),H&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:y,onChange:R=>{S(R.target.value),F({})},onKeyDown:R=>{R.key==="Enter"&&(R.preventDefault(),ne())},placeholder:"Pega el link de Google Drive aqu...",className:"flex-1 px-4 py-2.5 border-2 border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"}),n.jsxs("button",{onClick:ne,disabled:!y.trim(),className:"px-5 py-2.5 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[n.jsx(Fc,{className:"w-4 h-4"}),"Agregar"]})]}),$.driveLink&&n.jsx("p",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:$.driveLink}),n.jsx("p",{className:"text-xs text-blue-700 mt-1",children:' Puedes agregar mltiples enlaces de Google Drive. Presiona Enter o haz clic en "Agregar" despus de pegar cada link.'})]}),!H&&x.length===0&&n.jsx("p",{className:"text-sm text-blue-700 italic",children:"No hay enlaces de Google Drive adjuntos"})]}),$.submit&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsx("p",{className:"text-sm text-red-800",children:$.submit})})]}),n.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex items-center justify-end gap-3",children:[H&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:Se,disabled:O,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(Gs,{className:"w-4 h-4"}),O?"Guardando...":"Guardar borrador"]}),n.jsxs("button",{type:"button",onClick:R=>{R.preventDefault(),R.stopPropagation(),console.log(" Botn Enviar clickeado, loading:",A,"content:",p,"driveLinks:",x),!A&&(p.trim()||x.length>0)?De():console.warn(" Botn deshabilitado o sin contenido")},disabled:A||!p.trim()&&x.length===0,className:"px-4 py-2 bg-blue-400 text-white rounded-lg hover:bg-blue-500 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(uf,{className:"w-4 h-4"}),A?"Enviando...":"Enviar"]})]}),!H&&C==="submitted"&&n.jsx("p",{className:"text-sm text-gray-600",children:"Tu respuesta ya fue enviada. El profesor la revisar pronto."})]})]})});return Pa.createPortal(ye,document.body)},q5=()=>{const{t:e}=fa();Kr();const[t,r]=j.useState([]),[s,o]=j.useState([]),[i,c]=j.useState(!0),[d,h]=j.useState([]),[f,p]=j.useState(null),[v,x]=j.useState(null),{user:w}=$t(),[y,S]=j.useState(!1),[C,T]=j.useState({title:"",description:"",moduleId:""}),[A,I]=j.useState(!1),[O,P]=j.useState(null),[$,F]=j.useState(null),[te,ne]=j.useState(null),[Ee,Se]=j.useState(!1);j.useEffect(()=>{(async()=>{if(!w?.id){c(!1);return}try{if(w.role==="student"){const he=await td(w.id,w.grupoAsignado),K=await Promise.all(he.map(async B=>{try{const re=await ji(B.id,w.id);return{id:B.id,title:B.title,classId:B.classId,className:B.className||"Sin clase",dueDate:B.dueDate,dueTime:B.dueTime,points:B.points,submissionStatus:re?.status||null,submissionDate:re?.submittedAt||void 0,streamItemId:B.streamItemId,instructions:B.instructions}}catch(re){return console.error(`Error loading submission for assignment ${B.id}:`,re),{id:B.id,title:B.title,classId:B.classId,className:B.className||"Sin clase",dueDate:B.dueDate,dueTime:B.dueTime,points:B.points,submissionStatus:null,streamItemId:B.streamItemId,instructions:B.instructions}}}));o(K),c(!1)}else{const he=await ko(w.id);r(he.map(B=>({id:B.id,title:B.title,description:B.description||"",module:B.module,moduleId:B.moduleId,teacherId:B.teacherId,teacher:B.teacher}))),c(!1);const K=await h5();h(K.map(B=>({id:B.id,firstName:B.firstName,lastName:B.lastName,email:B.email,role:B.role})))}}catch(he){console.error("Error loading data:",he),c(!1),x("Error al cargar datos")}})()},[w?.id,w?.role,w?.grupoAsignado]);const De=async(V,he)=>{const K=t.map(B=>B.id===V?{...B,teacherId:he}:B);r(K),p(null);try{await Lh(V,{teacherId:he}),p("Profesor asignado correctamente")}catch(B){console.error("Error updating teacher:",B),p("Error al asignar profesor")}},U=()=>{T({title:"",description:"",moduleId:""}),S(!0),P(null),F(null)},H=V=>{T({id:V.id,title:V.title,description:V.description,moduleId:V.module?.id||""}),S(!0),P(null),F(null)},ye=()=>{S(!1),T({title:"",description:"",moduleId:""}),P(null),F(null)},R=async()=>{if(!w?.id){P("Usuario no autenticado");return}I(!0),P(null),F(null);try{if(C.id){const V=await Lh(C.id,{title:C.title,description:C.description,moduleId:C.moduleId||void 0});r(he=>he.map(K=>K.id===C.id?{id:V.id,title:V.title,description:V.description||"",module:V.module,moduleId:V.moduleId,teacherId:V.teacherId,teacher:V.teacher}:K)),F("Clase actualizada correctamente!")}else{const V={title:C.title,description:C.description,classCode:"",teacherId:w.id,moduleId:C.moduleId||void 0},he=await pf(V);r(K=>[...K,{id:he.id,title:he.title,description:he.description||"",module:he.module,moduleId:he.moduleId,teacherId:he.teacherId,teacher:he.teacher}]),F("Clase creada correctamente!")}setTimeout(()=>{ye()},1200)}catch(V){console.error("Error saving class:",V),P(V.message||"Error al guardar la clase")}finally{I(!1)}},de=V=>{if(!V)return n.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:[n.jsx(b3,{className:"w-3 h-3"}),"No enviada"]});switch(V){case"draft":return n.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:[n.jsx(fr,{className:"w-3 h-3"}),"Borrador"]});case"submitted":case"to_review":return n.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:[n.jsx(Xn,{className:"w-3 h-3"}),"Enviada"]});case"reviewed":return n.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-700",children:[n.jsx(Eh,{className:"w-3 h-3"}),"Revisada"]});case"graded":return n.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[n.jsx(Eh,{className:"w-3 h-3"}),"Calificada"]});case"returned":return n.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:[n.jsx(Ei,{className:"w-3 h-3"}),"Devuelta"]});default:return n.jsx("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:V})}};return w?.role==="student"?n.jsxs("div",{className:"space-y-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-text mb-6 flex items-center justify-between",children:n.jsx("span",{children:"Mis Assignments"})}),n.jsx(at,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200",children:[n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text",children:"Ttulo"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text",children:"Clase"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text",children:"Fecha de vencimiento"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text",children:"Puntos"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text",children:"Estado"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text",children:"Fecha de envo"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text",children:"Acciones"})]})}),n.jsx("tbody",{children:v?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"py-6 text-center text-red-600",children:v})}):i?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"py-6 text-center text-gray-500",children:e("loading","Cargando...")})}):s.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"py-6 text-center text-gray-500",children:"No hay assignments asignados"})}):s.map(V=>n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[n.jsx("td",{className:"py-3 px-4 font-medium",children:V.title}),n.jsx("td",{className:"py-3 px-4",children:V.className}),n.jsx("td",{className:"py-3 px-4",children:V.dueDate?n.jsxs("div",{children:[new Date(V.dueDate).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),V.dueTime&&n.jsx("span",{className:"text-xs text-gray-500 block",children:V.dueTime})]}):n.jsx("span",{className:"text-gray-400",children:"Sin fecha"})}),n.jsx("td",{className:"py-3 px-4",children:V.points!==void 0?n.jsxs("span",{className:"font-medium",children:[V.points," pts"]}):n.jsx("span",{className:"text-gray-400",children:"-"})}),n.jsx("td",{className:"py-3 px-4",children:de(V.submissionStatus)}),n.jsx("td",{className:"py-3 px-4",children:V.submissionDate?n.jsx("span",{className:"text-sm text-gray-600",children:new Date(V.submissionDate).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}):n.jsx("span",{className:"text-gray-400",children:"-"})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx(He,{size:"sm",variant:"outline",onClick:async()=>{try{const{getStudentClasses:he}=await Yc(async()=>{const{getStudentClasses:ae}=await Promise.resolve().then(()=>R2);return{getStudentClasses:ae}},void 0);if(!(await he(w.id)).some(ae=>ae.id===V.classId)){alert("No tienes acceso a esta clase");return}const re=await wi(V.streamItemId||V.id);re?(ne({...V,streamItemId:V.streamItemId||V.id,instructions:re.instructions}),Se(!0)):alert("No se pudo cargar el assignment")}catch(he){console.error("Error loading assignment:",he),alert("Error al cargar el assignment")}},children:"Ver"})})]},V.id))})]})})}),te&&n.jsx(rd,{isOpen:Ee,onClose:()=>{Se(!1),ne(null)},assignmentId:te.id,streamItemId:te.streamItemId||te.id,assignmentTitle:te.title,instructions:te.instructions,dueDate:te.dueDate,dueTime:te.dueTime,onSubmitted:async()=>{await(async()=>{if(w?.id)try{const he=await td(w.id,w.grupoAsignado),K=await Promise.all(he.map(async B=>{try{const re=await ji(B.id,w.id);return{id:B.id,title:B.title,classId:B.classId,className:B.className||"Sin clase",dueDate:B.dueDate,dueTime:B.dueTime,points:B.points,submissionStatus:re?.status||null,submissionDate:re?.submittedAt||void 0,streamItemId:B.streamItemId,instructions:B.instructions}}catch(re){return console.error(`Error loading submission for assignment ${B.id}:`,re),{id:B.id,title:B.title,classId:B.classId,className:B.className||"Sin clase",dueDate:B.dueDate,dueTime:B.dueTime,points:B.points,submissionStatus:null,streamItemId:B.streamItemId,instructions:B.instructions}}}));o(K)}catch(he){console.error("Error loading data:",he)}})()}})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("h1",{className:"text-3xl font-bold text-text mb-6 flex items-center justify-between",children:[e("adminDashboard.allClasses","Todas las Clases"),w?.role==="admin"&&n.jsx(He,{size:"sm",variant:"primary",onClick:U,children:"Agregar Clase"})]}),n.jsx(at,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200",children:[n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text",children:"Ttulo"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text",children:"Descripcin"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text",children:"Mdulo"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text",children:"Profesor"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text",children:"Acciones"})]})}),n.jsx("tbody",{children:v?n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"py-6 text-center text-red-600",children:v})}):i?n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"py-6 text-center text-gray-500",children:e("loading","Cargando...")})}):t.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"py-6 text-center text-gray-500",children:e("adminDashboard.noClasses","No hay clases")})}):t.map(V=>n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[n.jsx("td",{className:"py-3 px-4",children:V.title}),n.jsx("td",{className:"py-3 px-4",children:V.description}),n.jsx("td",{className:"py-3 px-4",children:V.module?.title||V.moduleId||"-"}),n.jsx("td",{className:"py-3 px-4",children:Array.isArray(d)&&d.length>0?n.jsxs("select",{value:V.teacherId||"",onChange:he=>De(V.id,he.target.value),className:"border rounded px-2 py-1",children:[n.jsx("option",{value:"",children:"Sin asignar"}),d.filter(he=>he.role==="teacher"||he.role==="admin").map(he=>n.jsxs("option",{value:he.id,children:[he.firstName," ",he.lastName]},he.id))]}):n.jsx("span",{className:"text-gray-400",children:V.teacher?`${V.teacher.firstName} ${V.teacher.lastName}`:"Sin asignar"})}),n.jsx("td",{className:"py-3 px-4",children:w?.role==="admin"&&n.jsx(He,{size:"sm",variant:"outline",onClick:()=>H(V),children:"Editar"})})]},V.id))})]})})}),f&&n.jsx("div",{className:f.includes("Error")?"text-red-600 mt-2":"text-green-600 mt-2",children:f}),y&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60",children:n.jsxs("div",{className:"bg-panel rounded-lg shadow-2xl p-8 w-full max-w-md border border-border relative",children:[n.jsx("button",{className:"absolute top-2 right-2 text-text-secondary hover:text-text",onClick:ye,children:""}),n.jsx("h2",{className:"text-2xl font-bold mb-4 text-text",children:C.id?"Editar Clase":"Agregar Clase"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Ttulo"}),n.jsx("input",{type:"text",className:"w-full border border-border rounded px-3 py-2 bg-panel text-text focus:outline-none focus:ring-2 focus:ring-primary",value:C.title,onChange:V=>T(he=>({...he,title:V.target.value}))})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Descripcin"}),n.jsx("textarea",{className:"w-full border border-border rounded px-3 py-2 bg-panel text-text focus:outline-none focus:ring-2 focus:ring-primary",value:C.description,onChange:V=>T(he=>({...he,description:V.target.value}))})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Mdulo"}),n.jsx("select",{className:"w-full border border-border rounded px-3 py-2 bg-panel text-text",value:C.moduleId,onChange:V=>T(he=>({...he,moduleId:V.target.value})),children:n.jsx("option",{value:"",children:"Sin mdulo"})})]}),O&&n.jsx("div",{className:"text-error mb-2",children:O}),$&&n.jsx("div",{className:"text-success mb-2",children:$}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(He,{size:"sm",variant:"primary",onClick:R,disabled:A,children:A?"Guardando...":C.id?"Guardar Cambios":"Crear"}),n.jsx(He,{size:"sm",variant:"outline",onClick:ye,children:"Cancelar"})]})]})})]})};function B2(e,t){return function(){return e.apply(t,arguments)}}const{toString:G5}=Object.prototype,{getPrototypeOf:xx}=Object,{iterator:gf,toStringTag:U2}=Symbol,xf=(e=>t=>{const r=G5.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Vs=e=>(e=e.toLowerCase(),t=>xf(t)===e),vf=e=>t=>typeof t===e,{isArray:Pl}=Array,kl=vf("undefined");function yd(e){return e!==null&&!kl(e)&&e.constructor!==null&&!kl(e.constructor)&&$n(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const z2=Vs("ArrayBuffer");function V5(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&z2(e.buffer),t}const H5=vf("string"),$n=vf("function"),q2=vf("number"),bd=e=>e!==null&&typeof e=="object",W5=e=>e===!0||e===!1,hh=e=>{if(xf(e)!=="object")return!1;const t=xx(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(U2 in e)&&!(gf in e)},K5=e=>{if(!bd(e)||yd(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Q5=Vs("Date"),J5=Vs("File"),Y5=Vs("Blob"),Z5=Vs("FileList"),X5=e=>bd(e)&&$n(e.pipe),e6=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||$n(e.append)&&((t=xf(e))==="formdata"||t==="object"&&$n(e.toString)&&e.toString()==="[object FormData]"))},t6=Vs("URLSearchParams"),[r6,n6,s6,a6]=["ReadableStream","Request","Response","Headers"].map(Vs),i6=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function wd(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let s,o;if(typeof e!="object"&&(e=[e]),Pl(e))for(s=0,o=e.length;s<o;s++)t.call(null,e[s],s,e);else{if(yd(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),c=i.length;let d;for(s=0;s<c;s++)d=i[s],t.call(null,e[d],d,e)}}function G2(e,t){if(yd(e))return null;t=t.toLowerCase();const r=Object.keys(e);let s=r.length,o;for(;s-- >0;)if(o=r[s],t===o.toLowerCase())return o;return null}const vo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,V2=e=>!kl(e)&&e!==vo;function bg(){const{caseless:e,skipUndefined:t}=V2(this)&&this||{},r={},s=(o,i)=>{const c=e&&G2(r,i)||i;hh(r[c])&&hh(o)?r[c]=bg(r[c],o):hh(o)?r[c]=bg({},o):Pl(o)?r[c]=o.slice():(!t||!kl(o))&&(r[c]=o)};for(let o=0,i=arguments.length;o<i;o++)arguments[o]&&wd(arguments[o],s);return r}const o6=(e,t,r,{allOwnKeys:s}={})=>(wd(t,(o,i)=>{r&&$n(o)?e[i]=B2(o,r):e[i]=o},{allOwnKeys:s}),e),l6=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),c6=(e,t,r,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},d6=(e,t,r,s)=>{let o,i,c;const d={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)c=o[i],(!s||s(c,e,t))&&!d[c]&&(t[c]=e[c],d[c]=!0);e=r!==!1&&xx(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},u6=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const s=e.indexOf(t,r);return s!==-1&&s===r},h6=e=>{if(!e)return null;if(Pl(e))return e;let t=e.length;if(!q2(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},f6=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&xx(Uint8Array)),m6=(e,t)=>{const s=(e&&e[gf]).call(e);let o;for(;(o=s.next())&&!o.done;){const i=o.value;t.call(e,i[0],i[1])}},p6=(e,t)=>{let r;const s=[];for(;(r=e.exec(t))!==null;)s.push(r);return s},g6=Vs("HTMLFormElement"),x6=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,o){return s.toUpperCase()+o}),nb=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),v6=Vs("RegExp"),H2=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),s={};wd(r,(o,i)=>{let c;(c=t(o,i,e))!==!1&&(s[i]=c||o)}),Object.defineProperties(e,s)},y6=e=>{H2(e,(t,r)=>{if($n(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=e[r];if($n(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},b6=(e,t)=>{const r={},s=o=>{o.forEach(i=>{r[i]=!0})};return Pl(e)?s(e):s(String(e).split(t)),r},w6=()=>{},j6=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function N6(e){return!!(e&&$n(e.append)&&e[U2]==="FormData"&&e[gf])}const S6=e=>{const t=new Array(10),r=(s,o)=>{if(bd(s)){if(t.indexOf(s)>=0)return;if(yd(s))return s;if(!("toJSON"in s)){t[o]=s;const i=Pl(s)?[]:{};return wd(s,(c,d)=>{const h=r(c,o+1);!kl(h)&&(i[d]=h)}),t[o]=void 0,i}}return s};return r(e,0)},k6=Vs("AsyncFunction"),_6=e=>e&&(bd(e)||$n(e))&&$n(e.then)&&$n(e.catch),W2=((e,t)=>e?setImmediate:t?((r,s)=>(vo.addEventListener("message",({source:o,data:i})=>{o===vo&&i===r&&s.length&&s.shift()()},!1),o=>{s.push(o),vo.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",$n(vo.postMessage)),C6=typeof queueMicrotask<"u"?queueMicrotask.bind(vo):typeof process<"u"&&process.nextTick||W2,E6=e=>e!=null&&$n(e[gf]),Me={isArray:Pl,isArrayBuffer:z2,isBuffer:yd,isFormData:e6,isArrayBufferView:V5,isString:H5,isNumber:q2,isBoolean:W5,isObject:bd,isPlainObject:hh,isEmptyObject:K5,isReadableStream:r6,isRequest:n6,isResponse:s6,isHeaders:a6,isUndefined:kl,isDate:Q5,isFile:J5,isBlob:Y5,isRegExp:v6,isFunction:$n,isStream:X5,isURLSearchParams:t6,isTypedArray:f6,isFileList:Z5,forEach:wd,merge:bg,extend:o6,trim:i6,stripBOM:l6,inherits:c6,toFlatObject:d6,kindOf:xf,kindOfTest:Vs,endsWith:u6,toArray:h6,forEachEntry:m6,matchAll:p6,isHTMLForm:g6,hasOwnProperty:nb,hasOwnProp:nb,reduceDescriptors:H2,freezeMethods:y6,toObjectSet:b6,toCamelCase:x6,noop:w6,toFiniteNumber:j6,findKey:G2,global:vo,isContextDefined:V2,isSpecCompliantForm:N6,toJSONObject:S6,isAsyncFn:k6,isThenable:_6,setImmediate:W2,asap:C6,isIterable:E6};function Dt(e,t,r,s,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),s&&(this.request=s),o&&(this.response=o,this.status=o.status?o.status:null)}Me.inherits(Dt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Me.toJSONObject(this.config),code:this.code,status:this.status}}});const K2=Dt.prototype,Q2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Q2[e]={value:e}});Object.defineProperties(Dt,Q2);Object.defineProperty(K2,"isAxiosError",{value:!0});Dt.from=(e,t,r,s,o,i)=>{const c=Object.create(K2);Me.toFlatObject(e,c,function(p){return p!==Error.prototype},f=>f!=="isAxiosError");const d=e&&e.message?e.message:"Error",h=t==null&&e?e.code:t;return Dt.call(c,d,h,r,s,o),e&&c.cause==null&&Object.defineProperty(c,"cause",{value:e,configurable:!0}),c.name=e&&e.name||"Error",i&&Object.assign(c,i),c};const A6=null;function wg(e){return Me.isPlainObject(e)||Me.isArray(e)}function J2(e){return Me.endsWith(e,"[]")?e.slice(0,-2):e}function sb(e,t,r){return e?e.concat(t).map(function(o,i){return o=J2(o),!r&&i?"["+o+"]":o}).join(r?".":""):t}function I6(e){return Me.isArray(e)&&!e.some(wg)}const T6=Me.toFlatObject(Me,{},null,function(t){return/^is[A-Z]/.test(t)});function yf(e,t,r){if(!Me.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Me.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,C){return!Me.isUndefined(C[S])});const s=r.metaTokens,o=r.visitor||p,i=r.dots,c=r.indexes,h=(r.Blob||typeof Blob<"u"&&Blob)&&Me.isSpecCompliantForm(t);if(!Me.isFunction(o))throw new TypeError("visitor must be a function");function f(y){if(y===null)return"";if(Me.isDate(y))return y.toISOString();if(Me.isBoolean(y))return y.toString();if(!h&&Me.isBlob(y))throw new Dt("Blob is not supported. Use a Buffer instead.");return Me.isArrayBuffer(y)||Me.isTypedArray(y)?h&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function p(y,S,C){let T=y;if(y&&!C&&typeof y=="object"){if(Me.endsWith(S,"{}"))S=s?S:S.slice(0,-2),y=JSON.stringify(y);else if(Me.isArray(y)&&I6(y)||(Me.isFileList(y)||Me.endsWith(S,"[]"))&&(T=Me.toArray(y)))return S=J2(S),T.forEach(function(I,O){!(Me.isUndefined(I)||I===null)&&t.append(c===!0?sb([S],O,i):c===null?S:S+"[]",f(I))}),!1}return wg(y)?!0:(t.append(sb(C,S,i),f(y)),!1)}const v=[],x=Object.assign(T6,{defaultVisitor:p,convertValue:f,isVisitable:wg});function w(y,S){if(!Me.isUndefined(y)){if(v.indexOf(y)!==-1)throw Error("Circular reference detected in "+S.join("."));v.push(y),Me.forEach(y,function(T,A){(!(Me.isUndefined(T)||T===null)&&o.call(t,T,Me.isString(A)?A.trim():A,S,x))===!0&&w(T,S?S.concat(A):[A])}),v.pop()}}if(!Me.isObject(e))throw new TypeError("data must be an object");return w(e),t}function ab(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function vx(e,t){this._pairs=[],e&&yf(e,this,t)}const Y2=vx.prototype;Y2.append=function(t,r){this._pairs.push([t,r])};Y2.toString=function(t){const r=t?function(s){return t.call(this,s,ab)}:ab;return this._pairs.map(function(o){return r(o[0])+"="+r(o[1])},"").join("&")};function D6(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Z2(e,t,r){if(!t)return e;const s=r&&r.encode||D6;Me.isFunction(r)&&(r={serialize:r});const o=r&&r.serialize;let i;if(o?i=o(t,r):i=Me.isURLSearchParams(t)?t.toString():new vx(t,r).toString(s),i){const c=e.indexOf("#");c!==-1&&(e=e.slice(0,c)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class ib{constructor(){this.handlers=[]}use(t,r,s){return this.handlers.push({fulfilled:t,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Me.forEach(this.handlers,function(s){s!==null&&t(s)})}}const X2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},R6=typeof URLSearchParams<"u"?URLSearchParams:vx,O6=typeof FormData<"u"?FormData:null,P6=typeof Blob<"u"?Blob:null,M6={isBrowser:!0,classes:{URLSearchParams:R6,FormData:O6,Blob:P6},protocols:["http","https","file","blob","url","data"]},yx=typeof window<"u"&&typeof document<"u",jg=typeof navigator=="object"&&navigator||void 0,L6=yx&&(!jg||["ReactNative","NativeScript","NS"].indexOf(jg.product)<0),$6=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",F6=yx&&window.location.href||"http://localhost",B6=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:yx,hasStandardBrowserEnv:L6,hasStandardBrowserWebWorkerEnv:$6,navigator:jg,origin:F6},Symbol.toStringTag,{value:"Module"})),xn={...B6,...M6};function U6(e,t){return yf(e,new xn.classes.URLSearchParams,{visitor:function(r,s,o,i){return xn.isNode&&Me.isBuffer(r)?(this.append(s,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function z6(e){return Me.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function q6(e){const t={},r=Object.keys(e);let s;const o=r.length;let i;for(s=0;s<o;s++)i=r[s],t[i]=e[i];return t}function ej(e){function t(r,s,o,i){let c=r[i++];if(c==="__proto__")return!0;const d=Number.isFinite(+c),h=i>=r.length;return c=!c&&Me.isArray(o)?o.length:c,h?(Me.hasOwnProp(o,c)?o[c]=[o[c],s]:o[c]=s,!d):((!o[c]||!Me.isObject(o[c]))&&(o[c]=[]),t(r,s,o[c],i)&&Me.isArray(o[c])&&(o[c]=q6(o[c])),!d)}if(Me.isFormData(e)&&Me.isFunction(e.entries)){const r={};return Me.forEachEntry(e,(s,o)=>{t(z6(s),o,r,0)}),r}return null}function G6(e,t,r){if(Me.isString(e))try{return(t||JSON.parse)(e),Me.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(e)}const jd={transitional:X2,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const s=r.getContentType()||"",o=s.indexOf("application/json")>-1,i=Me.isObject(t);if(i&&Me.isHTMLForm(t)&&(t=new FormData(t)),Me.isFormData(t))return o?JSON.stringify(ej(t)):t;if(Me.isArrayBuffer(t)||Me.isBuffer(t)||Me.isStream(t)||Me.isFile(t)||Me.isBlob(t)||Me.isReadableStream(t))return t;if(Me.isArrayBufferView(t))return t.buffer;if(Me.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let d;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return U6(t,this.formSerializer).toString();if((d=Me.isFileList(t))||s.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return yf(d?{"files[]":t}:t,h&&new h,this.formSerializer)}}return i||o?(r.setContentType("application/json",!1),G6(t)):t}],transformResponse:[function(t){const r=this.transitional||jd.transitional,s=r&&r.forcedJSONParsing,o=this.responseType==="json";if(Me.isResponse(t)||Me.isReadableStream(t))return t;if(t&&Me.isString(t)&&(s&&!this.responseType||o)){const c=!(r&&r.silentJSONParsing)&&o;try{return JSON.parse(t,this.parseReviver)}catch(d){if(c)throw d.name==="SyntaxError"?Dt.from(d,Dt.ERR_BAD_RESPONSE,this,null,this.response):d}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xn.classes.FormData,Blob:xn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Me.forEach(["delete","get","head","post","put","patch"],e=>{jd.headers[e]={}});const V6=Me.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),H6=e=>{const t={};let r,s,o;return e&&e.split(`
`).forEach(function(c){o=c.indexOf(":"),r=c.substring(0,o).trim().toLowerCase(),s=c.substring(o+1).trim(),!(!r||t[r]&&V6[r])&&(r==="set-cookie"?t[r]?t[r].push(s):t[r]=[s]:t[r]=t[r]?t[r]+", "+s:s)}),t},ob=Symbol("internals");function Rc(e){return e&&String(e).trim().toLowerCase()}function fh(e){return e===!1||e==null?e:Me.isArray(e)?e.map(fh):String(e)}function W6(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(e);)t[s[1]]=s[2];return t}const K6=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function gp(e,t,r,s,o){if(Me.isFunction(s))return s.call(this,t,r);if(o&&(t=r),!!Me.isString(t)){if(Me.isString(s))return t.indexOf(s)!==-1;if(Me.isRegExp(s))return s.test(t)}}function Q6(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,s)=>r.toUpperCase()+s)}function J6(e,t){const r=Me.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+r,{value:function(o,i,c){return this[s].call(this,t,o,i,c)},configurable:!0})})}let Fn=class{constructor(t){t&&this.set(t)}set(t,r,s){const o=this;function i(d,h,f){const p=Rc(h);if(!p)throw new Error("header name must be a non-empty string");const v=Me.findKey(o,p);(!v||o[v]===void 0||f===!0||f===void 0&&o[v]!==!1)&&(o[v||h]=fh(d))}const c=(d,h)=>Me.forEach(d,(f,p)=>i(f,p,h));if(Me.isPlainObject(t)||t instanceof this.constructor)c(t,r);else if(Me.isString(t)&&(t=t.trim())&&!K6(t))c(H6(t),r);else if(Me.isObject(t)&&Me.isIterable(t)){let d={},h,f;for(const p of t){if(!Me.isArray(p))throw TypeError("Object iterator must return a key-value pair");d[f=p[0]]=(h=d[f])?Me.isArray(h)?[...h,p[1]]:[h,p[1]]:p[1]}c(d,r)}else t!=null&&i(r,t,s);return this}get(t,r){if(t=Rc(t),t){const s=Me.findKey(this,t);if(s){const o=this[s];if(!r)return o;if(r===!0)return W6(o);if(Me.isFunction(r))return r.call(this,o,s);if(Me.isRegExp(r))return r.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Rc(t),t){const s=Me.findKey(this,t);return!!(s&&this[s]!==void 0&&(!r||gp(this,this[s],s,r)))}return!1}delete(t,r){const s=this;let o=!1;function i(c){if(c=Rc(c),c){const d=Me.findKey(s,c);d&&(!r||gp(s,s[d],d,r))&&(delete s[d],o=!0)}}return Me.isArray(t)?t.forEach(i):i(t),o}clear(t){const r=Object.keys(this);let s=r.length,o=!1;for(;s--;){const i=r[s];(!t||gp(this,this[i],i,t,!0))&&(delete this[i],o=!0)}return o}normalize(t){const r=this,s={};return Me.forEach(this,(o,i)=>{const c=Me.findKey(s,i);if(c){r[c]=fh(o),delete r[i];return}const d=t?Q6(i):String(i).trim();d!==i&&delete r[i],r[d]=fh(o),s[d]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Me.forEach(this,(s,o)=>{s!=null&&s!==!1&&(r[o]=t&&Me.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const s=new this(t);return r.forEach(o=>s.set(o)),s}static accessor(t){const s=(this[ob]=this[ob]={accessors:{}}).accessors,o=this.prototype;function i(c){const d=Rc(c);s[d]||(J6(o,c),s[d]=!0)}return Me.isArray(t)?t.forEach(i):i(t),this}};Fn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Me.reduceDescriptors(Fn.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[r]=s}}});Me.freezeMethods(Fn);function xp(e,t){const r=this||jd,s=t||r,o=Fn.from(s.headers);let i=s.data;return Me.forEach(e,function(d){i=d.call(r,i,o.normalize(),t?t.status:void 0)}),o.normalize(),i}function tj(e){return!!(e&&e.__CANCEL__)}function Ml(e,t,r){Dt.call(this,e??"canceled",Dt.ERR_CANCELED,t,r),this.name="CanceledError"}Me.inherits(Ml,Dt,{__CANCEL__:!0});function rj(e,t,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?e(r):t(new Dt("Request failed with status code "+r.status,[Dt.ERR_BAD_REQUEST,Dt.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Y6(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Z6(e,t){e=e||10;const r=new Array(e),s=new Array(e);let o=0,i=0,c;return t=t!==void 0?t:1e3,function(h){const f=Date.now(),p=s[i];c||(c=f),r[o]=h,s[o]=f;let v=i,x=0;for(;v!==o;)x+=r[v++],v=v%e;if(o=(o+1)%e,o===i&&(i=(i+1)%e),f-c<t)return;const w=p&&f-p;return w?Math.round(x*1e3/w):void 0}}function X6(e,t){let r=0,s=1e3/t,o,i;const c=(f,p=Date.now())=>{r=p,o=null,i&&(clearTimeout(i),i=null),e(...f)};return[(...f)=>{const p=Date.now(),v=p-r;v>=s?c(f,p):(o=f,i||(i=setTimeout(()=>{i=null,c(o)},s-v)))},()=>o&&c(o)]}const $h=(e,t,r=3)=>{let s=0;const o=Z6(50,250);return X6(i=>{const c=i.loaded,d=i.lengthComputable?i.total:void 0,h=c-s,f=o(h),p=c<=d;s=c;const v={loaded:c,total:d,progress:d?c/d:void 0,bytes:h,rate:f||void 0,estimated:f&&d&&p?(d-c)/f:void 0,event:i,lengthComputable:d!=null,[t?"download":"upload"]:!0};e(v)},r)},lb=(e,t)=>{const r=e!=null;return[s=>t[0]({lengthComputable:r,total:e,loaded:s}),t[1]]},cb=e=>(...t)=>Me.asap(()=>e(...t)),e9=xn.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,xn.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(xn.origin),xn.navigator&&/(msie|trident)/i.test(xn.navigator.userAgent)):()=>!0,t9=xn.hasStandardBrowserEnv?{write(e,t,r,s,o,i){const c=[e+"="+encodeURIComponent(t)];Me.isNumber(r)&&c.push("expires="+new Date(r).toGMTString()),Me.isString(s)&&c.push("path="+s),Me.isString(o)&&c.push("domain="+o),i===!0&&c.push("secure"),document.cookie=c.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function r9(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function n9(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function nj(e,t,r){let s=!r9(t);return e&&(s||r==!1)?n9(e,t):t}const db=e=>e instanceof Fn?{...e}:e;function No(e,t){t=t||{};const r={};function s(f,p,v,x){return Me.isPlainObject(f)&&Me.isPlainObject(p)?Me.merge.call({caseless:x},f,p):Me.isPlainObject(p)?Me.merge({},p):Me.isArray(p)?p.slice():p}function o(f,p,v,x){if(Me.isUndefined(p)){if(!Me.isUndefined(f))return s(void 0,f,v,x)}else return s(f,p,v,x)}function i(f,p){if(!Me.isUndefined(p))return s(void 0,p)}function c(f,p){if(Me.isUndefined(p)){if(!Me.isUndefined(f))return s(void 0,f)}else return s(void 0,p)}function d(f,p,v){if(v in t)return s(f,p);if(v in e)return s(void 0,f)}const h={url:i,method:i,data:i,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:d,headers:(f,p,v)=>o(db(f),db(p),v,!0)};return Me.forEach(Object.keys({...e,...t}),function(p){const v=h[p]||o,x=v(e[p],t[p],p);Me.isUndefined(x)&&v!==d||(r[p]=x)}),r}const sj=e=>{const t=No({},e);let{data:r,withXSRFToken:s,xsrfHeaderName:o,xsrfCookieName:i,headers:c,auth:d}=t;if(t.headers=c=Fn.from(c),t.url=Z2(nj(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),d&&c.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),Me.isFormData(r)){if(xn.hasStandardBrowserEnv||xn.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if(Me.isFunction(r.getHeaders)){const h=r.getHeaders(),f=["content-type","content-length"];Object.entries(h).forEach(([p,v])=>{f.includes(p.toLowerCase())&&c.set(p,v)})}}if(xn.hasStandardBrowserEnv&&(s&&Me.isFunction(s)&&(s=s(t)),s||s!==!1&&e9(t.url))){const h=o&&i&&t9.read(i);h&&c.set(o,h)}return t},s9=typeof XMLHttpRequest<"u",a9=s9&&function(e){return new Promise(function(r,s){const o=sj(e);let i=o.data;const c=Fn.from(o.headers).normalize();let{responseType:d,onUploadProgress:h,onDownloadProgress:f}=o,p,v,x,w,y;function S(){w&&w(),y&&y(),o.cancelToken&&o.cancelToken.unsubscribe(p),o.signal&&o.signal.removeEventListener("abort",p)}let C=new XMLHttpRequest;C.open(o.method.toUpperCase(),o.url,!0),C.timeout=o.timeout;function T(){if(!C)return;const I=Fn.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),P={data:!d||d==="text"||d==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:I,config:e,request:C};rj(function(F){r(F),S()},function(F){s(F),S()},P),C=null}"onloadend"in C?C.onloadend=T:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(T)},C.onabort=function(){C&&(s(new Dt("Request aborted",Dt.ECONNABORTED,e,C)),C=null)},C.onerror=function(O){const P=O&&O.message?O.message:"Network Error",$=new Dt(P,Dt.ERR_NETWORK,e,C);$.event=O||null,s($),C=null},C.ontimeout=function(){let O=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const P=o.transitional||X2;o.timeoutErrorMessage&&(O=o.timeoutErrorMessage),s(new Dt(O,P.clarifyTimeoutError?Dt.ETIMEDOUT:Dt.ECONNABORTED,e,C)),C=null},i===void 0&&c.setContentType(null),"setRequestHeader"in C&&Me.forEach(c.toJSON(),function(O,P){C.setRequestHeader(P,O)}),Me.isUndefined(o.withCredentials)||(C.withCredentials=!!o.withCredentials),d&&d!=="json"&&(C.responseType=o.responseType),f&&([x,y]=$h(f,!0),C.addEventListener("progress",x)),h&&C.upload&&([v,w]=$h(h),C.upload.addEventListener("progress",v),C.upload.addEventListener("loadend",w)),(o.cancelToken||o.signal)&&(p=I=>{C&&(s(!I||I.type?new Ml(null,e,C):I),C.abort(),C=null)},o.cancelToken&&o.cancelToken.subscribe(p),o.signal&&(o.signal.aborted?p():o.signal.addEventListener("abort",p)));const A=Y6(o.url);if(A&&xn.protocols.indexOf(A)===-1){s(new Dt("Unsupported protocol "+A+":",Dt.ERR_BAD_REQUEST,e));return}C.send(i||null)})},i9=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let s=new AbortController,o;const i=function(f){if(!o){o=!0,d();const p=f instanceof Error?f:this.reason;s.abort(p instanceof Dt?p:new Ml(p instanceof Error?p.message:p))}};let c=t&&setTimeout(()=>{c=null,i(new Dt(`timeout ${t} of ms exceeded`,Dt.ETIMEDOUT))},t);const d=()=>{e&&(c&&clearTimeout(c),c=null,e.forEach(f=>{f.unsubscribe?f.unsubscribe(i):f.removeEventListener("abort",i)}),e=null)};e.forEach(f=>f.addEventListener("abort",i));const{signal:h}=s;return h.unsubscribe=()=>Me.asap(d),h}},o9=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let s=0,o;for(;s<r;)o=s+t,yield e.slice(s,o),s=o},l9=async function*(e,t){for await(const r of c9(e))yield*o9(r,t)},c9=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:s}=await t.read();if(r)break;yield s}}finally{await t.cancel()}},ub=(e,t,r,s)=>{const o=l9(e,t);let i=0,c,d=h=>{c||(c=!0,s&&s(h))};return new ReadableStream({async pull(h){try{const{done:f,value:p}=await o.next();if(f){d(),h.close();return}let v=p.byteLength;if(r){let x=i+=v;r(x)}h.enqueue(new Uint8Array(p))}catch(f){throw d(f),f}},cancel(h){return d(h),o.return()}},{highWaterMark:2})},hb=64*1024,{isFunction:Qu}=Me,aj=(({fetch:e,Request:t,Response:r})=>({fetch:e,Request:t,Response:r}))(Me.global),{ReadableStream:fb,TextEncoder:mb}=Me.global,pb=(e,...t)=>{try{return!!e(...t)}catch{return!1}},d9=e=>{const{fetch:t,Request:r,Response:s}=Object.assign({},aj,e),o=Qu(t),i=Qu(r),c=Qu(s);if(!o)return!1;const d=o&&Qu(fb),h=o&&(typeof mb=="function"?(y=>S=>y.encode(S))(new mb):async y=>new Uint8Array(await new r(y).arrayBuffer())),f=i&&d&&pb(()=>{let y=!1;const S=new r(xn.origin,{body:new fb,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!S}),p=c&&d&&pb(()=>Me.isReadableStream(new s("").body)),v={stream:p&&(y=>y.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!v[y]&&(v[y]=(S,C)=>{let T=S&&S[y];if(T)return T.call(S);throw new Dt(`Response type '${y}' is not supported`,Dt.ERR_NOT_SUPPORT,C)})});const x=async y=>{if(y==null)return 0;if(Me.isBlob(y))return y.size;if(Me.isSpecCompliantForm(y))return(await new r(xn.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if(Me.isArrayBufferView(y)||Me.isArrayBuffer(y))return y.byteLength;if(Me.isURLSearchParams(y)&&(y=y+""),Me.isString(y))return(await h(y)).byteLength},w=async(y,S)=>{const C=Me.toFiniteNumber(y.getContentLength());return C??x(S)};return async y=>{let{url:S,method:C,data:T,signal:A,cancelToken:I,timeout:O,onDownloadProgress:P,onUploadProgress:$,responseType:F,headers:te,withCredentials:ne="same-origin",fetchOptions:Ee}=sj(y);F=F?(F+"").toLowerCase():"text";let Se=i9([A,I&&I.toAbortSignal()],O),De=null;const U=Se&&Se.unsubscribe&&(()=>{Se.unsubscribe()});let H;try{if($&&f&&C!=="get"&&C!=="head"&&(H=await w(te,T))!==0){let K=new r(S,{method:"POST",body:T,duplex:"half"}),B;if(Me.isFormData(T)&&(B=K.headers.get("content-type"))&&te.setContentType(B),K.body){const[re,ae]=lb(H,$h(cb($)));T=ub(K.body,hb,re,ae)}}Me.isString(ne)||(ne=ne?"include":"omit");const ye=i&&"credentials"in r.prototype,R={...Ee,signal:Se,method:C.toUpperCase(),headers:te.normalize().toJSON(),body:T,duplex:"half",credentials:ye?ne:void 0};De=i&&new r(S,R);let de=await(i?t(De,Ee):t(S,R));const V=p&&(F==="stream"||F==="response");if(p&&(P||V&&U)){const K={};["status","statusText","headers"].forEach(z=>{K[z]=de[z]});const B=Me.toFiniteNumber(de.headers.get("content-length")),[re,ae]=P&&lb(B,$h(cb(P),!0))||[];de=new s(ub(de.body,hb,re,()=>{ae&&ae(),U&&U()}),K)}F=F||"text";let he=await v[Me.findKey(v,F)||"text"](de,y);return!V&&U&&U(),await new Promise((K,B)=>{rj(K,B,{data:he,headers:Fn.from(de.headers),status:de.status,statusText:de.statusText,config:y,request:De})})}catch(ye){throw U&&U(),ye&&ye.name==="TypeError"&&/Load failed|fetch/i.test(ye.message)?Object.assign(new Dt("Network Error",Dt.ERR_NETWORK,y,De),{cause:ye.cause||ye}):Dt.from(ye,ye&&ye.code,y,De)}}},u9=new Map,ij=e=>{let t=Me.merge.call({skipUndefined:!0},aj,e?e.env:null);const{fetch:r,Request:s,Response:o}=t,i=[s,o,r];let c=i.length,d=c,h,f,p=u9;for(;d--;)h=i[d],f=p.get(h),f===void 0&&p.set(h,f=d?new Map:d9(t)),p=f;return f};ij();const Ng={http:A6,xhr:a9,fetch:{get:ij}};Me.forEach(Ng,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const gb=e=>`- ${e}`,h9=e=>Me.isFunction(e)||e===null||e===!1,oj={getAdapter:(e,t)=>{e=Me.isArray(e)?e:[e];const{length:r}=e;let s,o;const i={};for(let c=0;c<r;c++){s=e[c];let d;if(o=s,!h9(s)&&(o=Ng[(d=String(s)).toLowerCase()],o===void 0))throw new Dt(`Unknown adapter '${d}'`);if(o&&(Me.isFunction(o)||(o=o.get(t))))break;i[d||"#"+c]=o}if(!o){const c=Object.entries(i).map(([h,f])=>`adapter ${h} `+(f===!1?"is not supported by the environment":"is not available in the build"));let d=r?c.length>1?`since :
`+c.map(gb).join(`
`):" "+gb(c[0]):"as no adapter specified";throw new Dt("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return o},adapters:Ng};function vp(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ml(null,e)}function xb(e){return vp(e),e.headers=Fn.from(e.headers),e.data=xp.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),oj.getAdapter(e.adapter||jd.adapter,e)(e).then(function(s){return vp(e),s.data=xp.call(e,e.transformResponse,s),s.headers=Fn.from(s.headers),s},function(s){return tj(s)||(vp(e),s&&s.response&&(s.response.data=xp.call(e,e.transformResponse,s.response),s.response.headers=Fn.from(s.response.headers))),Promise.reject(s)})}const lj="1.12.0",bf={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{bf[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const vb={};bf.transitional=function(t,r,s){function o(i,c){return"[Axios v"+lj+"] Transitional option '"+i+"'"+c+(s?". "+s:"")}return(i,c,d)=>{if(t===!1)throw new Dt(o(c," has been removed"+(r?" in "+r:"")),Dt.ERR_DEPRECATED);return r&&!vb[c]&&(vb[c]=!0,console.warn(o(c," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,c,d):!0}};bf.spelling=function(t){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function f9(e,t,r){if(typeof e!="object")throw new Dt("options must be an object",Dt.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let o=s.length;for(;o-- >0;){const i=s[o],c=t[i];if(c){const d=e[i],h=d===void 0||c(d,i,e);if(h!==!0)throw new Dt("option "+i+" must be "+h,Dt.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Dt("Unknown option "+i,Dt.ERR_BAD_OPTION)}}const mh={assertOptions:f9,validators:bf},oa=mh.validators;let wo=class{constructor(t){this.defaults=t||{},this.interceptors={request:new ib,response:new ib}}async request(t,r){try{return await this._request(t,r)}catch(s){if(s instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const i=o.stack?o.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=No(this.defaults,r);const{transitional:s,paramsSerializer:o,headers:i}=r;s!==void 0&&mh.assertOptions(s,{silentJSONParsing:oa.transitional(oa.boolean),forcedJSONParsing:oa.transitional(oa.boolean),clarifyTimeoutError:oa.transitional(oa.boolean)},!1),o!=null&&(Me.isFunction(o)?r.paramsSerializer={serialize:o}:mh.assertOptions(o,{encode:oa.function,serialize:oa.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),mh.assertOptions(r,{baseUrl:oa.spelling("baseURL"),withXsrfToken:oa.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let c=i&&Me.merge(i.common,i[r.method]);i&&Me.forEach(["delete","get","head","post","put","patch","common"],y=>{delete i[y]}),r.headers=Fn.concat(c,i);const d=[];let h=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(r)===!1||(h=h&&S.synchronous,d.unshift(S.fulfilled,S.rejected))});const f=[];this.interceptors.response.forEach(function(S){f.push(S.fulfilled,S.rejected)});let p,v=0,x;if(!h){const y=[xb.bind(this),void 0];for(y.unshift(...d),y.push(...f),x=y.length,p=Promise.resolve(r);v<x;)p=p.then(y[v++],y[v++]);return p}x=d.length;let w=r;for(v=0;v<x;){const y=d[v++],S=d[v++];try{w=y(w)}catch(C){S.call(this,C);break}}try{p=xb.call(this,w)}catch(y){return Promise.reject(y)}for(v=0,x=f.length;v<x;)p=p.then(f[v++],f[v++]);return p}getUri(t){t=No(this.defaults,t);const r=nj(t.baseURL,t.url,t.allowAbsoluteUrls);return Z2(r,t.params,t.paramsSerializer)}};Me.forEach(["delete","get","head","options"],function(t){wo.prototype[t]=function(r,s){return this.request(No(s||{},{method:t,url:r,data:(s||{}).data}))}});Me.forEach(["post","put","patch"],function(t){function r(s){return function(i,c,d){return this.request(No(d||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:c}))}}wo.prototype[t]=r(),wo.prototype[t+"Form"]=r(!0)});let m9=class cj{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const s=this;this.promise.then(o=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](o);s._listeners=null}),this.promise.then=o=>{let i;const c=new Promise(d=>{s.subscribe(d),i=d}).then(o);return c.cancel=function(){s.unsubscribe(i)},c},t(function(i,c,d){s.reason||(s.reason=new Ml(i,c,d),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=s=>{t.abort(s)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new cj(function(o){t=o}),cancel:t}}};function p9(e){return function(r){return e.apply(null,r)}}function g9(e){return Me.isObject(e)&&e.isAxiosError===!0}const Sg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Sg).forEach(([e,t])=>{Sg[t]=e});function dj(e){const t=new wo(e),r=B2(wo.prototype.request,t);return Me.extend(r,wo.prototype,t,{allOwnKeys:!0}),Me.extend(r,t,null,{allOwnKeys:!0}),r.create=function(o){return dj(No(e,o))},r}const vr=dj(jd);vr.Axios=wo;vr.CanceledError=Ml;vr.CancelToken=m9;vr.isCancel=tj;vr.VERSION=lj;vr.toFormData=yf;vr.AxiosError=Dt;vr.Cancel=vr.CanceledError;vr.all=function(t){return Promise.all(t)};vr.spread=p9;vr.isAxiosError=g9;vr.mergeConfig=No;vr.AxiosHeaders=Fn;vr.formToJSON=e=>ej(Me.isHTMLForm(e)?new FormData(e):e);vr.getAdapter=oj.getAdapter;vr.HttpStatusCode=Sg;vr.default=vr;const{Axios:JO,AxiosError:YO,CanceledError:ZO,isCancel:XO,CancelToken:eP,VERSION:tP,all:rP,Cancel:nP,isAxiosError:sP,spread:aP,toFormData:iP,AxiosHeaders:oP,HttpStatusCode:lP,formToJSON:cP,getAdapter:dP,mergeConfig:uP}=vr,Ls=vr.create({baseURL:"https://colorland-app-ff3fdd79ac35.herokuapp.com",timeout:1e4,headers:{"Content-Type":"application/json"}});Ls.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));Ls.interceptors.response.use(e=>e,e=>e.code==="ERR_NETWORK"||e.message?.includes("Network Error")?(console.warn("Backend no disponible, continuando sin conexin"),Promise.reject(new Error("Backend no disponible"))):(e.response?.status===401&&(localStorage.removeItem("token"),e.response&&(window.location.href="/login")),Promise.reject(e)));function kg(e,t){return kg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},kg(e,t)}function uj(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,kg(e,t)}function jt(){return jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},jt.apply(null,arguments)}function nd(e){"@babel/helpers - typeof";return nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nd(e)}function x9(e,t){if(nd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(nd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function v9(e){var t=x9(e,"string");return nd(t)=="symbol"?t:t+""}function y9(e,t,r){return(t=v9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,s)}return r}function bb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yb(Object(r),!0).forEach(function(s){y9(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yb(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Pn(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var wb=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})(),jb=function(){return Math.random().toString(36).substring(7).split("").join(".")},Nb={INIT:"@@redux/INIT"+jb(),REPLACE:"@@redux/REPLACE"+jb()};function b9(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function hj(e,t,r){var s;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Pn(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Pn(1));return r(hj)(e,t)}if(typeof e!="function")throw new Error(Pn(2));var o=e,i=t,c=[],d=c,h=!1;function f(){d===c&&(d=c.slice())}function p(){if(h)throw new Error(Pn(3));return i}function v(S){if(typeof S!="function")throw new Error(Pn(4));if(h)throw new Error(Pn(5));var C=!0;return f(),d.push(S),function(){if(C){if(h)throw new Error(Pn(6));C=!1,f();var A=d.indexOf(S);d.splice(A,1),c=null}}}function x(S){if(!b9(S))throw new Error(Pn(7));if(typeof S.type>"u")throw new Error(Pn(8));if(h)throw new Error(Pn(9));try{h=!0,i=o(i,S)}finally{h=!1}for(var C=c=d,T=0;T<C.length;T++){var A=C[T];A()}return S}function w(S){if(typeof S!="function")throw new Error(Pn(10));o=S,x({type:Nb.REPLACE})}function y(){var S,C=v;return S={subscribe:function(A){if(typeof A!="object"||A===null)throw new Error(Pn(11));function I(){A.next&&A.next(p())}I();var O=C(I);return{unsubscribe:O}}},S[wb]=function(){return this},S}return x({type:Nb.INIT}),s={dispatch:x,subscribe:v,getState:p,replaceReducer:w},s[wb]=y,s}function Sb(e,t){return function(){return t(e.apply(this,arguments))}}function kb(e,t){if(typeof e=="function")return Sb(e,t);if(typeof e!="object"||e===null)throw new Error(Pn(16));var r={};for(var s in e){var o=e[s];typeof o=="function"&&(r[s]=Sb(o,t))}return r}function fj(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(s){return s}:t.length===1?t[0]:t.reduce(function(s,o){return function(){return s(o.apply(void 0,arguments))}})}function w9(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(s){return function(){var o=s.apply(void 0,arguments),i=function(){throw new Error(Pn(15))},c={getState:o.getState,dispatch:function(){return i.apply(void 0,arguments)}},d=t.map(function(h){return h(c)});return i=fj.apply(void 0,d)(o.dispatch),bb(bb({},o),{},{dispatch:i})}}}var mj=pt.createContext(null);function j9(e){e()}var pj=j9,N9=function(t){return pj=t},S9=function(){return pj};function k9(){var e=S9(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e(function(){for(var o=t;o;)o.callback(),o=o.next})},get:function(){for(var o=[],i=t;i;)o.push(i),i=i.next;return o},subscribe:function(o){var i=!0,c=r={callback:o,next:null,prev:r};return c.prev?c.prev.next=c:t=c,function(){!i||t===null||(i=!1,c.next?c.next.prev=c.prev:r=c.prev,c.prev?c.prev.next=c.next:t=c.next)}}}}var _b={notify:function(){},get:function(){return[]}};function gj(e,t){var r,s=_b;function o(v){return h(),s.subscribe(v)}function i(){s.notify()}function c(){p.onStateChange&&p.onStateChange()}function d(){return!!r}function h(){r||(r=t?t.addNestedSub(c):e.subscribe(c),s=k9())}function f(){r&&(r(),r=void 0,s.clear(),s=_b)}var p={addNestedSub:o,notifyNestedSubs:i,handleChangeWrapper:c,isSubscribed:d,trySubscribe:h,tryUnsubscribe:f,getListeners:function(){return s}};return p}var xj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?j.useLayoutEffect:j.useEffect;function _9(e){var t=e.store,r=e.context,s=e.children,o=j.useMemo(function(){var d=gj(t);return{store:t,subscription:d}},[t]),i=j.useMemo(function(){return t.getState()},[t]);xj(function(){var d=o.subscription;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),i!==t.getState()&&d.notifyNestedSubs(),function(){d.tryUnsubscribe(),d.onStateChange=null}},[o,i]);var c=r||mj;return pt.createElement(c.Provider,{value:o},s)}function Fh(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var yp={exports:{}},Kt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cb;function C9(){if(Cb)return Kt;Cb=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,s=e?Symbol.for("react.fragment"):60107,o=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,c=e?Symbol.for("react.provider"):60109,d=e?Symbol.for("react.context"):60110,h=e?Symbol.for("react.async_mode"):60111,f=e?Symbol.for("react.concurrent_mode"):60111,p=e?Symbol.for("react.forward_ref"):60112,v=e?Symbol.for("react.suspense"):60113,x=e?Symbol.for("react.suspense_list"):60120,w=e?Symbol.for("react.memo"):60115,y=e?Symbol.for("react.lazy"):60116,S=e?Symbol.for("react.block"):60121,C=e?Symbol.for("react.fundamental"):60117,T=e?Symbol.for("react.responder"):60118,A=e?Symbol.for("react.scope"):60119;function I(P){if(typeof P=="object"&&P!==null){var $=P.$$typeof;switch($){case t:switch(P=P.type,P){case h:case f:case s:case i:case o:case v:return P;default:switch(P=P&&P.$$typeof,P){case d:case p:case y:case w:case c:return P;default:return $}}case r:return $}}}function O(P){return I(P)===f}return Kt.AsyncMode=h,Kt.ConcurrentMode=f,Kt.ContextConsumer=d,Kt.ContextProvider=c,Kt.Element=t,Kt.ForwardRef=p,Kt.Fragment=s,Kt.Lazy=y,Kt.Memo=w,Kt.Portal=r,Kt.Profiler=i,Kt.StrictMode=o,Kt.Suspense=v,Kt.isAsyncMode=function(P){return O(P)||I(P)===h},Kt.isConcurrentMode=O,Kt.isContextConsumer=function(P){return I(P)===d},Kt.isContextProvider=function(P){return I(P)===c},Kt.isElement=function(P){return typeof P=="object"&&P!==null&&P.$$typeof===t},Kt.isForwardRef=function(P){return I(P)===p},Kt.isFragment=function(P){return I(P)===s},Kt.isLazy=function(P){return I(P)===y},Kt.isMemo=function(P){return I(P)===w},Kt.isPortal=function(P){return I(P)===r},Kt.isProfiler=function(P){return I(P)===i},Kt.isStrictMode=function(P){return I(P)===o},Kt.isSuspense=function(P){return I(P)===v},Kt.isValidElementType=function(P){return typeof P=="string"||typeof P=="function"||P===s||P===f||P===i||P===o||P===v||P===x||typeof P=="object"&&P!==null&&(P.$$typeof===y||P.$$typeof===w||P.$$typeof===c||P.$$typeof===d||P.$$typeof===p||P.$$typeof===C||P.$$typeof===T||P.$$typeof===A||P.$$typeof===S)},Kt.typeOf=I,Kt}var Eb;function E9(){return Eb||(Eb=1,yp.exports=C9()),yp.exports}var bp,Ab;function A9(){if(Ab)return bp;Ab=1;var e=E9(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[e.ForwardRef]=s,i[e.Memo]=o;function c(y){return e.isMemo(y)?o:i[y.$$typeof]||t}var d=Object.defineProperty,h=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,v=Object.getPrototypeOf,x=Object.prototype;function w(y,S,C){if(typeof S!="string"){if(x){var T=v(S);T&&T!==x&&w(y,T,C)}var A=h(S);f&&(A=A.concat(f(S)));for(var I=c(y),O=c(S),P=0;P<A.length;++P){var $=A[P];if(!r[$]&&!(C&&C[$])&&!(O&&O[$])&&!(I&&I[$])){var F=p(S,$);try{d(y,$,F)}catch{}}}}return y}return bp=w,bp}var I9=A9();const Ib=Al(I9);var wp={exports:{}},Jt={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tb;function T9(){if(Tb)return Jt;Tb=1;var e=60103,t=60106,r=60107,s=60108,o=60114,i=60109,c=60110,d=60112,h=60113,f=60120,p=60115,v=60116,x=60121,w=60122,y=60117,S=60129,C=60131;if(typeof Symbol=="function"&&Symbol.for){var T=Symbol.for;e=T("react.element"),t=T("react.portal"),r=T("react.fragment"),s=T("react.strict_mode"),o=T("react.profiler"),i=T("react.provider"),c=T("react.context"),d=T("react.forward_ref"),h=T("react.suspense"),f=T("react.suspense_list"),p=T("react.memo"),v=T("react.lazy"),x=T("react.block"),w=T("react.server.block"),y=T("react.fundamental"),S=T("react.debug_trace_mode"),C=T("react.legacy_hidden")}function A(U){if(typeof U=="object"&&U!==null){var H=U.$$typeof;switch(H){case e:switch(U=U.type,U){case r:case o:case s:case h:case f:return U;default:switch(U=U&&U.$$typeof,U){case c:case d:case v:case p:case i:return U;default:return H}}case t:return H}}}var I=i,O=e,P=d,$=r,F=v,te=p,ne=t,Ee=o,Se=s,De=h;return Jt.ContextConsumer=c,Jt.ContextProvider=I,Jt.Element=O,Jt.ForwardRef=P,Jt.Fragment=$,Jt.Lazy=F,Jt.Memo=te,Jt.Portal=ne,Jt.Profiler=Ee,Jt.StrictMode=Se,Jt.Suspense=De,Jt.isAsyncMode=function(){return!1},Jt.isConcurrentMode=function(){return!1},Jt.isContextConsumer=function(U){return A(U)===c},Jt.isContextProvider=function(U){return A(U)===i},Jt.isElement=function(U){return typeof U=="object"&&U!==null&&U.$$typeof===e},Jt.isForwardRef=function(U){return A(U)===d},Jt.isFragment=function(U){return A(U)===r},Jt.isLazy=function(U){return A(U)===v},Jt.isMemo=function(U){return A(U)===p},Jt.isPortal=function(U){return A(U)===t},Jt.isProfiler=function(U){return A(U)===o},Jt.isStrictMode=function(U){return A(U)===s},Jt.isSuspense=function(U){return A(U)===h},Jt.isValidElementType=function(U){return typeof U=="string"||typeof U=="function"||U===r||U===o||U===S||U===s||U===h||U===f||U===C||typeof U=="object"&&U!==null&&(U.$$typeof===v||U.$$typeof===p||U.$$typeof===i||U.$$typeof===c||U.$$typeof===d||U.$$typeof===y||U.$$typeof===x||U[0]===w)},Jt.typeOf=A,Jt}var Db;function D9(){return Db||(Db=1,wp.exports=T9()),wp.exports}var R9=D9(),O9=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],P9=["reactReduxForwardedRef"],M9=[],L9=[null,null];function $9(e,t){var r=e[1];return[t.payload,r+1]}function Rb(e,t,r){xj(function(){return e.apply(void 0,t)},r)}function F9(e,t,r,s,o,i,c){e.current=s,t.current=o,r.current=!1,i.current&&(i.current=null,c())}function B9(e,t,r,s,o,i,c,d,h,f){if(e){var p=!1,v=null,x=function(){if(!p){var S=t.getState(),C,T;try{C=s(S,o.current)}catch(A){T=A,v=A}T||(v=null),C===i.current?c.current||h():(i.current=C,d.current=C,c.current=!0,f({type:"STORE_UPDATED",payload:{error:T}}))}};r.onStateChange=x,r.trySubscribe(),x();var w=function(){if(p=!0,r.tryUnsubscribe(),r.onStateChange=null,v)throw v};return w}}var U9=function(){return[null,0]};function z9(e,t){t===void 0&&(t={});var r=t,s=r.getDisplayName,o=s===void 0?function(I){return"ConnectAdvanced("+I+")"}:s,i=r.methodName,c=i===void 0?"connectAdvanced":i,d=r.renderCountProp,h=d===void 0?void 0:d,f=r.shouldHandleStateChanges,p=f===void 0?!0:f,v=r.storeKey,x=v===void 0?"store":v;r.withRef;var w=r.forwardRef,y=w===void 0?!1:w,S=r.context,C=S===void 0?mj:S,T=Fh(r,O9),A=C;return function(O){var P=O.displayName||O.name||"Component",$=o(P),F=jt({},T,{getDisplayName:o,methodName:c,renderCountProp:h,shouldHandleStateChanges:p,storeKey:x,displayName:$,wrappedComponentName:P,WrappedComponent:O}),te=T.pure;function ne(H){return e(H.dispatch,F)}var Ee=te?j.useMemo:function(H){return H()};function Se(H){var ye=j.useMemo(function(){var xt=H.reactReduxForwardedRef,X=Fh(H,P9);return[H.context,xt,X]},[H]),R=ye[0],de=ye[1],V=ye[2],he=j.useMemo(function(){return R&&R.Consumer&&R9.isContextConsumer(pt.createElement(R.Consumer,null))?R:A},[R,A]),K=j.useContext(he),B=!!H.store&&!!H.store.getState&&!!H.store.dispatch;K&&K.store;var re=B?H.store:K.store,ae=j.useMemo(function(){return ne(re)},[re]),z=j.useMemo(function(){if(!p)return L9;var xt=gj(re,B?null:K.subscription),X=xt.notifyNestedSubs.bind(xt);return[xt,X]},[re,B,K]),ge=z[0],Pe=z[1],we=j.useMemo(function(){return B?K:jt({},K,{subscription:ge})},[B,K,ge]),Q=j.useReducer($9,M9,U9),ke=Q[0],q=ke[0],ce=Q[1];if(q&&q.error)throw q.error;var J=j.useRef(),qe=j.useRef(V),Be=j.useRef(),ee=j.useRef(!1),Ye=Ee(function(){return Be.current&&V===qe.current?Be.current:ae(re.getState(),V)},[re,q,V]);Rb(F9,[qe,J,ee,V,Ye,Be,Pe]),Rb(B9,[p,re,ge,ae,qe,J,ee,Be,Pe,ce],[re,ge,ae]);var Ne=j.useMemo(function(){return pt.createElement(O,jt({},Ye,{ref:de}))},[de,O,Ye]),kt=j.useMemo(function(){return p?pt.createElement(he.Provider,{value:we},Ne):Ne},[he,Ne,we]);return kt}var De=te?pt.memo(Se):Se;if(De.WrappedComponent=O,De.displayName=Se.displayName=$,y){var U=pt.forwardRef(function(ye,R){return pt.createElement(De,jt({},ye,{reactReduxForwardedRef:R}))});return U.displayName=$,U.WrappedComponent=O,Ib(U,O)}return Ib(De,O)}}function Ob(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function jp(e,t){if(Ob(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(var o=0;o<r.length;o++)if(!Object.prototype.hasOwnProperty.call(t,r[o])||!Ob(e[r[o]],t[r[o]]))return!1;return!0}function q9(e,t){var r={},s=function(c){var d=e[c];typeof d=="function"&&(r[c]=function(){return t(d.apply(void 0,arguments))})};for(var o in e)s(o);return r}function bx(e){return function(r,s){var o=e(r,s);function i(){return o}return i.dependsOnOwnProps=!1,i}}function Pb(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function vj(e,t){return function(s,o){o.displayName;var i=function(d,h){return i.dependsOnOwnProps?i.mapToProps(d,h):i.mapToProps(d)};return i.dependsOnOwnProps=!0,i.mapToProps=function(d,h){i.mapToProps=e,i.dependsOnOwnProps=Pb(e);var f=i(d,h);return typeof f=="function"&&(i.mapToProps=f,i.dependsOnOwnProps=Pb(f),f=i(d,h)),f},i}}function G9(e){return typeof e=="function"?vj(e):void 0}function V9(e){return e?void 0:bx(function(t){return{dispatch:t}})}function H9(e){return e&&typeof e=="object"?bx(function(t){return q9(e,t)}):void 0}const W9=[G9,V9,H9];function K9(e){return typeof e=="function"?vj(e):void 0}function Q9(e){return e?void 0:bx(function(){return{}})}const J9=[K9,Q9];function Y9(e,t,r){return jt({},r,e,t)}function Z9(e){return function(r,s){s.displayName;var o=s.pure,i=s.areMergedPropsEqual,c=!1,d;return function(f,p,v){var x=e(f,p,v);return c?(!o||!i(x,d))&&(d=x):(c=!0,d=x),d}}}function X9(e){return typeof e=="function"?Z9(e):void 0}function eA(e){return e?void 0:function(){return Y9}}const tA=[X9,eA];var rA=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function nA(e,t,r,s){return function(i,c){return r(e(i,c),t(s,c),c)}}function sA(e,t,r,s,o){var i=o.areStatesEqual,c=o.areOwnPropsEqual,d=o.areStatePropsEqual,h=!1,f,p,v,x,w;function y(I,O){return f=I,p=O,v=e(f,p),x=t(s,p),w=r(v,x,p),h=!0,w}function S(){return v=e(f,p),t.dependsOnOwnProps&&(x=t(s,p)),w=r(v,x,p),w}function C(){return e.dependsOnOwnProps&&(v=e(f,p)),t.dependsOnOwnProps&&(x=t(s,p)),w=r(v,x,p),w}function T(){var I=e(f,p),O=!d(I,v);return v=I,O&&(w=r(v,x,p)),w}function A(I,O){var P=!c(O,p),$=!i(I,f,O,p);return f=I,p=O,P&&$?S():P?C():$?T():w}return function(O,P){return h?A(O,P):y(O,P)}}function aA(e,t){var r=t.initMapStateToProps,s=t.initMapDispatchToProps,o=t.initMergeProps,i=Fh(t,rA),c=r(e,i),d=s(e,i),h=o(e,i),f=i.pure?sA:nA;return f(c,d,h,e,i)}var iA=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function Np(e,t,r){for(var s=t.length-1;s>=0;s--){var o=t[s](e);if(o)return o}return function(i,c){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+c.wrappedComponentName+".")}}function oA(e,t){return e===t}function lA(e){var t=e===void 0?{}:e,r=t.connectHOC,s=r===void 0?z9:r,o=t.mapStateToPropsFactories,i=o===void 0?J9:o,c=t.mapDispatchToPropsFactories,d=c===void 0?W9:c,h=t.mergePropsFactories,f=h===void 0?tA:h,p=t.selectorFactory,v=p===void 0?aA:p;return function(w,y,S,C){C===void 0&&(C={});var T=C,A=T.pure,I=A===void 0?!0:A,O=T.areStatesEqual,P=O===void 0?oA:O,$=T.areOwnPropsEqual,F=$===void 0?jp:$,te=T.areStatePropsEqual,ne=te===void 0?jp:te,Ee=T.areMergedPropsEqual,Se=Ee===void 0?jp:Ee,De=Fh(T,iA),U=Np(w,i,"mapStateToProps"),H=Np(y,d,"mapDispatchToProps"),ye=Np(S,f,"mergeProps");return s(v,jt({methodName:"connect",getDisplayName:function(de){return"Connect("+de+")"},shouldHandleStateChanges:!!w,initMapStateToProps:U,initMapDispatchToProps:H,initMergeProps:ye,pure:I,areStatesEqual:P,areOwnPropsEqual:F,areStatePropsEqual:ne,areMergedPropsEqual:Se},De))}}const yj=lA();N9(Pa.unstable_batchedUpdates);function cA(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function bj(e,t){var r=j.useState(function(){return{inputs:t,result:e()}})[0],s=j.useRef(!0),o=j.useRef(r),i=s.current||!!(t&&o.current.inputs&&cA(t,o.current.inputs)),c=i?o.current:{inputs:t,result:e()};return j.useEffect(function(){s.current=!1,o.current=c},[c]),c.result}function dA(e,t){return bj(function(){return e},t)}var Gt=bj,vt=dA,uA="Invariant failed";function hA(e,t){throw new Error(uA)}var $s=function(t){var r=t.top,s=t.right,o=t.bottom,i=t.left,c=s-i,d=o-r,h={top:r,right:s,bottom:o,left:i,width:c,height:d,x:i,y:r,center:{x:(s+i)/2,y:(o+r)/2}};return h},wx=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},Mb=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},fA=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},Sp={top:0,right:0,bottom:0,left:0},jx=function(t){var r=t.borderBox,s=t.margin,o=s===void 0?Sp:s,i=t.border,c=i===void 0?Sp:i,d=t.padding,h=d===void 0?Sp:d,f=$s(wx(r,o)),p=$s(Mb(r,c)),v=$s(Mb(p,h));return{marginBox:f,borderBox:$s(r),paddingBox:p,contentBox:v,margin:o,border:c,padding:h}},hs=function(t){var r=t.slice(0,-2),s=t.slice(-2);if(s!=="px")return 0;var o=Number(r);return isNaN(o)&&hA(),o},mA=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Bh=function(t,r){var s=t.borderBox,o=t.border,i=t.margin,c=t.padding,d=fA(s,r);return jx({borderBox:d,border:o,margin:i,padding:c})},Uh=function(t,r){return r===void 0&&(r=mA()),Bh(t,r)},wj=function(t,r){var s={top:hs(r.marginTop),right:hs(r.marginRight),bottom:hs(r.marginBottom),left:hs(r.marginLeft)},o={top:hs(r.paddingTop),right:hs(r.paddingRight),bottom:hs(r.paddingBottom),left:hs(r.paddingLeft)},i={top:hs(r.borderTopWidth),right:hs(r.borderRightWidth),bottom:hs(r.borderBottomWidth),left:hs(r.borderLeftWidth)};return jx({borderBox:t,margin:s,padding:o,border:i})},jj=function(t){var r=t.getBoundingClientRect(),s=window.getComputedStyle(t);return wj(r,s)},Lb=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function pA(e,t){return!!(e===t||Lb(e)&&Lb(t))}function gA(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!pA(e[r],t[r]))return!1;return!0}function Vr(e,t){t===void 0&&(t=gA);var r,s=[],o,i=!1;function c(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];return i&&r===this&&t(d,s)||(o=e.apply(this,d),i=!0,r=this,s=d),o}return c}var sd=function(t){var r=[],s=null,o=function(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];r=d,!s&&(s=requestAnimationFrame(function(){s=null,t.apply(void 0,r)}))};return o.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},o};function Nj(e,t){}Nj.bind(null,"warn");Nj.bind(null,"error");function Ni(){}function xA(e,t){return jt({},e,{},t)}function ms(e,t,r){var s=t.map(function(o){var i=xA(r,o.options);return e.addEventListener(o.eventName,o.fn,i),function(){e.removeEventListener(o.eventName,o.fn,i)}});return function(){s.forEach(function(i){i()})}}var vA="Invariant failed";function zh(e){this.message=e}zh.prototype.toString=function(){return this.message};function et(e,t){throw new zh(vA)}var yA=(function(e){uj(t,e);function t(){for(var s,o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return s=e.call.apply(e,[this].concat(i))||this,s.callbacks=null,s.unbind=Ni,s.onWindowError=function(d){var h=s.getCallbacks();h.isDragging()&&h.tryAbort();var f=d.error;f instanceof zh&&d.preventDefault()},s.getCallbacks=function(){if(!s.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return s.callbacks},s.setCallbacks=function(d){s.callbacks=d},s}var r=t.prototype;return r.componentDidMount=function(){this.unbind=ms(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(o){if(o instanceof zh){this.setState({});return}throw o},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},t})(pt.Component),bA=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,qh=function(t){return t+1},wA=function(t){return`
  You have lifted an item in position `+qh(t.source.index)+`
`},Sj=function(t,r){var s=t.droppableId===r.droppableId,o=qh(t.index),i=qh(r.index);return s?`
      You have moved the item from position `+o+`
      to position `+i+`
    `:`
    You have moved the item from position `+o+`
    in list `+t.droppableId+`
    to list `+r.droppableId+`
    in position `+i+`
  `},kj=function(t,r,s){var o=r.droppableId===s.droppableId;return o?`
      The item `+t+`
      has been combined with `+s.draggableId:`
      The item `+t+`
      in list `+r.droppableId+`
      has been combined with `+s.draggableId+`
      in list `+s.droppableId+`
    `},jA=function(t){var r=t.destination;if(r)return Sj(t.source,r);var s=t.combine;return s?kj(t.draggableId,t.source,s):"You are over an area that cannot be dropped on"},$b=function(t){return`
  The item has returned to its starting position
  of `+qh(t.index)+`
`},NA=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+$b(t.source)+`
    `;var r=t.destination,s=t.combine;return r?`
      You have dropped the item.
      `+Sj(t.source,r)+`
    `:s?`
      You have dropped the item.
      `+kj(t.draggableId,t.source,s)+`
    `:`
    The item has been dropped while not over a drop area.
    `+$b(t.source)+`
  `},ph={dragHandleUsageInstructions:bA,onDragStart:wA,onDragUpdate:jA,onDragEnd:NA},Wr={x:0,y:0},an=function(t,r){return{x:t.x+r.x,y:t.y+r.y}},Zn=function(t,r){return{x:t.x-r.x,y:t.y-r.y}},Si=function(t,r){return t.x===r.x&&t.y===r.y},Ll=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},So=function(t,r,s){var o;return s===void 0&&(s=0),o={},o[t]=r,o[t==="x"?"y":"x"]=s,o},ad=function(t,r){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},Fb=function(t,r){return Math.min.apply(Math,r.map(function(s){return ad(t,s)}))},_j=function(t){return function(r){return{x:t(r.x),y:t(r.y)}}},SA=(function(e,t){var r=$s({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r}),Nd=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},Bb=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},kA={top:0,right:0,bottom:0,left:0},_A=function(t,r){return r?Nd(t,r.scroll.diff.displacement):t},CA=function(t,r,s){if(s&&s.increasedBy){var o;return jt({},t,(o={},o[r.end]=t[r.end]+s.increasedBy[r.line],o))}return t},EA=function(t,r){return r&&r.shouldClipSubject?SA(r.pageMarginBox,t):$s(t)},_l=(function(e){var t=e.page,r=e.withPlaceholder,s=e.axis,o=e.frame,i=_A(t.marginBox,o),c=CA(i,s,r),d=EA(c,o);return{page:t,withPlaceholder:r,active:d}}),Nx=(function(e,t){e.frame||et();var r=e.frame,s=Zn(t,r.scroll.initial),o=Ll(s),i=jt({},r,{scroll:{initial:r.scroll.initial,current:t,diff:{value:s,displacement:o},max:r.scroll.max}}),c=_l({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i}),d=jt({},e,{frame:i,subject:c});return d});function Gh(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function Sx(e,t){if(e.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function Ti(e,t){if(e.find)return e.find(t);var r=Sx(e,t);if(r!==-1)return e[r]}function Cj(e){return Array.prototype.slice.call(e)}var Ej=Vr(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),Aj=Vr(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),wf=Vr(function(e){return Gh(e)}),AA=Vr(function(e){return Gh(e)}),$l=Vr(function(e,t){var r=AA(t).filter(function(s){return e===s.descriptor.droppableId}).sort(function(s,o){return s.descriptor.index-o.descriptor.index});return r});function kx(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function jf(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Nf=Vr(function(e,t){return t.filter(function(r){return r.descriptor.id!==e.descriptor.id})}),IA=(function(e){var t=e.isMovingForward,r=e.draggable,s=e.destination,o=e.insideDestination,i=e.previousImpact;if(!s.isCombineEnabled)return null;var c=kx(i);if(!c)return null;function d(S){var C={type:"COMBINE",combine:{draggableId:S,droppableId:s.descriptor.id}};return jt({},i,{at:C})}var h=i.displaced.all,f=h.length?h[0]:null;if(t)return f?d(f):null;var p=Nf(r,o);if(!f){if(!p.length)return null;var v=p[p.length-1];return d(v.descriptor.id)}var x=Sx(p,function(S){return S.descriptor.id===f});x===-1&&et();var w=x-1;if(w<0)return null;var y=p[w];return d(y.descriptor.id)}),Fl=(function(e,t){return e.descriptor.droppableId===t.descriptor.id}),Ij={point:Wr,value:0},id={invisible:{},visible:{},all:[]},TA={displaced:id,displacedBy:Ij,at:null},ps=(function(e,t){return function(r){return e<=r&&r<=t}}),Tj=(function(e){var t=ps(e.top,e.bottom),r=ps(e.left,e.right);return function(s){var o=t(s.top)&&t(s.bottom)&&r(s.left)&&r(s.right);if(o)return!0;var i=t(s.top)||t(s.bottom),c=r(s.left)||r(s.right),d=i&&c;if(d)return!0;var h=s.top<e.top&&s.bottom>e.bottom,f=s.left<e.left&&s.right>e.right,p=h&&f;if(p)return!0;var v=h&&c||f&&i;return v}}),DA=(function(e){var t=ps(e.top,e.bottom),r=ps(e.left,e.right);return function(s){var o=t(s.top)&&t(s.bottom)&&r(s.left)&&r(s.right);return o}}),_x={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Dj={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},RA=(function(e){return function(t){var r=ps(t.top,t.bottom),s=ps(t.left,t.right);return function(o){return e===_x?r(o.top)&&r(o.bottom):s(o.left)&&s(o.right)}}}),OA=function(t,r){var s=r.frame?r.frame.scroll.diff.displacement:Wr;return Nd(t,s)},PA=function(t,r,s){return r.subject.active?s(r.subject.active)(t):!1},MA=function(t,r,s){return s(r)(t)},Cx=function(t){var r=t.target,s=t.destination,o=t.viewport,i=t.withDroppableDisplacement,c=t.isVisibleThroughFrameFn,d=i?OA(r,s):r;return PA(d,s,c)&&MA(d,o,c)},LA=function(t){return Cx(jt({},t,{isVisibleThroughFrameFn:Tj}))},Rj=function(t){return Cx(jt({},t,{isVisibleThroughFrameFn:DA}))},$A=function(t){return Cx(jt({},t,{isVisibleThroughFrameFn:RA(t.destination.axis)}))},FA=function(t,r,s){if(typeof s=="boolean")return s;if(!r)return!0;var o=r.invisible,i=r.visible;if(o[t])return!1;var c=i[t];return c?c.shouldAnimate:!0};function BA(e,t){var r=e.page.marginBox,s={top:t.point.y,right:0,bottom:0,left:t.point.x};return $s(wx(r,s))}function od(e){var t=e.afterDragging,r=e.destination,s=e.displacedBy,o=e.viewport,i=e.forceShouldAnimate,c=e.last;return t.reduce(function(h,f){var p=BA(f,s),v=f.descriptor.id;h.all.push(v);var x=LA({target:p,destination:r,viewport:o,withDroppableDisplacement:!0});if(!x)return h.invisible[f.descriptor.id]=!0,h;var w=FA(v,c,i),y={draggableId:v,shouldAnimate:w};return h.visible[v]=y,h},{all:[],visible:{},invisible:{}})}function UA(e,t){if(!e.length)return 0;var r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function Ub(e){var t=e.insideDestination,r=e.inHomeList,s=e.displacedBy,o=e.destination,i=UA(t,{inHomeList:r});return{displaced:id,displacedBy:s,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:i}}}}function Vh(e){var t=e.draggable,r=e.insideDestination,s=e.destination,o=e.viewport,i=e.displacedBy,c=e.last,d=e.index,h=e.forceShouldAnimate,f=Fl(t,s);if(d==null)return Ub({insideDestination:r,inHomeList:f,displacedBy:i,destination:s});var p=Ti(r,function(S){return S.descriptor.index===d});if(!p)return Ub({insideDestination:r,inHomeList:f,displacedBy:i,destination:s});var v=Nf(t,r),x=r.indexOf(p),w=v.slice(x),y=od({afterDragging:w,destination:s,displacedBy:i,last:c,viewport:o.frame,forceShouldAnimate:h});return{displaced:y,displacedBy:i,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:d}}}}function _i(e,t){return!!t.effected[e]}var zA=(function(e){var t=e.isMovingForward,r=e.destination,s=e.draggables,o=e.combine,i=e.afterCritical;if(!r.isCombineEnabled)return null;var c=o.draggableId,d=s[c],h=d.descriptor.index,f=_i(c,i);return f?t?h:h-1:t?h+1:h}),qA=(function(e){var t=e.isMovingForward,r=e.isInHomeList,s=e.insideDestination,o=e.location;if(!s.length)return null;var i=o.index,c=t?i+1:i-1,d=s[0].descriptor.index,h=s[s.length-1].descriptor.index,f=r?h:h+1;return c<d||c>f?null:c}),GA=(function(e){var t=e.isMovingForward,r=e.isInHomeList,s=e.draggable,o=e.draggables,i=e.destination,c=e.insideDestination,d=e.previousImpact,h=e.viewport,f=e.afterCritical,p=d.at;if(p||et(),p.type==="REORDER"){var v=qA({isMovingForward:t,isInHomeList:r,location:p.destination,insideDestination:c});return v==null?null:Vh({draggable:s,insideDestination:c,destination:i,viewport:h,last:d.displaced,displacedBy:d.displacedBy,index:v})}var x=zA({isMovingForward:t,destination:i,displaced:d.displaced,draggables:o,combine:p.combine,afterCritical:f});return x==null?null:Vh({draggable:s,insideDestination:c,destination:i,viewport:h,last:d.displaced,displacedBy:d.displacedBy,index:x})}),VA=(function(e){var t=e.displaced,r=e.afterCritical,s=e.combineWith,o=e.displacedBy,i=!!(t.visible[s]||t.invisible[s]);return _i(s,r)?i?Wr:Ll(o.point):i?o.point:Wr}),HA=(function(e){var t=e.afterCritical,r=e.impact,s=e.draggables,o=jf(r);o||et();var i=o.draggableId,c=s[i].page.borderBox.center,d=VA({displaced:r.displaced,afterCritical:t,combineWith:i,displacedBy:r.displacedBy});return an(c,d)}),Oj=function(t,r){return r.margin[t.start]+r.borderBox[t.size]/2},WA=function(t,r){return r.margin[t.end]+r.borderBox[t.size]/2},Ex=function(t,r,s){return r[t.crossAxisStart]+s.margin[t.crossAxisStart]+s.borderBox[t.crossAxisSize]/2},zb=function(t){var r=t.axis,s=t.moveRelativeTo,o=t.isMoving;return So(r.line,s.marginBox[r.end]+Oj(r,o),Ex(r,s.marginBox,o))},qb=function(t){var r=t.axis,s=t.moveRelativeTo,o=t.isMoving;return So(r.line,s.marginBox[r.start]-WA(r,o),Ex(r,s.marginBox,o))},KA=function(t){var r=t.axis,s=t.moveInto,o=t.isMoving;return So(r.line,s.contentBox[r.start]+Oj(r,o),Ex(r,s.contentBox,o))},QA=(function(e){var t=e.impact,r=e.draggable,s=e.draggables,o=e.droppable,i=e.afterCritical,c=$l(o.descriptor.id,s),d=r.page,h=o.axis;if(!c.length)return KA({axis:h,moveInto:o.page,isMoving:d});var f=t.displaced,p=t.displacedBy,v=f.all[0];if(v){var x=s[v];if(_i(v,i))return qb({axis:h,moveRelativeTo:x.page,isMoving:d});var w=Bh(x.page,p.point);return qb({axis:h,moveRelativeTo:w,isMoving:d})}var y=c[c.length-1];if(y.descriptor.id===r.descriptor.id)return d.borderBox.center;if(_i(y.descriptor.id,i)){var S=Bh(y.page,Ll(i.displacedBy.point));return zb({axis:h,moveRelativeTo:S,isMoving:d})}return zb({axis:h,moveRelativeTo:y.page,isMoving:d})}),_g=(function(e,t){var r=e.frame;return r?an(t,r.scroll.diff.displacement):t}),JA=function(t){var r=t.impact,s=t.draggable,o=t.droppable,i=t.draggables,c=t.afterCritical,d=s.page.borderBox.center,h=r.at;return!o||!h?d:h.type==="REORDER"?QA({impact:r,draggable:s,draggables:i,droppable:o,afterCritical:c}):HA({impact:r,draggables:i,afterCritical:c})},Sf=(function(e){var t=JA(e),r=e.droppable,s=r?_g(r,t):t;return s}),Pj=(function(e,t){var r=Zn(t,e.scroll.initial),s=Ll(r),o=$s({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),i={frame:o,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:s}}};return i});function Gb(e,t){return e.map(function(r){return t[r]})}function YA(e,t){for(var r=0;r<t.length;r++){var s=t[r].visible[e];if(s)return s}return null}var ZA=(function(e){var t=e.impact,r=e.viewport,s=e.destination,o=e.draggables,i=e.maxScrollChange,c=Pj(r,an(r.scroll.current,i)),d=s.frame?Nx(s,an(s.frame.scroll.current,i)):s,h=t.displaced,f=od({afterDragging:Gb(h.all,o),destination:s,displacedBy:t.displacedBy,viewport:c.frame,last:h,forceShouldAnimate:!1}),p=od({afterDragging:Gb(h.all,o),destination:d,displacedBy:t.displacedBy,viewport:r.frame,last:h,forceShouldAnimate:!1}),v={},x={},w=[h,f,p];h.all.forEach(function(S){var C=YA(S,w);if(C){x[S]=C;return}v[S]=!0});var y=jt({},t,{displaced:{all:h.all,invisible:v,visible:x}});return y}),XA=(function(e,t){return an(e.scroll.diff.displacement,t)}),Ax=(function(e){var t=e.pageBorderBoxCenter,r=e.draggable,s=e.viewport,o=XA(s,t),i=Zn(o,r.page.borderBox.center);return an(r.client.borderBox.center,i)}),Mj=(function(e){var t=e.draggable,r=e.destination,s=e.newPageBorderBoxCenter,o=e.viewport,i=e.withDroppableDisplacement,c=e.onlyOnMainAxis,d=c===void 0?!1:c,h=Zn(s,t.page.borderBox.center),f=Nd(t.page.borderBox,h),p={target:f,destination:r,withDroppableDisplacement:i,viewport:o};return d?$A(p):Rj(p)}),e8=(function(e){var t=e.isMovingForward,r=e.draggable,s=e.destination,o=e.draggables,i=e.previousImpact,c=e.viewport,d=e.previousPageBorderBoxCenter,h=e.previousClientSelection,f=e.afterCritical;if(!s.isEnabled)return null;var p=$l(s.descriptor.id,o),v=Fl(r,s),x=IA({isMovingForward:t,draggable:r,destination:s,insideDestination:p,previousImpact:i})||GA({isMovingForward:t,isInHomeList:v,draggable:r,draggables:o,destination:s,insideDestination:p,previousImpact:i,viewport:c,afterCritical:f});if(!x)return null;var w=Sf({impact:x,draggable:r,droppable:s,draggables:o,afterCritical:f}),y=Mj({draggable:r,destination:s,newPageBorderBoxCenter:w,viewport:c.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(y){var S=Ax({pageBorderBoxCenter:w,draggable:r,viewport:c});return{clientSelection:S,impact:x,scrollJumpRequest:null}}var C=Zn(w,d),T=ZA({impact:x,viewport:c,destination:s,draggables:o,maxScrollChange:C});return{clientSelection:h,impact:T,scrollJumpRequest:C}}),kn=function(t){var r=t.subject.active;return r||et(),r},t8=(function(e){var t=e.isMovingForward,r=e.pageBorderBoxCenter,s=e.source,o=e.droppables,i=e.viewport,c=s.subject.active;if(!c)return null;var d=s.axis,h=ps(c[d.start],c[d.end]),f=wf(o).filter(function(v){return v!==s}).filter(function(v){return v.isEnabled}).filter(function(v){return!!v.subject.active}).filter(function(v){return Tj(i.frame)(kn(v))}).filter(function(v){var x=kn(v);return t?c[d.crossAxisEnd]<x[d.crossAxisEnd]:x[d.crossAxisStart]<c[d.crossAxisStart]}).filter(function(v){var x=kn(v),w=ps(x[d.start],x[d.end]);return h(x[d.start])||h(x[d.end])||w(c[d.start])||w(c[d.end])}).sort(function(v,x){var w=kn(v)[d.crossAxisStart],y=kn(x)[d.crossAxisStart];return t?w-y:y-w}).filter(function(v,x,w){return kn(v)[d.crossAxisStart]===kn(w[0])[d.crossAxisStart]});if(!f.length)return null;if(f.length===1)return f[0];var p=f.filter(function(v){var x=ps(kn(v)[d.start],kn(v)[d.end]);return x(r[d.line])});return p.length===1?p[0]:p.length>1?p.sort(function(v,x){return kn(v)[d.start]-kn(x)[d.start]})[0]:f.sort(function(v,x){var w=Fb(r,Bb(kn(v))),y=Fb(r,Bb(kn(x)));return w!==y?w-y:kn(v)[d.start]-kn(x)[d.start]})[0]}),Vb=function(t,r){var s=t.page.borderBox.center;return _i(t.descriptor.id,r)?Zn(s,r.displacedBy.point):s},r8=function(t,r){var s=t.page.borderBox;return _i(t.descriptor.id,r)?Nd(s,Ll(r.displacedBy.point)):s},n8=(function(e){var t=e.pageBorderBoxCenter,r=e.viewport,s=e.destination,o=e.insideDestination,i=e.afterCritical,c=o.filter(function(d){return Rj({target:r8(d,i),destination:s,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(d,h){var f=ad(t,_g(s,Vb(d,i))),p=ad(t,_g(s,Vb(h,i)));return f<p?-1:p<f?1:d.descriptor.index-h.descriptor.index});return c[0]||null}),Sd=Vr(function(t,r){var s=r[t.line];return{value:s,point:So(t.line,s)}}),s8=function(t,r,s){var o=t.axis;if(t.descriptor.mode==="virtual")return So(o.line,r[o.line]);var i=t.subject.page.contentBox[o.size],c=$l(t.descriptor.id,s),d=c.reduce(function(p,v){return p+v.client.marginBox[o.size]},0),h=d+r[o.line],f=h-i;return f<=0?null:So(o.line,f)},Lj=function(t,r){return jt({},t,{scroll:jt({},t.scroll,{max:r})})},$j=function(t,r,s){var o=t.frame;Fl(r,t)&&et(),t.subject.withPlaceholder&&et();var i=Sd(t.axis,r.displaceBy).point,c=s8(t,i,s),d={placeholderSize:i,increasedBy:c,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!o){var h=_l({page:t.subject.page,withPlaceholder:d,axis:t.axis,frame:t.frame});return jt({},t,{subject:h})}var f=c?an(o.scroll.max,c):o.scroll.max,p=Lj(o,f),v=_l({page:t.subject.page,withPlaceholder:d,axis:t.axis,frame:p});return jt({},t,{subject:v,frame:p})},a8=function(t){var r=t.subject.withPlaceholder;r||et();var s=t.frame;if(!s){var o=_l({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return jt({},t,{subject:o})}var i=r.oldFrameMaxScroll;i||et();var c=Lj(s,i),d=_l({page:t.subject.page,axis:t.axis,frame:c,withPlaceholder:null});return jt({},t,{subject:d,frame:c})},i8=(function(e){var t=e.previousPageBorderBoxCenter,r=e.moveRelativeTo,s=e.insideDestination,o=e.draggable,i=e.draggables,c=e.destination,d=e.viewport,h=e.afterCritical;if(!r){if(s.length)return null;var f={displaced:id,displacedBy:Ij,at:{type:"REORDER",destination:{droppableId:c.descriptor.id,index:0}}},p=Sf({impact:f,draggable:o,droppable:c,draggables:i,afterCritical:h}),v=Fl(o,c)?c:$j(c,o,i),x=Mj({draggable:o,destination:v,newPageBorderBoxCenter:p,viewport:d.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return x?f:null}var w=t[c.axis.line]<=r.page.borderBox.center[c.axis.line],y=(function(){var C=r.descriptor.index;return r.descriptor.id===o.descriptor.id||w?C:C+1})(),S=Sd(c.axis,o.displaceBy);return Vh({draggable:o,insideDestination:s,destination:c,viewport:d,displacedBy:S,last:id,index:y})}),o8=(function(e){var t=e.isMovingForward,r=e.previousPageBorderBoxCenter,s=e.draggable,o=e.isOver,i=e.draggables,c=e.droppables,d=e.viewport,h=e.afterCritical,f=t8({isMovingForward:t,pageBorderBoxCenter:r,source:o,droppables:c,viewport:d});if(!f)return null;var p=$l(f.descriptor.id,i),v=n8({pageBorderBoxCenter:r,viewport:d,destination:f,insideDestination:p,afterCritical:h}),x=i8({previousPageBorderBoxCenter:r,destination:f,draggable:s,draggables:i,moveRelativeTo:v,insideDestination:p,viewport:d,afterCritical:h});if(!x)return null;var w=Sf({impact:x,draggable:s,droppable:f,draggables:i,afterCritical:h}),y=Ax({pageBorderBoxCenter:w,draggable:s,viewport:d});return{clientSelection:y,impact:x,scrollJumpRequest:null}}),ts=(function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null}),l8=function(t,r){var s=ts(t);return s?r[s]:null},c8=(function(e){var t=e.state,r=e.type,s=l8(t.impact,t.dimensions.droppables),o=!!s,i=t.dimensions.droppables[t.critical.droppable.id],c=s||i,d=c.axis.direction,h=d==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||d==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(h&&!o)return null;var f=r==="MOVE_DOWN"||r==="MOVE_RIGHT",p=t.dimensions.draggables[t.critical.draggable.id],v=t.current.page.borderBoxCenter,x=t.dimensions,w=x.draggables,y=x.droppables;return h?e8({isMovingForward:f,previousPageBorderBoxCenter:v,draggable:p,destination:c,draggables:w,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):o8({isMovingForward:f,previousPageBorderBoxCenter:v,draggable:p,isOver:c,draggables:w,droppables:y,viewport:t.viewport,afterCritical:t.afterCritical})});function ho(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function Fj(e){var t=ps(e.top,e.bottom),r=ps(e.left,e.right);return function(o){return t(o.y)&&r(o.x)}}function d8(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function u8(e){var t=e.pageBorderBox,r=e.draggable,s=e.candidates,o=r.page.borderBox.center,i=s.map(function(c){var d=c.axis,h=So(c.axis.line,t.center[d.line],c.page.borderBox.center[d.crossAxisLine]);return{id:c.descriptor.id,distance:ad(o,h)}}).sort(function(c,d){return d.distance-c.distance});return i[0]?i[0].id:null}function h8(e){var t=e.pageBorderBox,r=e.draggable,s=e.droppables,o=wf(s).filter(function(i){if(!i.isEnabled)return!1;var c=i.subject.active;if(!c||!d8(t,c))return!1;if(Fj(c)(t.center))return!0;var d=i.axis,h=c.center[d.crossAxisLine],f=t[d.crossAxisStart],p=t[d.crossAxisEnd],v=ps(c[d.crossAxisStart],c[d.crossAxisEnd]),x=v(f),w=v(p);return!x&&!w?!0:x?f<h:p>h});return o.length?o.length===1?o[0].descriptor.id:u8({pageBorderBox:t,draggable:r,candidates:o}):null}var Bj=function(t,r){return $s(Nd(t,r))},f8=(function(e,t){var r=e.frame;return r?Bj(t,r.scroll.diff.value):t});function Uj(e){var t=e.displaced,r=e.id;return!!(t.visible[r]||t.invisible[r])}function m8(e){var t=e.draggable,r=e.closest,s=e.inHomeList;return r?s&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var p8=(function(e){var t=e.pageBorderBoxWithDroppableScroll,r=e.draggable,s=e.destination,o=e.insideDestination,i=e.last,c=e.viewport,d=e.afterCritical,h=s.axis,f=Sd(s.axis,r.displaceBy),p=f.value,v=t[h.start],x=t[h.end],w=Nf(r,o),y=Ti(w,function(C){var T=C.descriptor.id,A=C.page.borderBox.center[h.line],I=_i(T,d),O=Uj({displaced:i,id:T});return I?O?x<=A:v<A-p:O?x<=A+p:v<A}),S=m8({draggable:r,closest:y,inHomeList:Fl(r,s)});return Vh({draggable:r,insideDestination:o,destination:s,viewport:c,last:i,displacedBy:f,index:S})}),g8=4,x8=(function(e){var t=e.draggable,r=e.pageBorderBoxWithDroppableScroll,s=e.previousImpact,o=e.destination,i=e.insideDestination,c=e.afterCritical;if(!o.isCombineEnabled)return null;var d=o.axis,h=Sd(o.axis,t.displaceBy),f=h.value,p=r[d.start],v=r[d.end],x=Nf(t,i),w=Ti(x,function(S){var C=S.descriptor.id,T=S.page.borderBox,A=T[d.size],I=A/g8,O=_i(C,c),P=Uj({displaced:s.displaced,id:C});return O?P?v>T[d.start]+I&&v<T[d.end]-I:p>T[d.start]-f+I&&p<T[d.end]-f-I:P?v>T[d.start]+f+I&&v<T[d.end]+f-I:p>T[d.start]+I&&p<T[d.end]-I});if(!w)return null;var y={displacedBy:h,displaced:s.displaced,at:{type:"COMBINE",combine:{draggableId:w.descriptor.id,droppableId:o.descriptor.id}}};return y}),zj=(function(e){var t=e.pageOffset,r=e.draggable,s=e.draggables,o=e.droppables,i=e.previousImpact,c=e.viewport,d=e.afterCritical,h=Bj(r.page.borderBox,t),f=h8({pageBorderBox:h,draggable:r,droppables:o});if(!f)return TA;var p=o[f],v=$l(p.descriptor.id,s),x=f8(p,h);return x8({pageBorderBoxWithDroppableScroll:x,draggable:r,previousImpact:i,destination:p,insideDestination:v,afterCritical:d})||p8({pageBorderBoxWithDroppableScroll:x,draggable:r,destination:p,insideDestination:v,last:i.displaced,viewport:c,afterCritical:d})}),Ix=(function(e,t){var r;return jt({},e,(r={},r[t.descriptor.id]=t,r))}),v8=function(t){var r=t.previousImpact,s=t.impact,o=t.droppables,i=ts(r),c=ts(s);if(!i||i===c)return o;var d=o[i];if(!d.subject.withPlaceholder)return o;var h=a8(d);return Ix(o,h)},y8=(function(e){var t=e.draggable,r=e.draggables,s=e.droppables,o=e.previousImpact,i=e.impact,c=v8({previousImpact:o,impact:i,droppables:s}),d=ts(i);if(!d)return c;var h=s[d];if(Fl(t,h)||h.subject.withPlaceholder)return c;var f=$j(h,t,r);return Ix(c,f)}),qc=(function(e){var t=e.state,r=e.clientSelection,s=e.dimensions,o=e.viewport,i=e.impact,c=e.scrollJumpRequest,d=o||t.viewport,h=s||t.dimensions,f=r||t.current.client.selection,p=Zn(f,t.initial.client.selection),v={offset:p,selection:f,borderBoxCenter:an(t.initial.client.borderBoxCenter,p)},x={selection:an(v.selection,d.scroll.current),borderBoxCenter:an(v.borderBoxCenter,d.scroll.current),offset:an(v.offset,d.scroll.diff.value)},w={client:v,page:x};if(t.phase==="COLLECTING")return jt({phase:"COLLECTING"},t,{dimensions:h,viewport:d,current:w});var y=h.draggables[t.critical.draggable.id],S=i||zj({pageOffset:x.offset,draggable:y,draggables:h.draggables,droppables:h.droppables,previousImpact:t.impact,viewport:d,afterCritical:t.afterCritical}),C=y8({draggable:y,impact:S,previousImpact:t.impact,draggables:h.draggables,droppables:h.droppables}),T=jt({},t,{current:w,dimensions:{draggables:h.draggables,droppables:C},impact:S,viewport:d,scrollJumpRequest:c||null,forceShouldAnimate:c?!1:null});return T});function b8(e,t){return e.map(function(r){return t[r]})}var qj=(function(e){var t=e.impact,r=e.viewport,s=e.draggables,o=e.destination,i=e.forceShouldAnimate,c=t.displaced,d=b8(c.all,s),h=od({afterDragging:d,destination:o,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:i,last:c});return jt({},t,{displaced:h})}),Gj=(function(e){var t=e.impact,r=e.draggable,s=e.droppable,o=e.draggables,i=e.viewport,c=e.afterCritical,d=Sf({impact:t,draggable:r,draggables:o,droppable:s,afterCritical:c});return Ax({pageBorderBoxCenter:d,draggable:r,viewport:i})}),Vj=(function(e){var t=e.state,r=e.dimensions,s=e.viewport;t.movementMode!=="SNAP"&&et();var o=t.impact,i=s||t.viewport,c=r||t.dimensions,d=c.draggables,h=c.droppables,f=d[t.critical.draggable.id],p=ts(o);p||et();var v=h[p],x=qj({impact:o,viewport:i,destination:v,draggables:d}),w=Gj({impact:x,draggable:f,droppable:v,draggables:d,viewport:i,afterCritical:t.afterCritical});return qc({impact:x,clientSelection:w,state:t,dimensions:c,viewport:i})}),w8=(function(e){return{index:e.index,droppableId:e.droppableId}}),Hj=(function(e){var t=e.draggable,r=e.home,s=e.draggables,o=e.viewport,i=Sd(r.axis,t.displaceBy),c=$l(r.descriptor.id,s),d=c.indexOf(t);d===-1&&et();var h=c.slice(d+1),f=h.reduce(function(w,y){return w[y.descriptor.id]=!0,w},{}),p={inVirtualList:r.descriptor.mode==="virtual",displacedBy:i,effected:f},v=od({afterDragging:h,destination:r,displacedBy:i,last:null,viewport:o.frame,forceShouldAnimate:!1}),x={displaced:v,displacedBy:i,at:{type:"REORDER",destination:w8(t.descriptor)}};return{impact:x,afterCritical:p}}),j8=(function(e,t){return{draggables:e.draggables,droppables:Ix(e.droppables,t)}}),N8=(function(e){var t=e.draggable,r=e.offset,s=e.initialWindowScroll,o=Bh(t.client,r),i=Uh(o,s),c=jt({},t,{placeholder:jt({},t.placeholder,{client:o}),client:o,page:i});return c}),S8=(function(e){var t=e.frame;return t||et(),t}),k8=(function(e){var t=e.additions,r=e.updatedDroppables,s=e.viewport,o=s.scroll.diff.value;return t.map(function(i){var c=i.descriptor.droppableId,d=r[c],h=S8(d),f=h.scroll.diff.value,p=an(o,f),v=N8({draggable:i,offset:p,initialWindowScroll:s.scroll.initial});return v})}),_8=(function(e){var t=e.state,r=e.published,s=r.modified.map(function(I){var O=t.dimensions.droppables[I.droppableId],P=Nx(O,I.scroll);return P}),o=jt({},t.dimensions.droppables,{},Ej(s)),i=Aj(k8({additions:r.additions,updatedDroppables:o,viewport:t.viewport})),c=jt({},t.dimensions.draggables,{},i);r.removals.forEach(function(I){delete c[I]});var d={droppables:o,draggables:c},h=ts(t.impact),f=h?d.droppables[h]:null,p=d.draggables[t.critical.draggable.id],v=d.droppables[t.critical.droppable.id],x=Hj({draggable:p,home:v,draggables:c,viewport:t.viewport}),w=x.impact,y=x.afterCritical,S=f&&f.isCombineEnabled?t.impact:w,C=zj({pageOffset:t.current.page.offset,draggable:d.draggables[t.critical.draggable.id],draggables:d.draggables,droppables:d.droppables,previousImpact:S,viewport:t.viewport,afterCritical:y}),T=jt({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:C,onLiftImpact:w,dimensions:d,afterCritical:y,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return T;var A=jt({phase:"DROP_PENDING"},T,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return A}),Cg=function(t){return t.movementMode==="SNAP"},kp=function(t,r,s){var o=j8(t.dimensions,r);return!Cg(t)||s?qc({state:t,dimensions:o}):Vj({state:t,dimensions:o})};function _p(e){return e.isDragging&&e.movementMode==="SNAP"?jt({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var Hb={phase:"IDLE",completed:null,shouldFlush:!1},C8=(function(e,t){if(e===void 0&&(e=Hb),t.type==="FLUSH")return jt({},Hb,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&et();var r=t.payload,s=r.critical,o=r.clientSelection,i=r.viewport,c=r.dimensions,d=r.movementMode,h=c.draggables[s.draggable.id],f=c.droppables[s.droppable.id],p={selection:o,borderBoxCenter:h.client.borderBox.center,offset:Wr},v={client:p,page:{selection:an(p.selection,i.scroll.initial),borderBoxCenter:an(p.selection,i.scroll.initial),offset:an(p.selection,i.scroll.diff.value)}},x=wf(c.droppables).every(function(ce){return!ce.isFixedOnPage}),w=Hj({draggable:h,home:f,draggables:c.draggables,viewport:i}),y=w.impact,S=w.afterCritical,C={phase:"DRAGGING",isDragging:!0,critical:s,movementMode:d,dimensions:c,initial:v,current:v,isWindowScrollAllowed:x,impact:y,afterCritical:S,onLiftImpact:y,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null};return C}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&et();var T=jt({phase:"COLLECTING"},e,{phase:"COLLECTING"});return T}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||et(),_8({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;ho(e)||et();var A=t.payload.client;return Si(A,e.current.client.selection)?e:qc({state:e,clientSelection:A,impact:Cg(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return _p(e);ho(e)||et();var I=t.payload,O=I.id,P=I.newScroll,$=e.dimensions.droppables[O];if(!$)return e;var F=Nx($,P);return kp(e,F,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;ho(e)||et();var te=t.payload,ne=te.id,Ee=te.isEnabled,Se=e.dimensions.droppables[ne];Se||et(),Se.isEnabled===Ee&&et();var De=jt({},Se,{isEnabled:Ee});return kp(e,De,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;ho(e)||et();var U=t.payload,H=U.id,ye=U.isCombineEnabled,R=e.dimensions.droppables[H];R||et(),R.isCombineEnabled===ye&&et();var de=jt({},R,{isCombineEnabled:ye});return kp(e,de,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;ho(e)||et(),e.isWindowScrollAllowed||et();var V=t.payload.newScroll;if(Si(e.viewport.scroll.current,V))return _p(e);var he=Pj(e.viewport,V);return Cg(e)?Vj({state:e,viewport:he}):qc({state:e,viewport:he})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!ho(e))return e;var K=t.payload.maxScroll;if(Si(K,e.viewport.scroll.max))return e;var B=jt({},e.viewport,{scroll:jt({},e.viewport.scroll,{max:K})});return jt({phase:"DRAGGING"},e,{viewport:B})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&et();var re=c8({state:e,type:t.type});return re?qc({state:e,impact:re.impact,clientSelection:re.clientSelection,scrollJumpRequest:re.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var ae=t.payload.reason;e.phase!=="COLLECTING"&&et();var z=jt({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:ae});return z}if(t.type==="DROP_ANIMATE"){var ge=t.payload,Pe=ge.completed,we=ge.dropDuration,Q=ge.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||et();var ke={phase:"DROP_ANIMATING",completed:Pe,dropDuration:we,newHomeClientOffset:Q,dimensions:e.dimensions};return ke}if(t.type==="DROP_COMPLETE"){var q=t.payload.completed;return{phase:"IDLE",completed:q,shouldFlush:!1}}return e}),E8=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},A8=function(t){return{type:"LIFT",payload:t}},I8=function(t){return{type:"INITIAL_PUBLISH",payload:t}},T8=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},D8=function(){return{type:"COLLECTION_STARTING",payload:null}},R8=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},O8=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},P8=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},Wj=function(t){return{type:"MOVE",payload:t}},M8=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},L8=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},$8=function(){return{type:"MOVE_UP",payload:null}},F8=function(){return{type:"MOVE_DOWN",payload:null}},B8=function(){return{type:"MOVE_RIGHT",payload:null}},U8=function(){return{type:"MOVE_LEFT",payload:null}},Tx=function(){return{type:"FLUSH",payload:null}},z8=function(t){return{type:"DROP_ANIMATE",payload:t}},Dx=function(t){return{type:"DROP_COMPLETE",payload:t}},Kj=function(t){return{type:"DROP",payload:t}},q8=function(t){return{type:"DROP_PENDING",payload:t}},Qj=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},G8=(function(e){return function(t){var r=t.getState,s=t.dispatch;return function(o){return function(i){if(i.type!=="LIFT"){o(i);return}var c=i.payload,d=c.id,h=c.clientSelection,f=c.movementMode,p=r();p.phase==="DROP_ANIMATING"&&s(Dx({completed:p.completed})),r().phase!=="IDLE"&&et(),s(Tx()),s(E8({draggableId:d,movementMode:f}));var v={shouldPublishImmediately:f==="SNAP"},x={draggableId:d,scrollOptions:v},w=e.startPublishing(x),y=w.critical,S=w.dimensions,C=w.viewport;s(I8({critical:y,dimensions:S,clientSelection:h,movementMode:f,viewport:C}))}}}}),V8=(function(e){return function(){return function(t){return function(r){r.type==="INITIAL_PUBLISH"&&e.dragging(),r.type==="DROP_ANIMATE"&&e.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&e.resting(),t(r)}}}}),Rx={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},ld={opacity:{drop:0,combining:.7},scale:{drop:.75}},Ox={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},oo=Ox.outOfTheWay+"s "+Rx.outOfTheWay,Gc={fluid:"opacity "+oo,snap:"transform "+oo+", opacity "+oo,drop:function(t){var r=t+"s "+Rx.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+oo,placeholder:"height "+oo+", width "+oo+", margin "+oo},Wb=function(t){return Si(t,Wr)?null:"translate("+t.x+"px, "+t.y+"px)"},Eg={moveTo:Wb,drop:function(t,r){var s=Wb(t);return s?r?s+" scale("+ld.scale.drop+")":s:null}},Ag=Ox.minDropTime,Jj=Ox.maxDropTime,H8=Jj-Ag,Kb=1500,W8=.6,K8=(function(e){var t=e.current,r=e.destination,s=e.reason,o=ad(t,r);if(o<=0)return Ag;if(o>=Kb)return Jj;var i=o/Kb,c=Ag+H8*i,d=s==="CANCEL"?c*W8:c;return Number(d.toFixed(2))}),Q8=(function(e){var t=e.impact,r=e.draggable,s=e.dimensions,o=e.viewport,i=e.afterCritical,c=s.draggables,d=s.droppables,h=ts(t),f=h?d[h]:null,p=d[r.descriptor.droppableId],v=Gj({impact:t,draggable:r,draggables:c,afterCritical:i,droppable:f||p,viewport:o}),x=Zn(v,r.client.borderBox.center);return x}),J8=(function(e){var t=e.draggables,r=e.reason,s=e.lastImpact,o=e.home,i=e.viewport,c=e.onLiftImpact;if(!s.at||r!=="DROP"){var d=qj({draggables:t,impact:c,destination:o,viewport:i,forceShouldAnimate:!0});return{impact:d,didDropInsideDroppable:!1}}if(s.at.type==="REORDER")return{impact:s,didDropInsideDroppable:!0};var h=jt({},s,{displaced:id});return{impact:h,didDropInsideDroppable:!0}}),Y8=(function(e){var t=e.getState,r=e.dispatch;return function(s){return function(o){if(o.type!=="DROP"){s(o);return}var i=t(),c=o.payload.reason;if(i.phase==="COLLECTING"){r(q8({reason:c}));return}if(i.phase!=="IDLE"){var d=i.phase==="DROP_PENDING"&&i.isWaiting;d&&et(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||et();var h=i.critical,f=i.dimensions,p=f.draggables[i.critical.draggable.id],v=J8({reason:c,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),x=v.impact,w=v.didDropInsideDroppable,y=w?kx(x):null,S=w?jf(x):null,C={index:h.draggable.index,droppableId:h.droppable.id},T={draggableId:p.descriptor.id,type:p.descriptor.type,source:C,reason:c,mode:i.movementMode,destination:y,combine:S},A=Q8({impact:x,draggable:p,dimensions:f,viewport:i.viewport,afterCritical:i.afterCritical}),I={critical:i.critical,afterCritical:i.afterCritical,result:T,impact:x},O=!Si(i.current.client.offset,A)||!!T.combine;if(!O){r(Dx({completed:I}));return}var P=K8({current:i.current.client.offset,destination:A,reason:c}),$={newHomeClientOffset:A,dropDuration:P,completed:I};r(z8($))}}}}),Yj=(function(){return{x:window.pageXOffset,y:window.pageYOffset}});function Z8(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||e()}}}function X8(e){var t=e.onWindowScroll;function r(){t(Yj())}var s=sd(r),o=Z8(s),i=Ni;function c(){return i!==Ni}function d(){c()&&et(),i=ms(window,[o])}function h(){c()||et(),s.cancel(),i(),i=Ni}return{start:d,stop:h,isActive:c}}var eI=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},tI=(function(e){var t=X8({onWindowScroll:function(s){e.dispatch(M8({newScroll:s}))}});return function(r){return function(s){!t.isActive()&&s.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&eI(s)&&t.stop(),r(s)}}}),rI=(function(e){var t=!1,r=!1,s=setTimeout(function(){r=!0}),o=function(c){t||r||(t=!0,e(c),clearTimeout(s))};return o.wasCalled=function(){return t},o}),nI=(function(){var e=[],t=function(i){var c=Sx(e,function(f){return f.timerId===i});c===-1&&et();var d=e.splice(c,1),h=d[0];h.callback()},r=function(i){var c=setTimeout(function(){return t(c)}),d={timerId:c,callback:i};e.push(d)},s=function(){if(e.length){var i=[].concat(e);e.length=0,i.forEach(function(c){clearTimeout(c.timerId),c.callback()})}};return{add:r,flush:s}}),sI=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.droppableId===r.droppableId&&t.index===r.index},aI=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.draggableId===r.draggableId&&t.droppableId===r.droppableId},iI=function(t,r){if(t===r)return!0;var s=t.draggable.id===r.draggable.id&&t.draggable.droppableId===r.draggable.droppableId&&t.draggable.type===r.draggable.type&&t.draggable.index===r.draggable.index,o=t.droppable.id===r.droppable.id&&t.droppable.type===r.droppable.type;return s&&o},Oc=function(t,r){r()},Ju=function(t,r){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:r}},Cp=function(t,r,s,o){if(!t){s(o(r));return}var i=rI(s),c={announce:i};t(r,c),i.wasCalled()||s(o(r))},oI=(function(e,t){var r=nI(),s=null,o=function(x,w){s&&et(),Oc("onBeforeCapture",function(){var y=e().onBeforeCapture;if(y){var S={draggableId:x,mode:w};y(S)}})},i=function(x,w){s&&et(),Oc("onBeforeDragStart",function(){var y=e().onBeforeDragStart;y&&y(Ju(x,w))})},c=function(x,w){s&&et();var y=Ju(x,w);s={mode:w,lastCritical:x,lastLocation:y.source,lastCombine:null},r.add(function(){Oc("onDragStart",function(){return Cp(e().onDragStart,y,t,ph.onDragStart)})})},d=function(x,w){var y=kx(w),S=jf(w);s||et();var C=!iI(x,s.lastCritical);C&&(s.lastCritical=x);var T=!sI(s.lastLocation,y);T&&(s.lastLocation=y);var A=!aI(s.lastCombine,S);if(A&&(s.lastCombine=S),!(!C&&!T&&!A)){var I=jt({},Ju(x,s.mode),{combine:S,destination:y});r.add(function(){Oc("onDragUpdate",function(){return Cp(e().onDragUpdate,I,t,ph.onDragUpdate)})})}},h=function(){s||et(),r.flush()},f=function(x){s||et(),s=null,Oc("onDragEnd",function(){return Cp(e().onDragEnd,x,t,ph.onDragEnd)})},p=function(){if(s){var x=jt({},Ju(s.lastCritical,s.mode),{combine:null,destination:null,reason:"CANCEL"});f(x)}};return{beforeCapture:o,beforeStart:i,start:c,update:d,flush:h,drop:f,abort:p}}),lI=(function(e,t){var r=oI(e,t);return function(s){return function(o){return function(i){if(i.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(i.type==="INITIAL_PUBLISH"){var c=i.payload.critical;r.beforeStart(c,i.payload.movementMode),o(i),r.start(c,i.payload.movementMode);return}if(i.type==="DROP_COMPLETE"){var d=i.payload.completed.result;r.flush(),o(i),r.drop(d);return}if(o(i),i.type==="FLUSH"){r.abort();return}var h=s.getState();h.phase==="DRAGGING"&&r.update(h.critical,h.impact)}}}}),cI=(function(e){return function(t){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){t(r);return}var s=e.getState();s.phase!=="DROP_ANIMATING"&&et(),e.dispatch(Dx({completed:s.completed}))}}}),dI=(function(e){var t=null,r=null;function s(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return function(o){return function(i){if((i.type==="FLUSH"||i.type==="DROP_COMPLETE"||i.type==="DROP_ANIMATION_FINISHED")&&s(),o(i),i.type==="DROP_ANIMATE"){var c={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var h=e.getState();h.phase==="DROP_ANIMATING"&&e.dispatch(Qj())}};r=requestAnimationFrame(function(){r=null,t=ms(window,[c])})}}}}),uI=(function(e){return function(){return function(t){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&e.stopPublishing(),t(r)}}}}),hI=(function(e){var t=!1;return function(){return function(r){return function(s){if(s.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(s.payload.critical.draggable.id),r(s),e.tryRestoreFocusRecorded();return}if(r(s),!!t){if(s.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(s.type==="DROP_COMPLETE"){t=!1;var o=s.payload.completed.result;o.combine&&e.tryShiftRecord(o.draggableId,o.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}}),fI=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},mI=(function(e){return function(t){return function(r){return function(s){if(fI(s)){e.stop(),r(s);return}if(s.type==="INITIAL_PUBLISH"){r(s);var o=t.getState();o.phase!=="DRAGGING"&&et(),e.start(o);return}r(s),e.scroll(t.getState())}}}}),pI=(function(e){return function(t){return function(r){if(t(r),r.type==="PUBLISH_WHILE_DRAGGING"){var s=e.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||e.dispatch(Kj({reason:s.reason})))}}}}),gI=fj,xI=(function(e){var t=e.dimensionMarshal,r=e.focusMarshal,s=e.styleMarshal,o=e.getResponders,i=e.announce,c=e.autoScroller;return hj(C8,gI(w9(V8(s),uI(t),G8(t),Y8,cI,dI,pI,mI(c),tI,hI(r),lI(o,i))))}),Ep=function(){return{additions:{},removals:{},modified:{}}};function vI(e){var t=e.registry,r=e.callbacks,s=Ep(),o=null,i=function(){o||(r.collectionStarting(),o=requestAnimationFrame(function(){o=null;var p=s,v=p.additions,x=p.removals,w=p.modified,y=Object.keys(v).map(function(T){return t.draggable.getById(T).getDimension(Wr)}).sort(function(T,A){return T.descriptor.index-A.descriptor.index}),S=Object.keys(w).map(function(T){var A=t.droppable.getById(T),I=A.callbacks.getScrollWhileDragging();return{droppableId:T,scroll:I}}),C={additions:y,removals:Object.keys(x),modified:S};s=Ep(),r.publish(C)}))},c=function(p){var v=p.descriptor.id;s.additions[v]=p,s.modified[p.descriptor.droppableId]=!0,s.removals[v]&&delete s.removals[v],i()},d=function(p){var v=p.descriptor;s.removals[v.id]=!0,s.modified[v.droppableId]=!0,s.additions[v.id]&&delete s.additions[v.id],i()},h=function(){o&&(cancelAnimationFrame(o),o=null,s=Ep())};return{add:c,remove:d,stop:h}}var Zj=(function(e){var t=e.scrollHeight,r=e.scrollWidth,s=e.height,o=e.width,i=Zn({x:r,y:t},{x:o,y:s}),c={x:Math.max(0,i.x),y:Math.max(0,i.y)};return c}),Xj=(function(){var e=document.documentElement;return e||et(),e}),eN=(function(){var e=Xj(),t=Zj({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t}),yI=(function(){var e=Yj(),t=eN(),r=e.y,s=e.x,o=Xj(),i=o.clientWidth,c=o.clientHeight,d=s+i,h=r+c,f=$s({top:r,left:s,right:d,bottom:h}),p={frame:f,scroll:{initial:e,current:e,max:t,diff:{value:Wr,displacement:Wr}}};return p}),bI=(function(e){var t=e.critical,r=e.scrollOptions,s=e.registry,o=yI(),i=o.scroll.current,c=t.droppable,d=s.droppable.getAllByType(c.type).map(function(v){return v.callbacks.getDimensionAndWatchScroll(i,r)}),h=s.draggable.getAllByType(t.draggable.type).map(function(v){return v.getDimension(i)}),f={draggables:Aj(h),droppables:Ej(d)},p={dimensions:f,critical:t,viewport:o};return p});function Qb(e,t,r){if(r.descriptor.id===t.id||r.descriptor.type!==t.type)return!1;var s=e.droppable.getById(r.descriptor.droppableId);return s.descriptor.mode==="virtual"}var wI=(function(e,t){var r=null,s=vI({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),o=function(w,y){e.droppable.exists(w)||et(),r&&t.updateDroppableIsEnabled({id:w,isEnabled:y})},i=function(w,y){r&&(e.droppable.exists(w)||et(),t.updateDroppableIsCombineEnabled({id:w,isCombineEnabled:y}))},c=function(w,y){r&&(e.droppable.exists(w)||et(),t.updateDroppableScroll({id:w,newScroll:y}))},d=function(w,y){r&&e.droppable.getById(w).callbacks.scroll(y)},h=function(){if(r){s.stop();var w=r.critical.droppable;e.droppable.getAllByType(w.type).forEach(function(y){return y.callbacks.dragStopped()}),r.unsubscribe(),r=null}},f=function(w){r||et();var y=r.critical.draggable;w.type==="ADDITION"&&Qb(e,y,w.value)&&s.add(w.value),w.type==="REMOVAL"&&Qb(e,y,w.value)&&s.remove(w.value)},p=function(w){r&&et();var y=e.draggable.getById(w.draggableId),S=e.droppable.getById(y.descriptor.droppableId),C={draggable:y.descriptor,droppable:S.descriptor},T=e.subscribe(f);return r={critical:C,unsubscribe:T},bI({critical:C,registry:e,scrollOptions:w.scrollOptions})},v={updateDroppableIsEnabled:o,updateDroppableIsCombineEnabled:i,scrollDroppable:d,updateDroppableScroll:c,startPublishing:p,stopPublishing:h};return v}),tN=(function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"}),jI=(function(e){window.scrollBy(e.x,e.y)}),NI=Vr(function(e){return wf(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),SI=function(t,r){var s=Ti(NI(r),function(o){return o.frame||et(),Fj(o.frame.pageMarginBox)(t)});return s},kI=(function(e){var t=e.center,r=e.destination,s=e.droppables;if(r){var o=s[r];return o.frame?o:null}var i=SI(t,s);return i}),ki={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},_I=(function(e,t){var r=e[t.size]*ki.startFromPercentage,s=e[t.size]*ki.maxScrollAtPercentage,o={startScrollingFrom:r,maxScrollValueAt:s};return o}),rN=(function(e){var t=e.startOfRange,r=e.endOfRange,s=e.current,o=r-t;if(o===0)return 0;var i=s-t,c=i/o;return c}),Px=1,CI=(function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return ki.maxPixelScroll;if(e===t.startScrollingFrom)return Px;var r=rN({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),s=1-r,o=ki.maxPixelScroll*ki.ease(s);return Math.ceil(o)}),Jb=ki.durationDampening.accelerateAt,Yb=ki.durationDampening.stopDampeningAt,EI=(function(e,t){var r=t,s=Yb,o=Date.now(),i=o-r;if(i>=Yb)return e;if(i<Jb)return Px;var c=rN({startOfRange:Jb,endOfRange:s,current:i}),d=e*ki.ease(c);return Math.ceil(d)}),Zb=(function(e){var t=e.distanceToEdge,r=e.thresholds,s=e.dragStartTime,o=e.shouldUseTimeDampening,i=CI(t,r);return i===0?0:o?Math.max(EI(i,s),Px):i}),Xb=(function(e){var t=e.container,r=e.distanceToEdges,s=e.dragStartTime,o=e.axis,i=e.shouldUseTimeDampening,c=_I(t,o),d=r[o.end]<r[o.start];return d?Zb({distanceToEdge:r[o.end],thresholds:c,dragStartTime:s,shouldUseTimeDampening:i}):-1*Zb({distanceToEdge:r[o.start],thresholds:c,dragStartTime:s,shouldUseTimeDampening:i})}),AI=(function(e){var t=e.container,r=e.subject,s=e.proposedScroll,o=r.height>t.height,i=r.width>t.width;return!i&&!o?s:i&&o?null:{x:i?0:s.x,y:o?0:s.y}}),II=_j(function(e){return e===0?0:e}),nN=(function(e){var t=e.dragStartTime,r=e.container,s=e.subject,o=e.center,i=e.shouldUseTimeDampening,c={top:o.y-r.top,right:r.right-o.x,bottom:r.bottom-o.y,left:o.x-r.left},d=Xb({container:r,distanceToEdges:c,dragStartTime:t,axis:_x,shouldUseTimeDampening:i}),h=Xb({container:r,distanceToEdges:c,dragStartTime:t,axis:Dj,shouldUseTimeDampening:i}),f=II({x:h,y:d});if(Si(f,Wr))return null;var p=AI({container:r,subject:s,proposedScroll:f});return p?Si(p,Wr)?null:p:null}),TI=_j(function(e){return e===0?0:e>0?1:-1}),Mx=(function(){var e=function(r,s){return r<0?r:r>s?r-s:0};return function(t){var r=t.current,s=t.max,o=t.change,i=an(r,o),c={x:e(i.x,s.x),y:e(i.y,s.y)};return Si(c,Wr)?null:c}})(),sN=function(t){var r=t.max,s=t.current,o=t.change,i={x:Math.max(s.x,r.x),y:Math.max(s.y,r.y)},c=TI(o),d=Mx({max:i,current:s,change:c});return!d||c.x!==0&&d.x===0||c.y!==0&&d.y===0},Lx=function(t,r){return sN({current:t.scroll.current,max:t.scroll.max,change:r})},DI=function(t,r){if(!Lx(t,r))return null;var s=t.scroll.max,o=t.scroll.current;return Mx({current:o,max:s,change:r})},$x=function(t,r){var s=t.frame;return s?sN({current:s.scroll.current,max:s.scroll.max,change:r}):!1},RI=function(t,r){var s=t.frame;return!s||!$x(t,r)?null:Mx({current:s.scroll.current,max:s.scroll.max,change:r})},OI=(function(e){var t=e.viewport,r=e.subject,s=e.center,o=e.dragStartTime,i=e.shouldUseTimeDampening,c=nN({dragStartTime:o,container:t.frame,subject:r,center:s,shouldUseTimeDampening:i});return c&&Lx(t,c)?c:null}),PI=(function(e){var t=e.droppable,r=e.subject,s=e.center,o=e.dragStartTime,i=e.shouldUseTimeDampening,c=t.frame;if(!c)return null;var d=nN({dragStartTime:o,container:c.pageMarginBox,subject:r,center:s,shouldUseTimeDampening:i});return d&&$x(t,d)?d:null}),ew=(function(e){var t=e.state,r=e.dragStartTime,s=e.shouldUseTimeDampening,o=e.scrollWindow,i=e.scrollDroppable,c=t.current.page.borderBoxCenter,d=t.dimensions.draggables[t.critical.draggable.id],h=d.page.marginBox;if(t.isWindowScrollAllowed){var f=t.viewport,p=OI({dragStartTime:r,viewport:f,subject:h,center:c,shouldUseTimeDampening:s});if(p){o(p);return}}var v=kI({center:c,destination:ts(t.impact),droppables:t.dimensions.droppables});if(v){var x=PI({dragStartTime:r,droppable:v,subject:h,center:c,shouldUseTimeDampening:s});x&&i(v.descriptor.id,x)}}),MI=(function(e){var t=e.scrollWindow,r=e.scrollDroppable,s=sd(t),o=sd(r),i=null,c=function(p){i||et();var v=i,x=v.shouldUseTimeDampening,w=v.dragStartTime;ew({state:p,scrollWindow:s,scrollDroppable:o,dragStartTime:w,shouldUseTimeDampening:x})},d=function(p){i&&et();var v=Date.now(),x=!1,w=function(){x=!0};ew({state:p,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:w,scrollDroppable:w}),i={dragStartTime:v,shouldUseTimeDampening:x},x&&c(p)},h=function(){i&&(s.cancel(),o.cancel(),i=null)};return{start:d,stop:h,scroll:c}}),LI=(function(e){var t=e.move,r=e.scrollDroppable,s=e.scrollWindow,o=function(f,p){var v=an(f.current.client.selection,p);t({client:v})},i=function(f,p){if(!$x(f,p))return p;var v=RI(f,p);if(!v)return r(f.descriptor.id,p),null;var x=Zn(p,v);r(f.descriptor.id,x);var w=Zn(p,x);return w},c=function(f,p,v){if(!f||!Lx(p,v))return v;var x=DI(p,v);if(!x)return s(v),null;var w=Zn(v,x);s(w);var y=Zn(v,w);return y},d=function(f){var p=f.scrollJumpRequest;if(p){var v=ts(f.impact);v||et();var x=i(f.dimensions.droppables[v],p);if(x){var w=f.viewport,y=c(f.isWindowScrollAllowed,w,x);y&&o(f,y)}}};return d}),$I=(function(e){var t=e.scrollDroppable,r=e.scrollWindow,s=e.move,o=MI({scrollWindow:r,scrollDroppable:t}),i=LI({move:s,scrollWindow:r,scrollDroppable:t}),c=function(f){if(f.phase==="DRAGGING"){if(f.movementMode==="FLUID"){o.scroll(f);return}f.scrollJumpRequest&&i(f)}},d={scroll:c,start:o.start,stop:o.stop};return d}),Cl="data-rbd",El=(function(){var e=Cl+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}})(),Ig=(function(){var e=Cl+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}})(),FI=(function(){var e=Cl+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}})(),tw={contextId:Cl+"-scroll-container-context-id"},BI=function(t){return function(r){return"["+r+'="'+t+'"]'}},Pc=function(t,r){return t.map(function(s){var o=s.styles[r];return o?s.selector+" { "+o+" }":""}).join(" ")},UI="pointer-events: none;",zI=(function(e){var t=BI(e),r=(function(){var d=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(El.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:d,dragging:UI,dropAnimating:d}}})(),s=(function(){var d=`
      transition: `+Gc.outOfTheWay+`;
    `;return{selector:t(Ig.contextId),styles:{dragging:d,dropAnimating:d,userCancel:d}}})(),o={selector:t(FI.contextId),styles:{always:"overflow-anchor: none;"}},i={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},c=[s,r,o,i];return{always:Pc(c,"always"),resting:Pc(c,"resting"),dragging:Pc(c,"dragging"),dropAnimating:Pc(c,"dropAnimating"),userCancel:Pc(c,"userCancel")}}),rs=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?j.useLayoutEffect:j.useEffect,Ap=function(){var t=document.querySelector("head");return t||et(),t},rw=function(t){var r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.type="text/css",r};function qI(e,t){var r=Gt(function(){return zI(e)},[e]),s=j.useRef(null),o=j.useRef(null),i=vt(Vr(function(v){var x=o.current;x||et(),x.textContent=v}),[]),c=vt(function(v){var x=s.current;x||et(),x.textContent=v},[]);rs(function(){!s.current&&!o.current||et();var v=rw(t),x=rw(t);return s.current=v,o.current=x,v.setAttribute(Cl+"-always",e),x.setAttribute(Cl+"-dynamic",e),Ap().appendChild(v),Ap().appendChild(x),c(r.always),i(r.resting),function(){var w=function(S){var C=S.current;C||et(),Ap().removeChild(C),S.current=null};w(s),w(o)}},[t,c,i,r.always,r.resting,e]);var d=vt(function(){return i(r.dragging)},[i,r.dragging]),h=vt(function(v){if(v==="DROP"){i(r.dropAnimating);return}i(r.userCancel)},[i,r.dropAnimating,r.userCancel]),f=vt(function(){o.current&&i(r.resting)},[i,r.resting]),p=Gt(function(){return{dragging:d,dropping:h,resting:f}},[d,h,f]);return p}var aN=(function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window});function kf(e){return e instanceof aN(e).HTMLElement}function GI(e,t){var r="["+El.contextId+'="'+e+'"]',s=Cj(document.querySelectorAll(r));if(!s.length)return null;var o=Ti(s,function(i){return i.getAttribute(El.draggableId)===t});return!o||!kf(o)?null:o}function VI(e){var t=j.useRef({}),r=j.useRef(null),s=j.useRef(null),o=j.useRef(!1),i=vt(function(x,w){var y={id:x,focus:w};return t.current[x]=y,function(){var C=t.current,T=C[x];T!==y&&delete C[x]}},[]),c=vt(function(x){var w=GI(e,x);w&&w!==document.activeElement&&w.focus()},[e]),d=vt(function(x,w){r.current===x&&(r.current=w)},[]),h=vt(function(){s.current||o.current&&(s.current=requestAnimationFrame(function(){s.current=null;var x=r.current;x&&c(x)}))},[c]),f=vt(function(x){r.current=null;var w=document.activeElement;w&&w.getAttribute(El.draggableId)===x&&(r.current=x)},[]);rs(function(){return o.current=!0,function(){o.current=!1;var x=s.current;x&&cancelAnimationFrame(x)}},[]);var p=Gt(function(){return{register:i,tryRecordFocus:f,tryRestoreFocusRecorded:h,tryShiftRecord:d}},[i,f,h,d]);return p}function HI(){var e={draggables:{},droppables:{}},t=[];function r(v){return t.push(v),function(){var w=t.indexOf(v);w!==-1&&t.splice(w,1)}}function s(v){t.length&&t.forEach(function(x){return x(v)})}function o(v){return e.draggables[v]||null}function i(v){var x=o(v);return x||et(),x}var c={register:function(x){e.draggables[x.descriptor.id]=x,s({type:"ADDITION",value:x})},update:function(x,w){var y=e.draggables[w.descriptor.id];y&&y.uniqueId===x.uniqueId&&(delete e.draggables[w.descriptor.id],e.draggables[x.descriptor.id]=x)},unregister:function(x){var w=x.descriptor.id,y=o(w);y&&x.uniqueId===y.uniqueId&&(delete e.draggables[w],s({type:"REMOVAL",value:x}))},getById:i,findById:o,exists:function(x){return!!o(x)},getAllByType:function(x){return Gh(e.draggables).filter(function(w){return w.descriptor.type===x})}};function d(v){return e.droppables[v]||null}function h(v){var x=d(v);return x||et(),x}var f={register:function(x){e.droppables[x.descriptor.id]=x},unregister:function(x){var w=d(x.descriptor.id);w&&x.uniqueId===w.uniqueId&&delete e.droppables[x.descriptor.id]},getById:h,findById:d,exists:function(x){return!!d(x)},getAllByType:function(x){return Gh(e.droppables).filter(function(w){return w.descriptor.type===x})}};function p(){e.draggables={},e.droppables={},t.length=0}return{draggable:c,droppable:f,subscribe:r,clean:p}}function WI(){var e=Gt(HI,[]);return j.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var Fx=pt.createContext(null),Hh=(function(){var e=document.body;return e||et(),e}),KI={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},QI=function(t){return"rbd-announcement-"+t};function JI(e){var t=Gt(function(){return QI(e)},[e]),r=j.useRef(null);j.useEffect(function(){var i=document.createElement("div");return r.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),jt(i.style,KI),Hh().appendChild(i),function(){setTimeout(function(){var h=Hh();h.contains(i)&&h.removeChild(i),i===r.current&&(r.current=null)})}},[t]);var s=vt(function(o){var i=r.current;if(i){i.textContent=o;return}},[]);return s}var YI=0,ZI={separator:"::"};function Bx(e,t){return t===void 0&&(t=ZI),Gt(function(){return""+e+t.separator+YI++},[t.separator,e])}function XI(e){var t=e.contextId,r=e.uniqueId;return"rbd-hidden-text-"+t+"-"+r}function eT(e){var t=e.contextId,r=e.text,s=Bx("hidden-text",{separator:"-"}),o=Gt(function(){return XI({contextId:t,uniqueId:s})},[s,t]);return j.useEffect(function(){var c=document.createElement("div");return c.id=o,c.textContent=r,c.style.display="none",Hh().appendChild(c),function(){var h=Hh();h.contains(c)&&h.removeChild(c)}},[o,r]),o}var _f=pt.createContext(null);function iN(e){var t=j.useRef(e);return j.useEffect(function(){t.current=e}),t}function tT(){var e=null;function t(){return!!e}function r(c){return c===e}function s(c){e&&et();var d={abandon:c};return e=d,d}function o(){e||et(),e=null}function i(){e&&(e.abandon(),o())}return{isClaimed:t,isActive:r,claim:s,release:o,tryAbandon:i}}var rT=9,nT=13,Ux=27,oN=32,sT=33,aT=34,iT=35,oT=36,lT=37,cT=38,dT=39,uT=40,Yu,hT=(Yu={},Yu[nT]=!0,Yu[rT]=!0,Yu),lN=(function(e){hT[e.keyCode]&&e.preventDefault()}),Cf=(function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],r=Ti(t,function(s){return"on"+s in document});return r||e})(),cN=0,nw=5;function fT(e,t){return Math.abs(t.x-e.x)>=nw||Math.abs(t.y-e.y)>=nw}var sw={type:"IDLE"};function mT(e){var t=e.cancel,r=e.completed,s=e.getPhase,o=e.setPhase;return[{eventName:"mousemove",fn:function(c){var d=c.button,h=c.clientX,f=c.clientY;if(d===cN){var p={x:h,y:f},v=s();if(v.type==="DRAGGING"){c.preventDefault(),v.actions.move(p);return}v.type!=="PENDING"&&et();var x=v.point;if(fT(x,p)){c.preventDefault();var w=v.actions.fluidLift(p);o({type:"DRAGGING",actions:w})}}}},{eventName:"mouseup",fn:function(c){var d=s();if(d.type!=="DRAGGING"){t();return}c.preventDefault(),d.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(c){s().type==="DRAGGING"&&c.preventDefault(),t()}},{eventName:"keydown",fn:function(c){var d=s();if(d.type==="PENDING"){t();return}if(c.keyCode===Ux){c.preventDefault(),t();return}lN(c)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){s().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(c){var d=s();if(d.type==="IDLE"&&et(),d.actions.shouldRespectForcePress()){t();return}c.preventDefault()}},{eventName:Cf,fn:t}]}function pT(e){var t=j.useRef(sw),r=j.useRef(Ni),s=Gt(function(){return{eventName:"mousedown",fn:function(v){if(!v.defaultPrevented&&v.button===cN&&!(v.ctrlKey||v.metaKey||v.shiftKey||v.altKey)){var x=e.findClosestDraggableId(v);if(x){var w=e.tryGetLock(x,c,{sourceEvent:v});if(w){v.preventDefault();var y={x:v.clientX,y:v.clientY};r.current(),f(w,y)}}}}}},[e]),o=Gt(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(v){if(!v.defaultPrevented){var x=e.findClosestDraggableId(v);if(x){var w=e.findOptionsForDraggable(x);w&&(w.shouldRespectForcePress||e.canGetLock(x)&&v.preventDefault())}}}}},[e]),i=vt(function(){var v={passive:!1,capture:!0};r.current=ms(window,[o,s],v)},[o,s]),c=vt(function(){var p=t.current;p.type!=="IDLE"&&(t.current=sw,r.current(),i())},[i]),d=vt(function(){var p=t.current;c(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[c]),h=vt(function(){var v={capture:!0,passive:!1},x=mT({cancel:d,completed:c,getPhase:function(){return t.current},setPhase:function(y){t.current=y}});r.current=ms(window,x,v)},[d,c]),f=vt(function(v,x){t.current.type!=="IDLE"&&et(),t.current={type:"PENDING",point:x,actions:v},h()},[h]);rs(function(){return i(),function(){r.current()}},[i])}var ul;function gT(){}var xT=(ul={},ul[aT]=!0,ul[sT]=!0,ul[oT]=!0,ul[iT]=!0,ul);function vT(e,t){function r(){t(),e.cancel()}function s(){t(),e.drop()}return[{eventName:"keydown",fn:function(i){if(i.keyCode===Ux){i.preventDefault(),r();return}if(i.keyCode===oN){i.preventDefault(),s();return}if(i.keyCode===uT){i.preventDefault(),e.moveDown();return}if(i.keyCode===cT){i.preventDefault(),e.moveUp();return}if(i.keyCode===dT){i.preventDefault(),e.moveRight();return}if(i.keyCode===lT){i.preventDefault(),e.moveLeft();return}if(xT[i.keyCode]){i.preventDefault();return}lN(i)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:Cf,fn:r}]}function yT(e){var t=j.useRef(gT),r=Gt(function(){return{eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==oN)return;var c=e.findClosestDraggableId(i);if(!c)return;var d=e.tryGetLock(c,p,{sourceEvent:i});if(!d)return;i.preventDefault();var h=!0,f=d.snapLift();t.current();function p(){h||et(),h=!1,t.current(),s()}t.current=ms(window,vT(f,p),{capture:!0,passive:!1})}}},[e]),s=vt(function(){var i={passive:!1,capture:!0};t.current=ms(window,[r],i)},[r]);rs(function(){return s(),function(){t.current()}},[s])}var Ip={type:"IDLE"},bT=120,wT=.15;function jT(e){var t=e.cancel,r=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(o){o.preventDefault()}},{eventName:"keydown",fn:function(o){if(r().type!=="DRAGGING"){t();return}o.keyCode===Ux&&o.preventDefault(),t()}},{eventName:Cf,fn:t}]}function NT(e){var t=e.cancel,r=e.completed,s=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(i){var c=s();if(c.type!=="DRAGGING"){t();return}c.hasMoved=!0;var d=i.touches[0],h=d.clientX,f=d.clientY,p={x:h,y:f};i.preventDefault(),c.actions.move(p)}},{eventName:"touchend",fn:function(i){var c=s();if(c.type!=="DRAGGING"){t();return}i.preventDefault(),c.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(i){if(s().type!=="DRAGGING"){t();return}i.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(i){var c=s();c.type==="IDLE"&&et();var d=i.touches[0];if(d){var h=d.force>=wT;if(h){var f=c.actions.shouldRespectForcePress();if(c.type==="PENDING"){f&&t();return}if(f){if(c.hasMoved){i.preventDefault();return}t();return}i.preventDefault()}}}},{eventName:Cf,fn:t}]}function ST(e){var t=j.useRef(Ip),r=j.useRef(Ni),s=vt(function(){return t.current},[]),o=vt(function(w){t.current=w},[]),i=Gt(function(){return{eventName:"touchstart",fn:function(w){if(!w.defaultPrevented){var y=e.findClosestDraggableId(w);if(y){var S=e.tryGetLock(y,d,{sourceEvent:w});if(S){var C=w.touches[0],T=C.clientX,A=C.clientY,I={x:T,y:A};r.current(),v(S,I)}}}}}},[e]),c=vt(function(){var w={capture:!0,passive:!1};r.current=ms(window,[i],w)},[i]),d=vt(function(){var x=t.current;x.type!=="IDLE"&&(x.type==="PENDING"&&clearTimeout(x.longPressTimerId),o(Ip),r.current(),c())},[c,o]),h=vt(function(){var x=t.current;d(),x.type==="DRAGGING"&&x.actions.cancel({shouldBlockNextClick:!0}),x.type==="PENDING"&&x.actions.abort()},[d]),f=vt(function(){var w={capture:!0,passive:!1},y={cancel:h,completed:d,getPhase:s},S=ms(window,NT(y),w),C=ms(window,jT(y),w);r.current=function(){S(),C()}},[h,s,d]),p=vt(function(){var w=s();w.type!=="PENDING"&&et();var y=w.actions.fluidLift(w.point);o({type:"DRAGGING",actions:y,hasMoved:!1})},[s,o]),v=vt(function(w,y){s().type!=="IDLE"&&et();var S=setTimeout(p,bT);o({type:"PENDING",point:y,actions:w,longPressTimerId:S}),f()},[f,s,o,p]);rs(function(){return c(),function(){r.current();var y=s();y.type==="PENDING"&&(clearTimeout(y.longPressTimerId),o(Ip))}},[s,c,o]),rs(function(){var w=ms(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return w},[])}var kT={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function dN(e,t){if(t==null)return!1;var r=!!kT[t.tagName.toLowerCase()];if(r)return!0;var s=t.getAttribute("contenteditable");return s==="true"||s===""?!0:t===e?!1:dN(e,t.parentElement)}function _T(e,t){var r=t.target;return kf(r)?dN(e,r):!1}var CT=(function(e){return $s(e.getBoundingClientRect()).center});function ET(e){return e instanceof aN(e).Element}var AT=(function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],r=Ti(t,function(s){return s in Element.prototype});return r||e})();function uN(e,t){return e==null?null:e[AT](t)?e:uN(e.parentElement,t)}function IT(e,t){return e.closest?e.closest(t):uN(e,t)}function TT(e){return"["+El.contextId+'="'+e+'"]'}function DT(e,t){var r=t.target;if(!ET(r))return null;var s=TT(e),o=IT(r,s);return!o||!kf(o)?null:o}function RT(e,t){var r=DT(e,t);return r?r.getAttribute(El.draggableId):null}function OT(e,t){var r="["+Ig.contextId+'="'+e+'"]',s=Cj(document.querySelectorAll(r)),o=Ti(s,function(i){return i.getAttribute(Ig.id)===t});return!o||!kf(o)?null:o}function PT(e){e.preventDefault()}function Zu(e){var t=e.expected,r=e.phase,s=e.isLockActive;return e.shouldWarn,!(!s()||t!==r)}function hN(e){var t=e.lockAPI,r=e.store,s=e.registry,o=e.draggableId;if(t.isClaimed())return!1;var i=s.draggable.findById(o);return!(!i||!i.options.isEnabled||!tN(r.getState(),o))}function MT(e){var t=e.lockAPI,r=e.contextId,s=e.store,o=e.registry,i=e.draggableId,c=e.forceSensorStop,d=e.sourceEvent,h=hN({lockAPI:t,store:s,registry:o,draggableId:i});if(!h)return null;var f=o.draggable.getById(i),p=OT(r,f.descriptor.id);if(!p||d&&!f.options.canDragInteractiveElements&&_T(p,d))return null;var v=t.claim(c||Ni),x="PRE_DRAG";function w(){return f.options.shouldRespectForcePress}function y(){return t.isActive(v)}function S($,F){Zu({expected:$,phase:x,isLockActive:y,shouldWarn:!0})&&s.dispatch(F())}var C=S.bind(null,"DRAGGING");function T($){function F(){t.release(),x="COMPLETED"}x!=="PRE_DRAG"&&(F(),x!=="PRE_DRAG"&&et()),s.dispatch(A8($.liftActionArgs)),x="DRAGGING";function te(ne,Ee){if(Ee===void 0&&(Ee={shouldBlockNextClick:!1}),$.cleanup(),Ee.shouldBlockNextClick){var Se=ms(window,[{eventName:"click",fn:PT,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(Se)}F(),s.dispatch(Kj({reason:ne}))}return jt({isActive:function(){return Zu({expected:"DRAGGING",phase:x,isLockActive:y,shouldWarn:!1})},shouldRespectForcePress:w,drop:function(Ee){return te("DROP",Ee)},cancel:function(Ee){return te("CANCEL",Ee)}},$.actions)}function A($){var F=sd(function(ne){C(function(){return Wj({client:ne})})}),te=T({liftActionArgs:{id:i,clientSelection:$,movementMode:"FLUID"},cleanup:function(){return F.cancel()},actions:{move:F}});return jt({},te,{move:F})}function I(){var $={moveUp:function(){return C($8)},moveRight:function(){return C(B8)},moveDown:function(){return C(F8)},moveLeft:function(){return C(U8)}};return T({liftActionArgs:{id:i,clientSelection:CT(p),movementMode:"SNAP"},cleanup:Ni,actions:$})}function O(){var $=Zu({expected:"PRE_DRAG",phase:x,isLockActive:y,shouldWarn:!0});$&&t.release()}var P={isActive:function(){return Zu({expected:"PRE_DRAG",phase:x,isLockActive:y,shouldWarn:!1})},shouldRespectForcePress:w,fluidLift:A,snapLift:I,abort:O};return P}var LT=[pT,yT,ST];function $T(e){var t=e.contextId,r=e.store,s=e.registry,o=e.customSensors,i=e.enableDefaultSensors,c=[].concat(i?LT:[],o||[]),d=j.useState(function(){return tT()})[0],h=vt(function(A,I){A.isDragging&&!I.isDragging&&d.tryAbandon()},[d]);rs(function(){var A=r.getState(),I=r.subscribe(function(){var O=r.getState();h(A,O),A=O});return I},[d,r,h]),rs(function(){return d.tryAbandon},[d.tryAbandon]);for(var f=vt(function(T){return hN({lockAPI:d,registry:s,store:r,draggableId:T})},[d,s,r]),p=vt(function(T,A,I){return MT({lockAPI:d,registry:s,contextId:t,store:r,draggableId:T,forceSensorStop:A,sourceEvent:I&&I.sourceEvent?I.sourceEvent:null})},[t,d,s,r]),v=vt(function(T){return RT(t,T)},[t]),x=vt(function(T){var A=s.draggable.findById(T);return A?A.options:null},[s.draggable]),w=vt(function(){d.isClaimed()&&(d.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(Tx()))},[d,r]),y=vt(d.isClaimed,[d]),S=Gt(function(){return{canGetLock:f,tryGetLock:p,findClosestDraggableId:v,findOptionsForDraggable:x,tryReleaseLock:w,isLockClaimed:y}},[f,p,v,x,w,y]),C=0;C<c.length;C++)c[C](S)}var FT=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function Mc(e){return e.current||et(),e.current}function BT(e){var t=e.contextId,r=e.setCallbacks,s=e.sensors,o=e.nonce,i=e.dragHandleUsageInstructions,c=j.useRef(null),d=iN(e),h=vt(function(){return FT(d.current)},[d]),f=JI(t),p=eT({contextId:t,text:i}),v=qI(t,o),x=vt(function(ne){Mc(c).dispatch(ne)},[]),w=Gt(function(){return kb({publishWhileDragging:T8,updateDroppableScroll:R8,updateDroppableIsEnabled:O8,updateDroppableIsCombineEnabled:P8,collectionStarting:D8},x)},[x]),y=WI(),S=Gt(function(){return wI(y,w)},[y,w]),C=Gt(function(){return $I(jt({scrollWindow:jI,scrollDroppable:S.scrollDroppable},kb({move:Wj},x)))},[S.scrollDroppable,x]),T=VI(t),A=Gt(function(){return xI({announce:f,autoScroller:C,dimensionMarshal:S,focusMarshal:T,getResponders:h,styleMarshal:v})},[f,C,S,T,h,v]);c.current=A;var I=vt(function(){var ne=Mc(c),Ee=ne.getState();Ee.phase!=="IDLE"&&ne.dispatch(Tx())},[]),O=vt(function(){var ne=Mc(c).getState();return ne.isDragging||ne.phase==="DROP_ANIMATING"},[]),P=Gt(function(){return{isDragging:O,tryAbort:I}},[O,I]);r(P);var $=vt(function(ne){return tN(Mc(c).getState(),ne)},[]),F=vt(function(){return ho(Mc(c).getState())},[]),te=Gt(function(){return{marshal:S,focus:T,contextId:t,canLift:$,isMovementAllowed:F,dragHandleUsageInstructionsId:p,registry:y}},[t,S,p,T,$,F,y]);return $T({contextId:t,store:A,registry:y,customSensors:s,enableDefaultSensors:e.enableDefaultSensors!==!1}),j.useEffect(function(){return I},[I]),pt.createElement(_f.Provider,{value:te},pt.createElement(_9,{context:Fx,store:A},e.children))}var UT=0;function zT(){return Gt(function(){return""+UT++},[])}function qT(e){var t=zT(),r=e.dragHandleUsageInstructions||ph.dragHandleUsageInstructions;return pt.createElement(yA,null,function(s){return pt.createElement(BT,{nonce:e.nonce,contextId:t,setCallbacks:s,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var fN=function(t){return function(r){return t===r}},GT=fN("scroll"),VT=fN("auto"),aw=function(t,r){return r(t.overflowX)||r(t.overflowY)},HT=function(t){var r=window.getComputedStyle(t),s={overflowX:r.overflowX,overflowY:r.overflowY};return aw(s,GT)||aw(s,VT)},WT=function(){return!1},KT=function e(t){return t==null?null:t===document.body?WT()?t:null:t===document.documentElement?null:HT(t)?t:e(t.parentElement)},Tg=(function(e){return{x:e.scrollLeft,y:e.scrollTop}}),QT=function e(t){if(!t)return!1;var r=window.getComputedStyle(t);return r.position==="fixed"?!0:e(t.parentElement)},JT=(function(e){var t=KT(e),r=QT(e);return{closestScrollable:t,isFixedOnPage:r}}),YT=(function(e){var t=e.descriptor,r=e.isEnabled,s=e.isCombineEnabled,o=e.isFixedOnPage,i=e.direction,c=e.client,d=e.page,h=e.closest,f=(function(){if(!h)return null;var w=h.scrollSize,y=h.client,S=Zj({scrollHeight:w.scrollHeight,scrollWidth:w.scrollWidth,height:y.paddingBox.height,width:y.paddingBox.width});return{pageMarginBox:h.page.marginBox,frameClient:y,scrollSize:w,shouldClipSubject:h.shouldClipSubject,scroll:{initial:h.scroll,current:h.scroll,max:S,diff:{value:Wr,displacement:Wr}}}})(),p=i==="vertical"?_x:Dj,v=_l({page:d,withPlaceholder:null,axis:p,frame:f}),x={descriptor:t,isCombineEnabled:s,isFixedOnPage:o,axis:p,isEnabled:r,client:c,page:d,frame:f,subject:v};return x}),ZT=function(t,r){var s=jj(t);if(!r||t!==r)return s;var o=s.paddingBox.top-r.scrollTop,i=s.paddingBox.left-r.scrollLeft,c=o+r.scrollHeight,d=i+r.scrollWidth,h={top:o,right:d,bottom:c,left:i},f=wx(h,s.border),p=jx({borderBox:f,margin:s.margin,border:s.border,padding:s.padding});return p},XT=(function(e){var t=e.ref,r=e.descriptor,s=e.env,o=e.windowScroll,i=e.direction,c=e.isDropDisabled,d=e.isCombineEnabled,h=e.shouldClipSubject,f=s.closestScrollable,p=ZT(t,f),v=Uh(p,o),x=(function(){if(!f)return null;var y=jj(f),S={scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth};return{client:y,page:Uh(y,o),scroll:Tg(f),scrollSize:S,shouldClipSubject:h}})(),w=YT({descriptor:r,isEnabled:!c,isCombineEnabled:d,isFixedOnPage:s.isFixedOnPage,direction:i,client:p,page:v,closest:x});return w}),eD={passive:!1},tD={passive:!0},iw=(function(e){return e.shouldPublishImmediately?eD:tD});function Wh(e){var t=j.useContext(e);return t||et(),t}var Xu=function(t){return t&&t.env.closestScrollable||null};function rD(e){var t=j.useRef(null),r=Wh(_f),s=Bx("droppable"),o=r.registry,i=r.marshal,c=iN(e),d=Gt(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),h=j.useRef(d),f=Gt(function(){return Vr(function(O,P){t.current||et();var $={x:O,y:P};i.updateDroppableScroll(d.id,$)})},[d.id,i]),p=vt(function(){var O=t.current;return!O||!O.env.closestScrollable?Wr:Tg(O.env.closestScrollable)},[]),v=vt(function(){var O=p();f(O.x,O.y)},[p,f]),x=Gt(function(){return sd(v)},[v]),w=vt(function(){var O=t.current,P=Xu(O);O&&P||et();var $=O.scrollOptions;if($.shouldPublishImmediately){v();return}x()},[x,v]),y=vt(function(O,P){t.current&&et();var $=c.current,F=$.getDroppableRef();F||et();var te=JT(F),ne={ref:F,descriptor:d,env:te,scrollOptions:P};t.current=ne;var Ee=XT({ref:F,descriptor:d,env:te,windowScroll:O,direction:$.direction,isDropDisabled:$.isDropDisabled,isCombineEnabled:$.isCombineEnabled,shouldClipSubject:!$.ignoreContainerClipping}),Se=te.closestScrollable;return Se&&(Se.setAttribute(tw.contextId,r.contextId),Se.addEventListener("scroll",w,iw(ne.scrollOptions))),Ee},[r.contextId,d,w,c]),S=vt(function(){var O=t.current,P=Xu(O);return O&&P||et(),Tg(P)},[]),C=vt(function(){var O=t.current;O||et();var P=Xu(O);t.current=null,P&&(x.cancel(),P.removeAttribute(tw.contextId),P.removeEventListener("scroll",w,iw(O.scrollOptions)))},[w,x]),T=vt(function(O){var P=t.current;P||et();var $=Xu(P);$||et(),$.scrollTop+=O.y,$.scrollLeft+=O.x},[]),A=Gt(function(){return{getDimensionAndWatchScroll:y,getScrollWhileDragging:S,dragStopped:C,scroll:T}},[C,y,S,T]),I=Gt(function(){return{uniqueId:s,descriptor:d,callbacks:A}},[A,d,s]);rs(function(){return h.current=I.descriptor,o.droppable.register(I),function(){t.current&&C(),o.droppable.unregister(I)}},[A,d,C,I,i,o.droppable]),rs(function(){t.current&&i.updateDroppableIsEnabled(h.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),rs(function(){t.current&&i.updateDroppableIsCombineEnabled(h.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function Tp(){}var ow={width:0,height:0,margin:kA},nD=function(t){var r=t.isAnimatingOpenOnMount,s=t.placeholder,o=t.animate;return r||o==="close"?ow:{height:s.client.borderBox.height,width:s.client.borderBox.width,margin:s.client.margin}},sD=function(t){var r=t.isAnimatingOpenOnMount,s=t.placeholder,o=t.animate,i=nD({isAnimatingOpenOnMount:r,placeholder:s,animate:o});return{display:s.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:o!=="none"?Gc.placeholder:null}};function aD(e){var t=j.useRef(null),r=vt(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),s=e.animate,o=e.onTransitionEnd,i=e.onClose,c=e.contextId,d=j.useState(e.animate==="open"),h=d[0],f=d[1];j.useEffect(function(){return h?s!=="open"?(r(),f(!1),Tp):t.current?Tp:(t.current=setTimeout(function(){t.current=null,f(!1)}),r):Tp},[s,h,r]);var p=vt(function(x){x.propertyName==="height"&&(o(),s==="close"&&i())},[s,i,o]),v=sD({isAnimatingOpenOnMount:h,animate:e.animate,placeholder:e.placeholder});return pt.createElement(e.placeholder.tagName,{style:v,"data-rbd-placeholder-context-id":c,onTransitionEnd:p,ref:e.innerRef})}var iD=pt.memo(aD),zx=pt.createContext(null),oD=(function(e){uj(t,e);function t(){for(var s,o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return s=e.call.apply(e,[this].concat(i))||this,s.state={isVisible:!!s.props.on,data:s.props.on,animate:s.props.shouldAnimate&&s.props.on?"open":"none"},s.onClose=function(){s.state.animate==="close"&&s.setState({isVisible:!1})},s}t.getDerivedStateFromProps=function(o,i){return o.shouldAnimate?o.on?{isVisible:!0,data:o.on,animate:"open"}:i.isVisible?{isVisible:!0,data:i.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!o.on,data:o.on,animate:"none"}};var r=t.prototype;return r.render=function(){if(!this.state.isVisible)return null;var o={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(o)},t})(pt.PureComponent),lw={dragging:5e3,dropAnimating:4500},lD=function(t,r){return r?Gc.drop(r.duration):t?Gc.snap:Gc.fluid},cD=function(t,r){return t?r?ld.opacity.drop:ld.opacity.combining:null},dD=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function uD(e){var t=e.dimension,r=t.client,s=e.offset,o=e.combineWith,i=e.dropping,c=!!o,d=dD(e),h=!!i,f=h?Eg.drop(s,c):Eg.moveTo(s),p={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:lD(d,i),transform:f,opacity:cD(c,h),zIndex:h?lw.dropAnimating:lw.dragging,pointerEvents:"none"};return p}function hD(e){return{transform:Eg.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function fD(e){return e.type==="DRAGGING"?uD(e):hD(e)}function mD(e,t,r){r===void 0&&(r=Wr);var s=window.getComputedStyle(t),o=t.getBoundingClientRect(),i=wj(o,s),c=Uh(i,r),d={client:i,tagName:t.tagName.toLowerCase(),display:s.display},h={x:i.marginBox.width,y:i.marginBox.height},f={descriptor:e,placeholder:d,displaceBy:h,client:i,page:c};return f}function pD(e){var t=Bx("draggable"),r=e.descriptor,s=e.registry,o=e.getDraggableRef,i=e.canDragInteractiveElements,c=e.shouldRespectForcePress,d=e.isEnabled,h=Gt(function(){return{canDragInteractiveElements:i,shouldRespectForcePress:c,isEnabled:d}},[i,d,c]),f=vt(function(w){var y=o();return y||et(),mD(r,y,w)},[r,o]),p=Gt(function(){return{uniqueId:t,descriptor:r,options:h,getDimension:f}},[r,f,h,t]),v=j.useRef(p),x=j.useRef(!0);rs(function(){return s.draggable.register(v.current),function(){return s.draggable.unregister(v.current)}},[s.draggable]),rs(function(){if(x.current){x.current=!1;return}var w=v.current;v.current=p,s.draggable.update(p,w)},[p,s.draggable])}function gD(e){e.preventDefault()}function xD(e){var t=j.useRef(null),r=vt(function(ne){t.current=ne},[]),s=vt(function(){return t.current},[]),o=Wh(_f),i=o.contextId,c=o.dragHandleUsageInstructionsId,d=o.registry,h=Wh(zx),f=h.type,p=h.droppableId,v=Gt(function(){return{id:e.draggableId,index:e.index,type:f,droppableId:p}},[e.draggableId,e.index,f,p]),x=e.children,w=e.draggableId,y=e.isEnabled,S=e.shouldRespectForcePress,C=e.canDragInteractiveElements,T=e.isClone,A=e.mapped,I=e.dropAnimationFinished;if(!T){var O=Gt(function(){return{descriptor:v,registry:d,getDraggableRef:s,canDragInteractiveElements:C,shouldRespectForcePress:S,isEnabled:y}},[v,d,s,C,S,y]);pD(O)}var P=Gt(function(){return y?{tabIndex:0,role:"button","aria-describedby":c,"data-rbd-drag-handle-draggable-id":w,"data-rbd-drag-handle-context-id":i,draggable:!1,onDragStart:gD}:null},[i,c,w,y]),$=vt(function(ne){A.type==="DRAGGING"&&A.dropping&&ne.propertyName==="transform"&&I()},[I,A]),F=Gt(function(){var ne=fD(A),Ee=A.type==="DRAGGING"&&A.dropping?$:null,Se={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":i,"data-rbd-draggable-id":w,style:ne,onTransitionEnd:Ee},dragHandleProps:P};return Se},[i,P,w,A,$,r]),te=Gt(function(){return{draggableId:v.id,type:v.type,source:{index:v.index,droppableId:v.droppableId}}},[v.droppableId,v.id,v.index,v.type]);return x(F,A.snapshot,te)}var mN=(function(e,t){return e===t}),pN=(function(e){var t=e.combine,r=e.destination;return r?r.droppableId:t?t.droppableId:null}),vD=function(t){return t.combine?t.combine.draggableId:null},yD=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function bD(){var e=Vr(function(o,i){return{x:o,y:i}}),t=Vr(function(o,i,c,d,h){return{isDragging:!0,isClone:i,isDropAnimating:!!h,dropAnimation:h,mode:o,draggingOver:c,combineWith:d,combineTargetFor:null}}),r=Vr(function(o,i,c,d,h,f,p){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:h,combineWith:f,mode:i,offset:o,dimension:c,forceShouldAnimate:p,snapshot:t(i,d,h,f,null)}}}),s=function(i,c){if(i.isDragging){if(i.critical.draggable.id!==c.draggableId)return null;var d=i.current.client.offset,h=i.dimensions.draggables[c.draggableId],f=ts(i.impact),p=yD(i.impact),v=i.forceShouldAnimate;return r(e(d.x,d.y),i.movementMode,h,c.isClone,f,p,v)}if(i.phase==="DROP_ANIMATING"){var x=i.completed;if(x.result.draggableId!==c.draggableId)return null;var w=c.isClone,y=i.dimensions.draggables[c.draggableId],S=x.result,C=S.mode,T=pN(S),A=vD(S),I=i.dropDuration,O={duration:I,curve:Rx.drop,moveTo:i.newHomeClientOffset,opacity:A?ld.opacity.drop:null,scale:A?ld.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:y,dropping:O,draggingOver:T,combineWith:A,mode:C,forceShouldAnimate:null,snapshot:t(C,w,T,A,O)}}}return null};return s}function gN(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var wD={mapped:{type:"SECONDARY",offset:Wr,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:gN(null)}};function jD(){var e=Vr(function(c,d){return{x:c,y:d}}),t=Vr(gN),r=Vr(function(c,d,h){return d===void 0&&(d=null),{mapped:{type:"SECONDARY",offset:c,combineTargetFor:d,shouldAnimateDisplacement:h,snapshot:t(d)}}}),s=function(d){return d?r(Wr,d,!0):null},o=function(d,h,f,p){var v=f.displaced.visible[d],x=!!(p.inVirtualList&&p.effected[d]),w=jf(f),y=w&&w.draggableId===d?h:null;if(!v){if(!x)return s(y);if(f.displaced.invisible[d])return null;var S=Ll(p.displacedBy.point),C=e(S.x,S.y);return r(C,y,!0)}if(x)return s(y);var T=f.displacedBy.point,A=e(T.x,T.y);return r(A,y,v.shouldAnimate)},i=function(d,h){if(d.isDragging)return d.critical.draggable.id===h.draggableId?null:o(h.draggableId,d.critical.draggable.id,d.impact,d.afterCritical);if(d.phase==="DROP_ANIMATING"){var f=d.completed;return f.result.draggableId===h.draggableId?null:o(h.draggableId,f.result.draggableId,f.impact,f.afterCritical)}return null};return i}var ND=function(){var t=bD(),r=jD(),s=function(i,c){return t(i,c)||r(i,c)||wD};return s},SD={dropAnimationFinished:Qj},kD=yj(ND,SD,null,{context:Fx,pure:!0,areStatePropsEqual:mN})(xD);function xN(e){var t=Wh(zx),r=t.isUsingCloneFor;return r===e.draggableId&&!e.isClone?null:pt.createElement(kD,e)}function _D(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,s=!!e.shouldRespectForcePress;return pt.createElement(xN,jt({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:s}))}function CD(e){var t=j.useContext(_f);t||et();var r=t.contextId,s=t.isMovementAllowed,o=j.useRef(null),i=j.useRef(null),c=e.children,d=e.droppableId,h=e.type,f=e.mode,p=e.direction,v=e.ignoreContainerClipping,x=e.isDropDisabled,w=e.isCombineEnabled,y=e.snapshot,S=e.useClone,C=e.updateViewportMaxScroll,T=e.getContainerForClone,A=vt(function(){return o.current},[]),I=vt(function(Se){o.current=Se},[]);vt(function(){return i.current},[]);var O=vt(function(Se){i.current=Se},[]),P=vt(function(){s()&&C({maxScroll:eN()})},[s,C]);rD({droppableId:d,type:h,mode:f,direction:p,isDropDisabled:x,isCombineEnabled:w,ignoreContainerClipping:v,getDroppableRef:A});var $=pt.createElement(oD,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(Se){var De=Se.onClose,U=Se.data,H=Se.animate;return pt.createElement(iD,{placeholder:U,onClose:De,innerRef:O,animate:H,contextId:r,onTransitionEnd:P})}),F=Gt(function(){return{innerRef:I,placeholder:$,droppableProps:{"data-rbd-droppable-id":d,"data-rbd-droppable-context-id":r}}},[r,d,$,I]),te=S?S.dragging.draggableId:null,ne=Gt(function(){return{droppableId:d,type:h,isUsingCloneFor:te}},[d,te,h]);function Ee(){if(!S)return null;var Se=S.dragging,De=S.render,U=pt.createElement(xN,{draggableId:Se.draggableId,index:Se.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(H,ye){return De(H,ye,Se)});return f_.createPortal(U,T())}return pt.createElement(zx.Provider,{value:ne},c(F,y),Ee())}var Dp=function(t,r){return t===r.droppable.type},cw=function(t,r){return r.draggables[t.draggable.id]},ED=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=jt({},t,{shouldAnimatePlaceholder:!1}),s=Vr(function(c){return{draggableId:c.id,type:c.type,source:{index:c.index,droppableId:c.droppableId}}}),o=Vr(function(c,d,h,f,p,v){var x=p.descriptor.id,w=p.descriptor.droppableId===c;if(w){var y=v?{render:v,dragging:s(p.descriptor)}:null,S={isDraggingOver:h,draggingOverWith:h?x:null,draggingFromThisWith:x,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!1,snapshot:S,useClone:y}}if(!d)return r;if(!f)return t;var C={isDraggingOver:h,draggingOverWith:x,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!0,snapshot:C,useClone:null}}),i=function(d,h){var f=h.droppableId,p=h.type,v=!h.isDropDisabled,x=h.renderClone;if(d.isDragging){var w=d.critical;if(!Dp(p,w))return r;var y=cw(w,d.dimensions),S=ts(d.impact)===f;return o(f,v,S,S,y,x)}if(d.phase==="DROP_ANIMATING"){var C=d.completed;if(!Dp(p,C.critical))return r;var T=cw(C.critical,d.dimensions);return o(f,v,pN(C.result)===f,ts(C.impact)===f,T,x)}if(d.phase==="IDLE"&&d.completed&&!d.shouldFlush){var A=d.completed;if(!Dp(p,A.critical))return r;var I=ts(A.impact)===f,O=!!(A.impact.at&&A.impact.at.type==="COMBINE"),P=A.critical.droppable.id===f;return I?O?t:r:P?t:r}return r};return i},AD={updateViewportMaxScroll:L8};function ID(){return document.body||et(),document.body}var TD={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:ID},vN=yj(ED,AD,null,{context:Fx,pure:!0,areStatePropsEqual:mN})(CD);vN.defaultProps=TD;const Rp={};function DD(e,t,r){return`${t}:${r}:${e}`}function dw(e,t,r){const[s,o]=j.useState(e),i=j.useRef(""),c=j.useRef("");return j.useEffect(()=>{if(!e||t===r){o(e);return}const d=DD(e,t,r);if(Rp[d]){o(Rp[d]);return}i.current=e,c.current=r,fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=${t}&tl=${r}&dt=t&q=${encodeURIComponent(e)}`).then(h=>h.json()).then(h=>{const f=h[0]?.map(p=>p[0]).join("")||e;Rp[d]=f,i.current===e&&c.current===r&&o(f)}).catch(()=>o(e))},[e,t,r]),s}const RD=[{id:"mod-001",title:"Introduccin a React y TypeScript",description:"Aprende los fundamentos de React con TypeScript desde cero. Este mdulo cubre componentes, hooks, props, estado y las mejores prcticas de desarrollo.",url:"https://react-typescript-course.example.com",progress:0,totalLessons:12,completedLessons:0,category:"Frontend Development",difficulty:"beginner",duration:480,prerequisites:["Conocimientos bsicos de JavaScript","HTML y CSS fundamentales","Conceptos bsicos de programacin"],learningObjectives:["Crear componentes React funcionales","Usar hooks para manejar estado","Implementar TypeScript en React","Construir aplicaciones SPA","Manejar props y eventos"],tags:["React","TypeScript","JavaScript","Frontend","SPA"],thumbnail:"/images/react-course-thumb.jpg",instructor:"Dr. Mara Gonzlez",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-20T14:30:00Z",isActive:!0,isPublished:!0,order:1,resources:{videos:["https://youtube.com/watch?v=react-intro","https://youtube.com/watch?v=typescript-basics","https://youtube.com/watch?v=react-hooks"],documents:["https://docs.example.com/react-guide.pdf","https://docs.example.com/typescript-handbook.pdf"],links:["https://react.dev","https://typescriptlang.org","https://create-react-app.dev"]},assignments:[{id:"assign-001",title:"Crear tu primer componente",description:"Crea un componente React que muestre informacin personal",dueDate:"2024-02-15T23:59:59Z",status:"pending",classId:"class-001",className:"React Fundamentals"}],quizzes:[{id:"quiz-001",title:"Fundamentos de React",questions:15,passingScore:70},{id:"quiz-002",title:"TypeScript en React",questions:10,passingScore:80}]},{id:"mod-002",title:"Desarrollo Full Stack con Node.js",description:"Aprende a construir aplicaciones completas con Node.js, Express, MongoDB y React. Incluye autenticacin, APIs REST y despliegue.",url:"https://fullstack-nodejs-course.example.com",progress:0,totalLessons:20,completedLessons:0,category:"Full Stack Development",difficulty:"intermediate",duration:1200,prerequisites:["JavaScript avanzado","React bsico","Conocimientos de bases de datos","Git y control de versiones"],learningObjectives:["Crear APIs REST con Express","Implementar autenticacin JWT","Conectar con bases de datos MongoDB","Desarrollar aplicaciones full stack","Desplegar aplicaciones en produccin"],tags:["Node.js","Express","MongoDB","Full Stack","API","JWT"],thumbnail:"/images/nodejs-course-thumb.jpg",instructor:"Ing. Carlos Mendoza",createdAt:"2024-01-10T09:00:00Z",updatedAt:"2024-01-25T16:45:00Z",isActive:!0,isPublished:!0,order:2,resources:{videos:["https://youtube.com/watch?v=nodejs-intro","https://youtube.com/watch?v=express-api","https://youtube.com/watch?v=mongodb-basics"],documents:["https://docs.example.com/nodejs-guide.pdf","https://docs.example.com/express-tutorial.pdf","https://docs.example.com/mongodb-handbook.pdf"],links:["https://nodejs.org","https://expressjs.com","https://mongodb.com","https://jwt.io"]},assignments:[{id:"assign-002",title:"API REST para e-commerce",description:"Desarrolla una API completa para un sistema de e-commerce",dueDate:"2024-03-01T23:59:59Z",status:"pending",classId:"class-002",className:"Full Stack Development"}],quizzes:[{id:"quiz-003",title:"Node.js y Express",questions:20,passingScore:75},{id:"quiz-004",title:"MongoDB y Mongoose",questions:12,passingScore:80}]},{id:"mod-003",title:"Machine Learning con Python",description:"Introduccin prctica al Machine Learning usando Python, scikit-learn, pandas y TensorFlow. Incluye proyectos reales y casos de uso.",url:"https://ml-python-course.example.com",progress:0,totalLessons:25,completedLessons:0,category:"Data Science",difficulty:"advanced",duration:1500,prerequisites:["Python intermedio","Matemticas bsicas (lgebra, estadstica)","Conocimientos de programacin orientada a objetos","Experiencia con Jupyter Notebooks"],learningObjectives:["Implementar algoritmos de ML","Preprocesar datos efectivamente","Entrenar modelos de clasificacin y regresin","Evaluar rendimiento de modelos","Desplegar modelos en produccin"],tags:["Python","Machine Learning","Data Science","TensorFlow","scikit-learn","Pandas"],thumbnail:"/images/ml-course-thumb.jpg",instructor:"Dra. Ana Rodrguez",createdAt:"2024-01-05T08:00:00Z",updatedAt:"2024-01-30T12:15:00Z",isActive:!0,isPublished:!0,order:3,resources:{videos:["https://youtube.com/watch?v=ml-intro","https://youtube.com/watch?v=tensorflow-basics","https://youtube.com/watch?v=scikit-learn"],documents:["https://docs.example.com/ml-handbook.pdf","https://docs.example.com/python-data-science.pdf","https://docs.example.com/tensorflow-guide.pdf"],links:["https://scikit-learn.org","https://tensorflow.org","https://pandas.pydata.org","https://jupyter.org"]},assignments:[{id:"assign-003",title:"Sistema de recomendacin",description:"Desarrolla un sistema de recomendacin para una plataforma de streaming",dueDate:"2024-03-15T23:59:59Z",status:"pending",classId:"class-003",className:"Machine Learning"}],quizzes:[{id:"quiz-005",title:"Fundamentos de ML",questions:25,passingScore:80},{id:"quiz-006",title:"TensorFlow y Deep Learning",questions:18,passingScore:85}]}],OD=()=>({id:`mod-${Date.now()}`,title:"Mdulo de Prueba Generado",description:"Este es un mdulo de prueba creado automticamente con todos los atributos completos para testing.",url:"https://test-module.example.com",progress:0,totalLessons:8,completedLessons:0,category:"Testing",difficulty:"beginner",duration:240,prerequisites:["Conocimientos bsicos de programacin","Inters en aprender"],learningObjectives:["Entender la estructura de mdulos","Practicar con datos de ejemplo","Validar funcionalidades del sistema"],tags:["Test","Example","Demo","Learning"],thumbnail:"/images/test-module-thumb.jpg",instructor:"Sistema Automtico",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isActive:!0,isPublished:!0,order:999,resources:{videos:["https://youtube.com/watch?v=test-video-1","https://youtube.com/watch?v=test-video-2"],documents:["https://docs.example.com/test-guide.pdf"],links:["https://example.com/test-resources"]},assignments:[{id:`assign-${Date.now()}`,title:"Tarea de Prueba",description:"Esta es una tarea de prueba para validar el sistema",dueDate:new Date(Date.now()+10080*60*1e3).toISOString(),status:"pending",classId:"test-class",className:"Clase de Prueba"}],quizzes:[{id:`quiz-${Date.now()}`,title:"Quiz de Prueba",questions:5,passingScore:60}]}),PD=()=>{const{t:e,i18n:t}=fa(),[r,s]=j.useState([]),[o,i]=j.useState(!0),[c,d]=j.useState(null),[h,f]=j.useState(!1),[p,v]=j.useState({title:"",description:"",url:""}),[x,w]=j.useState(!1),[y,S]=j.useState(null),[C,T]=j.useState(null),[A,I]=j.useState([]),[O,P]=j.useState([]),[$,F]=j.useState({open:!1,moduleId:null}),[te,ne]=j.useState(""),[Ee,Se]=j.useState(!1),[De,U]=j.useState(!1),[H,ye]=j.useState(null),[R,de]=j.useState({});j.useEffect(()=>{const q=()=>{s(RD),i(!1)};console.log("Cargando mdulos de prueba (sin backend)..."),q()},[]);const V=q=>{d(q),v({title:q.title,description:q.description,url:q.url}),f(!0),S(null),T(null)},he=()=>{f(!1),d(null),v({title:"",description:"",url:""}),S(null)},K=async()=>{if(c){w(!0),S(null),T(null);try{const ce=(await Ls.put(`/api/modules/${c.id}`,p)).data;s(J=>J.map(qe=>qe.id===c.id?ce:qe)),T("Mdulo actualizado correctamente!"),setTimeout(()=>{he()},1200)}catch{S("Error al guardar")}finally{w(!1)}}},B=()=>{d(null),v({title:"",description:"",url:""}),f(!0),S(null),T(null)},re=async()=>{w(!0),S(null),T(null);try{const ce=(await Ls.post("/api/modules",p)).data;s(J=>[...J,ce]),T("Mdulo creado correctamente!"),setTimeout(()=>{he()},1200)}catch{S("Error al crear")}finally{w(!1)}};function ae(q,ce,J){const qe=Array.from(q),[Be]=qe.splice(ce,1);return qe.splice(J,0,Be),qe}const z=async q=>{if(!q.destination)return;const ce=ae(r,q.source.index,q.destination.index);s(ce);try{await Ls.put("/api/modules/reorder",{orderedIds:ce.map(J=>J.id)})}catch{}},ge=async q=>{if(window.confirm("Seguro que quieres eliminar este mdulo?"))try{await Ls.delete(`/api/modules/${q}`),s(ce=>ce.filter(J=>J.id!==q))}catch{alert("Error al eliminar el mdulo")}},Pe=async q=>{U(!0),ye(null),ne(""),F({open:!0,moduleId:q}),Se(!1);try{const ce=localStorage.getItem(`assignment_${q}`);if(ce){const J=JSON.parse(ce);ne(J.content||""),de(qe=>({...qe,[q]:J.content||""}))}}catch(ce){console.log("Error al cargar assignment:",ce),ye("No se pudo cargar el assignment.")}finally{U(!1)}},we=()=>{F({open:!1,moduleId:null}),ne(""),Se(!1),ye(null)},Q=async()=>{if($.moduleId){U(!0),ye(null);try{const q={moduleId:$.moduleId,content:te,savedAt:new Date().toISOString()};localStorage.setItem(`assignment_${$.moduleId}`,JSON.stringify(q)),de(ce=>({...ce,[$.moduleId]:te})),Se(!0),setTimeout(()=>{Se(!1),setTimeout(()=>{we()},500)},1500)}catch(q){console.log("Error al guardar assignment:",q),ye("No se pudo guardar el assignment.")}finally{U(!1)}}},ke=({module:q,i18n:ce,isActive:J})=>{const qe=dw(q.title,"es",ce.language),Be=dw(q.description,"es",ce.language);return n.jsxs("div",{className:`bg-panel border border-border rounded-xl shadow-md overflow-hidden flex flex-col ${J?"":"opacity-60"}`,children:[n.jsx("img",{src:"https://images.unsplash.com/photo-1531482615713-2afd69097998?auto=format&fit=crop&w=800&q=80",alt:"Imagen del mdulo",className:"w-full h-[150px] object-cover"}),n.jsxs("div",{className:"p-4 flex-1 flex flex-col justify-between",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-xs font-semibold text-primary bg-primary/10 px-2 py-1 rounded-full inline-block mb-2",children:"ARTIFICIAL INTELLIGENCE"}),n.jsx("h3",{className:"text-lg font-bold text-text mb-1",children:qe}),n.jsx("p",{className:"text-sm text-text-secondary mb-2",children:Be}),n.jsx("p",{className:"text-xs text-text-secondary",children:"Grades: 36"}),n.jsx("p",{className:"text-xs text-text-secondary mb-4",children:"Duration: Lesson"})]}),n.jsx("div",{className:"flex gap-2 mt-4",children:J?n.jsxs(n.Fragment,{children:[n.jsx("a",{href:q.url,target:"_blank",rel:"noopener noreferrer",className:"bg-primary text-white font-medium text-sm py-2 px-4 rounded hover:bg-primary/80 transition",children:"Lets Go"}),n.jsx("button",{type:"button",className:"font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 border-2 border-primary text-primary hover:bg-bg focus:ring-primary px-3 py-1.5 text-sm",onClick:()=>Pe(q.id),children:"Assignment"})]}):n.jsx("button",{className:"mt-auto bg-gray-400 text-white font-medium text-sm py-2 px-4 rounded cursor-not-allowed",disabled:!0,children:"Not Assigned"})}),R[q.id]&&n.jsx("div",{className:"mt-2 text-xs text-success",children:"Assignment guardado"})]})]})};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("h1",{className:"text-3xl font-bold text-text mb-6 flex items-center justify-between",children:[e("adminDashboard.allModules","Todos los Mdulos"),user?.role==="admin"&&n.jsx(He,{size:"sm",variant:"primary",onClick:B,children:e("adminDashboard.createModule","Crear Mdulo")})]}),o?n.jsx("p",{className:"text-center text-text-secondary py-10",children:e("loading","Cargando...")}):user?.role==="student"?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:A.length===0?n.jsx("p",{className:"text-center text-text-secondary col-span-full",children:e("adminDashboard.noModules","No hay mdulos")}):A.map(q=>{const ce=O.includes(q.id);return n.jsx(ke,{module:q,i18n:t,isActive:ce},q.id)})}):n.jsx(at,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsx(qT,{onDragEnd:z,children:n.jsx(vN,{droppableId:"modules-table",children:q=>n.jsxs("table",{className:"w-full",ref:q.innerRef,...q.droppableProps,children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-border",children:[n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-secondary",children:"Ttulo"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-secondary",children:"Descripcin"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-secondary",children:"URL"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text-secondary",children:"Acciones"})]})}),n.jsxs("tbody",{children:[r.map((ce,J)=>n.jsx(_D,{draggableId:ce.id,index:J,children:(qe,Be)=>n.jsxs("tr",{ref:qe.innerRef,...qe.draggableProps,...qe.dragHandleProps,className:`border-b border-border hover:bg-panel ${Be.isDragging?"bg-primary/10":""}`,children:[n.jsx("td",{className:"py-3 px-4",children:ce.title}),n.jsx("td",{className:"py-3 px-4",children:ce.description}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("a",{href:ce.url,target:"_blank",rel:"noopener noreferrer",className:"text-primary underline",children:ce.url})}),n.jsxs("td",{className:"py-3 px-4 flex gap-2",children:[n.jsx(He,{size:"sm",variant:"outline",onClick:()=>V(ce),children:"Editar"}),n.jsx(He,{size:"sm",variant:"danger",onClick:()=>ge(ce.id),children:"Eliminar"})]})]})},ce.id)),q.placeholder]})]})})})})})]}),h&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60",children:n.jsxs("div",{className:"bg-panel rounded-lg shadow-2xl p-8 w-full max-w-md border border-border relative",children:[n.jsx("button",{className:"absolute top-2 right-2 text-text-secondary hover:text-text",onClick:he,children:""}),n.jsx("h2",{className:"text-2xl font-bold mb-4 text-text",children:c?"Editar Mdulo":"Crear Mdulo"}),n.jsxs("div",{className:"mb-4 space-y-2",children:[n.jsx("input",{type:"text",className:"w-full border border-border rounded-lg px-3 py-2 mb-2",placeholder:"Ttulo",value:p.title,onChange:q=>v({...p,title:q.target.value})}),n.jsx("textarea",{className:"w-full border border-border rounded-lg px-3 py-2 mb-2",placeholder:"Descripcin",value:p.description,onChange:q=>v({...p,description:q.target.value})}),n.jsx("input",{type:"text",className:"w-full border border-border rounded-lg px-3 py-2",placeholder:"URL",value:p.url,onChange:q=>v({...p,url:q.target.value})})]}),y&&n.jsx("div",{className:"text-red-500 mb-2",children:y}),C&&n.jsx("div",{className:"text-green-600 mb-2",children:C}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsx(He,{size:"sm",variant:"primary",onClick:c?K:re,disabled:x,children:c?"Guardar":"Crear"}),n.jsx(He,{size:"sm",variant:"outline",onClick:he,disabled:x,children:"Cancelar"})]})]})}),$.open&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60",children:n.jsxs("div",{className:"bg-panel rounded-lg shadow-2xl p-8 w-full max-w-md border border-border relative",children:[n.jsx("button",{className:"absolute top-2 right-2 text-text-secondary hover:text-text",onClick:we,children:""}),n.jsx("h2",{className:"text-2xl font-bold mb-4 text-text",children:"Assignment del Mdulo"}),n.jsx("textarea",{className:"w-full border border-border rounded-lg px-3 py-2 mb-2",placeholder:"Pega aqu tu link o escribe tu texto...",value:te,onChange:q=>ne(q.target.value),rows:4,disabled:De}),De&&n.jsx("div",{className:"text-blue-600 mb-2",children:"Cargando..."}),Ee&&n.jsx("div",{className:"text-green-600 mb-2",children:"Assignment guardado!"}),H&&n.jsx("div",{className:"text-red-500 mb-2",children:H}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsx(He,{size:"sm",variant:"primary",onClick:Q,disabled:De,children:"Guardar"}),n.jsx(He,{size:"sm",variant:"outline",onClick:we,disabled:De,children:"Cancelar"})]})]})})]})},MD=()=>{const{t:e}=fa(),[t,r]=j.useState([]),[s,o]=j.useState(!0);return j.useEffect(()=>{Ls.get("/api/materials").then(i=>{r(i.data),o(!1)})},[]),n.jsxs("div",{className:"space-y-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-text mb-6",children:e("adminDashboard.allMaterials","Todos los Materiales")}),n.jsx(at,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200",children:[n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text",children:"Ttulo"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text",children:"Tipo"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text",children:"URL"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text",children:"Acciones"})]})}),n.jsx("tbody",{children:s?n.jsx("tr",{children:n.jsx("td",{colSpan:4,className:"py-6 text-center text-text-secondary",children:e("loading","Cargando...")})}):t.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:4,className:"py-6 text-center text-text-secondary",children:e("adminDashboard.noMaterials","No hay materiales")})}):t.map(i=>n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[n.jsx("td",{className:"py-3 px-4",children:i.title}),n.jsx("td",{className:"py-3 px-4",children:i.type}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:i.url})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx(He,{size:"sm",variant:"outline",children:e("adminDashboard.manage","Gestionar")})})]},i.id))})]})})})]})},LD=()=>{const{t:e}=fa(),[t,r]=j.useState([]),[s,o]=j.useState(!0);return j.useEffect(()=>{fetch("undefined/api/assignments").then(i=>i.json()).then(i=>{r(i),o(!1)})},[]),n.jsxs("div",{className:"space-y-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-text mb-6",children:e("adminDashboard.allAssignments","Todas las Tareas")}),n.jsx(at,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200",children:[n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text",children:"Ttulo"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text",children:"Descripcin"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text",children:"Clase"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text",children:"Fecha Entrega"})]})}),n.jsx("tbody",{children:t.map(i=>n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[n.jsx("td",{className:"py-3 px-4",children:i.title}),n.jsx("td",{className:"py-3 px-4",children:i.description}),n.jsx("td",{className:"py-3 px-4",children:i.classId||"-"}),n.jsx("td",{className:"py-3 px-4",children:i.dueDate})]},i.id))})]})})})]})},$D=()=>{const{t:e}=fa(),[t,r]=j.useState([]),[s,o]=j.useState([]),[i,c]=j.useState([]),[d,h]=j.useState([]);return j.useEffect(()=>{Ls.get("/api/users").then(f=>r(f.data)),Ls.get("/api/classes").then(f=>o(f.data)),Ls.get("/api/assignments").then(f=>c(f.data)),Ls.get("/api/modules").then(f=>h(f.data))},[]),n.jsxs("div",{className:"space-y-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-text mb-6",children:e("adminDashboard.reportsQuick","Reportes del Sistema")}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[n.jsxs(at,{className:"text-center",children:[n.jsx(Sr,{className:"w-8 h-8 text-primary mx-auto mb-3"}),n.jsx("h3",{className:"text-2xl font-bold text-text",children:t.length}),n.jsx("p",{className:"text-text-secondary",children:e("adminDashboard.totalUsers","Total Usuarios")})]}),n.jsxs(at,{className:"text-center",children:[n.jsx(of,{className:"w-8 h-8 text-success mx-auto mb-3"}),n.jsx("h3",{className:"text-2xl font-bold text-text",children:s.length}),n.jsx("p",{className:"text-text-secondary",children:e("adminDashboard.classes",{count:s.length})})]}),n.jsxs(at,{className:"text-center",children:[n.jsx(nx,{className:"w-8 h-8 text-warning mx-auto mb-3"}),n.jsx("h3",{className:"text-2xl font-bold text-text",children:i.length}),n.jsx("p",{className:"text-text-secondary",children:e("adminDashboard.allAssignments","Todas las Tareas")})]}),n.jsxs(at,{className:"text-center",children:[n.jsx(i2,{className:"w-8 h-8 text-accent mx-auto mb-3"}),n.jsx("h3",{className:"text-2xl font-bold text-text",children:d.length}),n.jsx("p",{className:"text-text-secondary",children:e("adminDashboard.allModules","Todos los Mdulos")})]})]}),n.jsxs(at,{children:[n.jsx("h2",{className:"text-xl font-bold text-text mb-4",children:e("adminDashboard.performanceAnalysis","Anlisis de Rendimiento")}),n.jsx("div",{className:"h-48 flex items-center justify-center text-text-secondary",children:n.jsx("span",{children:"Grfico de rendimiento prximamente..."})})]})]})},FD=()=>{const{t:e}=fa(),[t,r]=j.useState([]),[s,o]=j.useState(!0);return j.useEffect(()=>{fetch("undefined/api/studentclasses").then(i=>i.json()).then(i=>{r(i),o(!1)})},[]),n.jsxs("div",{className:"space-y-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-text mb-6",children:e("adminDashboard.studentClasses","Inscripciones de Estudiantes")}),n.jsx(at,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200",children:[n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text",children:"Estudiante"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text",children:"Email"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text",children:"Clase"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text",children:"Estado"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-text",children:"Fecha de Inscripcin"})]})}),n.jsx("tbody",{children:t.map(i=>n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[n.jsxs("td",{className:"py-3 px-4",children:[i.student.firstName," ",i.student.lastName]}),n.jsx("td",{className:"py-3 px-4",children:i.student.email}),n.jsx("td",{className:"py-3 px-4",children:i.class.title}),n.jsx("td",{className:"py-3 px-4",children:e("enrollmentStatus."+i.status,{defaultValue:i.status})}),n.jsx("td",{className:"py-3 px-4",children:new Date(i.joinedAt).toLocaleDateString()})]},i.id))})]})})})]})},BD=()=>{const{t:e}=fa(),[t,r]=j.useState("admin@email.com");return n.jsxs("div",{className:"space-y-6 max-w-xl mx-auto",children:[n.jsx("h1",{className:"text-3xl font-bold text-text mb-6",children:e("adminDashboard.settings","Configuracin")}),n.jsx(at,{className:"p-6",children:n.jsx("form",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-text font-medium mb-1",children:"Email de Contacto"}),n.jsx("input",{type:"email",className:"w-full border border-gray-300 rounded-lg px-3 py-2",value:t,onChange:s=>r(s.target.value)})]})})})]})},UD=()=>{const{t:e}=fa(),{user:t,setUser:r}=$t(),[s,o]=j.useState(t?.firstName||"Usuario"),[i,c]=j.useState(t?.lastName||""),[d,h]=j.useState(t?.email||""),[f,p]=j.useState(t?.avatar||""),[v]=j.useState(t?.role||"admin"),[x,w]=j.useState(!1),[y,S]=j.useState(!1),[C,T]=j.useState("");j.useEffect(()=>{t&&(o(t.firstName||""),c(t.lastName||""),h(t.email||""),p(t.avatar||""))},[t]);const A=async I=>{if(I.preventDefault(),w(!0),T(""),S(!1),!t){T("No hay usuario autenticado"),w(!1);return}try{const{data:O,error:P}=await Ue.from("users").update({first_name:s,last_name:i,avatar:f}).eq("id",t.id).select().single();if(P)throw new Error(P.message||"Error al actualizar el perfil en la base de datos");if(O){const $={...t,firstName:O.first_name,lastName:O.last_name,avatar:O.avatar};r($)}S(!0)}catch(O){console.error("Error updating profile:",O),T(O.message||"Error desconocido")}finally{w(!1)}};return n.jsxs("div",{className:"space-y-6 max-w-xl mx-auto",children:[n.jsx("h1",{className:"text-3xl font-bold text-text mb-6",children:e("adminDashboard.profile","Perfil de Usuario")}),n.jsx(at,{className:"p-6 flex flex-col items-center",children:n.jsxs("form",{className:"w-full max-w-md",onSubmit:A,children:[n.jsxs("div",{className:"flex flex-col items-center mb-4",children:[f?n.jsx("img",{src:f,alt:"Avatar",className:"w-24 h-24 rounded-full object-cover border-2 border-purple-500"}):n.jsx("div",{className:"w-24 h-24 rounded-full bg-purple-100 flex items-center justify-center border-2 border-purple-500",children:n.jsx(es,{className:"w-12 h-12 text-purple-500"})}),n.jsx("input",{type:"text",className:"mt-2 w-full border border-gray-300 rounded-lg px-3 py-2 text-center",placeholder:"URL del avatar",value:f,onChange:I=>p(I.target.value)})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"block text-text font-medium mb-1",children:"Nombre"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2",value:s,onChange:I=>o(I.target.value)})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"block text-text font-medium mb-1",children:"Apellido"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2",value:i,onChange:I=>c(I.target.value)})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"block text-text font-medium mb-1",children:"Email"}),n.jsx("input",{type:"email",className:"w-full border border-gray-300 rounded-lg px-3 py-2",value:d,onChange:I=>h(I.target.value)})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"block text-text font-medium mb-1",children:"Rol"}),n.jsx("input",{type:"text",className:"w-full border border-border rounded-lg px-3 py-2 bg-panel text-text-secondary",value:"Administrador",disabled:!0})]}),C&&n.jsx("p",{className:"text-red-500 mt-2 text-sm",children:C}),y&&n.jsx("p",{className:"text-green-600 mt-2 text-sm",children:"Perfil actualizado!"}),n.jsx(He,{type:"submit",className:"w-full mt-4",disabled:x,children:x?"Guardando...":"Guardar Cambios"})]})})]})},zD=()=>{const[e,t]=j.useState(3),r=Kr();return j.useEffect(()=>{e===0&&r("/");const s=setTimeout(()=>t(o=>o-1),1e3);return()=>clearTimeout(s)},[e,r]),n.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-bg",children:[n.jsx("h1",{className:"text-4xl font-bold text-error mb-4",children:"Pgina no encontrada"}),n.jsxs("p",{className:"text-lg text-text-secondary mb-6",children:["Sers redirigido a la pgina principal en"," ",n.jsx("span",{className:"text-3xl font-extrabold text-primary",children:e})," segundos..."]}),n.jsx("button",{className:"px-4 py-2 bg-primary text-white rounded hover:bg-primary/80 transition",onClick:()=>r("/"),children:"Ir a la pgina principal ahora"})]})},qD=["Not started","In progress","Done"],GD=["Low","Medium","High"];function uw({onSave:e,onClose:t,initial:r}){const[s,o]=j.useState(r||{name:"",status:"",priority:"",description:"",dueDate:""}),i=d=>o({...s,[d.target.name]:d.target.value}),c=d=>{d.preventDefault(),e(s)};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50",children:n.jsxs("form",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",onSubmit:c,children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:r?"Editar tarea":"Nueva tarea"}),n.jsx("input",{name:"name",value:s.name,onChange:i,placeholder:"Nombre",className:"mb-2 w-full border px-2 py-1 rounded",required:!0}),n.jsx("label",{className:"block mb-2",children:"Estado"}),n.jsxs("select",{name:"status",value:s.status,onChange:i,className:"mb-2 w-full border px-2 py-1 rounded",required:!0,children:[n.jsx("option",{value:"",children:"Selecciona estado"}),qD.map(d=>n.jsx("option",{value:d,children:d},d))]}),n.jsx("label",{className:"block mb-2",children:"Prioridad"}),n.jsxs("select",{name:"priority",value:s.priority,onChange:i,className:"mb-2 w-full border px-2 py-1 rounded",required:!0,children:[n.jsx("option",{value:"",children:"Selecciona prioridad"}),GD.map(d=>n.jsx("option",{value:d,children:d},d))]}),n.jsx("input",{name:"dueDate",value:s.dueDate,onChange:i,placeholder:"Fecha lmite",type:"date",className:"mb-2 w-full border px-2 py-1 rounded"}),n.jsx("textarea",{name:"description",value:s.description,onChange:i,placeholder:"Descripcin",className:"mb-2 w-full border px-2 py-1 rounded"}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsx("button",{type:"submit",className:"bg-primary text-white px-4 py-2 rounded",children:r?"Guardar":"Crear"}),n.jsx("button",{type:"button",className:"bg-gray-200 px-4 py-2 rounded",onClick:t,children:"Cancelar"})]})]})})}const VD=["Not started","In progress","Done"],HD=["Low","Medium","High"];function WD({task:e,onSave:t,onClose:r}){const[s,o]=j.useState(e.properties?.Status?.status?.name||""),[i,c]=j.useState(e.properties?.Priority?.select?.name||"");return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50",children:n.jsxs("form",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",onSubmit:d=>{d.preventDefault(),t({status:s,priority:i})},children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Actualizar Estado y Prioridad"}),n.jsx("label",{className:"block mb-2",children:"Estado"}),n.jsxs("select",{className:"mb-4 w-full border px-2 py-1 rounded",value:s,onChange:d=>o(d.target.value),required:!0,children:[n.jsx("option",{value:"",children:"Selecciona estado"}),VD.map(d=>n.jsx("option",{value:d,children:d},d))]}),n.jsx("label",{className:"block mb-2",children:"Prioridad"}),n.jsxs("select",{className:"mb-4 w-full border px-2 py-1 rounded",value:i,onChange:d=>c(d.target.value),required:!0,children:[n.jsx("option",{value:"",children:"Selecciona prioridad"}),HD.map(d=>n.jsx("option",{value:d,children:d},d))]}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsx("button",{type:"submit",className:"bg-primary text-white px-4 py-2 rounded",children:"Guardar"}),n.jsx("button",{type:"button",className:"bg-gray-200 px-4 py-2 rounded",onClick:r,children:"Cancelar"})]})]})})}function KD(){const[e,t]=j.useState([]),[r,s]=j.useState(!0),[o,i]=j.useState(!1),[c,d]=j.useState(null),[h,f]=j.useState(null),[p,v]=j.useState({status:"",priority:""}),[x,w]=j.useState(null),y=()=>{let O="https://algorithmicsai-backend-waves-d55c2136336f.herokuapp.com/api/notion/tasks";const P=[];p.status&&P.push(`status=${p.status}`),p.priority&&P.push(`priority=${p.priority}`),P.length&&(O+="?"+P.join("&")),fetch(O).then($=>$.json()).then($=>{t($.results||[]),s(!1)})};j.useEffect(()=>{y()},[]);const S=e.filter(O=>{const P=O.properties?.Status?.status?.name||"",$=O.properties?.Priority?.select?.name||"";return(!p.status||P===p.status)&&(!p.priority||$===p.priority)}),C=O=>{const P={"Task name":O.name,Description:O.description,Status:O.status,Priority:O.priority,"Due date":O.dueDate};fetch("https://algorithmicsai-backend-waves-d55c2136336f.herokuapp.com/api/notion/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)}).then(()=>{i(!1),y()})},T=(O,P)=>{const $={"Task name":P.name,Description:P.description,Status:P.status,Priority:P.priority,"Due date":P.dueDate};fetch(`https://algorithmicsai-backend-waves-d55c2136336f.herokuapp.com/api/notion/tasks/${O}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify($)}).then(async F=>{F.ok?(d(null),setTimeout(y,1e3)):F.status===404?(w("La tarea ya no existe en Notion."),y()):w("Error al editar la tarea.")}).catch(()=>w("Error de red al editar la tarea."))},A=(O,P)=>{const $={Status:P.status,Priority:P.priority};fetch(`https://algorithmicsai-backend-waves-d55c2136336f.herokuapp.com/api/notion/tasks/${O}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify($)}).then(async F=>{F.ok?(f(null),setTimeout(y,1e3)):F.status===404?(w("La tarea ya no existe en Notion."),y()):w("Error al actualizar la tarea.")}).catch(()=>w("Error de red al actualizar la tarea."))},I=O=>{window.confirm("Eliminar tarea?")&&fetch(`https://algorithmicsai-backend-waves-d55c2136336f.herokuapp.com/api/notion/tasks/${O}`,{method:"DELETE"}).then(async P=>{P.ok?y():P.status===404?(w("La tarea ya no existe en Notion."),y()):w("Error al eliminar la tarea.")}).catch(()=>w("Error de red al eliminar la tarea."))};return r?n.jsx("div",{children:"Cargando tareas..."}):n.jsxs("div",{children:[x&&n.jsx("div",{className:"mb-4 p-2 bg-red-100 text-red-700 rounded",children:x}),n.jsxs("div",{className:"flex gap-2 mb-4",children:[n.jsx("button",{className:"bg-primary text-white px-4 py-2 rounded hover:bg-blue-500 transition",onClick:()=>i(!0),children:"Nueva tarea"}),n.jsx("button",{className:"bg-panel text-text px-4 py-2 rounded border border-border hover:bg-border transition",onClick:y,children:"Refrescar"}),n.jsxs("select",{value:p.status,onChange:O=>v(P=>({...P,status:O.target.value})),className:"border border-border bg-panel text-text px-2 py-1 rounded",children:[n.jsx("option",{value:"",children:"Todos los estados"}),n.jsx("option",{value:"Not started",children:"Not started"}),n.jsx("option",{value:"In progress",children:"In progress"}),n.jsx("option",{value:"Done",children:"Done"})]}),n.jsxs("select",{value:p.priority,onChange:O=>v(P=>({...P,priority:O.target.value})),className:"border border-border bg-panel text-text px-2 py-1 rounded",children:[n.jsx("option",{value:"",children:"Todas las prioridades"}),n.jsx("option",{value:"Low",children:"Low"}),n.jsx("option",{value:"Medium",children:"Medium"}),n.jsx("option",{value:"High",children:"High"})]})]}),n.jsxs("table",{className:"w-full border border-border rounded-lg overflow-hidden bg-panel text-text",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-border border-b border-border",children:[n.jsx("th",{className:"py-2 px-4 text-left text-text-secondary",children:"Tarea"}),n.jsx("th",{className:"py-2 px-4 text-left text-text-secondary",children:"Estado"}),n.jsx("th",{className:"py-2 px-4 text-left text-text-secondary",children:"Prioridad"}),n.jsx("th",{className:"py-2 px-4 text-left text-text-secondary",children:"Descripcin"}),n.jsx("th",{className:"py-2 px-4 text-left text-text-secondary",children:"Fecha lmite"}),n.jsx("th",{className:"py-2 px-4 text-left text-text-secondary",children:"Acciones"})]})}),n.jsx("tbody",{children:S.map(O=>n.jsxs("tr",{className:"border-b border-border hover:bg-hover transition",children:[n.jsx("td",{className:"py-2 px-4 text-text",children:O.properties?.["Task name"]?.title?.[0]?.plain_text||"Sin nombre"}),n.jsx("td",{className:"py-2 px-4",children:(()=>{const P=O.properties?.Status?.status?.name||"Sin estado",$=P==="Done"?"bg-green-700 text-green-100":P==="In progress"?"bg-yellow-700 text-yellow-100":P==="Not started"?"bg-gray-700 text-gray-200":"bg-border text-text-secondary";return n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${$}`,children:P})})()}),n.jsx("td",{className:"py-2 px-4",children:(()=>{const P=O.properties?.Priority?.select?.name||"Sin prioridad",$=P==="High"?"bg-red-700 text-red-100":P==="Medium"?"bg-orange-700 text-orange-100":P==="Low"?"bg-green-700 text-green-100":"bg-border text-text-secondary";return n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${$}`,children:P})})()}),n.jsx("td",{className:"py-2 px-4 text-text-secondary",children:O.properties?.Description?.rich_text?.[0]?.plain_text||"Sin descripcin"}),n.jsx("td",{className:"py-2 px-4 text-text-secondary",children:O.properties?.["Due date"]?.date?.start||"Sin fecha"}),n.jsxs("td",{className:"py-2 px-4 flex gap-2",children:[n.jsx("button",{className:"text-blue-400 hover:text-blue-200",onClick:()=>d(O),children:"Editar"}),n.jsx("button",{className:"text-yellow-400 hover:text-yellow-200",onClick:()=>f(O),children:"Estado/Prioridad"}),n.jsx("button",{className:"text-red-400 hover:text-red-200",onClick:()=>I(O.id),children:"Eliminar"})]})]},O.id))})]}),o&&n.jsx(uw,{onSave:C,onClose:()=>i(!1)}),c&&n.jsx(uw,{onSave:O=>T(c.id,O),onClose:()=>d(null),initial:{name:c.properties?.["Task name"]?.title?.[0]?.plain_text||"",status:c.properties?.Status?.status?.name||"",priority:c.properties?.Priority?.select?.name||"",description:c.properties?.Description?.rich_text?.[0]?.plain_text||"",dueDate:c.properties?.["Due date"]?.date?.start||""}}),h&&n.jsx(WD,{task:h,onSave:O=>A(h.id,O),onClose:()=>f(null)})]})}const QD=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-text mb-6",children:"Tareas de Notion"}),n.jsx(KD,{})]}),Qn=({label:e,type:t="text",placeholder:r,value:s,onChange:o,error:i,required:c=!1,disabled:d=!1,className:h="",name:f})=>n.jsxs("div",{className:`mb-4 ${h}`,children:[e&&n.jsxs("label",{className:"block text-sm font-medium dark:text-white text-gray-900 mb-2",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:t,name:f,placeholder:r,value:s,onChange:o,disabled:d,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors ${i?"border-error focus:ring-error":"border-border bg-panel text-text"} ${d?"bg-border cursor-not-allowed":""}`}),i&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i})]}),JD=()=>{const[e,t]=j.useState([]),[r,s]=j.useState(!0),[o,i]=j.useState(""),[c,d]=j.useState("all");j.useEffect(()=>{const v=[{id:"1",orderNumber:"ORD-001",clientName:"Juan Prez",status:"pending",total:1500,createdAt:"2024-01-15",items:[{id:"1",name:"Producto A",quantity:2,price:500,total:1e3},{id:"2",name:"Producto B",quantity:1,price:500,total:500}]},{id:"2",orderNumber:"ORD-002",clientName:"Mara Garca",status:"processing",total:2300,createdAt:"2024-01-14",items:[{id:"3",name:"Producto C",quantity:3,price:400,total:1200},{id:"4",name:"Producto D",quantity:2,price:550,total:1100}]},{id:"3",orderNumber:"ORD-003",clientName:"Carlos Lpez",status:"delivered",total:800,createdAt:"2024-01-13",items:[{id:"5",name:"Producto E",quantity:1,price:800,total:800}]}];setTimeout(()=>{t(v),s(!1)},1e3)},[]);const h=v=>{switch(v){case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";case"shipped":return"bg-purple-100 text-purple-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},f=v=>{switch(v){case"pending":return"Pendiente";case"processing":return"Procesando";case"shipped":return"Enviado";case"delivered":return"Entregado";case"cancelled":return"Cancelado";default:return v}},p=e.filter(v=>{const x=v.orderNumber.toLowerCase().includes(o.toLowerCase())||v.clientName.toLowerCase().includes(o.toLowerCase()),w=c==="all"||v.status===c;return x&&w});return r?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsx("h1",{className:"text-3xl font-bold text-text",children:"rdenes"})}),n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent"})})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h1",{className:"text-3xl font-bold text-text",children:"rdenes"}),n.jsxs(He,{className:"flex items-center gap-2",children:[n.jsx(Hr,{className:"w-4 h-4"}),"Nueva Orden"]})]}),n.jsx(at,{className:"p-6",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(Ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-secondary w-4 h-4"}),n.jsx(Qn,{placeholder:"Buscar por nmero de orden o cliente...",value:o,onChange:v=>i(v.target.value),className:"pl-10"})]})}),n.jsx("div",{className:"sm:w-48",children:n.jsxs("select",{value:c,onChange:v=>d(v.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-panel text-text focus:outline-none focus:ring-2 focus:ring-accent/20",children:[n.jsx("option",{value:"all",children:"Todos los estados"}),n.jsx("option",{value:"pending",children:"Pendiente"}),n.jsx("option",{value:"processing",children:"Procesando"}),n.jsx("option",{value:"shipped",children:"Enviado"}),n.jsx("option",{value:"delivered",children:"Entregado"}),n.jsx("option",{value:"cancelled",children:"Cancelado"})]})})]})}),n.jsx("div",{className:"space-y-4",children:p.length===0?n.jsxs(at,{className:"p-8 text-center",children:[n.jsx(Dh,{className:"w-16 h-16 text-text-secondary mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-text mb-2",children:"No hay rdenes"}),n.jsx("p",{className:"text-text-secondary mb-4",children:o||c!=="all"?"No se encontraron rdenes con los filtros aplicados.":"An no tienes rdenes registradas."}),n.jsxs(He,{className:"flex items-center gap-2 mx-auto",children:[n.jsx(Hr,{className:"w-4 h-4"}),"Crear Primera Orden"]})]}):p.map(v=>n.jsx(at,{className:"p-6",children:n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[n.jsx("h3",{className:"text-lg font-semibold text-text",children:v.orderNumber}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h(v.status)}`,children:f(v.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 text-sm text-text-secondary",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(es,{className:"w-4 h-4"}),n.jsx("span",{children:v.clientName})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Fs,{className:"w-4 h-4"}),n.jsx("span",{children:new Date(v.createdAt).toLocaleDateString()})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(lf,{className:"w-4 h-4"}),n.jsxs("span",{className:"font-medium text-text",children:["$",v.total.toLocaleString("es-ES",{minimumFractionDigits:2})]})]})]}),n.jsx("div",{className:"mt-2",children:n.jsxs("p",{className:"text-sm text-text-secondary",children:[v.items.length," producto",v.items.length!==1?"s":""]})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(He,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(Ai,{className:"w-4 h-4"}),"Ver"]}),n.jsxs(He,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(Bn,{className:"w-4 h-4"}),"Editar"]}),n.jsxs(He,{variant:"danger",size:"sm",className:"flex items-center gap-2",children:[n.jsx(Gr,{className:"w-4 h-4"}),"Eliminar"]})]})]})},v.id))})]})},YD=()=>{const[e,t]=j.useState({clientName:"",clientEmail:"",clientPhone:"",deliveryAddress:"",notes:"",deliveryDate:""}),[r,s]=j.useState([]),[o,i]=j.useState({name:"",quantity:1,price:0}),c=()=>{if(o.name&&o.quantity>0&&o.price>0){const y={id:Date.now().toString(),name:o.name,quantity:o.quantity,price:o.price,total:o.quantity*o.price};s([...r,y]),i({name:"",quantity:1,price:0})}},d=y=>{s(r.filter(S=>S.id!==y))},h=(y,S)=>{S>0&&s(r.map(C=>C.id===y?{...C,quantity:S,total:S*C.price}:C))},f=(y,S)=>{S>=0&&s(r.map(C=>C.id===y?{...C,price:S,total:C.quantity*S}:C))},p=r.reduce((y,S)=>y+S.total,0),v=p*.16,x=p+v,w=y=>{y.preventDefault(),console.log("Guardando orden:",{formData:e,items:r,subtotal:p,tax:v,total:x}),alert("Orden creada exitosamente")};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs(He,{variant:"outline",className:"flex items-center gap-2",children:[n.jsx(a2,{className:"w-4 h-4"}),"Volver"]}),n.jsx("h1",{className:"text-3xl font-bold text-text",children:"Crear Nueva Orden"})]}),n.jsxs("form",{onSubmit:w,className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(at,{className:"p-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-text mb-4 flex items-center gap-2",children:[n.jsx(es,{className:"w-5 h-5"}),"Informacin del Cliente"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-text mb-2",children:"Nombre del Cliente *"}),n.jsx(Qn,{value:e.clientName,onChange:y=>t({...e,clientName:y.target.value}),placeholder:"Nombre completo del cliente",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-text mb-2",children:"Email"}),n.jsx(Qn,{type:"email",value:e.clientEmail,onChange:y=>t({...e,clientEmail:y.target.value}),placeholder:"email@ejemplo.com"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-text mb-2",children:"Telfono"}),n.jsx(Qn,{value:e.clientPhone,onChange:y=>t({...e,clientPhone:y.target.value}),placeholder:"+52 55 1234 5678"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-text mb-2",children:"Direccin de Entrega"}),n.jsx("textarea",{value:e.deliveryAddress,onChange:y=>t({...e,deliveryAddress:y.target.value}),placeholder:"Direccin completa de entrega",className:"w-full px-3 py-2 border border-border rounded-lg bg-panel text-text focus:outline-none focus:ring-2 focus:ring-accent/20 resize-none",rows:3})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-text mb-2",children:"Fecha de Entrega"}),n.jsx(Qn,{type:"date",value:e.deliveryDate,onChange:y=>t({...e,deliveryDate:y.target.value})})]})]})]}),n.jsxs(at,{className:"p-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-text mb-4 flex items-center gap-2",children:[n.jsx(Dh,{className:"w-5 h-5"}),"Productos"]}),n.jsxs("div",{className:"space-y-4 mb-6",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-text mb-2",children:"Producto"}),n.jsx(Qn,{value:o.name,onChange:y=>i({...o,name:y.target.value}),placeholder:"Nombre del producto"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-text mb-2",children:"Cantidad"}),n.jsx(Qn,{type:"number",min:"1",value:o.quantity,onChange:y=>i({...o,quantity:parseInt(y.target.value)||1})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-text mb-2",children:"Precio"}),n.jsx(Qn,{type:"number",min:"0",step:"0.01",value:o.price,onChange:y=>i({...o,price:parseFloat(y.target.value)||0}),placeholder:"0.00"})]})]}),n.jsxs(He,{type:"button",onClick:c,className:"flex items-center gap-2",disabled:!o.name||o.quantity<=0||o.price<=0,children:[n.jsx(Hr,{className:"w-4 h-4"}),"Agregar Producto"]})]}),r.length>0?n.jsxs("div",{className:"space-y-2",children:[n.jsx("h3",{className:"font-medium text-text",children:"Productos Agregados"}),r.map(y=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-panel rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-text",children:y.name}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-text-secondary",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>h(y.id,y.quantity-1),className:"p-1 hover:bg-border rounded",children:n.jsx(dg,{className:"w-3 h-3"})}),n.jsx("span",{children:y.quantity}),n.jsx("button",{type:"button",onClick:()=>h(y.id,y.quantity+1),className:"p-1 hover:bg-border rounded",children:n.jsx(Hr,{className:"w-3 h-3"})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"$"}),n.jsx("input",{type:"number",min:"0",step:"0.01",value:y.price,onChange:S=>f(y.id,parseFloat(S.target.value)||0),className:"w-20 px-2 py-1 border border-border rounded bg-panel text-text text-sm"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"font-medium text-text",children:["$",y.total.toLocaleString("es-ES",{minimumFractionDigits:2})]}),n.jsx(He,{type:"button",variant:"danger",size:"sm",onClick:()=>d(y.id),className:"p-1",children:n.jsx(dg,{className:"w-4 h-4"})})]})]},y.id))]}):n.jsxs("div",{className:"text-center py-8 text-text-secondary",children:[n.jsx(Dh,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"No hay productos agregados"})]})]})]}),r.length>0&&n.jsxs(at,{className:"p-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-text mb-4 flex items-center gap-2",children:[n.jsx(lf,{className:"w-5 h-5"}),"Resumen de la Orden"]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-text",children:[n.jsx("span",{children:"Subtotal:"}),n.jsxs("span",{children:["$",p.toLocaleString("es-ES",{minimumFractionDigits:2})]})]}),n.jsxs("div",{className:"flex justify-between text-text",children:[n.jsx("span",{children:"IVA (16%):"}),n.jsxs("span",{children:["$",v.toLocaleString("es-ES",{minimumFractionDigits:2})]})]}),n.jsxs("div",{className:"flex justify-between text-lg font-semibold text-text border-t border-border pt-2",children:[n.jsx("span",{children:"Total:"}),n.jsxs("span",{children:["$",x.toLocaleString("es-ES",{minimumFractionDigits:2})]})]})]})]}),n.jsxs(at,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-text mb-4",children:"Notas Adicionales"}),n.jsx("textarea",{value:e.notes,onChange:y=>t({...e,notes:y.target.value}),placeholder:"Instrucciones especiales, comentarios, etc.",className:"w-full px-3 py-2 border border-border rounded-lg bg-panel text-text focus:outline-none focus:ring-2 focus:ring-accent/20 resize-none",rows:3})]}),n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx(He,{type:"button",variant:"outline",children:"Cancelar"}),n.jsxs(He,{type:"submit",className:"flex items-center gap-2",disabled:!e.clientName||r.length===0,children:[n.jsx(Gs,{className:"w-4 h-4"}),"Crear Orden"]})]})]})]})},ZD=()=>{const[e,t]=j.useState([]),[r,s]=j.useState(""),[o,i]=j.useState("all"),[c,d]=j.useState(!0),[h,f]=j.useState(!1),[p,v]=j.useState(!1),[x,w]=j.useState(null),[y,S]=j.useState(null),[C,T]=j.useState(!0),[A,I]=j.useState(null),[O,P]=j.useState(null),[$,F]=j.useState({empresa:"",contacto:"",email:"",telefono:"",direccion:"",website:"",status:"prospect",origen:"",notas:""}),te=async()=>{try{T(!0),I(null);const{data:z,error:ge}=await Ue.from("clientes").select("*").order("created_at",{ascending:!1});if(ge)throw new Error(`Error al obtener clientes: ${ge.message}`);const Pe=(z||[]).map(we=>({id:we.id,empresa:we.empresa||"",contacto:we.contacto||"",email:we.email||"",telefono:we.telefono||"",direccion:we.direccion||"",website:we.website||"",status:we.status||"prospect",origen:we.origen||"",total_proyectos:we.total_proyectos||0,ingresos_totales:we.ingresos_totales||0,ultimo_contacto:we.ultimo_contacto||new Date().toISOString().split("T")[0],notas:we.notas||"",created_at:we.created_at,updated_at:we.updated_at,name:we.empresa,contactPerson:we.contacto,phone:we.telefono,address:we.direccion,totalProjects:we.total_proyectos,totalRevenue:we.ingresos_totales,lastContact:we.ultimo_contacto}));t(Pe)}catch(z){console.error("Error al obtener clientes:",z),I(z instanceof Error?z.message:"Error desconocido")}finally{T(!1)}},ne=async()=>{try{if(!$.empresa.trim()){I("El nombre de la empresa es requerido");return}const{data:z,error:ge}=await Ue.from("clientes").insert({empresa:$.empresa,contacto:$.contacto,email:$.email||null,telefono:$.telefono||null,direccion:$.direccion||null,website:$.website||null,status:$.status,origen:$.origen||null,total_proyectos:0,ingresos_totales:0,ultimo_contacto:new Date().toISOString().split("T")[0],notas:$.notas||null}).select();if(ge)throw new Error(`Error al agregar cliente: ${ge.message}`);F({empresa:"",contacto:"",email:"",telefono:"",direccion:"",website:"",status:"prospect",origen:"",notas:""}),await te(),P(" Cliente agregado exitosamente"),I(null),setTimeout(()=>{P(null)},5e3)}catch(z){console.error("Error al agregar cliente:",z),I(z instanceof Error?z.message:"Error desconocido")}},Ee=async z=>{try{if(!z.id)throw new Error("ID del cliente no vlido");const{error:ge}=await Ue.from("clientes").update({empresa:z.empresa||z.name,contacto:z.contacto||z.contactPerson,email:z.email||null,telefono:z.telefono||z.phone||null,direccion:z.direccion||z.address||null,website:z.website||null,status:z.status,origen:z.origen||null,total_proyectos:z.total_proyectos||z.totalProjects||0,ingresos_totales:z.ingresos_totales||z.totalRevenue||0,ultimo_contacto:z.ultimo_contacto||z.lastContact||new Date().toISOString().split("T")[0],notas:z.notas||z.notes||null}).eq("id",z.id);if(ge)throw new Error(`Error al actualizar cliente: ${ge.message}`);await te()}catch(ge){throw console.error("Error al actualizar cliente:",ge),ge}},Se=async z=>{if(!z.id){I("ID del cliente no vlido");return}const ge=z.empresa||z.name||"este cliente";if(confirm(`Ests seguro de que quieres eliminar el cliente "${ge}"? Esta accin no se puede deshacer.`))try{const{error:Pe}=await Ue.from("clientes").delete().eq("id",z.id);if(Pe)throw new Error(`Error al eliminar cliente: ${Pe.message}`);await te(),P(" Cliente eliminado exitosamente"),I(null)}catch(Pe){console.error("Error al eliminar cliente:",Pe),I(Pe instanceof Error?Pe.message:"Error desconocido")}},De=z=>{w(z),f(!0),I(null),P(null)},U=z=>{S({...z}),v(!0),I(null),P(null)},H=async()=>{if(y)try{await Ee(y);const z={...y,lastModified:new Date().toISOString()};t(ge=>ge.map(Pe=>Pe.id===y.id?z:Pe)),v(!1),S(null),P(" Cliente actualizado exitosamente"),I(null),setTimeout(()=>{te()},1e3)}catch(z){console.error("Error al actualizar cliente:",z),I("Error al actualizar el cliente")}},ye=()=>{v(!1),S(null),I(null),P(null)},R=()=>{f(!1),w(null),I(null),P(null)},de=async(z,ge)=>{if(ge!==z.status){console.log(" Cambiando estado del cliente:",{clientName:z.empresa||z.name,oldStatus:z.status,newStatus:ge});try{const Pe={...z,status:ge,isUpdating:!0};t(ke=>ke.map(q=>q.id===z.id?Pe:q));const we={...z,status:ge};await Ee(we);const Q={...we,lastModified:new Date().toISOString()};t(ke=>ke.map(q=>q.id===z.id?Q:q)),P(" Estado actualizado exitosamente"),I(null)}catch(Pe){console.error("Error al actualizar estado:",Pe),I("Error al actualizar el estado"),t(we=>we.map(Q=>Q.id===z.id?z:Q))}}},V=z=>new Promise((ge,Pe)=>{const we=new Image;we.crossOrigin="anonymous",we.onload=()=>{const Q=document.createElement("canvas"),ke=Q.getContext("2d");if(!ke){Pe(new Error("No se pudo obtener el contexto del canvas"));return}Q.width=we.width,Q.height=we.height,ke.drawImage(we,0,0);try{const q=Q.toDataURL("image/png");ge(q)}catch(q){Pe(q)}},we.onerror=()=>Pe(new Error("Error al cargar la imagen")),we.src=z}),he=async()=>{try{let z="";try{z=await V(Bs),console.log(" Logo convertido a base64 exitosamente")}catch(q){console.warn(" No se pudo convertir el logo, usando logo por defecto:",q),z="data:image/svg+xml;base64,"+btoa(`
          <svg width="80" height="80" xmlns="http://www.w3.org/2000/svg">
            <circle cx="40" cy="40" r="40" fill="url(#gradient)"/>
            <defs>
              <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#667eea"/>
                <stop offset="100%" style="stop-color:#764ba2"/>
              </linearGradient>
            </defs>
            <text x="40" y="48" text-anchor="middle" fill="white" font-size="24" font-weight="bold">CL</text>
          </svg>
        `)}const Pe=(()=>{const q=e.filter(Be=>Be.status==="active").length,ce=e.filter(Be=>Be.status==="prospect").length,J=e.filter(Be=>Be.status==="inactive").length,qe=e.reduce((Be,ee)=>Be+ee.totalRevenue,0);return`
          <!DOCTYPE html>
          <html>
          <head>
            <meta charset="utf-8">
            <title>CRM - Reporte de Clientes</title>
            <style>
              body { 
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
                margin: 30px; 
                line-height: 1.6; 
                color: #2c3e50;
                background-color: #ffffff;
              }
              .header { 
                margin-bottom: 40px; 
                padding-bottom: 20px;
                border-bottom: 3px solid #3498db;
              }
              .header-content { 
                display: flex; 
                align-items: center; 
                gap: 25px; 
              }
              .logo { 
                width: 90px; 
                height: auto; 
                flex-shrink: 0;
                border-radius: 8px;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1);
              }
              .company-info { 
                flex-grow: 1; 
              }
              .report-title { 
                font-size: 28px; 
                font-weight: 700; 
                color: #2c3e50; 
                margin-bottom: 10px;
                letter-spacing: -0.5px;
              }
              .generated-date { 
                color: #7f8c8d; 
                font-size: 15px;
                font-style: italic;
              }
              .stats { 
                margin-bottom: 40px; 
                background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
                padding: 25px;
                border-radius: 12px;
                border-left: 5px solid #3498db;
              }
              .stats h3 { 
                color: #2c3e50; 
                border-bottom: 2px solid #3498db; 
                padding-bottom: 10px;
                margin-bottom: 20px;
                font-size: 20px;
              }
              .stat-item { 
                margin: 15px 0; 
                display: flex;
                justify-content: space-between;
                align-items: center;
              }
              .stat-label { 
                font-weight: 600; 
                color: #5a6c7d; 
                font-size: 15px;
              }
              .stat-value { 
                color: #2c3e50; 
                font-weight: 700;
                font-size: 16px;
                background: white;
                padding: 8px 16px;
                border-radius: 20px;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
              }
              h3 { 
                color: #2c3e50; 
                font-size: 22px;
                margin: 30px 0 20px 0;
                padding-bottom: 8px;
                border-bottom: 2px solid #ecf0f1;
              }
              table { 
                width: 100%; 
                border-collapse: collapse; 
                margin-top: 25px;
                border-radius: 8px;
                overflow: hidden;
                box-shadow: 0 4px 12px rgba(0,0,0,0.1);
              }
              th, td { 
                border: 1px solid #e1e8ed; 
                padding: 12px; 
                text-align: left; 
              }
              th { 
                background: linear-gradient(135deg, #3498db 0%, #2980b9 100%); 
                color: white; 
                font-weight: 600;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
              }
              tr:nth-child(even) { 
                background-color: #f8f9fa; 
              }
              tr:hover { 
                background-color: #e3f2fd; 
                transition: background-color 0.2s ease;
              }
              .status-active { 
                color: #27ae60; 
                font-weight: 600;
                background: #d1fae5;
                padding: 4px 12px;
                border-radius: 20px;
                font-size: 12px;
              }
              .status-prospect { 
                color: #d97706; 
                font-weight: 600;
                background: #fef3c7;
                padding: 4px 12px;
                border-radius: 20px;
                font-size: 12px;
              }
              .status-inactive { 
                color: #dc2626; 
                font-weight: 600;
                background: #fee2e2;
                padding: 4px 12px;
                border-radius: 20px;
                font-size: 12px;
              }
              .footer { 
                margin-top: 40px; 
                text-align: center; 
                color: #7f8c8d; 
                font-size: 13px;
                background: #f8f9fa;
                padding: 25px;
                border-radius: 8px;
              }
            </style>
          </head>
          <body>
            <div class="header">
              <div class="header-content">
                <img src="${z}" alt="Logo" class="logo">
                <div class="company-info">
                  <div class="report-title">CRM - Reporte de Clientes</div>
                  <div class="generated-date">Generado el: ${new Date().toLocaleDateString("es-CO")}</div>
                </div>
              </div>
            </div>
            
            <div class="stats">
              <h3>Resumen General</h3>
              <div class="stat-item">
                <span class="stat-label">Total de clientes:</span>
                <span class="stat-value">${e.length}</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">Clientes activos:</span>
                <span class="stat-value">${q}</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">Prospectos:</span>
                <span class="stat-value">${ce}</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">Clientes inactivos:</span>
                <span class="stat-value">${J}</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">Ingresos totales:</span>
                <span class="stat-value">${re(qe)}</span>
              </div>
            </div>
            
            <h3>Lista de Clientes</h3>
            <table>
              <thead>
                <tr>
                  <th>Empresa</th>
                  <th>Contacto</th>
                  <th>Email</th>
                  <th>Telfono</th>
                  <th>Estado</th>
                  <th>Proyectos</th>
                  <th>Ingresos</th>
                  <th>ltimo Contacto</th>
                </tr>
              </thead>
              <tbody>
                ${e.map(Be=>`
                  <tr>
                    <td>${Be.name}</td>
                    <td>${Be.contactPerson}</td>
                    <td>${Be.email}</td>
                    <td>${Be.phone}</td>
                    <td class="status-${Be.status}">${B(Be.status)}</td>
                    <td>${Be.totalProjects}</td>
                    <td>${re(Be.totalRevenue)}</td>
                    <td>${Be.lastContact}</td>
                  </tr>
                `).join("")}
              </tbody>
            </table>
            
            <div class="footer">
              <div style="border-top: 2px solid #ecf0f1; padding-top: 20px; margin-top: 30px;">
                <p style="margin-bottom: 10px;">Reporte generado automticamente por el sistema CRM</p>
                <p style="margin-bottom: 5px;">Total de registros: ${e.length}</p>
                <p style="font-size: 11px; color: #95a5a6;"> ${new Date().getFullYear()} - Todos los derechos reservados</p>
              </div>
            </div>
          </body>
          </html>
        `})(),we=new Blob([Pe],{type:"text/html"}),Q=URL.createObjectURL(we),ke=window.open(Q,"_blank");ke&&(ke.onload=()=>{ke.print()}),setTimeout(()=>URL.revokeObjectURL(Q),1e3),P(" Reporte con logo generado - Imprime o guarda como PDF"),I(null)}catch(z){console.error("Error al exportar reporte:",z),I("Error al generar el reporte")}};j.useEffect(()=>{if(O){const z=setTimeout(()=>{P(null)},5e3);return()=>clearTimeout(z)}},[O]),j.useEffect(()=>{(async()=>{console.log(" Cargando datos de CRM desde Supabase..."),await te()})()},[]);const K=z=>{switch(z){case"active":return"bg-green-100 text-green-800";case"prospect":return"bg-yellow-100 text-yellow-800";case"inactive":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},B=z=>{switch(z){case"active":return"Activo";case"prospect":return"Prospecto";case"inactive":return"Inactivo";default:return"Desconocido"}},re=z=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(z),ae=e.filter(z=>{const ge=z.empresa||z.name||"",Pe=z.contacto||z.contactPerson||"",we=z.email||"",Q=ge.toLowerCase().includes(r.toLowerCase())||Pe.toLowerCase().includes(r.toLowerCase())||we.toLowerCase().includes(r.toLowerCase()),ke=o==="all"||z.status===o;return Q&&ke});return C?n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Ma,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-primary"}),n.jsx("p",{className:"dark:text-white text-gray-900 uppercase",children:"CARGANDO CLIENTES DESDE SUPABASE..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl md:text-3xl font-bold uppercase dark:text-white text-gray-900 mb-0 md:mb-2",children:"CRM - GESTIN DE CLIENTES"}),n.jsx("p",{className:"dark:text-white text-gray-900 uppercase text-sm",children:"GESTIONA TUS CLIENTES, PROSPECTOS Y OPORTUNIDADES DE VENTA"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(He,{onClick:()=>te(),variant:"outline",className:"uppercase",children:[n.jsx(Ma,{className:`w-4 h-4 mr-2 ${C?"animate-spin":""}`}),"ACTUALIZAR"]}),n.jsxs(He,{onClick:()=>d(!c),className:"uppercase",children:[n.jsx(Hr,{className:"w-5 h-5 mr-2"}),c?"OCULTAR FORMULARIO":"NUEVO CLIENTE"]})]})]}),A&&n.jsx(at,{className:"bg-red-900/20 border-red-800",children:n.jsxs("div",{className:"p-4 flex items-center gap-3",children:[n.jsx(Ei,{className:"w-5 h-5 text-red-400"}),n.jsxs("p",{className:"text-red-400 text-sm uppercase",children:["ERROR: ",A]}),n.jsx("button",{onClick:()=>I(null),className:"ml-auto text-red-400 hover:text-red-300",children:n.jsx(Rr,{className:"w-5 h-5"})})]})}),O&&n.jsx(at,{className:"bg-green-900/30 border-2 border-green-600 rounded-lg animate-pulse",children:n.jsxs("div",{className:"p-4 flex items-center gap-3",children:[n.jsx(sn,{className:"w-5 h-5 text-green-400"}),n.jsx("p",{className:"text-green-300 text-sm uppercase font-semibold",children:O}),n.jsx("button",{onClick:()=>P(null),className:"ml-auto text-green-400 hover:text-green-300",children:n.jsx(Rr,{className:"w-5 h-5"})})]})}),c&&n.jsx(at,{className:"mb-6 dark:bg-black/80 bg-white/80 backdrop-blur-sm dark:border-white/20 border-gray-200",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold dark:text-white text-gray-900 uppercase mb-4",children:"AGREGAR NUEVO CLIENTE"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium dark:text-white text-gray-900 mb-1 uppercase",children:"Nombre de la Empresa"}),n.jsx("input",{type:"text",value:$.empresa,onChange:z=>F({...$,empresa:z.target.value}),className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors uppercase",placeholder:"Nombre de la empresa"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium dark:text-white text-gray-900 mb-1 uppercase",children:"Persona de Contacto"}),n.jsx("input",{type:"text",value:$.contacto,onChange:z=>F({...$,contacto:z.target.value}),className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors uppercase",placeholder:"Nombre completo"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium dark:text-white text-gray-900 mb-1 uppercase",children:"Email"}),n.jsx("input",{type:"email",value:$.email,onChange:z=>F({...$,email:z.target.value}),className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors",placeholder:"email@empresa.com"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium dark:text-white text-gray-900 mb-1 uppercase",children:"Telfono"}),n.jsx("input",{type:"text",value:$.telefono,onChange:z=>F({...$,telefono:z.target.value}),className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors",placeholder:"984 197 94 69",pattern:"[0-9\\s\\-\\(\\)]+",title:"Ingresa solo nmeros, espacios, -, ( y )"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium dark:text-white text-gray-900 mb-1 uppercase",children:"Direccin"}),n.jsx("input",{type:"text",value:$.direccion,onChange:z=>F({...$,direccion:z.target.value}),className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors uppercase",placeholder:"Direccin completa de la empresa"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium dark:text-white text-gray-900 mb-1 uppercase",children:"Website"}),n.jsx("input",{type:"url",value:$.website,onChange:z=>F({...$,website:z.target.value}),className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors",placeholder:"https://www.empresa.com"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium dark:text-white text-gray-900 mb-1 uppercase",children:"Estado"}),n.jsxs("select",{value:$.status,onChange:z=>F({...$,status:z.target.value}),className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors uppercase",children:[n.jsx("option",{value:"prospect",children:"PROSPECTO"}),n.jsx("option",{value:"active",children:"ACTIVO"}),n.jsx("option",{value:"inactive",children:"INACTIVO"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium dark:text-white text-gray-900 mb-1 uppercase",children:"Origen"}),n.jsx("input",{type:"text",value:$.origen,onChange:z=>F({...$,origen:z.target.value}),className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors uppercase",placeholder:"web, referido, evento, etc."})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium dark:text-white text-gray-900 mb-1 uppercase",children:"Notas"}),n.jsx("textarea",{rows:3,value:$.notas,onChange:z=>F({...$,notas:z.target.value}),className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors resize-y uppercase",placeholder:"Informacin adicional del cliente..."})]})]}),n.jsxs("div",{className:"flex gap-2 mt-6",children:[n.jsxs(He,{onClick:ne,className:"uppercase",children:[n.jsx(Hr,{className:"w-4 h-4 mr-2"}),"AGREGAR CLIENTE"]}),n.jsx(He,{variant:"outline",onClick:()=>d(!1),className:"uppercase",children:"CANCELAR"})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsxs(at,{className:"text-center",children:[n.jsx("h3",{className:"text-2xl font-bold text-text",children:e.length}),n.jsx("p",{className:"text-gray-600",children:"Total Clientes"})]}),n.jsxs(at,{className:"text-center",children:[n.jsx("h3",{className:"text-2xl font-bold text-text",children:e.filter(z=>z.status==="active").length}),n.jsx("p",{className:"dark:text-white text-gray-900 uppercase text-sm",children:"CLIENTES ACTIVOS"})]}),n.jsxs(at,{className:"text-center dark:bg-black/80 bg-white/80 backdrop-blur-sm dark:border-white/20 border-gray-200",children:[n.jsx("h3",{className:"text-2xl font-bold dark:text-white text-gray-900",children:e.filter(z=>z.status==="prospect").length}),n.jsx("p",{className:"dark:text-white text-gray-900 uppercase text-sm",children:"PROSPECTOS"})]}),n.jsxs(at,{className:"text-center dark:bg-black/80 bg-white/80 backdrop-blur-sm dark:border-white/20 border-gray-200 hidden",children:[n.jsx("h3",{className:"text-2xl font-bold dark:text-white text-gray-900",children:re(e.reduce((z,ge)=>z+(ge.ingresos_totales||ge.totalRevenue||0),0))}),n.jsx("p",{className:"dark:text-white text-gray-900 uppercase text-sm",children:"INGRESOS TOTALES"})]})]}),n.jsx(at,{className:"dark:bg-black/80 bg-white/80 backdrop-blur-sm dark:border-white/20 border-gray-200",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[n.jsxs("div",{className:"flex gap-4 flex-1",children:[n.jsxs("div",{className:"relative flex-1 max-w-md",children:[n.jsx(Ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 dark:text-white text-gray-900"}),n.jsx("input",{type:"text",placeholder:"BUSCAR CLIENTES...",value:r,onChange:z=>s(z.target.value),className:"w-full pl-10 pr-4 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors uppercase placeholder-gray-500"})]}),n.jsxs("select",{value:o,onChange:z=>i(z.target.value),className:"px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors uppercase",children:[n.jsx("option",{value:"all",children:"TODOS LOS ESTADOS"}),n.jsx("option",{value:"active",children:"ACTIVOS"}),n.jsx("option",{value:"prospect",children:"PROSPECTOS"}),n.jsx("option",{value:"inactive",children:"INACTIVOS"})]})]}),n.jsxs(He,{variant:"outline",onClick:he,className:"uppercase",children:[n.jsx(Zc,{className:"w-4 h-4 mr-2"}),"EXPORTAR PDF"]})]})}),n.jsx(at,{padding:"none",className:"overflow-hidden",children:n.jsxs("div",{className:"max-h-[calc(100vh-400px)] overflow-y-auto overflow-x-auto",children:[n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"sticky top-0 z-10 bg-white dark:bg-black shadow-sm",children:n.jsxs("tr",{className:"border-b border-gray-200 dark:border-white/20",children:[n.jsx("th",{className:"text-left py-3 px-4 font-medium dark:text-white text-gray-900 uppercase text-xs bg-white dark:bg-black",children:"CLIENTE"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium dark:text-white text-gray-900 uppercase text-xs bg-white dark:bg-black",children:"CONTACTO"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium dark:text-white text-gray-900 uppercase text-xs bg-white dark:bg-black",children:"ESTADO"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium dark:text-white text-gray-900 uppercase text-xs bg-white dark:bg-black",children:"PROYECTOS"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium dark:text-white text-gray-900 uppercase text-xs bg-white dark:bg-black",children:"INGRESOS"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium dark:text-white text-gray-900 uppercase text-xs bg-white dark:bg-black",children:"LTIMO CONTACTO"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium dark:text-white text-gray-900 uppercase text-xs bg-white dark:bg-black",children:"ACCIONES"})]})}),n.jsx("tbody",{children:ae.map(z=>n.jsxs("tr",{className:"border-b dark:border-white/20 border-gray-200 dark:hover:bg-white/5 hover:bg-gray-100/50",children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("p",{className:"font-medium dark:text-white text-gray-900",children:z.empresa||z.name}),n.jsx("p",{className:"text-sm dark:text-white text-gray-600",children:z.direccion||z.address}),z.updated_at&&n.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:[" Editado: ",new Date(z.updated_at).toLocaleDateString()]})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-sm font-medium dark:text-white text-gray-900",children:z.contacto||z.contactPerson}),n.jsxs("div",{className:"flex items-center gap-2 text-xs dark:text-white text-gray-600",children:[n.jsx(Ba,{className:"w-3 h-3"}),z.email]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs dark:text-white text-gray-600",children:[n.jsx(df,{className:"w-3 h-3"}),z.telefono||z.phone]})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:z.status,onChange:ge=>de(z,ge.target.value),disabled:z.isUpdating,className:`px-3 py-1 text-xs font-medium rounded-full border-0 cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 hover:scale-105 ${K(z.status)} ${z.isUpdating?"opacity-50 cursor-not-allowed":""}`,style:{backgroundColor:"transparent",color:"inherit",appearance:"none",paddingRight:"20px"},children:[n.jsx("option",{value:"prospect",className:"bg-amber-100 text-amber-700",children:"Prospecto"}),n.jsx("option",{value:"active",className:"bg-emerald-100 text-emerald-700",children:"Activo"}),n.jsx("option",{value:"inactive",className:"bg-red-100 text-red-700",children:"Inactivo"})]}),n.jsx("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 pointer-events-none",children:z.isUpdating?n.jsx("div",{className:"animate-spin w-3 h-3 border border-current border-t-transparent rounded-full"}):n.jsx("svg",{className:"w-3 h-3 text-current",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("p",{className:"text-sm dark:text-white text-gray-700",children:[z.total_proyectos||z.totalProjects||0," proyectos"]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("p",{className:"font-medium dark:text-white text-gray-900",children:re(z.ingresos_totales||z.totalRevenue||0)})}),n.jsx("td",{className:"py-3 px-4 text-sm dark:text-white text-gray-600",children:z.ultimo_contacto||z.lastContact}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(He,{size:"sm",variant:"outline",onClick:()=>De(z),children:n.jsx(Ai,{className:"w-4 h-4"})}),n.jsx(He,{size:"sm",variant:"outline",onClick:()=>U(z),children:n.jsx(Bn,{className:"w-4 h-4"})}),n.jsx(He,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",onClick:()=>Se(z),children:n.jsx(Gr,{className:"w-4 h-4"})})]})})]},z.id))})]}),n.jsx("div",{className:"h-4"})]})}),h&&x&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-text",children:"Detalles del Cliente"}),n.jsx(He,{variant:"outline",onClick:R,children:n.jsx(Rr,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Empresa"}),n.jsx("p",{className:"text-gray-900 font-medium",children:x.empresa||x.name})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Contacto"}),n.jsx("p",{className:"text-gray-900",children:x.contacto||x.contactPerson})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Email"}),n.jsx("p",{className:"text-gray-900",children:x.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Telfono"}),n.jsx("p",{className:"text-gray-900",children:x.telefono||x.phone||"N/A"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Direccin"}),n.jsx("p",{className:"text-gray-900",children:x.direccion||x.address||"N/A"})]}),x.website&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Website"}),n.jsx("p",{className:"text-gray-900",children:n.jsx("a",{href:x.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:x.website})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Estado"}),n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${K(x.status)}`,children:B(x.status)})]}),x.origen&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Origen"}),n.jsx("p",{className:"text-gray-900",children:x.origen})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Proyectos"}),n.jsxs("p",{className:"text-gray-900",children:[x.total_proyectos||x.totalProjects||0," proyectos"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Ingresos"}),n.jsx("p",{className:"text-gray-900 font-medium",children:re(x.ingresos_totales||x.totalRevenue||0)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"ltimo Contacto"}),n.jsx("p",{className:"text-gray-900",children:x.ultimo_contacto||x.lastContact||"N/A"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Notas"}),n.jsx("p",{className:"text-gray-900",children:x.notas||x.notes||"Sin notas"})]})]}),n.jsxs("div",{className:"flex gap-2 mt-6",children:[n.jsxs(He,{onClick:()=>{f(!1),U(x)},children:[n.jsx(Bn,{className:"w-4 h-4 mr-2"}),"Editar Cliente"]}),n.jsx(He,{variant:"outline",onClick:R,children:"Cerrar"})]})]})}),p&&y&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-text",children:"Editar Cliente"}),n.jsx(He,{variant:"outline",onClick:ye,children:n.jsx(Rr,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de la Empresa"}),n.jsx("input",{type:"text",value:y.empresa||y.name||"",onChange:z=>S({...y,empresa:z.target.value,name:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Nombre de la empresa"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Persona de Contacto"}),n.jsx("input",{type:"text",value:y.contacto||y.contactPerson||"",onChange:z=>S({...y,contacto:z.target.value,contactPerson:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Nombre completo"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),n.jsx("input",{type:"email",value:y.email,onChange:z=>S({...y,email:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"email@empresa.com"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telfono"}),n.jsx("input",{type:"text",value:y.telefono||y.phone||"",onChange:z=>S({...y,telefono:z.target.value,phone:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"300 123 4567",pattern:"[0-9\\s\\-\\(\\)]+",title:"Ingresa solo nmeros, espacios, -, ( y )"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Direccin"}),n.jsx("input",{type:"text",value:y.direccion||y.address||"",onChange:z=>S({...y,direccion:z.target.value,address:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Direccin completa"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),n.jsxs("select",{value:y.status,onChange:z=>S({...y,status:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[n.jsx("option",{value:"prospect",children:"Prospecto"}),n.jsx("option",{value:"active",children:"Activo"}),n.jsx("option",{value:"inactive",children:"Inactivo"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Proyectos"}),n.jsx("input",{type:"number",value:y.total_proyectos||y.totalProjects||0,onChange:z=>{const ge=parseInt(z.target.value)||0;S({...y,total_proyectos:ge,totalProjects:ge})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ingresos"}),n.jsx("input",{type:"number",value:y.ingresos_totales||y.totalRevenue||0,onChange:z=>{const ge=parseFloat(z.target.value)||0;S({...y,ingresos_totales:ge,totalRevenue:ge})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ltimo Contacto"}),n.jsx("input",{type:"date",value:y.ultimo_contacto||y.lastContact||"",onChange:z=>S({...y,ultimo_contacto:z.target.value,lastContact:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),n.jsx("textarea",{rows:3,value:y.notas||y.notes||"",onChange:z=>S({...y,notas:z.target.value,notes:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Informacin adicional del cliente..."})]})]}),n.jsxs("div",{className:"flex gap-2 mt-6",children:[n.jsxs(He,{onClick:H,children:[n.jsx(Gs,{className:"w-4 h-4 mr-2"}),"Guardar Cambios"]}),n.jsx(He,{variant:"outline",onClick:ye,children:"Cancelar"})]})]})})]})},XD=()=>{const[e,t]=j.useState(!1),[r,s]=j.useState(""),[o,i]=j.useState(null),[c,d]=j.useState([]),[h,f]=j.useState(""),[p,v]=j.useState([]),[x,w]=j.useState(!0);j.useEffect(()=>{const A=[{id:"1",name:"Juan Prez",phone:"+34 600 123 456",lastMessage:"Hola, cmo va el curso?",lastMessageTime:"10:30",unreadCount:2,status:"online"},{id:"2",name:"Mara Garca",phone:"+34 600 789 012",lastMessage:"Necesito informacin sobre el mdulo de IA",lastMessageTime:"09:15",unreadCount:0,status:"away"},{id:"3",name:"Carlos Rodrguez",phone:"+34 600 345 678",lastMessage:"Perfecto, gracias por la ayuda",lastMessageTime:"Ayer",unreadCount:0,status:"offline"}],I=[{id:"1",from:"+34 600 123 456",to:"admin",content:"Hola, cmo va el curso de programacin?",timestamp:"10:30",status:"read",type:"text"},{id:"2",from:"admin",to:"+34 600 123 456",content:"Hola Juan! El curso va muy bien. En qu puedo ayudarte?",timestamp:"10:32",status:"delivered",type:"text"},{id:"3",from:"+34 600 123 456",to:"admin",content:"Tengo una duda sobre el ejercicio de arrays",timestamp:"10:35",status:"read",type:"text"}];setTimeout(()=>{v(A),d(I),w(!1)},1e3)},[]);const y=async()=>{w(!0),setTimeout(()=>{t(!0),w(!1)},2e3)},S=async()=>{if(!h.trim()||!o)return;const A={id:Date.now().toString(),from:"admin",to:o.phone,content:h,timestamp:new Date().toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),status:"sent",type:"text"};d(I=>[...I,A]),f("")},C=A=>{switch(A){case"online":return"bg-green-500";case"away":return"bg-yellow-500";case"offline":return"bg-gray-500";default:return"bg-gray-500"}},T=A=>{switch(A){case"online":return"En lnea";case"away":return"Ausente";case"offline":return"Desconectado";default:return"Desconectado"}};return x?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-accent"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-text",children:"WhatsApp Web"}),n.jsx("p",{className:"text-text-secondary",children:"Gestiona mensajes y contactos de WhatsApp"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(He,{variant:"outline",size:"sm",children:[n.jsx(Zc,{className:"w-4 h-4 mr-2"}),"Exportar Chat"]}),n.jsxs(He,{variant:"outline",size:"sm",children:[n.jsx(p2,{className:"w-4 h-4 mr-2"}),"Configuracin"]}),!e&&n.jsxs(He,{onClick:y,children:[n.jsx(ml,{className:"w-4 h-4 mr-2"}),"Conectar WhatsApp"]})]})]}),!e&&n.jsx(at,{children:n.jsxs("div",{className:"p-6 text-center",children:[n.jsx(ml,{className:"w-16 h-16 text-accent mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-text mb-2",children:"Conectar WhatsApp"}),n.jsx("p",{className:"text-text-secondary mb-4",children:"Escanea el cdigo QR para conectar tu WhatsApp Web"}),r&&n.jsx("div",{className:"bg-white p-4 rounded-lg inline-block mb-4",children:n.jsx("img",{src:r,alt:"QR Code",className:"w-48 h-48"})}),n.jsxs(He,{onClick:y,disabled:x,children:[x?n.jsx(Ma,{className:"w-4 h-4 mr-2 animate-spin"}):n.jsx(ml,{className:"w-4 h-4 mr-2"}),x?"Conectando...":"Generar QR"]})]})}),e&&n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx(at,{children:n.jsxs("div",{className:"p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-text mb-4",children:"Contactos"}),n.jsx("div",{className:"space-y-2",children:p.map(A=>n.jsx("div",{onClick:()=>i(A),className:`p-3 rounded-lg cursor-pointer transition-colors ${o?.id===A.id?"bg-accent/10 border border-accent":"hover:bg-hover"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-10 h-10 bg-accent/20 rounded-full flex items-center justify-center",children:n.jsx(es,{className:"w-5 h-5 text-accent"})}),n.jsx("div",{className:`absolute -bottom-1 -right-1 w-3 h-3 rounded-full ${C(A.status)}`})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-text",children:A.name}),n.jsx("p",{className:"text-sm text-text-secondary",children:A.lastMessage})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-text-secondary",children:A.lastMessageTime}),A.unreadCount>0&&n.jsx("div",{className:"bg-accent text-white text-xs rounded-full w-5 h-5 flex items-center justify-center mt-1",children:A.unreadCount})]})]})},A.id))})]})}),n.jsx("div",{className:"lg:col-span-2",children:n.jsx(at,{children:n.jsxs("div",{className:"flex flex-col h-96",children:[o&&n.jsx("div",{className:"p-4 border-b border-border",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-10 h-10 bg-accent/20 rounded-full flex items-center justify-center",children:n.jsx(es,{className:"w-5 h-5 text-accent"})}),n.jsx("div",{className:`absolute -bottom-1 -right-1 w-3 h-3 rounded-full ${C(o.status)}`})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-text",children:o.name}),n.jsx("p",{className:"text-sm text-text-secondary",children:T(o.status)})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(He,{variant:"secondary",size:"sm",children:n.jsx(df,{className:"w-4 h-4"})}),n.jsx(He,{variant:"secondary",size:"sm",children:n.jsx(Ba,{className:"w-4 h-4"})})]})]})}),n.jsx("div",{className:"flex-1 p-4 overflow-y-auto space-y-4",children:o?c.map(A=>n.jsx("div",{className:`flex ${A.from==="admin"?"justify-end":"justify-start"}`,children:n.jsxs("div",{className:`max-w-xs lg:max-w-md p-3 rounded-lg ${A.from==="admin"?"bg-accent text-white":"bg-panel text-text"}`,children:[n.jsx("p",{className:"text-sm",children:A.content}),n.jsxs("div",{className:"flex items-center justify-between mt-2",children:[n.jsx("span",{className:"text-xs opacity-70",children:A.timestamp}),A.from==="admin"&&n.jsxs("div",{className:"flex items-center gap-1",children:[A.status==="sent"&&n.jsx(sn,{className:"w-3 h-3"}),A.status==="delivered"&&n.jsx(sn,{className:"w-3 h-3"}),A.status==="read"&&n.jsx(sn,{className:"w-3 h-3"}),A.status==="failed"&&n.jsx(Ei,{className:"w-3 h-3"})]})]})]})},A.id)):n.jsxs("div",{className:"text-center text-text-secondary py-8",children:[n.jsx(ml,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"Selecciona un contacto para comenzar a chatear"})]})}),o&&n.jsx("div",{className:"p-4 border-t border-border",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"flex-1",onKeyDown:A=>A.key==="Enter"&&S(),children:n.jsx(Qn,{value:h,onChange:A=>f(A.target.value),placeholder:"Escribe un mensaje...",className:"mb-0"})}),n.jsx(He,{onClick:S,disabled:!h.trim(),children:n.jsx(uf,{className:"w-4 h-4"})})]})})]})})})]}),e&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(at,{children:n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(ml,{className:"w-6 h-6 text-green-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-text-secondary",children:"Mensajes Enviados"}),n.jsx("p",{className:"text-2xl font-bold text-text",children:c.filter(A=>A.from==="admin").length})]})]})})}),n.jsx(at,{children:n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(es,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-text-secondary",children:"Contactos Activos"}),n.jsx("p",{className:"text-2xl font-bold text-text",children:p.length})]})]})})}),n.jsx(at,{children:n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:n.jsx(Xn,{className:"w-6 h-6 text-yellow-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-text-secondary",children:"Tiempo Conectado"}),n.jsx("p",{className:"text-2xl font-bold text-text",children:"2h 30m"})]})]})})}),n.jsx(at,{children:n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:n.jsx(sn,{className:"w-6 h-6 text-purple-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-text-secondary",children:"Mensajes Ledos"}),n.jsx("p",{className:"text-2xl font-bold text-text",children:c.filter(A=>A.status==="read").length})]})]})})})]})]})};function eR(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return j.useMemo(()=>s=>{t.forEach(o=>o(s))},t)}const Ef=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Bl(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function qx(e){return"nodeType"in e}function Un(e){var t,r;return e?Bl(e)?e:qx(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function Gx(e){const{Document:t}=Un(e);return e instanceof t}function kd(e){return Bl(e)?!1:e instanceof Un(e).HTMLElement}function yN(e){return e instanceof Un(e).SVGElement}function Ul(e){return e?Bl(e)?e.document:qx(e)?Gx(e)?e:kd(e)||yN(e)?e.ownerDocument:document:document:document}const ua=Ef?j.useLayoutEffect:j.useEffect;function Vx(e){const t=j.useRef(e);return ua(()=>{t.current=e}),j.useCallback(function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return t.current==null?void 0:t.current(...s)},[])}function tR(){const e=j.useRef(null),t=j.useCallback((s,o)=>{e.current=setInterval(s,o)},[]),r=j.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function cd(e,t){t===void 0&&(t=[e]);const r=j.useRef(e);return ua(()=>{r.current!==e&&(r.current=e)},t),r}function _d(e,t){const r=j.useRef();return j.useMemo(()=>{const s=e(r.current);return r.current=s,s},[...t])}function Kh(e){const t=Vx(e),r=j.useRef(null),s=j.useCallback(o=>{o!==r.current&&t?.(o,r.current),r.current=o},[]);return[r,s]}function Dg(e){const t=j.useRef();return j.useEffect(()=>{t.current=e},[e]),t.current}let Op={};function Cd(e,t){return j.useMemo(()=>{if(t)return t;const r=Op[e]==null?0:Op[e]+1;return Op[e]=r,e+"-"+r},[e,t])}function bN(e){return function(t){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return s.reduce((i,c)=>{const d=Object.entries(c);for(const[h,f]of d){const p=i[h];p!=null&&(i[h]=p+e*f)}return i},{...t})}}const bl=bN(1),dd=bN(-1);function rR(e){return"clientX"in e&&"clientY"in e}function Hx(e){if(!e)return!1;const{KeyboardEvent:t}=Un(e.target);return t&&e instanceof t}function nR(e){if(!e)return!1;const{TouchEvent:t}=Un(e.target);return t&&e instanceof t}function Rg(e){if(nR(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return rR(e)?{x:e.clientX,y:e.clientY}:null}const ud=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[ud.Translate.toString(e),ud.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:s}=e;return t+" "+r+"ms "+s}}}),hw="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function sR(e){return e.matches(hw)?e:e.querySelector(hw)}const aR={display:"none"};function iR(e){let{id:t,value:r}=e;return pt.createElement("div",{id:t,style:aR},r)}function oR(e){let{id:t,announcement:r,ariaLiveType:s="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return pt.createElement("div",{id:t,style:o,role:"status","aria-live":s,"aria-atomic":!0},r)}function lR(){const[e,t]=j.useState("");return{announce:j.useCallback(s=>{s!=null&&t(s)},[]),announcement:e}}const wN=j.createContext(null);function cR(e){const t=j.useContext(wN);j.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function dR(){const[e]=j.useState(()=>new Set),t=j.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[j.useCallback(s=>{let{type:o,event:i}=s;e.forEach(c=>{var d;return(d=c[o])==null?void 0:d.call(c,i)})},[e]),t]}const uR={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},hR={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function fR(e){let{announcements:t=hR,container:r,hiddenTextDescribedById:s,screenReaderInstructions:o=uR}=e;const{announce:i,announcement:c}=lR(),d=Cd("DndLiveRegion"),[h,f]=j.useState(!1);if(j.useEffect(()=>{f(!0)},[]),cR(j.useMemo(()=>({onDragStart(v){let{active:x}=v;i(t.onDragStart({active:x}))},onDragMove(v){let{active:x,over:w}=v;t.onDragMove&&i(t.onDragMove({active:x,over:w}))},onDragOver(v){let{active:x,over:w}=v;i(t.onDragOver({active:x,over:w}))},onDragEnd(v){let{active:x,over:w}=v;i(t.onDragEnd({active:x,over:w}))},onDragCancel(v){let{active:x,over:w}=v;i(t.onDragCancel({active:x,over:w}))}}),[i,t])),!h)return null;const p=pt.createElement(pt.Fragment,null,pt.createElement(iR,{id:s,value:o.draggable}),pt.createElement(oR,{id:d,announcement:c}));return r?Pa.createPortal(p,r):p}var Dr;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Dr||(Dr={}));function Qh(){}function fw(e,t){return j.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function mR(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return j.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const zs=Object.freeze({x:0,y:0});function jN(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function NN(e,t){let{data:{value:r}}=e,{data:{value:s}}=t;return r-s}function pR(e,t){let{data:{value:r}}=e,{data:{value:s}}=t;return s-r}function mw(e){let{left:t,top:r,height:s,width:o}=e;return[{x:t,y:r},{x:t+o,y:r},{x:t,y:r+s},{x:t+o,y:r+s}]}function SN(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}function pw(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}const gR=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:s}=e;const o=pw(t,t.left,t.top),i=[];for(const c of s){const{id:d}=c,h=r.get(d);if(h){const f=jN(pw(h),o);i.push({id:d,data:{droppableContainer:c,value:f}})}}return i.sort(NN)},xR=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:s}=e;const o=mw(t),i=[];for(const c of s){const{id:d}=c,h=r.get(d);if(h){const f=mw(h),p=o.reduce((x,w,y)=>x+jN(f[y],w),0),v=Number((p/4).toFixed(4));i.push({id:d,data:{droppableContainer:c,value:v}})}}return i.sort(NN)};function vR(e,t){const r=Math.max(t.top,e.top),s=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),c=o-s,d=i-r;if(s<o&&r<i){const h=t.width*t.height,f=e.width*e.height,p=c*d,v=p/(h+f-p);return Number(v.toFixed(4))}return 0}const yR=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:s}=e;const o=[];for(const i of s){const{id:c}=i,d=r.get(c);if(d){const h=vR(d,t);h>0&&o.push({id:c,data:{droppableContainer:i,value:h}})}}return o.sort(pR)};function bR(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function kN(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:zs}function wR(e){return function(r){for(var s=arguments.length,o=new Array(s>1?s-1:0),i=1;i<s;i++)o[i-1]=arguments[i];return o.reduce((c,d)=>({...c,top:c.top+e*d.y,bottom:c.bottom+e*d.y,left:c.left+e*d.x,right:c.right+e*d.x}),{...r})}}const jR=wR(1);function NR(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function SR(e,t,r){const s=NR(t);if(!s)return e;const{scaleX:o,scaleY:i,x:c,y:d}=s,h=e.left-c-(1-o)*parseFloat(r),f=e.top-d-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),p=o?e.width/o:e.width,v=i?e.height/i:e.height;return{width:p,height:v,top:f,right:h+p,bottom:f+v,left:h}}const kR={ignoreTransform:!1};function zl(e,t){t===void 0&&(t=kR);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:f,transformOrigin:p}=Un(e).getComputedStyle(e);f&&(r=SR(r,f,p))}const{top:s,left:o,width:i,height:c,bottom:d,right:h}=r;return{top:s,left:o,width:i,height:c,bottom:d,right:h}}function gw(e){return zl(e,{ignoreTransform:!0})}function _R(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function CR(e,t){return t===void 0&&(t=Un(e).getComputedStyle(e)),t.position==="fixed"}function ER(e,t){t===void 0&&(t=Un(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const i=t[o];return typeof i=="string"?r.test(i):!1})}function Af(e,t){const r=[];function s(o){if(t!=null&&r.length>=t||!o)return r;if(Gx(o)&&o.scrollingElement!=null&&!r.includes(o.scrollingElement))return r.push(o.scrollingElement),r;if(!kd(o)||yN(o)||r.includes(o))return r;const i=Un(e).getComputedStyle(o);return o!==e&&ER(o,i)&&r.push(o),CR(o,i)?r:s(o.parentNode)}return e?s(e):r}function _N(e){const[t]=Af(e,1);return t??null}function Pp(e){return!Ef||!e?null:Bl(e)?e:qx(e)?Gx(e)||e===Ul(e).scrollingElement?window:kd(e)?e:null:null}function CN(e){return Bl(e)?e.scrollX:e.scrollLeft}function EN(e){return Bl(e)?e.scrollY:e.scrollTop}function Og(e){return{x:CN(e),y:EN(e)}}var zr;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(zr||(zr={}));function AN(e){return!Ef||!e?!1:e===document.scrollingElement}function IN(e){const t={x:0,y:0},r=AN(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},o=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,c=e.scrollTop>=s.y,d=e.scrollLeft>=s.x;return{isTop:o,isLeft:i,isBottom:c,isRight:d,maxScroll:s,minScroll:t}}const AR={x:.2,y:.2};function IR(e,t,r,s,o){let{top:i,left:c,right:d,bottom:h}=r;s===void 0&&(s=10),o===void 0&&(o=AR);const{isTop:f,isBottom:p,isLeft:v,isRight:x}=IN(e),w={x:0,y:0},y={x:0,y:0},S={height:t.height*o.y,width:t.width*o.x};return!f&&i<=t.top+S.height?(w.y=zr.Backward,y.y=s*Math.abs((t.top+S.height-i)/S.height)):!p&&h>=t.bottom-S.height&&(w.y=zr.Forward,y.y=s*Math.abs((t.bottom-S.height-h)/S.height)),!x&&d>=t.right-S.width?(w.x=zr.Forward,y.x=s*Math.abs((t.right-S.width-d)/S.width)):!v&&c<=t.left+S.width&&(w.x=zr.Backward,y.x=s*Math.abs((t.left+S.width-c)/S.width)),{direction:w,speed:y}}function TR(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:c}=window;return{top:0,left:0,right:i,bottom:c,width:i,height:c}}const{top:t,left:r,right:s,bottom:o}=e.getBoundingClientRect();return{top:t,left:r,right:s,bottom:o,width:e.clientWidth,height:e.clientHeight}}function TN(e){return e.reduce((t,r)=>bl(t,Og(r)),zs)}function DR(e){return e.reduce((t,r)=>t+CN(r),0)}function RR(e){return e.reduce((t,r)=>t+EN(r),0)}function OR(e,t){if(t===void 0&&(t=zl),!e)return;const{top:r,left:s,bottom:o,right:i}=t(e);_N(e)&&(o<=0||i<=0||r>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const PR=[["x",["left","right"],DR],["y",["top","bottom"],RR]];class Wx{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=Af(r),o=TN(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,c,d]of PR)for(const h of c)Object.defineProperty(this,h,{get:()=>{const f=d(s),p=o[i]-f;return this.rect[h]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Vc{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...r)})},this.target=t}add(t,r,s){var o;(o=this.target)==null||o.addEventListener(t,r,s),this.listeners.push([t,r,s])}}function MR(e){const{EventTarget:t}=Un(e);return e instanceof t?e:Ul(e)}function Mp(e,t){const r=Math.abs(e.x),s=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+s**2)>t:"x"in t&&"y"in t?r>t.x&&s>t.y:"x"in t?r>t.x:"y"in t?s>t.y:!1}var fs;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(fs||(fs={}));function xw(e){e.preventDefault()}function LR(e){e.stopPropagation()}var Ut;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Ut||(Ut={}));const DN={start:[Ut.Space,Ut.Enter],cancel:[Ut.Esc],end:[Ut.Space,Ut.Enter,Ut.Tab]},$R=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case Ut.Right:return{...r,x:r.x+25};case Ut.Left:return{...r,x:r.x-25};case Ut.Down:return{...r,y:r.y+25};case Ut.Up:return{...r,y:r.y-25}}};class Kx{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new Vc(Ul(r)),this.windowListeners=new Vc(Un(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(fs.Resize,this.handleCancel),this.windowListeners.add(fs.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(fs.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,s=t.node.current;s&&OR(s),r(zs)}handleKeyDown(t){if(Hx(t)){const{active:r,context:s,options:o}=this.props,{keyboardCodes:i=DN,coordinateGetter:c=$R,scrollBehavior:d="smooth"}=o,{code:h}=t;if(i.end.includes(h)){this.handleEnd(t);return}if(i.cancel.includes(h)){this.handleCancel(t);return}const{collisionRect:f}=s.current,p=f?{x:f.left,y:f.top}:zs;this.referenceCoordinates||(this.referenceCoordinates=p);const v=c(t,{active:r,context:s.current,currentCoordinates:p});if(v){const x=dd(v,p),w={x:0,y:0},{scrollableAncestors:y}=s.current;for(const S of y){const C=t.code,{isTop:T,isRight:A,isLeft:I,isBottom:O,maxScroll:P,minScroll:$}=IN(S),F=TR(S),te={x:Math.min(C===Ut.Right?F.right-F.width/2:F.right,Math.max(C===Ut.Right?F.left:F.left+F.width/2,v.x)),y:Math.min(C===Ut.Down?F.bottom-F.height/2:F.bottom,Math.max(C===Ut.Down?F.top:F.top+F.height/2,v.y))},ne=C===Ut.Right&&!A||C===Ut.Left&&!I,Ee=C===Ut.Down&&!O||C===Ut.Up&&!T;if(ne&&te.x!==v.x){const Se=S.scrollLeft+x.x,De=C===Ut.Right&&Se<=P.x||C===Ut.Left&&Se>=$.x;if(De&&!x.y){S.scrollTo({left:Se,behavior:d});return}De?w.x=S.scrollLeft-Se:w.x=C===Ut.Right?S.scrollLeft-P.x:S.scrollLeft-$.x,w.x&&S.scrollBy({left:-w.x,behavior:d});break}else if(Ee&&te.y!==v.y){const Se=S.scrollTop+x.y,De=C===Ut.Down&&Se<=P.y||C===Ut.Up&&Se>=$.y;if(De&&!x.x){S.scrollTo({top:Se,behavior:d});return}De?w.y=S.scrollTop-Se:w.y=C===Ut.Down?S.scrollTop-P.y:S.scrollTop-$.y,w.y&&S.scrollBy({top:-w.y,behavior:d});break}}this.handleMove(t,bl(dd(v,this.referenceCoordinates),w))}}}handleMove(t,r){const{onMove:s}=this.props;t.preventDefault(),s(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Kx.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:s=DN,onActivation:o}=t,{active:i}=r;const{code:c}=e.nativeEvent;if(s.start.includes(c)){const d=i.activatorNode.current;return d&&e.target!==d?!1:(e.preventDefault(),o?.({event:e.nativeEvent}),!0)}return!1}}];function vw(e){return!!(e&&"distance"in e)}function yw(e){return!!(e&&"delay"in e)}class Qx{constructor(t,r,s){var o;s===void 0&&(s=MR(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:i}=t,{target:c}=i;this.props=t,this.events=r,this.document=Ul(c),this.documentListeners=new Vc(this.document),this.listeners=new Vc(s),this.windowListeners=new Vc(Un(c)),this.initialCoordinates=(o=Rg(i))!=null?o:zs,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(fs.Resize,this.handleCancel),this.windowListeners.add(fs.DragStart,xw),this.windowListeners.add(fs.VisibilityChange,this.handleCancel),this.windowListeners.add(fs.ContextMenu,xw),this.documentListeners.add(fs.Keydown,this.handleKeydown),r){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(yw(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(vw(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:s,onPending:o}=this.props;o(s,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(fs.Click,LR,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(fs.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:s,initialCoordinates:o,props:i}=this,{onMove:c,options:{activationConstraint:d}}=i;if(!o)return;const h=(r=Rg(t))!=null?r:zs,f=dd(o,h);if(!s&&d){if(vw(d)){if(d.tolerance!=null&&Mp(f,d.tolerance))return this.handleCancel();if(Mp(f,d.distance))return this.handleStart()}if(yw(d)&&Mp(f,d.tolerance))return this.handleCancel();this.handlePending(d,f);return}t.cancelable&&t.preventDefault(),c(h)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===Ut.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const FR={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Jx extends Qx{constructor(t){const{event:r}=t,s=Ul(r.target);super(t,FR,s)}}Jx.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:s}=t;return!r.isPrimary||r.button!==0?!1:(s?.({event:r}),!0)}}];const BR={move:{name:"mousemove"},end:{name:"mouseup"}};var Pg;(function(e){e[e.RightClick=2]="RightClick"})(Pg||(Pg={}));class UR extends Qx{constructor(t){super(t,BR,Ul(t.event.target))}}UR.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:s}=t;return r.button===Pg.RightClick?!1:(s?.({event:r}),!0)}}];const Lp={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class zR extends Qx{constructor(t){super(t,Lp)}static setup(){return window.addEventListener(Lp.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Lp.move.name,t)};function t(){}}}zR.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:s}=t;const{touches:o}=r;return o.length>1?!1:(s?.({event:r}),!0)}}];var Hc;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Hc||(Hc={}));var Jh;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Jh||(Jh={}));function qR(e){let{acceleration:t,activator:r=Hc.Pointer,canScroll:s,draggingRect:o,enabled:i,interval:c=5,order:d=Jh.TreeOrder,pointerCoordinates:h,scrollableAncestors:f,scrollableAncestorRects:p,delta:v,threshold:x}=e;const w=VR({delta:v,disabled:!i}),[y,S]=tR(),C=j.useRef({x:0,y:0}),T=j.useRef({x:0,y:0}),A=j.useMemo(()=>{switch(r){case Hc.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case Hc.DraggableRect:return o}},[r,o,h]),I=j.useRef(null),O=j.useCallback(()=>{const $=I.current;if(!$)return;const F=C.current.x*T.current.x,te=C.current.y*T.current.y;$.scrollBy(F,te)},[]),P=j.useMemo(()=>d===Jh.TreeOrder?[...f].reverse():f,[d,f]);j.useEffect(()=>{if(!i||!f.length||!A){S();return}for(const $ of P){if(s?.($)===!1)continue;const F=f.indexOf($),te=p[F];if(!te)continue;const{direction:ne,speed:Ee}=IR($,te,A,t,x);for(const Se of["x","y"])w[Se][ne[Se]]||(Ee[Se]=0,ne[Se]=0);if(Ee.x>0||Ee.y>0){S(),I.current=$,y(O,c),C.current=Ee,T.current=ne;return}}C.current={x:0,y:0},T.current={x:0,y:0},S()},[t,O,s,S,i,c,JSON.stringify(A),JSON.stringify(w),y,f,P,p,JSON.stringify(x)])}const GR={x:{[zr.Backward]:!1,[zr.Forward]:!1},y:{[zr.Backward]:!1,[zr.Forward]:!1}};function VR(e){let{delta:t,disabled:r}=e;const s=Dg(t);return _d(o=>{if(r||!s||!o)return GR;const i={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[zr.Backward]:o.x[zr.Backward]||i.x===-1,[zr.Forward]:o.x[zr.Forward]||i.x===1},y:{[zr.Backward]:o.y[zr.Backward]||i.y===-1,[zr.Forward]:o.y[zr.Forward]||i.y===1}}},[r,t,s])}function HR(e,t){const r=t!=null?e.get(t):void 0,s=r?r.node.current:null;return _d(o=>{var i;return t==null?null:(i=s??o)!=null?i:null},[s,t])}function WR(e,t){return j.useMemo(()=>e.reduce((r,s)=>{const{sensor:o}=s,i=o.activators.map(c=>({eventName:c.eventName,handler:t(c.handler,s)}));return[...r,...i]},[]),[e,t])}var hd;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(hd||(hd={}));var Mg;(function(e){e.Optimized="optimized"})(Mg||(Mg={}));const bw=new Map;function KR(e,t){let{dragging:r,dependencies:s,config:o}=t;const[i,c]=j.useState(null),{frequency:d,measure:h,strategy:f}=o,p=j.useRef(e),v=C(),x=cd(v),w=j.useCallback(function(T){T===void 0&&(T=[]),!x.current&&c(A=>A===null?T:A.concat(T.filter(I=>!A.includes(I))))},[x]),y=j.useRef(null),S=_d(T=>{if(v&&!r)return bw;if(!T||T===bw||p.current!==e||i!=null){const A=new Map;for(let I of e){if(!I)continue;if(i&&i.length>0&&!i.includes(I.id)&&I.rect.current){A.set(I.id,I.rect.current);continue}const O=I.node.current,P=O?new Wx(h(O),O):null;I.rect.current=P,P&&A.set(I.id,P)}return A}return T},[e,i,r,v,h]);return j.useEffect(()=>{p.current=e},[e]),j.useEffect(()=>{v||w()},[r,v]),j.useEffect(()=>{i&&i.length>0&&c(null)},[JSON.stringify(i)]),j.useEffect(()=>{v||typeof d!="number"||y.current!==null||(y.current=setTimeout(()=>{w(),y.current=null},d))},[d,v,w,...s]),{droppableRects:S,measureDroppableContainers:w,measuringScheduled:i!=null};function C(){switch(f){case hd.Always:return!1;case hd.BeforeDragging:return r;default:return!r}}}function RN(e,t){return _d(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function QR(e,t){return RN(e,t)}function JR(e){let{callback:t,disabled:r}=e;const s=Vx(t),o=j.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(s)},[s,r]);return j.useEffect(()=>()=>o?.disconnect(),[o]),o}function If(e){let{callback:t,disabled:r}=e;const s=Vx(t),o=j.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(s)},[r]);return j.useEffect(()=>()=>o?.disconnect(),[o]),o}function YR(e){return new Wx(zl(e),e)}function ww(e,t,r){t===void 0&&(t=YR);const[s,o]=j.useState(null);function i(){o(h=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=h??r)!=null?f:null}const p=t(e);return JSON.stringify(h)===JSON.stringify(p)?h:p})}const c=JR({callback(h){if(e)for(const f of h){const{type:p,target:v}=f;if(p==="childList"&&v instanceof HTMLElement&&v.contains(e)){i();break}}}}),d=If({callback:i});return ua(()=>{i(),e?(d?.observe(e),c?.observe(document.body,{childList:!0,subtree:!0})):(d?.disconnect(),c?.disconnect())},[e]),s}function ZR(e){const t=RN(e);return kN(e,t)}const jw=[];function XR(e){const t=j.useRef(e),r=_d(s=>e?s&&s!==jw&&e&&t.current&&e.parentNode===t.current.parentNode?s:Af(e):jw,[e]);return j.useEffect(()=>{t.current=e},[e]),r}function e7(e){const[t,r]=j.useState(null),s=j.useRef(e),o=j.useCallback(i=>{const c=Pp(i.target);c&&r(d=>d?(d.set(c,Og(c)),new Map(d)):null)},[]);return j.useEffect(()=>{const i=s.current;if(e!==i){c(i);const d=e.map(h=>{const f=Pp(h);return f?(f.addEventListener("scroll",o,{passive:!0}),[f,Og(f)]):null}).filter(h=>h!=null);r(d.length?new Map(d):null),s.current=e}return()=>{c(e),c(i)};function c(d){d.forEach(h=>{const f=Pp(h);f?.removeEventListener("scroll",o)})}},[o,e]),j.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,c)=>bl(i,c),zs):TN(e):zs,[e,t])}function Nw(e,t){t===void 0&&(t=[]);const r=j.useRef(null);return j.useEffect(()=>{r.current=null},t),j.useEffect(()=>{const s=e!==zs;s&&!r.current&&(r.current=e),!s&&r.current&&(r.current=null)},[e]),r.current?dd(e,r.current):zs}function t7(e){j.useEffect(()=>{if(!Ef)return;const t=e.map(r=>{let{sensor:s}=r;return s.setup==null?void 0:s.setup()});return()=>{for(const r of t)r?.()}},e.map(t=>{let{sensor:r}=t;return r}))}function r7(e,t){return j.useMemo(()=>e.reduce((r,s)=>{let{eventName:o,handler:i}=s;return r[o]=c=>{i(c,t)},r},{}),[e,t])}function ON(e){return j.useMemo(()=>e?_R(e):null,[e])}const Sw=[];function n7(e,t){t===void 0&&(t=zl);const[r]=e,s=ON(r?Un(r):null),[o,i]=j.useState(Sw);function c(){i(()=>e.length?e.map(h=>AN(h)?s:new Wx(t(h),h)):Sw)}const d=If({callback:c});return ua(()=>{d?.disconnect(),c(),e.forEach(h=>d?.observe(h))},[e]),o}function s7(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return kd(t)?t:e}function a7(e){let{measure:t}=e;const[r,s]=j.useState(null),o=j.useCallback(f=>{for(const{target:p}of f)if(kd(p)){s(v=>{const x=t(p);return v?{...v,width:x.width,height:x.height}:x});break}},[t]),i=If({callback:o}),c=j.useCallback(f=>{const p=s7(f);i?.disconnect(),p&&i?.observe(p),s(p?t(p):null)},[t,i]),[d,h]=Kh(c);return j.useMemo(()=>({nodeRef:d,rect:r,setRef:h}),[r,d,h])}const i7=[{sensor:Jx,options:{}},{sensor:Kx,options:{}}],o7={current:{}},gh={draggable:{measure:gw},droppable:{measure:gw,strategy:hd.WhileDragging,frequency:Mg.Optimized},dragOverlay:{measure:zl}};class Wc extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,s;return(r=(s=this.get(t))==null?void 0:s.node.current)!=null?r:void 0}}const l7={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Wc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Qh},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:gh,measureDroppableContainers:Qh,windowRect:null,measuringScheduled:!1},c7={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Qh,draggableNodes:new Map,over:null,measureDroppableContainers:Qh},Tf=j.createContext(c7),PN=j.createContext(l7);function d7(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Wc}}}function u7(e,t){switch(t.type){case Dr.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Dr.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Dr.DragEnd:case Dr.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Dr.RegisterDroppable:{const{element:r}=t,{id:s}=r,o=new Wc(e.droppable.containers);return o.set(s,r),{...e,droppable:{...e.droppable,containers:o}}}case Dr.SetDroppableDisabled:{const{id:r,key:s,disabled:o}=t,i=e.droppable.containers.get(r);if(!i||s!==i.key)return e;const c=new Wc(e.droppable.containers);return c.set(r,{...i,disabled:o}),{...e,droppable:{...e.droppable,containers:c}}}case Dr.UnregisterDroppable:{const{id:r,key:s}=t,o=e.droppable.containers.get(r);if(!o||s!==o.key)return e;const i=new Wc(e.droppable.containers);return i.delete(r),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function h7(e){let{disabled:t}=e;const{active:r,activatorEvent:s,draggableNodes:o}=j.useContext(Tf),i=Dg(s),c=Dg(r?.id);return j.useEffect(()=>{if(!t&&!s&&i&&c!=null){if(!Hx(i)||document.activeElement===i.target)return;const d=o.get(c);if(!d)return;const{activatorNode:h,node:f}=d;if(!h.current&&!f.current)return;requestAnimationFrame(()=>{for(const p of[h.current,f.current]){if(!p)continue;const v=sR(p);if(v){v.focus();break}}})}},[s,t,o,c,i]),null}function f7(e,t){let{transform:r,...s}=t;return e!=null&&e.length?e.reduce((o,i)=>i({transform:o,...s}),r):r}function m7(e){return j.useMemo(()=>({draggable:{...gh.draggable,...e?.draggable},droppable:{...gh.droppable,...e?.droppable},dragOverlay:{...gh.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function p7(e){let{activeNode:t,measure:r,initialRect:s,config:o=!0}=e;const i=j.useRef(!1),{x:c,y:d}=typeof o=="boolean"?{x:o,y:o}:o;ua(()=>{if(!c&&!d||!t){i.current=!1;return}if(i.current||!s)return;const f=t?.node.current;if(!f||f.isConnected===!1)return;const p=r(f),v=kN(p,s);if(c||(v.x=0),d||(v.y=0),i.current=!0,Math.abs(v.x)>0||Math.abs(v.y)>0){const x=_N(f);x&&x.scrollBy({top:v.y,left:v.x})}},[t,c,d,s,r])}const MN=j.createContext({...zs,scaleX:1,scaleY:1});var xi;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(xi||(xi={}));const g7=j.memo(function(t){var r,s,o,i;let{id:c,accessibility:d,autoScroll:h=!0,children:f,sensors:p=i7,collisionDetection:v=yR,measuring:x,modifiers:w,...y}=t;const S=j.useReducer(u7,void 0,d7),[C,T]=S,[A,I]=dR(),[O,P]=j.useState(xi.Uninitialized),$=O===xi.Initialized,{draggable:{active:F,nodes:te,translate:ne},droppable:{containers:Ee}}=C,Se=F!=null?te.get(F):null,De=j.useRef({initial:null,translated:null}),U=j.useMemo(()=>{var Zt;return F!=null?{id:F,data:(Zt=Se?.data)!=null?Zt:o7,rect:De}:null},[F,Se]),H=j.useRef(null),[ye,R]=j.useState(null),[de,V]=j.useState(null),he=cd(y,Object.values(y)),K=Cd("DndDescribedBy",c),B=j.useMemo(()=>Ee.getEnabled(),[Ee]),re=m7(x),{droppableRects:ae,measureDroppableContainers:z,measuringScheduled:ge}=KR(B,{dragging:$,dependencies:[ne.x,ne.y],config:re.droppable}),Pe=HR(te,F),we=j.useMemo(()=>de?Rg(de):null,[de]),Q=ss(),ke=QR(Pe,re.draggable.measure);p7({activeNode:F!=null?te.get(F):null,config:Q.layoutShiftCompensation,initialRect:ke,measure:re.draggable.measure});const q=ww(Pe,re.draggable.measure,ke),ce=ww(Pe?Pe.parentElement:null),J=j.useRef({activatorEvent:null,active:null,activeNode:Pe,collisionRect:null,collisions:null,droppableRects:ae,draggableNodes:te,draggingNode:null,draggingNodeRect:null,droppableContainers:Ee,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),qe=Ee.getNodeFor((r=J.current.over)==null?void 0:r.id),Be=a7({measure:re.dragOverlay.measure}),ee=(s=Be.nodeRef.current)!=null?s:Pe,Ye=$?(o=Be.rect)!=null?o:q:null,Ne=!!(Be.nodeRef.current&&Be.rect),kt=ZR(Ne?null:q),xt=ON(ee?Un(ee):null),X=XR($?qe??Pe:null),xe=n7(X),W=f7(w,{transform:{x:ne.x-kt.x,y:ne.y-kt.y,scaleX:1,scaleY:1},activatorEvent:de,active:U,activeNodeRect:q,containerNodeRect:ce,draggingNodeRect:Ye,over:J.current.over,overlayNodeRect:Be.rect,scrollableAncestors:X,scrollableAncestorRects:xe,windowRect:xt}),Ae=we?bl(we,ne):null,Le=e7(X),Fe=Nw(Le),nt=Nw(Le,[q]),yt=bl(W,Fe),Nt=Ye?jR(Ye,W):null,Ft=U&&Nt?v({active:U,collisionRect:Nt,droppableRects:ae,droppableContainers:B,pointerCoordinates:Ae}):null,Rt=SN(Ft,"id"),[It,on]=j.useState(null),zn=Ne?W:bl(W,nt),ns=bR(zn,(i=It?.rect)!=null?i:null,q),ln=j.useRef(null),lt=j.useCallback((Zt,yr)=>{let{sensor:_r,options:vn}=yr;if(H.current==null)return;const Jr=te.get(H.current);if(!Jr)return;const Or=Zt.nativeEvent,pr=new _r({active:H.current,activeNode:Jr,event:Or,options:vn,context:J,onAbort(Yt){if(!te.get(Yt))return;const{onDragAbort:Ot}=he.current,Wt={id:Yt};Ot?.(Wt),A({type:"onDragAbort",event:Wt})},onPending(Yt,Yr,Ot,Wt){if(!te.get(Yt))return;const{onDragPending:yn}=he.current,Pr={id:Yt,constraint:Yr,initialCoordinates:Ot,offset:Wt};yn?.(Pr),A({type:"onDragPending",event:Pr})},onStart(Yt){const Yr=H.current;if(Yr==null)return;const Ot=te.get(Yr);if(!Ot)return;const{onDragStart:Wt}=he.current,Gn={activatorEvent:Or,active:{id:Yr,data:Ot.data,rect:De}};Pa.unstable_batchedUpdates(()=>{Wt?.(Gn),P(xi.Initializing),T({type:Dr.DragStart,initialCoordinates:Yt,active:Yr}),A({type:"onDragStart",event:Gn}),R(ln.current),V(Or)})},onMove(Yt){T({type:Dr.DragMove,coordinates:Yt})},onEnd:cn(Dr.DragEnd),onCancel:cn(Dr.DragCancel)});ln.current=pr;function cn(Yt){return async function(){const{active:Ot,collisions:Wt,over:Gn,scrollAdjustedTranslate:yn}=J.current;let Pr=null;if(Ot&&yn){const{cancelDrop:Cn}=he.current;Pr={activatorEvent:Or,active:Ot,collisions:Wt,delta:yn,over:Gn},Yt===Dr.DragEnd&&typeof Cn=="function"&&await Promise.resolve(Cn(Pr))&&(Yt=Dr.DragCancel)}H.current=null,Pa.unstable_batchedUpdates(()=>{T({type:Yt}),P(xi.Uninitialized),on(null),R(null),V(null),ln.current=null;const Cn=Yt===Dr.DragEnd?"onDragEnd":"onDragCancel";if(Pr){const Di=he.current[Cn];Di?.(Pr),A({type:Cn,event:Pr})}})}}},[te]),qn=j.useCallback((Zt,yr)=>(_r,vn)=>{const Jr=_r.nativeEvent,Or=te.get(vn);if(H.current!==null||!Or||Jr.dndKit||Jr.defaultPrevented)return;const pr={active:Or};Zt(_r,yr.options,pr)===!0&&(Jr.dndKit={capturedBy:yr.sensor},H.current=vn,lt(_r,yr))},[te,lt]),Qr=WR(p,qn);t7(p),ua(()=>{q&&O===xi.Initializing&&P(xi.Initialized)},[q,O]),j.useEffect(()=>{const{onDragMove:Zt}=he.current,{active:yr,activatorEvent:_r,collisions:vn,over:Jr}=J.current;if(!yr||!_r)return;const Or={active:yr,activatorEvent:_r,collisions:vn,delta:{x:yt.x,y:yt.y},over:Jr};Pa.unstable_batchedUpdates(()=>{Zt?.(Or),A({type:"onDragMove",event:Or})})},[yt.x,yt.y]),j.useEffect(()=>{const{active:Zt,activatorEvent:yr,collisions:_r,droppableContainers:vn,scrollAdjustedTranslate:Jr}=J.current;if(!Zt||H.current==null||!yr||!Jr)return;const{onDragOver:Or}=he.current,pr=vn.get(Rt),cn=pr&&pr.rect.current?{id:pr.id,rect:pr.rect.current,data:pr.data,disabled:pr.disabled}:null,Yt={active:Zt,activatorEvent:yr,collisions:_r,delta:{x:Jr.x,y:Jr.y},over:cn};Pa.unstable_batchedUpdates(()=>{on(cn),Or?.(Yt),A({type:"onDragOver",event:Yt})})},[Rt]),ua(()=>{J.current={activatorEvent:de,active:U,activeNode:Pe,collisionRect:Nt,collisions:Ft,droppableRects:ae,draggableNodes:te,draggingNode:ee,draggingNodeRect:Ye,droppableContainers:Ee,over:It,scrollableAncestors:X,scrollAdjustedTranslate:yt},De.current={initial:Ye,translated:Nt}},[U,Pe,Ft,Nt,te,ee,Ye,ae,Ee,It,X,yt]),qR({...Q,delta:ne,draggingRect:Nt,pointerCoordinates:Ae,scrollableAncestors:X,scrollableAncestorRects:xe});const Hs=j.useMemo(()=>({active:U,activeNode:Pe,activeNodeRect:q,activatorEvent:de,collisions:Ft,containerNodeRect:ce,dragOverlay:Be,draggableNodes:te,droppableContainers:Ee,droppableRects:ae,over:It,measureDroppableContainers:z,scrollableAncestors:X,scrollableAncestorRects:xe,measuringConfiguration:re,measuringScheduled:ge,windowRect:xt}),[U,Pe,q,de,Ft,ce,Be,te,Ee,ae,It,z,X,xe,re,ge,xt]),st=j.useMemo(()=>({activatorEvent:de,activators:Qr,active:U,activeNodeRect:q,ariaDescribedById:{draggable:K},dispatch:T,draggableNodes:te,over:It,measureDroppableContainers:z}),[de,Qr,U,q,T,K,te,It,z]);return pt.createElement(wN.Provider,{value:I},pt.createElement(Tf.Provider,{value:st},pt.createElement(PN.Provider,{value:Hs},pt.createElement(MN.Provider,{value:ns},f)),pt.createElement(h7,{disabled:d?.restoreFocus===!1})),pt.createElement(fR,{...d,hiddenTextDescribedById:K}));function ss(){const Zt=ye?.autoScrollEnabled===!1,yr=typeof h=="object"?h.enabled===!1:h===!1,_r=$&&!Zt&&!yr;return typeof h=="object"?{...h,enabled:_r}:{enabled:_r}}}),x7=j.createContext(null),kw="button",v7="Draggable";function y7(e){let{id:t,data:r,disabled:s=!1,attributes:o}=e;const i=Cd(v7),{activators:c,activatorEvent:d,active:h,activeNodeRect:f,ariaDescribedById:p,draggableNodes:v,over:x}=j.useContext(Tf),{role:w=kw,roleDescription:y="draggable",tabIndex:S=0}=o??{},C=h?.id===t,T=j.useContext(C?MN:x7),[A,I]=Kh(),[O,P]=Kh(),$=r7(c,t),F=cd(r);ua(()=>(v.set(t,{id:t,key:i,node:A,activatorNode:O,data:F}),()=>{const ne=v.get(t);ne&&ne.key===i&&v.delete(t)}),[v,t]);const te=j.useMemo(()=>({role:w,tabIndex:S,"aria-disabled":s,"aria-pressed":C&&w===kw?!0:void 0,"aria-roledescription":y,"aria-describedby":p.draggable}),[s,w,S,C,y,p.draggable]);return{active:h,activatorEvent:d,activeNodeRect:f,attributes:te,isDragging:C,listeners:s?void 0:$,node:A,over:x,setNodeRef:I,setActivatorNodeRef:P,transform:T}}function b7(){return j.useContext(PN)}const w7="Droppable",j7={timeout:25};function N7(e){let{data:t,disabled:r=!1,id:s,resizeObserverConfig:o}=e;const i=Cd(w7),{active:c,dispatch:d,over:h,measureDroppableContainers:f}=j.useContext(Tf),p=j.useRef({disabled:r}),v=j.useRef(!1),x=j.useRef(null),w=j.useRef(null),{disabled:y,updateMeasurementsFor:S,timeout:C}={...j7,...o},T=cd(S??s),A=j.useCallback(()=>{if(!v.current){v.current=!0;return}w.current!=null&&clearTimeout(w.current),w.current=setTimeout(()=>{f(Array.isArray(T.current)?T.current:[T.current]),w.current=null},C)},[C]),I=If({callback:A,disabled:y||!c}),O=j.useCallback((te,ne)=>{I&&(ne&&(I.unobserve(ne),v.current=!1),te&&I.observe(te))},[I]),[P,$]=Kh(O),F=cd(t);return j.useEffect(()=>{!I||!P.current||(I.disconnect(),v.current=!1,I.observe(P.current))},[P,I]),j.useEffect(()=>(d({type:Dr.RegisterDroppable,element:{id:s,key:i,disabled:r,node:P,rect:x,data:F}}),()=>d({type:Dr.UnregisterDroppable,key:i,id:s})),[s]),j.useEffect(()=>{r!==p.current.disabled&&(d({type:Dr.SetDroppableDisabled,id:s,key:i,disabled:r}),p.current.disabled=r)},[s,i,r,d]),{active:c,rect:x,isOver:h?.id===s,node:P,over:h,setNodeRef:$}}function Yx(e,t,r){const s=e.slice();return s.splice(r<0?s.length+r:r,0,s.splice(t,1)[0]),s}function S7(e,t){return e.reduce((r,s,o)=>{const i=t.get(s);return i&&(r[o]=i),r},Array(e.length))}function eh(e){return e!==null&&e>=0}function k7(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function _7(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const LN=e=>{let{rects:t,activeIndex:r,overIndex:s,index:o}=e;const i=Yx(t,s,r),c=t[o],d=i[o];return!d||!c?null:{x:d.left-c.left,y:d.top-c.top,scaleX:d.width/c.width,scaleY:d.height/c.height}},th={scaleX:1,scaleY:1},C7=e=>{var t;let{activeIndex:r,activeNodeRect:s,index:o,rects:i,overIndex:c}=e;const d=(t=i[r])!=null?t:s;if(!d)return null;if(o===r){const f=i[c];return f?{x:0,y:r<c?f.top+f.height-(d.top+d.height):f.top-d.top,...th}:null}const h=E7(i,o,r);return o>r&&o<=c?{x:0,y:-d.height-h,...th}:o<r&&o>=c?{x:0,y:d.height+h,...th}:{x:0,y:0,...th}};function E7(e,t,r){const s=e[t],o=e[t-1],i=e[t+1];return s?r<t?o?s.top-(o.top+o.height):i?i.top-(s.top+s.height):0:i?i.top-(s.top+s.height):o?s.top-(o.top+o.height):0:0}const $N="Sortable",FN=pt.createContext({activeIndex:-1,containerId:$N,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:LN,disabled:{draggable:!1,droppable:!1}});function A7(e){let{children:t,id:r,items:s,strategy:o=LN,disabled:i=!1}=e;const{active:c,dragOverlay:d,droppableRects:h,over:f,measureDroppableContainers:p}=b7(),v=Cd($N,r),x=d.rect!==null,w=j.useMemo(()=>s.map($=>typeof $=="object"&&"id"in $?$.id:$),[s]),y=c!=null,S=c?w.indexOf(c.id):-1,C=f?w.indexOf(f.id):-1,T=j.useRef(w),A=!k7(w,T.current),I=C!==-1&&S===-1||A,O=_7(i);ua(()=>{A&&y&&p(w)},[A,w,y,p]),j.useEffect(()=>{T.current=w},[w]);const P=j.useMemo(()=>({activeIndex:S,containerId:v,disabled:O,disableTransforms:I,items:w,overIndex:C,useDragOverlay:x,sortedRects:S7(w,h),strategy:o}),[S,v,O.draggable,O.droppable,I,w,C,h,x,o]);return pt.createElement(FN.Provider,{value:P},t)}const I7=e=>{let{id:t,items:r,activeIndex:s,overIndex:o}=e;return Yx(r,s,o).indexOf(t)},T7=e=>{let{containerId:t,isSorting:r,wasDragging:s,index:o,items:i,newIndex:c,previousItems:d,previousContainerId:h,transition:f}=e;return!f||!s||d!==i&&o===c?!1:r?!0:c!==o&&t===h},D7={duration:200,easing:"ease"},BN="transform",R7=ud.Transition.toString({property:BN,duration:0,easing:"linear"}),O7={roleDescription:"sortable"};function P7(e){let{disabled:t,index:r,node:s,rect:o}=e;const[i,c]=j.useState(null),d=j.useRef(r);return ua(()=>{if(!t&&r!==d.current&&s.current){const h=o.current;if(h){const f=zl(s.current,{ignoreTransform:!0}),p={x:h.left-f.left,y:h.top-f.top,scaleX:h.width/f.width,scaleY:h.height/f.height};(p.x||p.y)&&c(p)}}r!==d.current&&(d.current=r)},[t,r,s,o]),j.useEffect(()=>{i&&c(null)},[i]),i}function M7(e){let{animateLayoutChanges:t=T7,attributes:r,disabled:s,data:o,getNewIndex:i=I7,id:c,strategy:d,resizeObserverConfig:h,transition:f=D7}=e;const{items:p,containerId:v,activeIndex:x,disabled:w,disableTransforms:y,sortedRects:S,overIndex:C,useDragOverlay:T,strategy:A}=j.useContext(FN),I=L7(s,w),O=p.indexOf(c),P=j.useMemo(()=>({sortable:{containerId:v,index:O,items:p},...o}),[v,o,O,p]),$=j.useMemo(()=>p.slice(p.indexOf(c)),[p,c]),{rect:F,node:te,isOver:ne,setNodeRef:Ee}=N7({id:c,data:P,disabled:I.droppable,resizeObserverConfig:{updateMeasurementsFor:$,...h}}),{active:Se,activatorEvent:De,activeNodeRect:U,attributes:H,setNodeRef:ye,listeners:R,isDragging:de,over:V,setActivatorNodeRef:he,transform:K}=y7({id:c,data:P,attributes:{...O7,...r},disabled:I.draggable}),B=eR(Ee,ye),re=!!Se,ae=re&&!y&&eh(x)&&eh(C),z=!T&&de,ge=z&&ae?K:null,we=ae?ge??(d??A)({rects:S,activeNodeRect:U,activeIndex:x,overIndex:C,index:O}):null,Q=eh(x)&&eh(C)?i({id:c,items:p,activeIndex:x,overIndex:C}):O,ke=Se?.id,q=j.useRef({activeId:ke,items:p,newIndex:Q,containerId:v}),ce=p!==q.current.items,J=t({active:Se,containerId:v,isDragging:de,isSorting:re,id:c,index:O,items:p,newIndex:q.current.newIndex,previousItems:q.current.items,previousContainerId:q.current.containerId,transition:f,wasDragging:q.current.activeId!=null}),qe=P7({disabled:!J,index:O,node:te,rect:F});return j.useEffect(()=>{re&&q.current.newIndex!==Q&&(q.current.newIndex=Q),v!==q.current.containerId&&(q.current.containerId=v),p!==q.current.items&&(q.current.items=p)},[re,Q,v,p]),j.useEffect(()=>{if(ke===q.current.activeId)return;if(ke!=null&&q.current.activeId==null){q.current.activeId=ke;return}const ee=setTimeout(()=>{q.current.activeId=ke},50);return()=>clearTimeout(ee)},[ke]),{active:Se,activeIndex:x,attributes:H,data:P,rect:F,index:O,newIndex:Q,items:p,isOver:ne,isSorting:re,isDragging:de,listeners:R,node:te,overIndex:C,over:V,setNodeRef:B,setActivatorNodeRef:he,setDroppableNodeRef:Ee,setDraggableNodeRef:ye,transform:qe??we,transition:Be()};function Be(){if(qe||ce&&q.current.newIndex===O)return R7;if(!(z&&!Hx(De)||!f)&&(re||J))return ud.Transition.toString({...f,property:BN})}}function L7(e,t){var r,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e?.draggable)!=null?r:t.draggable,droppable:(s=e?.droppable)!=null?s:t.droppable}}function Yh(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const $7=[Ut.Down,Ut.Right,Ut.Up,Ut.Left],F7=(e,t)=>{let{context:{active:r,collisionRect:s,droppableRects:o,droppableContainers:i,over:c,scrollableAncestors:d}}=t;if($7.includes(e.code)){if(e.preventDefault(),!r||!s)return;const h=[];i.getEnabled().forEach(v=>{if(!v||v!=null&&v.disabled)return;const x=o.get(v.id);if(x)switch(e.code){case Ut.Down:s.top<x.top&&h.push(v);break;case Ut.Up:s.top>x.top&&h.push(v);break;case Ut.Left:s.left>x.left&&h.push(v);break;case Ut.Right:s.left<x.left&&h.push(v);break}});const f=xR({collisionRect:s,droppableRects:o,droppableContainers:h});let p=SN(f,"id");if(p===c?.id&&f.length>1&&(p=f[1].id),p!=null){const v=i.get(r.id),x=i.get(p),w=x?o.get(x.id):null,y=x?.node.current;if(y&&w&&v&&x){const C=Af(y).some(($,F)=>d[F]!==$),T=UN(v,x),A=B7(v,x),I=C||!T?{x:0,y:0}:{x:A?s.width-w.width:0,y:A?s.height-w.height:0},O={x:w.left,y:w.top};return I.x&&I.y?O:dd(O,I)}}}};function UN(e,t){return!Yh(e)||!Yh(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function B7(e,t){return!Yh(e)||!Yh(t)||!UN(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const gi=x2,U7=({item:e,onEdit:t,onDelete:r,onToggleActive:s})=>{const{attributes:o,listeners:i,setNodeRef:c,transform:d,transition:h,isDragging:f}=M7({id:e.id}),p={transform:ud.Transform.toString(d),transition:h,opacity:f?.5:1};return n.jsxs("div",{ref:c,style:p,className:`flex items-center justify-between p-3 bg-panel rounded-lg border border-border ${f?"shadow-lg":""}`,children:[n.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[n.jsx("div",{...o,...i,className:"cursor-grab active:cursor-grabbing p-1 hover:bg-bg rounded",children:n.jsx(d2,{className:"w-3 h-3 dark:text-white text-gray-900"})}),n.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[n.jsx("span",{className:"text-sm font-medium text-text truncate",children:e.label}),n.jsxs("span",{className:"text-xs dark:text-white text-gray-900 flex-shrink-0",children:["(",e.icon,")"]}),e.to&&n.jsx("span",{className:"text-xs dark:text-white text-gray-900 truncate",children:e.to}),e.googleSheetUrl&&n.jsx("span",{className:"text-xs text-blue-600 truncate",title:"Google Sheets",children:" Sheets"})]}),n.jsx("div",{className:`px-2 py-1 rounded text-xs flex-shrink-0 ${e.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:e.isActive?"Activo":"Inactivo"})]}),n.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[n.jsx(He,{variant:"ghost",size:"sm",onClick:()=>s(e.id),className:`p-1 ${e.isActive?"text-green-600":"dark:text-white text-gray-900"}`,children:e.isActive?n.jsx(Ai,{className:"w-3 h-3"}):n.jsx(cf,{className:"w-3 h-3"})}),n.jsx(He,{variant:"ghost",size:"sm",onClick:()=>t(e),className:"p-1",children:n.jsx(Bn,{className:"w-3 h-3"})}),n.jsx(He,{variant:"ghost",size:"sm",onClick:()=>r(e.id),className:"p-1 text-red-600 hover:text-red-700",title:"Ocultar elemento (se puede restaurar)",children:n.jsx(Gr,{className:"w-3 h-3"})})]})]})},$p=({menuItems:e,onMenuChange:t,role:r})=>{const[s,o]=j.useState(!1),[i,c]=j.useState(null),[d,h]=j.useState([]),[f,p]=j.useState(!1),[v,x]=j.useState(null),[w,y]=j.useState(e),[S,C]=j.useState(!1),[T,A]=j.useState([]),I=mR(fw(Jx),fw(Kx,{coordinateGetter:F7}));pt.useEffect(()=>{y(e)},[e]);const O=async H=>{const{active:ye,over:R}=H;if(R&&ye.id!==R.id){const de=w.findIndex(K=>K.id===ye.id),V=w.findIndex(K=>K.id===R.id),he=Yx(w,de,V);y(he);try{await gi.reorderMenuItems(he.map((K,B)=>({id:K.id,order:B+1}))),t(),x(null)}catch(K){console.warn(" Error al reordenar en backend, manteniendo orden local:",K),x("Reordenamiento guardado localmente (backend temporalmente no disponible)"),setTimeout(()=>x(null),3e3)}}},[P,$]=j.useState({to:"",key:"",icon:"Home",label:"",role:r,order:e.length+1,googleSheetUrl:""});pt.useEffect(()=>{(async()=>{try{const ye=await gi.getAvailableIcons();h(ye)}catch(ye){console.error("Error loading icons:",ye)}})()},[]);const F=async()=>{try{const ye=(await gi.getAllMenuItemsWithHidden()).filter(R=>!R.isActive);A(ye)}catch(H){console.error("Error loading hidden items:",H)}};pt.useEffect(()=>{S&&F()},[S]);const te=async H=>{H.preventDefault(),p(!0),x(null);try{i?(await gi.updateMenuItem(i.id,P),c(null)):await gi.createMenuItem(P),$({to:"",key:"",icon:"Home",label:"",role:r,order:e.length+1,googleSheetUrl:""}),o(!1),t(),i||setTimeout(()=>{window.location.reload()},1e3)}catch(ye){x(ye instanceof Error?ye.message:"Error al guardar elemento")}finally{p(!1)}},ne=H=>{c(H),$({to:H.to||"",key:H.key||"",icon:H.icon,label:H.label,role:H.role,order:H.order,googleSheetUrl:H.googleSheetUrl||""}),o(!0)},Ee=async H=>{if(window.confirm("Ests seguro de que quieres ocultar este elemento? Podrs restaurarlo ms tarde."))try{await gi.deleteMenuItem(H),t(),x(null)}catch(ye){x(ye instanceof Error?ye.message:"Error al ocultar elemento")}},Se=async H=>{try{await gi.restoreMenuItem(H),t(),F(),x(null)}catch(ye){x(ye instanceof Error?ye.message:"Error al restaurar elemento")}},De=async H=>{try{const ye=e.find(R=>R.id===H);ye&&(await gi.updateMenuItem(H,{isActive:!ye.isActive}),t())}catch(ye){x(ye instanceof Error?ye.message:"Error al actualizar elemento")}},U=()=>{$({to:"",key:"",icon:"Home",label:"",role:r,order:e.length+1,googleSheetUrl:""}),c(null),o(!1),x(null)};return n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-sm font-medium text-text",children:"Elementos del Men"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(He,{onClick:()=>C(!S),variant:"ghost",size:"sm",className:"flex items-center gap-1 text-xs",children:[n.jsx(da,{className:"w-3 h-3"}),S?"Ocultar":"Mostrar"," Ocultos (",T.length,")"]}),n.jsxs(He,{onClick:()=>o(!0),size:"sm",className:"flex items-center gap-1 text-xs",children:[n.jsx(Hr,{className:"w-3 h-3"}),"Agregar"]})]})]}),v&&n.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:v}),s&&n.jsxs(at,{className:"p-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsx("h4",{className:"text-sm font-medium text-text",children:i?"Editar Elemento":"Nuevo Elemento"}),n.jsx(He,{variant:"ghost",size:"sm",onClick:U,children:n.jsx(Rr,{className:"w-3 h-3"})})]}),n.jsxs("form",{onSubmit:te,className:"space-y-3",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-text mb-1",children:"Etiqueta *"}),n.jsx(Qn,{value:P.label,onChange:H=>$(ye=>({...ye,label:H.target.value})),placeholder:"Nombre del elemento",required:!0,className:"text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-text mb-1",children:"Icono *"}),n.jsx("select",{value:P.icon,onChange:H=>$(ye=>({...ye,icon:H.target.value})),className:"w-full px-2 py-1 text-sm border border-border rounded bg-panel text-text",required:!0,children:d.map(H=>n.jsx("option",{value:H,children:H},H))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-text mb-1",children:"URL (opcional)"}),n.jsx(Qn,{value:P.to||"",onChange:H=>$(ye=>({...ye,to:H.target.value})),placeholder:"/dashboard/ruta",className:"text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-text mb-1",children:"Clave (opcional)"}),n.jsx(Qn,{value:P.key||"",onChange:H=>$(ye=>({...ye,key:H.target.value})),placeholder:"clave-unica",className:"text-sm"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-text mb-1",children:"Google Sheets URL (opcional)"}),n.jsx(Qn,{value:P.googleSheetUrl||"",onChange:H=>$(ye=>({...ye,googleSheetUrl:H.target.value})),placeholder:"https://docs.google.com/spreadsheets/d/...",className:"text-sm",type:"url"}),n.jsx("p",{className:"text-xs dark:text-white text-gray-900 mt-1",children:"Si se proporciona, el elemento del men se abrir en una nueva pestaa con esta URL"})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(He,{type:"button",variant:"ghost",size:"sm",onClick:U,className:"text-xs",children:"Cancelar"}),n.jsxs(He,{type:"submit",size:"sm",disabled:f,className:"flex items-center gap-1 text-xs",children:[n.jsx(Gs,{className:"w-3 h-3"}),f?"Guardando...":i?"Actualizar":"Crear"]})]})]})]}),n.jsx(g7,{sensors:I,collisionDetection:gR,onDragEnd:O,children:n.jsx(A7,{items:w.map(H=>H.id),strategy:C7,children:n.jsx("div",{className:"space-y-1",children:w.length===0?n.jsx("div",{className:"text-center py-4 dark:text-white text-gray-900 text-sm",children:"No hay elementos de men para este rol"}):w.map(H=>n.jsx(U7,{item:H,onEdit:ne,onDelete:Ee,onToggleActive:De},H.id))})})}),S&&n.jsxs("div",{className:"mt-6",children:[n.jsxs("h4",{className:"text-sm font-medium text-text mb-3 flex items-center gap-2",children:[n.jsx(da,{className:"w-4 h-4"}),"Elementos Ocultos (",T.length,")"]}),n.jsx("div",{className:"space-y-1",children:T.length===0?n.jsx("div",{className:"text-center py-4 dark:text-white text-gray-900 text-sm",children:"No hay elementos ocultos"}):T.map(H=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-100 rounded-lg border border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[n.jsx("span",{className:"text-sm font-medium dark:text-white text-gray-900 truncate",children:H.label}),n.jsxs("span",{className:"text-xs dark:text-white text-gray-900 flex-shrink-0",children:["(",H.icon,")"]}),H.to&&n.jsx("span",{className:"text-xs dark:text-white text-gray-900 truncate",children:H.to}),H.googleSheetUrl&&n.jsx("span",{className:"text-xs text-blue-600 truncate",title:"Google Sheets",children:" Sheets"})]}),n.jsx("div",{className:"px-2 py-1 rounded text-xs flex-shrink-0 bg-red-100 text-red-700",children:"Oculto"})]}),n.jsx("div",{className:"flex items-center gap-1 ml-2",children:n.jsx(He,{variant:"ghost",size:"sm",onClick:()=>Se(H.id),className:"p-1 text-green-600 hover:text-green-700",title:"Restaurar elemento",children:n.jsx(m2,{className:"w-3 h-3"})})})]},H.id))})]})]})},z7=()=>{const{user:e}=$t(),{allMenuItems:t,refreshMenu:r}=v2(e?.role);return e?.role!=="admin"?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsxs(at,{className:"p-8 text-center",children:[n.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Acceso Denegado"}),n.jsx("p",{className:"text-text-secondary",children:"Solo los administradores pueden acceder a esta pgina."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-text",children:"Gestin de Mens"}),n.jsx("p",{className:"text-text-secondary text-sm",children:"Administra los elementos de navegacin para cada rol"})]})}),n.jsx("div",{className:"bg-panel rounded-lg p-1",children:n.jsx("div",{className:"grid grid-cols-3 gap-1",children:["admin","teacher","student"].map(s=>n.jsx("button",{className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${s==="admin"?"bg-accent text-white":"text-text-secondary hover:text-text hover:bg-bg"}`,children:s==="admin"?"Administradores":s==="teacher"?"Profesores":"Estudiantes"},s))})}),n.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[n.jsxs(at,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-text",children:"Men de Administradores"}),n.jsxs("span",{className:"text-xs text-text-secondary bg-bg px-2 py-1 rounded",children:[t.filter(s=>s.role==="admin").length," elementos"]})]}),n.jsx($p,{menuItems:t.filter(s=>s.role==="admin"),onMenuChange:r,role:"admin"})]}),n.jsxs(at,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-text",children:"Men de Profesores"}),n.jsxs("span",{className:"text-xs text-text-secondary bg-bg px-2 py-1 rounded",children:[t.filter(s=>s.role==="teacher").length," elementos"]})]}),n.jsx($p,{menuItems:t.filter(s=>s.role==="teacher"),onMenuChange:r,role:"teacher"})]}),n.jsxs(at,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-text",children:"Men de Estudiantes"}),n.jsxs("span",{className:"text-xs text-text-secondary bg-bg px-2 py-1 rounded",children:[t.filter(s=>s.role==="student").length," elementos"]})]}),n.jsx($p,{menuItems:t.filter(s=>s.role==="student"),onMenuChange:r,role:"student"})]})]}),n.jsxs(at,{className:"p-4",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsx("h3",{className:"text-sm font-semibold text-text",children:"Informacin Rpida"})}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-xs text-text-secondary",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"font-medium text-text",children:"Agregar"}),n.jsx("div",{children:"Nuevos elementos"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"font-medium text-text",children:"Editar"}),n.jsx("div",{children:"Elementos existentes"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"font-medium text-text",children:"Activar/Desactivar"}),n.jsx("div",{children:"Visibilidad"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"font-medium text-text",children:"Eliminar"}),n.jsx("div",{children:"Elementos no usados"})]})]})]})]})},q7=()=>{const{t:e}=fa(),{user:t}=$t(),[r,s]=j.useState([]),[o,i]=j.useState(!0),[c,d]=j.useState(""),[h,f]=j.useState(null);j.useEffect(()=>{t&&(async()=>{if(t?.email!=="ark2784@gmail.com"){f("Acceso denegado. Este componente es exclusivo para ark2784@gmail.com"),i(!1);return}try{i(!0);const{data:de,error:V}=await Ue.from("users").select("*").order("email");if(V)throw V;s(de||[]),i(!1)}catch(de){console.error("Error loading users:",de),f("Error al cargar usuarios")}finally{i(!1)}})()},[t]);const[p,v]=j.useState("all"),[x,w]=j.useState("all"),y=["id","avatar","password_hash","created_at","updated_at","encrypted_password"],S=Array.from(new Set(r.reduce((R,de)=>[...R,...Object.keys(de)],[]))).filter(R=>!y.includes(R)),C=Array.from(new Set(r.map(R=>R.role||R.rol||""))).filter(Boolean),T=Array.from(new Set(r.map(R=>String(R.status!==void 0?R.status:R.activo!==void 0?R.activo:"")))).filter(Boolean),A=r.filter(R=>{const de=c.toLowerCase();return p!=="all"&&(R.role||R.rol||"")!==p||x!=="all"&&String(R.status!==void 0?R.status:R.activo!==void 0?R.activo:"")!==x?!1:Object.values(R).some(V=>String(V).toLowerCase().includes(de))});if(h)return n.jsx("div",{className:"p-6",children:n.jsx(at,{className:"bg-red-900/20 border-red-800",children:n.jsx("div",{className:"p-4 text-red-500 font-bold text-center",children:h})})});const[I,O]=j.useState(null),[P,$]=j.useState({}),[F,te]=j.useState(null),[ne,Ee]=j.useState(null),Se=R=>{O(R.id),$({...R}),te(null),Ee(null)},De=()=>{O(null),$({}),te(null),Ee(null)},U=(R,de)=>{$(V=>({...V,[R]:de}))},H=async()=>{if(I){te(null),Ee(null);try{const R={};S.forEach(V=>{P[V]!==void 0&&(R[V]=P[V])});const{error:de}=await Ue.from("users").update(R).eq("id",I);if(de)throw de;s(V=>V.map(he=>he.id===I?{...he,...R}:he)),O(null),console.log("Usuario actualizado correctamente en Supabase:",R),Ee("Usuario actualizado correctamente en la base de datos."),setTimeout(()=>Ee(null),3e3)}catch(R){console.error("Error updating user:",R),te("Error al guardar: "+R.message)}}},ye=(R,de)=>R==="role"||R==="rol"?n.jsxs("select",{value:de,onChange:V=>U(R,V.target.value),className:"w-full bg-white text-gray-900 border border-gray-300 rounded px-2 py-1 text-sm focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"student",children:"Student"}),n.jsx("option",{value:"teacher",children:"Teacher"}),n.jsx("option",{value:"admin",children:"Admin"}),n.jsx("option",{value:"parent",children:"Parent"}),n.jsx("option",{value:"productor",children:"Productor"}),n.jsx("option",{value:"coordinador",children:"Coordinador"})]}):R==="status"||R==="activo"?n.jsxs("select",{value:String(de),onChange:V=>U(R,V.target.value==="true"||V.target.value==="active"),className:"w-full bg-white text-gray-900 border border-gray-300 rounded px-2 py-1 text-sm focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"true",children:"Active"}),n.jsx("option",{value:"false",children:"Inactive"}),n.jsx("option",{value:"active",children:"Active (String)"}),n.jsx("option",{value:"suspended",children:"Suspended"})]}):n.jsx("input",{type:"text",value:de??"",onChange:V=>U(R,V.target.value),className:"w-full bg-white text-gray-900 border border-gray-300 rounded px-2 py-1 text-sm focus:ring-2 focus:ring-blue-500"});return n.jsxs("div",{className:"space-y-4 md:space-y-6 bg-white min-h-screen p-0 md:p-6 overflow-y-auto",children:[n.jsxs("div",{className:"flex-none p-4 md:p-0",children:[n.jsx("h1",{className:"text-xl md:text-3xl font-bold uppercase text-gray-900 mb-0 md:mb-2",children:"Restricted Users List (Full View)"}),n.jsx("p",{className:"text-gray-600 uppercase text-sm",children:"Exclusive view for ark2784@gmail.com - Editable"}),F&&n.jsx("p",{className:"text-red-500 font-bold mt-2",children:F}),ne&&n.jsx("p",{className:"text-green-600 font-bold mt-2 bg-green-50 border border-green-200 p-2 rounded inline-block",children:ne})]}),n.jsx(at,{className:"bg-white border-gray-200 mx-4 md:mx-0 shadow-sm",padding:"none",children:n.jsxs("div",{className:"p-3 md:p-4 flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 md:w-5 md:h-5 text-gray-500"}),n.jsx("input",{type:"text",placeholder:"Buscar...",value:c,onChange:R=>d(R.target.value),className:"w-full pl-9 md:pl-10 pr-3 py-1.5 md:py-2 text-sm md:text-base border border-gray-300 bg-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase placeholder-gray-400"})]}),n.jsx("div",{className:"w-full md:w-48",children:n.jsxs("select",{value:p,onChange:R=>v(R.target.value),className:"w-full px-3 py-1.5 md:py-2 text-sm md:text-base border border-gray-300 bg-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase",children:[n.jsx("option",{value:"all",children:"Role: All"}),C.map(R=>n.jsx("option",{value:R,children:R},R))]})}),n.jsx("div",{className:"w-full md:w-48",children:n.jsxs("select",{value:x,onChange:R=>w(R.target.value),className:"w-full px-3 py-1.5 md:py-2 text-sm md:text-base border border-gray-300 bg-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase",children:[n.jsx("option",{value:"all",children:"Status: All"}),T.map(R=>n.jsx("option",{value:R,children:R},R))]})})]})}),n.jsx(at,{className:"bg-white border-gray-200 shadow-sm",children:n.jsx("div",{className:"overflow-x-auto max-h-[calc(100vh-300px)] overflow-y-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[n.jsx("th",{className:"text-left py-3 px-4 font-bold text-gray-700 uppercase whitespace-nowrap",children:"Actions"}),S.map(R=>n.jsx("th",{className:"text-left py-3 px-4 font-bold text-gray-700 uppercase whitespace-nowrap",children:R},R))]})}),n.jsx("tbody",{children:o?n.jsx("tr",{children:n.jsx("td",{colSpan:S.length+1,className:"py-6 text-center text-gray-900 uppercase",children:e("loading","Cargando...")})}):A.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:S.length+1,className:"py-6 text-center text-gray-900 uppercase",children:e("adminDashboard.noUsers","No hay usuarios")})}):A.map((R,de)=>{const V=I===R.id;return n.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"py-3 px-4 whitespace-nowrap sticky left-0 bg-white z-10 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)]",children:V?n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:H,className:"text-green-600 hover:text-green-700 font-bold text-xs uppercase border border-green-600 bg-green-50 px-2 py-1 rounded",children:"Save"}),n.jsx("button",{onClick:De,className:"text-red-600 hover:text-red-700 font-bold text-xs uppercase border border-red-600 bg-red-50 px-2 py-1 rounded",children:"Cancel"})]}):n.jsx("button",{onClick:()=>Se(R),className:"text-blue-600 hover:text-blue-700 font-bold text-xs uppercase border border-blue-600 bg-blue-50 px-2 py-1 rounded",children:"Edit"})}),S.map(he=>n.jsx("td",{className:"py-3 px-4 text-gray-900 whitespace-nowrap",children:V?ye(he,P[he]):typeof R[he]=="object"?JSON.stringify(R[he]):String(R[he]??"-")},`${R.id||de}-${he}`))]},R.id||de)})})]})})})]})},G7=()=>{const[e,t]=j.useState([]),[r,s]=j.useState(!0);j.useEffect(()=>{o()},[]);const o=async()=>{try{const{data:d,error:h}=await Ue.from("bug_reports").select(`
          *,
          user:users (
            email,
            first_name,
            last_name
          )
        `).order("created_at",{ascending:!1});if(h)throw h;t(d||[])}catch(d){console.error("Error fetching reports:",d)}finally{s(!1)}},i=async(d,h)=>{try{const{error:f}=await Ue.from("bug_reports").update({status:h}).eq("id",d);if(f)throw f;t(e.map(p=>p.id===d?{...p,status:h}:p))}catch(f){console.error("Error updating status:",f)}},c=async d=>{if(confirm("Are you sure you want to delete this report?"))try{const{error:h}=await Ue.from("bug_reports").delete().eq("id",d);if(h)throw h;t(e.filter(f=>f.id!==d))}catch(h){console.error("Error deleting report:",h),alert("Error deleting report")}};return r?n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600"})}):n.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3 uppercase",children:[n.jsx(o2,{className:"w-8 h-8 text-red-600"}),"Bug Reports"]}),n.jsx("p",{className:"text-gray-500 mt-2 uppercase",children:"Manage system errors and user-reported bugs."})]}),n.jsxs("div",{className:"grid gap-6",children:[e.map(d=>n.jsxs(at,{className:"p-6 bg-white shadow-md hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded uppercase ${d.type==="auto"?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:d.type||"Manual"}),n.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded uppercase ${d.status==="open"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:d.status}),n.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1 uppercase",children:[n.jsx(Xn,{className:"w-3 h-3"}),new Date(d.created_at).toLocaleString("es-MX",{timeZone:"America/Cancun"})]})]}),n.jsx("h3",{className:"text-sm font-bold text-gray-900 uppercase",children:d.user?`${d.user.first_name} ${d.user.last_name} (${d.user.email})`:"Anonymous / System"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[d.status==="open"&&n.jsxs("button",{onClick:()=>i(d.id,"resolved"),className:"flex items-center gap-2 px-3 py-1 bg-green-600 text-white text-xs font-bold rounded hover:bg-green-700 transition-colors uppercase",children:[n.jsx(sn,{className:"w-4 h-4"}),"Mark Resolved"]}),n.jsxs("button",{onClick:()=>c(d.id),className:"flex items-center gap-2 px-3 py-1 bg-red-100 text-red-600 text-xs font-bold rounded hover:bg-red-200 transition-colors uppercase",title:"Delete Report",children:[n.jsx(Gr,{className:"w-4 h-4"}),"Delete"]})]})]}),n.jsx("div",{className:"bg-gray-50 p-4 rounded-lg font-mono text-sm text-gray-700 whitespace-pre-wrap overflow-x-auto border border-gray-200",children:d.description}),d.error_hash&&n.jsxs("div",{className:"mt-2 text-xs text-gray-400 font-mono uppercase",children:["Hash: ",d.error_hash]})]},d.id)),e.length===0&&n.jsx("div",{className:"text-center py-12 text-gray-500 uppercase",children:"No bug reports found. Good job!"})]})]})},V7=()=>{const{user:e,setUser:t}=$t(),[r,s]=j.useState({firstName:"",lastName:""}),[o,i]=j.useState(!1),[c,d]=j.useState(null);j.useEffect(()=>{e&&s({firstName:e.firstName||"",lastName:e.lastName||""})},[e]);const h=p=>{const{name:v,value:x}=p.target;s(w=>({...w,[v]:x}))},f=async p=>{if(p.preventDefault(),!!e){i(!0),d(null);try{const{error:v}=await Ue.from("users").update({first_name:r.firstName,last_name:r.lastName}).eq("id",e.id);if(v)throw v;const x={...e,...r};t(x),d({type:"success",text:"Profile updated successfully."}),setTimeout(()=>d(null),3e3)}catch(v){console.error("Error updating profile:",v),d({type:"error",text:"Error updating profile: "+v.message})}finally{i(!1)}}};return e?n.jsxs("div",{className:"space-y-6 bg-white min-h-screen p-6",children:[n.jsxs("div",{className:"flex-none",children:[n.jsx("h1",{className:"text-3xl font-bold uppercase text-gray-900 mb-2",children:"Configuration"}),n.jsx("p",{className:"text-gray-600 text-sm",children:"View your profile and update your personal information."}),c&&n.jsx("div",{className:`mt-4 p-3 rounded-lg border ${c.type==="success"?"bg-green-50 border-green-200 text-green-700":"bg-red-50 border-red-200 text-red-700"} font-medium`,children:c.text})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs(at,{className:"bg-white border-gray-200 shadow-sm",children:[n.jsx("div",{className:"border-b border-gray-100 p-4 mb-4",children:n.jsxs("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(g2,{className:"w-5 h-5 text-gray-500"}),"Account Information"]})}),n.jsxs("div",{className:"space-y-4 px-4 pb-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-1",children:"Email"}),n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-600",children:[n.jsx(Ba,{className:"w-4 h-4 text-gray-400"}),e.email]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-1",children:"Role"}),n.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-600 capitalize",children:e.role})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-1",children:"User ID"}),n.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-500 text-xs font-mono truncate",children:e.id})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-1",children:"Assigned Group"}),n.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-600",children:e.grupoAsignado||"N/A"})]})]})]}),n.jsx(at,{className:"bg-white border-gray-200 shadow-sm",children:n.jsxs("form",{onSubmit:f,children:[n.jsx("div",{className:"border-b border-gray-100 p-4 mb-4",children:n.jsxs("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(es,{className:"w-5 h-5 text-gray-500"}),"Personal Information"]})}),n.jsxs("div",{className:"space-y-4 px-4 pb-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"firstName",className:"block text-xs font-semibold text-gray-700 uppercase mb-1",children:"First Name"}),n.jsx("input",{type:"text",id:"firstName",name:"firstName",value:r.firstName,onChange:h,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 bg-white",placeholder:"Enter your first name"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"lastName",className:"block text-xs font-semibold text-gray-700 uppercase mb-1",children:"Last Name"}),n.jsx("input",{type:"text",id:"lastName",name:"lastName",value:r.lastName,onChange:h,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 bg-white",placeholder:"Enter your last name"})]}),n.jsx("div",{className:"pt-4 flex justify-end",children:n.jsxs("button",{type:"submit",disabled:o,className:`flex items-center gap-2 px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-bold uppercase text-sm rounded-lg transition-colors ${o?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx(Gs,{className:"w-4 h-4"}),o?"Saving...":"Save Changes"]})})]})]})})]})]}):n.jsx("div",{className:"p-6",children:n.jsx(at,{className:"bg-red-50 border-red-200",children:n.jsx("div",{className:"p-4 text-red-600 text-center",children:"User not authenticated."})})})},H7=()=>{const e=vs();return n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Test de Navegacin"}),n.jsxs("div",{className:"bg-green-100 p-4 rounded-lg",children:[n.jsxs("p",{className:"text-green-800",children:[n.jsx("strong",{children:"Ruta actual:"})," ",e.pathname]}),n.jsxs("p",{className:"text-green-800",children:[n.jsx("strong",{children:"Estado:"})," La navegacin est funcionando correctamente"]})]})]})},W7=()=>n.jsx("div",{className:"p-6 flex items-center justify-center min-h-[60vh]",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"Cdigo de acceso"}),n.jsx("div",{className:"inline-block px-6 py-3 text-lg font-mono tracking-wider rounded-lg border bg-white dark:bg-black dark:border-white/20 text-gray-900 dark:text-white",children:"RKGROUPROCKS"}),n.jsx("div",{className:"mt-4",children:n.jsx("a",{href:"https://web-jet-eta-68.vercel.app",target:"_blank",rel:"noopener noreferrer",className:"inline-block px-4 py-2 bg-blue-400 text-white rounded-lg hover:bg-blue-500 transition-colors",children:"Abrir Search en nueva pestaa"})})]})}),K7=()=>{const{tribuId:e,materia:t}=Xh(),[r,s]=j.useState(!1),[o,i]=j.useState([]),[c,d]=j.useState(!1),[h,f]=j.useState(null),[p,v]=j.useState({title:"",description:"",url:"",pdfUrl:"",videoUrl:"",instructions:"",quiz:"",photoInstructions:""}),x=()=>{const y=OD();y.title=`${y.title} - ${t}`,y.description=`Mdulo de prueba para ${t} en ${e}. ${y.description}`,y.category=t||"General",y.tags=[...y.tags,e||"Tribu",t||"Materia"],i(S=>[...S,y]),f(`Mdulo de prueba creado para ${t} en ${e}!`),setTimeout(()=>f(null),3e3)},w=()=>{if(!p.title.trim()){alert("El ttulo es obligatorio");return}const y={id:`mod-${Date.now()}`,title:p.title,description:p.description,url:p.url,category:t||"General",difficulty:"beginner",duration:120,prerequisites:["Conocimientos bsicos"],learningObjectives:["Completar el mdulo exitosamente"],tags:[e||"Tribu",t||"Materia"],instructor:"Profesor Asignado",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isActive:!0,isPublished:!0,order:o.length+1,progress:0,totalLessons:1,completedLessons:0,resources:{videos:p.videoUrl?[p.videoUrl]:[],documents:p.pdfUrl?[p.pdfUrl]:[],links:p.url?[p.url]:[]},assignments:[],quizzes:[],pdfUrl:p.pdfUrl,videoUrl:p.videoUrl,instructions:p.instructions,quiz:p.quiz,photoInstructions:p.photoInstructions};i(S=>[...S,y]),s(!1),v({title:"",description:"",url:"",pdfUrl:"",videoUrl:"",instructions:"",quiz:"",photoInstructions:""}),f(`Mdulo "${y.title}" creado exitosamente!`),setTimeout(()=>f(null),3e3)};return n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:[t," - ",e]}),n.jsxs("p",{className:"text-gray-600",children:["Gestin de mdulos para la materia ",t," en ",e]})]}),n.jsxs("div",{className:"flex gap-4 mb-6",children:[n.jsx(He,{onClick:()=>s(!0),className:"bg-blue-400 hover:bg-blue-500 text-white",children:"Crear Nuevo Mdulo"}),n.jsx(He,{onClick:x,className:"bg-green-600 hover:bg-green-700 text-white",children:"Crear Mdulo de Prueba"})]}),h&&n.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:h}),n.jsx(at,{children:n.jsxs("div",{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Mdulos Disponibles"}),o.length===0?n.jsx("p",{className:"text-gray-500",children:"No hay mdulos creados an."}):n.jsx("div",{className:"space-y-4",children:o.map((y,S)=>n.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-800",children:y.title}),n.jsx("p",{className:"text-gray-600 mt-1",children:y.description}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:y.tags.map((C,T)=>n.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:C},T))}),y.url&&n.jsx("a",{href:y.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm mt-2 inline-block",children:"Ver mdulo "})]}),n.jsxs("div",{className:"text-sm text-gray-500",children:[y.duration," min"]})]})},y.id))})]})}),r&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60",children:n.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Crear Nuevo Mdulo"}),n.jsx("button",{className:"text-gray-400 hover:text-gray-600 transition-colors",onClick:()=>s(!1),children:n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-x w-6 h-6",children:[n.jsx("path",{d:"M18 6 6 18"}),n.jsx("path",{d:"m6 6 12 12"})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ttulo del mdulo *"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Introduccin a la materia",value:p.title,onChange:y=>v({...p,title:y.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin *"}),n.jsx("textarea",{rows:"3",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe el contenido del mdulo...",value:p.description,onChange:y=>v({...p,description:y.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL del mdulo (opcional)"}),n.jsx("input",{type:"url",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://ejemplo.com/modulo (opcional)",value:p.url,onChange:y=>v({...p,url:y.target.value})}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Deja este campo vaco si el mdulo no tiene una URL especfica"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descargar PDF para imprimir (opcional)"}),n.jsx("input",{type:"url",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://ejemplo.com/modulo.pdf (opcional)",value:p.pdfUrl,onChange:y=>v({...p,pdfUrl:y.target.value})}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enlace al PDF que los estudiantes pueden descargar e imprimir"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Link de video de YouTube (opcional)"}),n.jsx("input",{type:"url",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://youtube.com/watch?v=... (opcional)",value:p.videoUrl,onChange:y=>v({...p,videoUrl:y.target.value})}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enlace al video de YouTube relacionado con el mdulo"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Texto de indicaciones (opcional)"}),n.jsx("textarea",{rows:"4",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Instrucciones detalladas para los estudiantes...",value:p.instructions,onChange:y=>v({...p,instructions:y.target.value})}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Instrucciones paso a paso para completar el mdulo"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Formularios de opcin mltiple (opcional)"}),n.jsx("textarea",{rows:"3",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`Pregunta 1: Cul es...?
a) Opcin A
b) Opcin B
c) Opcin C
Respuesta: a`,value:p.quiz,onChange:y=>v({...p,quiz:y.target.value})}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Formato: Pregunta, opciones (a, b, c) y respuesta correcta"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Espacio para subir foto de su trabajo (opcional)"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Instrucciones para subir fotos del trabajo realizado",value:p.photoInstructions,onChange:y=>v({...p,photoInstructions:y.target.value})}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Instrucciones sobre cmo los estudiantes deben subir fotos de su trabajo"})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[n.jsxs("p",{className:"text-sm text-blue-800",children:[n.jsx("strong",{children:"Materia asignada:"})," ",t]}),n.jsxs("p",{className:"text-sm text-blue-800",children:[n.jsx("strong",{children:"Tribu asignada:"})," ",e]}),n.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Este mdulo se crear automticamente para ",t," en ",e]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",onClick:()=>s(!1),children:"Cancelar"}),n.jsx("button",{className:"px-4 py-2 bg-blue-400 text-white rounded-lg hover:bg-blue-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:w,disabled:c,children:c?"Creando...":"Crear Mdulo"})]})]})})]})},Q7=()=>{const[e,t]=j.useState(""),[r,s]=j.useState(null),[o,i]=j.useState([]),[c,d]=j.useState([]),[h,f]=j.useState([]),[p,v]=j.useState(0),[x,w]=j.useState(!0),[y,S]=j.useState(null),[C,T]=j.useState(null),[A,I]=j.useState({}),[O,P]=j.useState(!1),[$,F]=j.useState(!1),[te,ne]=j.useState(null),[Ee,Se]=j.useState(""),[De,U]=j.useState(""),[H,ye]=j.useState(""),[R,de]=j.useState(""),[V,he]=j.useState(""),[K,B]=j.useState(!1),[re,ae]=j.useState(null),[z,ge]=j.useState({totalTables:0,totalRecords:0,totalSize:"0 bytes",lastUpdate:new Date});j.useEffect(()=>{Pe(),Q()},[]),j.useEffect(()=>{r&&we(r)},[r]);const Pe=async()=>{try{w(!0),S(null);const W=await M2();i(W)}catch(W){console.error("Error cargando tablas desde Supabase:",W);const Ae=W.message||"";S(`Error al cargar tablas desde Supabase: ${Ae||"Revisa que las tablas configuradas existan en tu proyecto."}`),i([])}finally{w(!1)}},we=async W=>{try{if(w(!0),W==="gastos_evento"){const{data:Ae,error:Le,count:Fe}=await Ue.from(W).select("*",{count:"exact"});if(Le)throw new Error(Le.message);const{data:nt}=await Ue.from("eventos").select("id, nombre"),{data:yt}=await Ue.from("usuarios").select("id, nombre, apellido"),Nt=new Map;nt?.forEach(It=>{Nt.set(It.id,It.nombre||"Sin nombre")});const Ft=new Map;yt?.forEach(It=>{const on=`${It.nombre||""} ${It.apellido||""}`.trim()||"Sin nombre";Ft.set(It.id,on)});const Rt=(Ae||[]).map(It=>({...It,evento_nombre:It.evento_id?Nt.get(It.evento_id)||`ID: ${It.evento_id.substring(0,8)}...`:"Sin evento",responsable_nombre:It.responsable_id?Ft.get(It.responsable_id)||`ID: ${It.responsable_id.substring(0,8)}...`:"Sin responsable"}));d(Rt),f(Rt),v(Fe||0)}else{const{data:Ae,error:Le,count:Fe}=await Ue.from(W).select("*",{count:"exact"});if(Le)throw new Error(Le.message);d(Ae||[]),f(Ae||[]),v(Fe||0)}Se(""),U(""),ye(""),de(""),he("")}catch(Ae){console.error("Error cargando datos de tabla:",Ae),S(`Error al cargar datos de la tabla ${W}`),d([]),f([]),v(0)}finally{w(!1)}},Q=async()=>{try{const W=await B5();ge(W)}catch(W){console.error("Error cargando estadsticas:",W)}},ke=()=>{Pe(),Q(),r&&we(r)},q=o.filter(W=>W.name.toLowerCase().includes(e.toLowerCase()));o.find(W=>W.name===r);const ce=W=>{const Ae=new Set;return c.forEach(Le=>{Le[W]&&Le[W]!==null&&Le[W]!==void 0&&Ae.add(String(Le[W]))}),Array.from(Ae).sort()},J=ce("categoria"),qe=ce("tipo"),Be=ce("evento_nombre"),ee=ce("responsable_nombre"),Ye=r==="gastos_evento"?ce("tipo"):[];j.useEffect(()=>{if(!r)return;let W=[...c];if(Ee){const Ae=Ee.toLowerCase();W=W.filter(Le=>Object.values(Le).some(Fe=>Fe==null?!1:String(Fe).toLowerCase().includes(Ae)))}De&&(W=W.filter(Ae=>Ae.categoria===De)),H&&r==="items"&&(W=W.filter(Ae=>Ae.tipo===H)),H&&r==="gastos_evento"&&(W=W.filter(Ae=>Ae.tipo===H)),R&&r==="gastos_evento"&&(W=W.filter(Ae=>Ae.evento_nombre===R)),V&&r==="gastos_evento"&&(W=W.filter(Ae=>Ae.responsable_nombre===V)),f(W)},[c,Ee,De,H,R,V,r]);const Ne=W=>{T(W),I({...W}),P(!1),S(null),ne(null)},kt=()=>{if(!r)return;const W={};if(c.length>0){const Ae=c[0];Object.keys(Ae).forEach(Le=>{if(Le!=="id"&&Le!=="created_at"&&Le!=="updated_at"&&Le!=="evento_nombre"&&Le!=="responsable_nombre"){const Fe=Ae[Le];typeof Fe=="boolean"?W[Le]=!1:typeof Fe=="number"?W[Le]=0:W[Le]=""}})}T({}),I(W),P(!0),S(null),ne(null)},xt=()=>{T(null),I({}),P(!1),S(null),ne(null)},X=async()=>{if(r)try{F(!0),S(null),ne(null);const W={};if(Object.keys(A).forEach(Ae=>{Ae!=="id"&&Ae!=="created_at"&&Ae!=="updated_at"&&Ae!=="evento_nombre"&&Ae!=="responsable_nombre"&&(W[Ae]=A[Ae])}),O){const{error:Ae}=await Ue.from(r).insert(W);if(Ae)throw new Error(Ae.message||"Error al crear el registro");const Le=A.nombre||A.name||"registro",Fe=r==="items"?` Item "${Le}" creado correctamente`:" Registro creado correctamente";ne(Fe),P(!1)}else{const Le=C.id;if(!Le)throw new Error("No se pudo identificar el ID del registro");const Fe={};if(Object.keys(W).forEach(Ft=>{W[Ft]!==C[Ft]&&(Fe[Ft]=W[Ft])}),Object.keys(Fe).length===0){ne("No hay cambios para guardar"),F(!1);return}const{error:nt}=await Ue.from(r).update(Fe).eq("id",Le);if(nt)throw new Error(nt.message||"Error al actualizar el registro");const yt=A.nombre||A.name||"registro",Nt=r==="items"?` Item "${yt}" editado correctamente`:" Registro actualizado correctamente";ne(Nt)}T(null),I({}),P(!1),await we(r),setTimeout(()=>{ne(null)},3e3)}catch(W){console.error("Error al guardar registro:",W),S(W.message||`Error al ${O?"crear":"actualizar"} el registro`)}finally{F(!1)}},xe=async W=>{if(!r)return;const Ae="id",Le=W[Ae];if(!Le){S("No se pudo identificar el ID del registro");return}if(window.confirm(`Ests seguro de que quieres eliminar este registro?

Esta accin no se puede deshacer.`))try{F(!0),S(null),ne(null);const{error:nt}=await Ue.from(r).delete().eq(Ae,Le);if(nt)throw new Error(nt.message||"Error al eliminar el registro");ne("Registro eliminado correctamente"),await we(r)}catch(nt){console.error("Error al eliminar registro:",nt),S(nt.message||"Error al eliminar el registro")}finally{F(!1)}};return j.useEffect(()=>{if(te){const W=setTimeout(()=>ne(null),5e3);return()=>clearTimeout(W)}},[te]),n.jsxs("div",{className:"space-y-6 dark:bg-black bg-white min-h-screen p-6 overflow-y-auto",children:[ig,n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl md:text-3xl font-bold uppercase dark:text-white text-gray-900 mb-0 md:mb-2",children:"BASE DE DATOS"}),n.jsx("p",{className:"dark:text-white text-gray-900 uppercase text-sm",children:"GESTIN Y ADMINISTRACIN DE BASE DE DATOS"})]}),n.jsxs("div",{className:"flex gap-3",children:[ig,n.jsxs(He,{className:"uppercase",onClick:ke,disabled:x,children:[n.jsx(Ma,{className:`w-5 h-5 mr-2 ${x?"animate-spin":""}`}),"ACTUALIZAR"]}),n.jsxs(He,{className:"uppercase",children:[n.jsx(Zc,{className:"w-5 h-5 mr-2"}),"EXPORTAR"]})]})]}),re&&n.jsx("div",{className:`p-4 rounded-lg ${re.includes("")?"bg-green-100 text-green-800 border border-green-300":"bg-red-100 text-red-800 border border-red-300"}`,children:re}),y&&!C&&n.jsx(at,{className:"bg-red-900/20 border-red-800",children:n.jsxs("div",{className:"p-4 flex items-center gap-3",children:[n.jsx(Ei,{className:"w-5 h-5 text-red-400"}),n.jsx("p",{className:"text-red-400 uppercase text-sm",children:y}),n.jsx("button",{onClick:()=>S(null),className:"ml-auto text-red-400 hover:text-red-300",children:""})]})}),te&&!C&&n.jsx(at,{className:"bg-green-900/30 border-green-600 border-2 animate-pulse",children:n.jsxs("div",{className:"p-4 flex items-center gap-3",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("svg",{className:"w-6 h-6 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n.jsx("p",{className:"text-green-300 uppercase text-sm font-semibold flex-1",children:te}),n.jsx("button",{onClick:()=>ne(null),className:"ml-auto text-green-400 hover:text-green-300 text-xl font-bold",title:"Cerrar",children:""})]})}),x&&o.length===0?n.jsx(at,{className:"dark:bg-black/80 bg-white/80 backdrop-blur-sm dark:border-white/20 border-gray-200",children:n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(Ma,{className:"w-8 h-8 dark:text-white text-gray-900 animate-spin mx-auto mb-4"}),n.jsx("p",{className:"dark:text-white text-gray-900 uppercase",children:"CARGANDO TABLAS..."})]})}):q.length===0?n.jsx(at,{className:"dark:bg-black/80 bg-white/80 backdrop-blur-sm dark:border-white/20 border-gray-200",children:n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(c2,{className:"w-12 h-12 dark:text-white text-gray-900 mx-auto mb-4"}),n.jsx("p",{className:"dark:text-white text-gray-900 uppercase text-lg mb-2",children:"NO HAY TABLAS DISPONIBLES"}),n.jsx("p",{className:"dark:text-white text-gray-900 uppercase text-sm",children:e?"NO SE ENCONTRARON TABLAS CON ESE NOMBRE":"LA BASE DE DATOS EST VACA"})]})}):n.jsx("div",{className:"overflow-x-auto",children:n.jsx("div",{className:"flex gap-4 pb-4",style:{minWidth:"max-content"},children:q.map(W=>n.jsx("div",{onClick:()=>s(W.name),className:"cursor-pointer flex-shrink-0",style:{width:"280px"},children:n.jsx(at,{padding:"none",className:"dark:bg-black/80 bg-white/80 backdrop-blur-sm dark:border-white/20 border-gray-200 dark:hover:border-white/40 hover:border-gray-300 transition-colors h-full flex flex-col min-h-[180px]",children:n.jsxs("div",{className:"p-4 flex flex-col h-full",children:[n.jsx("div",{className:"flex items-start justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 dark:bg-black bg-gray-100 rounded-lg dark:border border-white/20 flex-shrink-0",children:n.jsx(Py,{className:"w-5 h-5 dark:text-white text-gray-900"})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("h3",{className:"text-base font-semibold dark:text-white text-gray-900 uppercase truncate",children:W.name}),n.jsxs("p",{className:"text-xs dark:text-white text-gray-900 uppercase",children:[W.count," REGISTROS"]})]})]})}),n.jsx("p",{className:"text-xs dark:text-white text-gray-900 mb-4 uppercase flex-1",children:W.description}),n.jsxs("div",{className:"flex gap-2 mt-auto",children:[n.jsxs(He,{size:"sm",className:"flex-1 uppercase",onClick:Ae=>{Ae?.stopPropagation(),s(W.name)},children:[n.jsx(Bn,{className:"w-4 h-4 mr-2"}),"VER"]}),n.jsx(He,{size:"sm",variant:"outline",className:"uppercase",onClick:Ae=>{Ae?.stopPropagation()},children:n.jsx(Zc,{className:"w-4 h-4"})})]})]})})},W.name))})}),r&&n.jsx(at,{padding:"none",className:"dark:bg-black/80 bg-white/80 backdrop-blur-sm dark:border-gray-800 border-gray-200",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-3 px-4 pt-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-semibold dark:text-white text-gray-900 uppercase",children:r.toUpperCase()}),n.jsxs("p",{className:"dark:text-white text-gray-900 uppercase text-xs mt-0.5",children:[h.length," DE ",p," REGISTROS"]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(He,{variant:"outline",size:"sm",className:"uppercase",onClick:()=>s(null),children:"CERRAR"}),n.jsxs(He,{size:"sm",className:"uppercase",onClick:kt,children:[n.jsx(Hr,{className:"w-3 h-3 mr-1.5"}),"NUEVO"]})]})]}),(r==="items"||r==="gastos_evento")&&n.jsx("div",{className:"px-4 pb-4 border-b dark:border-white/20 border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 dark:text-white text-gray-900"}),n.jsx("input",{type:"text",placeholder:"BUSCAR...",value:Ee,onChange:W=>Se(W.target.value),className:"w-full pl-10 pr-3 py-2 text-xs border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors uppercase placeholder-gray-500"})]}),r==="items"&&qe.length>0&&n.jsxs("select",{value:H,onChange:W=>ye(W.target.value),className:"px-3 py-2 text-xs border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors uppercase",children:[n.jsx("option",{value:"",children:"TODOS LOS TIPOS"}),qe.map(W=>n.jsx("option",{value:W,children:W},W))]}),r==="gastos_evento"&&Ye.length>0&&n.jsxs("select",{value:H,onChange:W=>ye(W.target.value),className:"px-3 py-2 text-xs border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors uppercase",children:[n.jsx("option",{value:"",children:"TODOS LOS TIPOS"}),Ye.map(W=>n.jsx("option",{value:W,children:W},W))]}),r==="items"&&J.length>0&&n.jsxs("select",{value:De,onChange:W=>U(W.target.value),className:"px-3 py-2 text-xs border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors uppercase",children:[n.jsx("option",{value:"",children:"TODAS LAS CATEGORAS"}),J.map(W=>n.jsx("option",{value:W,children:W},W))]}),r==="gastos_evento"&&Be.length>0&&n.jsxs("select",{value:R,onChange:W=>de(W.target.value),className:"px-3 py-2 text-xs border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors uppercase",children:[n.jsx("option",{value:"",children:"TODOS LOS EVENTOS"}),Be.map(W=>n.jsx("option",{value:W,children:W},W))]}),r==="gastos_evento"&&ee.length>0&&n.jsxs("select",{value:V,onChange:W=>he(W.target.value),className:"px-3 py-2 text-xs border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors uppercase",children:[n.jsx("option",{value:"",children:"TODOS LOS RESPONSABLES"}),ee.map(W=>n.jsx("option",{value:W,children:W},W))]}),(Ee||De||H||R||V)&&n.jsx(He,{variant:"outline",size:"sm",className:"uppercase",onClick:()=>{Se(""),U(""),ye(""),de(""),he("")},children:"LIMPIAR"})]})}),x?n.jsxs("div",{className:"p-6 text-center",children:[n.jsx(Ma,{className:"w-6 h-6 dark:text-white text-gray-900 animate-spin mx-auto mb-2"}),n.jsx("p",{className:"dark:text-white text-gray-900 uppercase text-xs",children:"CARGANDO DATOS..."})]}):h.length===0?n.jsxs("div",{className:"p-6 text-center",children:[n.jsx(Py,{className:"w-8 h-8 dark:text-white text-gray-900 mx-auto mb-2"}),n.jsx("p",{className:"dark:text-white text-gray-900 uppercase text-sm",children:c.length===0?"NO HAY DATOS EN ESTA TABLA":"NO SE ENCONTRARON REGISTROS CON LOS FILTROS APLICADOS"})]}):n.jsx("div",{className:"overflow-x-auto max-h-[calc(100vh-500px)] overflow-y-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b dark:border-white/20 border-gray-200",children:[h.length>0&&Object.keys(h[0]).filter(W=>r==="gastos_evento"?W!=="evento_id"&&W!=="responsable_id":!0).map(W=>{let Ae=W;return r==="gastos_evento"&&(W==="evento_nombre"&&(Ae="evento"),W==="responsable_nombre"&&(Ae="responsable")),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold dark:text-white text-gray-900 uppercase",children:Ae.replace(/_/g," ")},W)}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold dark:text-white text-gray-900 uppercase",children:"ACCIONES"})]})}),n.jsx("tbody",{children:h.map((W,Ae)=>n.jsxs("tr",{className:"border-b dark:border-white/20 border-gray-200 dark:hover:bg-white/5 hover:bg-gray-100/50",children:[Object.entries(W).filter(([Le])=>r==="gastos_evento"?Le!=="evento_id"&&Le!=="responsable_id":!0).map(([Le,Fe])=>n.jsx("td",{className:"px-3 py-2 text-xs dark:text-white text-gray-900",children:Fe!=null?String(Fe).length>50?String(Fe).substring(0,50)+"...":String(Fe):"-"},Le)),n.jsx("td",{className:"px-3 py-2 text-xs",children:n.jsxs("div",{className:"flex gap-1.5",children:[n.jsx("button",{onClick:Le=>{Le.stopPropagation(),Ne(W)},className:"p-1 dark:text-white text-gray-900 dark:hover:text-gray-300 hover:text-gray-700 dark:hover:bg-gray-900 hover:bg-gray-100 rounded-lg transition-colors",title:"Editar registro",children:n.jsx(Bn,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:Le=>{Le.stopPropagation(),xe(W)},className:"p-1 dark:text-white text-gray-900 hover:text-red-400 dark:hover:bg-gray-900 hover:bg-gray-100 rounded-lg transition-colors",title:"Eliminar registro",children:n.jsx(Gr,{className:"w-3.5 h-3.5"})})]})})]},Ae))})]})}),n.jsx("div",{className:"mt-3 px-4 pb-4 flex items-center justify-between",children:n.jsx("p",{className:"text-xs dark:text-white text-gray-900 uppercase",children:h.length===p?`MOSTRANDO TODOS LOS ${p} REGISTROS`:`MOSTRANDO ${h.length} DE ${p} REGISTROS`})})]})}),C&&r&&n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:n.jsx(at,{className:"dark:bg-black/95 bg-white/95 backdrop-blur-sm dark:border-white/20 border-gray-200 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold dark:text-white text-gray-900 uppercase",children:O?"CREAR NUEVO REGISTRO":"EDITAR REGISTRO"}),n.jsx("button",{onClick:xt,className:"p-2 dark:text-white text-gray-900 dark:hover:bg-white/10 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx("span",{className:"text-xl",children:""})})]}),y&&n.jsx("div",{className:"mb-4 p-3 bg-red-900/20 border border-red-800 rounded-lg",children:n.jsx("p",{className:"text-red-400 text-sm uppercase",children:y})}),te&&n.jsx("div",{className:"mb-4 p-4 bg-green-900/30 border-2 border-green-600 rounded-lg animate-pulse",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n.jsx("p",{className:"text-green-300 text-sm uppercase font-semibold",children:te})]})}),n.jsx("div",{className:"space-y-4",children:Object.keys(A).map(W=>{if(W==="id"||W==="created_at"||W==="updated_at"||W==="evento_nombre"||W==="responsable_nombre")return null;const Ae=A[W],Le=W==="id",Fe=typeof Ae=="string"&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(Ae),nt=typeof Ae=="string"&&/^\d{4}-\d{2}-\d{2}/.test(Ae),Nt=(Rt=>Rt==="tipo"?["equipo","servicio","personal"]:Rt==="categoria"?["audio","iluminacion","video","escenografia","personal","produccion","fotografia"]:Rt==="unidad"?["dia","hora","unidad","evento"]:Rt==="status"?["pending","approved","rejected","completed","cancelled"]:[])(W),Ft=Nt.length>0;return n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium dark:text-white text-gray-900 uppercase mb-2",children:W.replace(/_/g," ")}),typeof Ae=="boolean"?n.jsxs("select",{value:Ae?"true":"false",onChange:Rt=>I({...A,[W]:Rt.target.value==="true"}),disabled:Le||$,className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors disabled:opacity-50",children:[n.jsx("option",{value:"true",children:"S"}),n.jsx("option",{value:"false",children:"No"})]}):Ft?n.jsxs("select",{value:Ae??"",onChange:Rt=>I({...A,[W]:Rt.target.value}),disabled:Le||$,className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors disabled:opacity-50 uppercase",children:[n.jsx("option",{value:"",children:"Seleccionar..."}),Nt.map(Rt=>n.jsx("option",{value:Rt,children:Rt},Rt))]}):typeof Ae=="number"?n.jsx("input",{type:"number",step:"any",value:Ae??"",onChange:Rt=>I({...A,[W]:Rt.target.value?parseFloat(Rt.target.value):null}),disabled:Le||$,className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors disabled:opacity-50"}):nt?n.jsx("input",{type:"datetime-local",value:Ae?new Date(Ae).toISOString().slice(0,16):"",onChange:Rt=>I({...A,[W]:Rt.target.value?new Date(Rt.target.value).toISOString():null}),disabled:Le||$,className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors disabled:opacity-50"}):Fe?n.jsx("input",{type:"text",value:Ae??"",disabled:!0,className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg opacity-50 cursor-not-allowed"}):n.jsx("textarea",{value:Ae??"",onChange:Rt=>I({...A,[W]:Rt.target.value}),disabled:Le||$,rows:typeof Ae=="string"&&Ae.length>100?4:2,className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors disabled:opacity-50 resize-y"})]},W)})}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx(He,{onClick:X,disabled:$,className:"flex-1 uppercase",children:$?n.jsxs(n.Fragment,{children:[n.jsx(Ma,{className:"w-4 h-4 mr-2 animate-spin"}),"GUARDANDO..."]}):"GUARDAR"}),n.jsx(He,{variant:"outline",onClick:xt,disabled:$,className:"uppercase",children:"CANCELAR"})]})]})})})]})},J7=()=>{const[e,t]=j.useState([]),[r,s]=j.useState(!0),[o,i]=j.useState(null),[c,d]=j.useState(null),[h,f]=j.useState(""),[p,v]=j.useState("all"),[x,w]=j.useState("all"),[y,S]=j.useState(!1),[C,T]=j.useState(!1),[A,I]=j.useState(null),[O,P]=j.useState(null),[$,F]=j.useState(!1),[te,ne]=j.useState([]),[Ee,Se]=j.useState(!1),De=()=>{const Q=new Date,ke=Q.getFullYear(),q=String(Q.getMonth()+1).padStart(2,"0"),ce=String(Q.getDate()).padStart(2,"0");return`${ke}-${q}-${ce}`},[U,H]=j.useState({name:"",date:De(),time:"",location:"",type:"corporate",status:"planned",attendees:0,description:"",productor_id:"",coordinador_id:""}),{user:ye}=$t(),R=Q=>({planned:"programado","in-progress":"en_progreso",completed:"completado",cancelled:"cancelado"})[Q]||"programado",de=Q=>({programado:"planned",en_progreso:"in-progress",completado:"completed",cancelado:"cancelled"})[Q]||"planned";j.useEffect(()=>{(async()=>{try{s(!0),i(null);const{data:ke,error:q}=await Ue.from("eventos").select("*").order("fecha",{ascending:!1});if(q)throw new Error(q.message||"Error al cargar eventos");const ce=(ke||[]).map(J=>({id:J.id,name:J.nombre,date:J.fecha?new Date(J.fecha).toISOString().split("T")[0]:"",time:J.hora||"",location:J.ubicacion||"",type:J.tipo||"corporate",status:de(J.estado||"programado"),attendees:J.asistentes||0,description:J.descripcion||"",createdAt:J.created_at||new Date().toISOString(),productor_id:J.productor_id||"",coordinador_id:J.coordinador_id||""}));t(ce)}catch(ke){console.error("Error cargando eventos desde Supabase:",ke),i(ke.message||"Error al cargar eventos")}finally{s(!1)}})()},[]),j.useEffect(()=>{(async()=>{try{Se(!0);const ke=await gx();ne(ke)}catch(ke){console.error("Error cargando usuarios:",ke),i("Error al cargar lista de colaboradores")}finally{Se(!1)}})()},[]),j.useEffect(()=>{if(c){const Q=setTimeout(()=>{d(null)},5e3);return()=>clearTimeout(Q)}},[c]);const V=[{value:"corporate",label:"Corporativo"},{value:"concert",label:"Concierto"},{value:"social",label:"Social"},{value:"wedding",label:"Boda"},{value:"festival",label:"Festival"}],he=[{value:"planned",label:"Planificado"},{value:"in-progress",label:"En Progreso"},{value:"completed",label:"Completado"},{value:"cancelled",label:"Cancelado"}],K=Q=>{switch(Q){case"planned":return"text-white bg-gray-900";case"in-progress":return"text-white bg-gray-800";case"completed":return"text-white bg-gray-800";case"cancelled":return"text-white bg-gray-900";default:return"text-white bg-gray-900"}},B=Q=>V.find(ke=>ke.value===Q)?.label||Q,re=Q=>he.find(ke=>ke.value===Q)?.label||Q,ae=async()=>{if(!U.name){i("Por favor el nombre es requerido");return}const Q={...U,date:U.date||De(),location:U.location||"Pendiente"};try{i(null);let ke;if(Q.time){const qe=Q.time.split(":"),Be=qe[0]?.padStart(2,"0")||"00",ee=qe[1]?.padStart(2,"0")||"00";ke=`${Q.date}T${Be}:${ee}:00`}else ke=`${Q.date}T00:00:00`;const{data:q,error:ce}=await Ue.from("eventos").insert({nombre:Q.name,descripcion:Q.description||null,fecha:ke,hora:Q.time||null,ubicacion:Q.location,tipo:Q.type,estado:R(Q.status),asistentes:Q.attendees||0,productor_id:Q.productor_id||null,coordinador_id:Q.coordinador_id||null}).select().single();if(ce)throw new Error(ce.message||"Error al crear evento");const J={id:q.id,name:q.nombre,date:q.fecha?new Date(q.fecha).toISOString().split("T")[0]:"",time:q.hora||"",location:q.ubicacion||"",type:q.tipo||"corporate",status:de(q.estado||"programado"),attendees:q.asistentes||0,description:q.descripcion||"",createdAt:q.created_at||new Date().toISOString()};t([J,...e]),H({name:"",date:De(),time:"",location:"",type:"corporate",status:"planned",attendees:0,description:"",productor_id:"",coordinador_id:""}),S(!1),d("Evento creado correctamente"),i(null)}catch(ke){console.error("Error creando evento en Supabase:",ke),i(ke.message||"Error al crear evento"),d(null)}},z=Q=>{I(Q);let ke=Q.time||"";if(ke&&ke.includes(":")){const q=ke.split(":");q.length>2&&(ke=`${q[0]}:${q[1]}`)}H({name:Q.name,date:Q.date,time:ke,location:Q.location,type:Q.type,status:Q.status,attendees:Q.attendees,description:Q.description,productor_id:Q.productor_id||"",coordinador_id:Q.coordinador_id||""}),T(!0)},ge=async()=>{if(!A||!U.name){i("Por favor ingresa el nombre del evento");return}try{i(null);const{data:Q,error:ke}=await Ue.from("eventos").update({nombre:U.name}).eq("id",A.id).select().single();if(ke)throw new Error(ke.message||"Error al actualizar evento");const q={id:Q.id,name:Q.nombre,date:Q.fecha?new Date(Q.fecha).toISOString().split("T")[0]:"",time:Q.hora||"",location:Q.ubicacion||"",type:Q.tipo||"corporate",status:de(Q.estado||"programado"),attendees:Q.asistentes||0,description:Q.descripcion||"",createdAt:Q.created_at||new Date().toISOString(),productor_id:Q.productor_id||"",coordinador_id:Q.coordinador_id||""};t(e.map(ce=>ce.id===A.id?q:ce)),T(!1),I(null),H({name:"",date:De(),time:"",location:"",type:"corporate",status:"planned",attendees:0,description:"",productor_id:"",coordinador_id:""}),d("Cambios guardados correctamente"),i(null)}catch(Q){console.error("Error actualizando evento en Supabase:",Q),i(Q.message||"Error al actualizar evento"),d(null)}},Pe=async Q=>{if(window.confirm("Ests seguro de que quieres eliminar este evento?"))try{i(null);const{error:ke}=await Ue.from("eventos").delete().eq("id",Q);if(ke)throw new Error(ke.message||"Error al eliminar evento");t(e.filter(q=>q.id!==Q))}catch(ke){console.error("Error eliminando evento de Supabase:",ke),i(ke.message||"Error al eliminar evento")}},we=e.filter(Q=>{const ke=Q.name.toLowerCase().includes(h.toLowerCase())||Q.location.toLowerCase().includes(h.toLowerCase()),q=p==="all"||Q.status===p,ce=x==="all"||Q.type===x;return ke&&q&&ce});return n.jsxs("div",{className:"flex flex-col h-[calc(100vh-3rem)] overflow-hidden",children:[n.jsxs("div",{className:"flex-none p-4 md:p-0 pb-4 space-y-4",children:[n.jsxs("div",{className:"flex flex-row justify-between items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl md:text-3xl font-bold uppercase dark:text-white text-gray-900 mb-0 md:mb-2",children:"Eventos"}),n.jsx("p",{className:"text-white mt-1 uppercase text-sm hidden md:block",children:"Gestiona todos tus eventos"})]}),n.jsxs(He,{onClick:()=>S(!0),className:"uppercase !p-2 md:!px-4 md:!py-2",children:[n.jsx(Hr,{className:"w-5 h-5 md:mr-2"}),n.jsx("span",{className:"hidden md:inline",children:"Nuevo Evento"})]})]}),n.jsx(at,{className:"bg-black/80 backdrop-blur-sm border-gray-800",padding:"none",children:n.jsx("div",{className:"p-3 md:p-4 space-y-3 md:space-y-4",children:n.jsx("div",{className:"flex flex-col sm:flex-row gap-3 md:gap-4",children:n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 md:w-5 md:h-5 dark:text-white text-gray-900"}),n.jsx("input",{type:"text",placeholder:"Buscar...",value:h,onChange:Q=>f(Q.target.value),className:"w-full pl-9 md:pl-10 pr-3 py-1.5 md:py-2 text-sm md:text-base border dark:border-gray-700 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase dark:placeholder-gray-500 placeholder-gray-400"})]})})})}),o&&n.jsx(at,{className:"bg-red-900/20 border-red-800",children:n.jsxs("div",{className:"p-4 flex items-center gap-3",children:[n.jsx("p",{className:"text-red-400 uppercase text-sm",children:o}),n.jsx("button",{onClick:()=>i(null),className:"text-red-400 hover:text-red-300",children:""})]})}),c&&n.jsx(at,{className:"bg-green-900/20 border-green-800",children:n.jsxs("div",{className:"p-4 flex items-center gap-3",children:[n.jsx("p",{className:"text-green-400 uppercase text-sm",children:c}),n.jsx("button",{onClick:()=>d(null),className:"text-green-400 hover:text-green-300",children:""})]})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:r?n.jsx(at,{className:"bg-black/80 backdrop-blur-sm border-gray-800",children:n.jsxs("div",{className:"p-12 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),n.jsx("p",{className:"text-white uppercase text-sm",children:"Cargando eventos..."})]})}):we.length===0?n.jsx(at,{className:"dark:bg-black/80 bg-white/80 backdrop-blur-sm dark:border-white/20 border-gray-200",children:n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(Fs,{className:"w-16 h-16 dark:text-white text-gray-900 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-semibold uppercase mb-2 dark:text-white text-gray-900",children:"No hay eventos"}),n.jsx("p",{className:"dark:text-white text-gray-900 uppercase text-sm mb-4",children:"Crea tu primer evento para comenzar"}),n.jsxs(He,{onClick:()=>S(!0),className:"uppercase",children:[n.jsx(Hr,{className:"w-5 h-5 mr-2"}),"Crear Evento"]})]})}):n.jsx("div",{className:"flex flex-col gap-2 pb-6",children:we.map(Q=>n.jsx(at,{className:"dark:bg-black/80 bg-white/80 backdrop-blur-sm dark:border-white/20 border-gray-200 dark:hover:border-white/40 hover:border-gray-300 transition-colors",children:n.jsxs("div",{className:"p-4 flex items-center justify-between",children:[n.jsx("span",{className:"text-lg font-bold uppercase dark:text-white text-gray-900",children:Q.name}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>{P(Q),F(!0)},className:"p-2 dark:text-white text-gray-900 dark:hover:text-white hover:text-gray-700 dark:hover:bg-white/10 hover:bg-gray-100 rounded-lg transition-colors hidden",title:"Ver detalles",children:n.jsx(Ai,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>z(Q),className:"p-2 text-white hover:text-blue-400 hover:bg-gray-900 rounded-lg transition-colors",title:"Editar",children:n.jsx(Bn,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>Pe(Q.id),className:"p-2 text-white hover:text-red-400 hover:bg-gray-900 rounded-lg transition-colors",title:"Eliminar",children:n.jsx(Gr,{className:"w-5 h-5"})})]})]})},Q.id))})}),y&&n.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-0 md:p-4",children:n.jsx(at,{className:"bg-black border-gray-800 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"p-2 md:p-6 space-y-4 md:space-y-6",children:[n.jsx("h2",{className:"text-xl md:text-2xl font-bold uppercase text-white",children:"Nuevo Evento"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase dark:text-white text-gray-900",children:"Nombre del Evento"}),n.jsx("input",{type:"text",value:U.name,onChange:Q=>H({...U,name:Q.target.value}),className:"w-full px-3 py-2 border dark:border-gray-700 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase",placeholder:"Nombre del evento"})]}),n.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4 hidden",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase text-white",children:"Productor Encargado"}),n.jsxs("select",{value:U.productor_id,onChange:Q=>H({...U,productor_id:Q.target.value}),className:"w-full px-3 py-2 border border-gray-700 bg-black/50 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase",disabled:Ee,children:[n.jsx("option",{value:"",children:"Seleccionar productor..."}),te.filter(Q=>Q.rol==="productor"||Q.rol==="admin").map(Q=>n.jsxs("option",{value:Q.id,children:[Q.nombre," ",Q.apellido||""," ",Q.email?`(${Q.email})`:""]},Q.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase text-white",children:"Coordinador Encargado"}),n.jsxs("select",{value:U.coordinador_id,onChange:Q=>H({...U,coordinador_id:Q.target.value}),className:"w-full px-3 py-2 border border-gray-700 bg-black/50 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase",disabled:Ee,children:[n.jsx("option",{value:"",children:"Seleccionar coordinador..."}),te.filter(Q=>Q.rol==="coordinador"||Q.rol==="admin").map(Q=>n.jsxs("option",{value:Q.id,children:[Q.nombre," ",Q.apellido||""," ",Q.email?`(${Q.email})`:""]},Q.id))]})]})]}),n.jsxs("div",{className:"hidden",children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase text-white",children:"Tipo"}),n.jsx("select",{value:U.type,onChange:Q=>H({...U,type:Q.target.value}),className:"w-full px-3 py-2 border border-gray-700 bg-black/50 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase",children:V.map(Q=>n.jsx("option",{value:Q.value,children:Q.label},Q.value))})]}),n.jsxs("div",{className:"hidden",children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase text-white",children:"Fecha"}),n.jsx("input",{type:"date",value:U.date,onChange:Q=>H({...U,date:Q.target.value}),className:"w-full px-3 py-2 border border-gray-700 bg-black/50 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600"})]}),n.jsxs("div",{className:"hidden",children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase text-white",children:"Hora"}),n.jsx("input",{type:"time",value:U.time,onChange:Q=>H({...U,time:Q.target.value}),className:"w-full px-3 py-2 border border-gray-700 bg-black/50 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600"})]}),n.jsxs("div",{className:"hidden",children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase text-white",children:"Ubicacin"}),n.jsx("input",{type:"text",value:U.location,onChange:Q=>H({...U,location:Q.target.value}),className:"w-full px-3 py-2 border border-gray-700 bg-black/50 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase",placeholder:"Ubicacin"})]}),n.jsxs("div",{className:"hidden",children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase text-white",children:"Asistentes"}),n.jsx("input",{type:"number",value:U.attendees,onChange:Q=>H({...U,attendees:parseInt(Q.target.value)||0}),className:"w-full px-3 py-2 border border-gray-700 bg-black/50 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600",placeholder:"0"})]}),n.jsxs("div",{className:"hidden",children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase text-white",children:"Estado"}),n.jsx("select",{value:U.status,onChange:Q=>H({...U,status:Q.target.value}),className:"w-full px-3 py-2 border border-gray-700 bg-black/50 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase",children:he.map(Q=>n.jsx("option",{value:Q.value,children:Q.label},Q.value))})]})]}),n.jsxs("div",{className:"hidden",children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase text-white",children:"Descripcin"}),n.jsx("textarea",{value:U.description,onChange:Q=>H({...U,description:Q.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-700 bg-black/50 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase",placeholder:"Descripcin del evento"})]}),n.jsxs("div",{className:"flex gap-4 justify-end",children:[n.jsx(He,{variant:"outline",onClick:()=>{S(!1),H({name:"",date:De(),time:"",location:"",type:"corporate",status:"planned",attendees:0,description:"",productor_id:"",coordinador_id:""})},className:"uppercase",children:"Cancelar"}),n.jsx(He,{onClick:ae,className:"uppercase",children:"Crear Evento"})]})]})})}),C&&A&&n.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-0 md:p-4",children:n.jsx(at,{className:"bg-black border-gray-800 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"p-2 md:p-6 space-y-4 md:space-y-6",children:[n.jsx("h2",{className:"text-xl md:text-2xl font-bold uppercase text-white",children:"Editar Evento"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase dark:text-white text-gray-900",children:"Nombre del Evento"}),n.jsx("input",{type:"text",value:U.name,onChange:Q=>H({...U,name:Q.target.value}),className:"w-full px-3 py-2 border dark:border-gray-700 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase",placeholder:"Nombre del evento"})]}),n.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4 hidden",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase text-white",children:"Productor Encargado"}),n.jsxs("select",{value:U.productor_id,onChange:Q=>H({...U,productor_id:Q.target.value}),className:"w-full px-3 py-2 border border-gray-700 bg-black/50 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase",disabled:Ee,children:[n.jsx("option",{value:"",children:"Seleccionar productor..."}),te.filter(Q=>Q.rol==="productor"||Q.rol==="admin").map(Q=>n.jsxs("option",{value:Q.id,children:[Q.nombre," ",Q.apellido||""," ",Q.email?`(${Q.email})`:""]},Q.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase text-white",children:"Coordinador Encargado"}),n.jsxs("select",{value:U.coordinador_id,onChange:Q=>H({...U,coordinador_id:Q.target.value}),className:"w-full px-3 py-2 border border-gray-700 bg-black/50 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase",disabled:Ee,children:[n.jsx("option",{value:"",children:"Seleccionar coordinador..."}),te.filter(Q=>Q.rol==="coordinador"||Q.rol==="admin").map(Q=>n.jsxs("option",{value:Q.id,children:[Q.nombre," ",Q.apellido||""," ",Q.email?`(${Q.email})`:""]},Q.id))]})]})]}),n.jsxs("div",{className:"hidden",children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase text-white",children:"Tipo"}),n.jsx("select",{value:U.type,onChange:Q=>H({...U,type:Q.target.value}),className:"w-full px-3 py-2 border border-gray-700 bg-black/50 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase",children:V.map(Q=>n.jsx("option",{value:Q.value,children:Q.label},Q.value))})]}),n.jsxs("div",{className:"hidden",children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase text-white",children:"Fecha"}),n.jsx("input",{type:"date",value:U.date,onChange:Q=>H({...U,date:Q.target.value}),className:"w-full px-3 py-2 border border-gray-700 bg-black/50 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600"})]}),n.jsxs("div",{className:"hidden",children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase text-white",children:"Hora"}),n.jsx("input",{type:"time",value:U.time,onChange:Q=>H({...U,time:Q.target.value}),className:"w-full px-3 py-2 border border-gray-700 bg-black/50 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600"})]}),n.jsxs("div",{className:"hidden",children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase text-white",children:"Ubicacin"}),n.jsx("input",{type:"text",value:U.location,onChange:Q=>H({...U,location:Q.target.value}),className:"w-full px-3 py-2 border border-gray-700 bg-black/50 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase",placeholder:"Ubicacin"})]}),n.jsxs("div",{className:"hidden",children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase text-white",children:"Asistentes"}),n.jsx("input",{type:"number",value:U.attendees,onChange:Q=>H({...U,attendees:parseInt(Q.target.value)||0}),className:"w-full px-3 py-2 border border-gray-700 bg-black/50 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600",placeholder:"0"})]}),n.jsxs("div",{className:"hidden",children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase text-white",children:"Estado"}),n.jsx("select",{value:U.status,onChange:Q=>H({...U,status:Q.target.value}),className:"w-full px-3 py-2 border border-gray-700 bg-black/50 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase",children:he.map(Q=>n.jsx("option",{value:Q.value,children:Q.label},Q.value))})]})]}),n.jsxs("div",{className:"hidden",children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase text-white",children:"Descripcin"}),n.jsx("textarea",{value:U.description,onChange:Q=>H({...U,description:Q.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-700 bg-black/50 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase",placeholder:"Descripcin del evento"})]}),n.jsxs("div",{className:"flex gap-4 justify-end",children:[n.jsx(He,{variant:"outline",onClick:()=>{T(!1),I(null),H({name:"",date:De(),time:"",location:"",type:"corporate",status:"planned",attendees:0,description:"",productor_id:"",coordinador_id:""})},className:"uppercase",children:"Cancelar"}),n.jsx(He,{onClick:ge,className:"uppercase",children:"Guardar Cambios"})]})]})})}),$&&O&&n.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:n.jsx(at,{className:"bg-black border-gray-800 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsx("h2",{className:"text-2xl font-bold uppercase text-white",children:O.name}),n.jsx("button",{onClick:()=>F(!1),className:"dark:text-white text-gray-900 dark:hover:text-white hover:text-gray-700",children:""})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Fs,{className:"w-5 h-5 mr-3 dark:text-white text-gray-900"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm uppercase dark:text-white text-gray-900",children:"Fecha y Hora"}),n.jsxs("p",{className:"uppercase dark:text-white text-gray-900",children:[O.date," ",O.time&&`- ${O.time}`]})]})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(sx,{className:"w-5 h-5 mr-3 dark:text-white text-gray-900"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm uppercase dark:text-white text-gray-900",children:"Ubicacin"}),n.jsx("p",{className:"uppercase dark:text-white text-gray-900",children:O.location})]})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(Sr,{className:"w-5 h-5 mr-3 dark:text-white text-gray-900"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm uppercase dark:text-white text-gray-900",children:"Asistentes"}),n.jsx("p",{className:"uppercase dark:text-white text-gray-900",children:O.attendees})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm uppercase dark:text-white text-gray-900 mb-1",children:"Tipo"}),n.jsx("p",{className:"uppercase dark:text-white text-gray-900",children:B(O.type)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm uppercase dark:text-white text-gray-900 mb-1",children:"Estado"}),n.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium uppercase ${K(O.status)}`,children:re(O.status)})]})]}),O.description&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm uppercase dark:text-white text-gray-900 mb-2",children:"Descripcin"}),n.jsx("p",{className:"uppercase dark:text-white text-gray-900",children:O.description})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(He,{variant:"outline",onClick:()=>F(!1),className:"uppercase",children:"Cerrar"})})]})})})]})},Y7=()=>{const[e,t]=tf(),r=e.get("evento"),[s,o]=j.useState([]),[i,c]=j.useState([]),[d,h]=j.useState([]),[f,p]=j.useState(!0),[v,x]=j.useState(null),[w,y]=j.useState(""),[S,C]=j.useState("all"),[T,A]=j.useState(r||"all"),[I,O]=j.useState(!1),[P,$]=j.useState(null),[F,te]=j.useState(!1),[ne,Ee]=j.useState({evento_id:"",tipo:"material",descripcion:"",monto:0,responsable_id:""});j.useEffect(()=>{const R=e.get("evento");R?(A(R),Ee(de=>({...de,evento_id:R}))):A("all")},[e]);const Se=[{value:"material",label:"Material"},{value:"combustible",label:"Combustible"},{value:"viaticos",label:"Viticos"},{value:"hospedaje",label:"Hospedaje"},{value:"proveedor",label:"Proveedor"}];j.useEffect(()=>{(async()=>{try{const{data:de,error:V}=await Ue.from("eventos").select("id, nombre").order("fecha",{ascending:!1});if(V){console.error("Error cargando eventos:",V);return}c((de||[]).map(he=>({id:he.id,nombre:he.nombre})))}catch(de){console.error("Error inesperado cargando eventos:",de)}})()},[]),j.useEffect(()=>{(async()=>{try{const de=await gx();h(de)}catch(de){console.error("Error cargando usuarios:",de)}})()},[]),j.useEffect(()=>{(async()=>{try{p(!0),x(null);const{data:de,error:V}=await Ue.from("gastos_evento").select(`
            *,
            eventos:evento_id (nombre),
            responsables:responsable_id (nombre, apellido)
          `).order("created_at",{ascending:!1});if(V)throw new Error(V.message||"Error al cargar gastos");const he=(de||[]).map(K=>({id:K.id,evento_id:K.evento_id,evento_nombre:K.eventos?.nombre||"Sin evento",tipo:K.tipo,descripcion:K.descripcion||"",monto:parseFloat(K.monto)||0,responsable_id:K.responsable_id||"",responsable_nombre:K.responsables?`${K.responsables.nombre||""} ${K.responsables.apellido||""}`.trim():"Sin responsable",created_at:K.created_at||new Date().toISOString()}));o(he)}catch(de){console.error("Error cargando gastos desde Supabase:",de),x(de.message||"Error al cargar gastos")}finally{p(!1)}})()},[]);const De=async()=>{if(!ne.evento_id||!ne.tipo||ne.monto<=0){x("Por favor completa todos los campos requeridos (evento, tipo y monto)");return}try{x(null);const{data:R,error:de}=await Ue.from("gastos_evento").insert({evento_id:ne.evento_id,tipo:ne.tipo,descripcion:ne.descripcion||null,monto:ne.monto,responsable_id:ne.responsable_id||null}).select(`
          *,
          eventos:evento_id (nombre),
          responsables:responsable_id (nombre, apellido)
        `).single();if(de)throw new Error(de.message||"Error al crear gasto");const V={id:R.id,evento_id:R.evento_id,evento_nombre:R.eventos?.nombre||"Sin evento",tipo:R.tipo,descripcion:R.descripcion||"",monto:parseFloat(R.monto)||0,responsable_id:R.responsable_id||"",responsable_nombre:R.responsables?`${R.responsables.nombre||""} ${R.responsables.apellido||""}`.trim():"Sin responsable",created_at:R.created_at||new Date().toISOString()};o([V,...s]),Ee({evento_id:"",tipo:"material",descripcion:"",monto:0,responsable_id:""}),O(!1)}catch(R){console.error("Error creando gasto en Supabase:",R),x(R.message||"Error al crear gasto")}},U=async R=>{if(window.confirm("Ests seguro de que quieres eliminar este gasto?"))try{x(null);const{error:de}=await Ue.from("gastos_evento").delete().eq("id",R);if(de)throw new Error(de.message||"Error al eliminar gasto");o(s.filter(V=>V.id!==R))}catch(de){console.error("Error eliminando gasto de Supabase:",de),x(de.message||"Error al eliminar gasto")}},H=R=>Se.find(de=>de.value===R)?.label||R,ye=s.filter(R=>{const de=R.descripcion.toLowerCase().includes(w.toLowerCase())||R.evento_nombre?.toLowerCase().includes(w.toLowerCase())||R.responsable_nombre?.toLowerCase().includes(w.toLowerCase()),V=S==="all"||R.tipo===S,he=T==="all"||R.evento_id===T;return de&&V&&he});return n.jsxs("div",{className:"dark:bg-black bg-white h-screen p-0 md:p-6 flex flex-col overflow-hidden",children:[n.jsx("div",{className:"flex-none p-4 md:p-0 pb-4",children:n.jsxs("div",{className:"flex flex-row justify-between items-center gap-4 mb-4 md:mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl md:text-3xl font-bold uppercase dark:text-white text-gray-900 mb-0 md:mb-2",children:"Gastos"}),n.jsx("p",{className:"dark:text-white text-gray-900 mt-1 uppercase text-sm hidden md:block",children:T!=="all"?`Gastos del evento: ${i.find(R=>R.id===T)?.nombre||"Evento seleccionado"}`:"Gestin de gastos por evento"})]}),n.jsxs(He,{onClick:()=>O(!0),className:"uppercase !p-2 md:!px-4 md:!py-2",children:[n.jsx(Hr,{className:"w-5 h-5 md:mr-2"}),n.jsx("span",{className:"hidden md:inline",children:"Nuevo Gasto"})]})]})}),n.jsxs("div",{className:"flex flex-col flex-1 min-h-0",children:[n.jsx(at,{className:"dark:bg-black/80 bg-white/80 backdrop-blur-sm dark:border-white/20 border-gray-200 mb-4 md:mb-6 flex-shrink-0",padding:"none",children:n.jsx("div",{className:"p-3 md:p-4 space-y-3 md:space-y-4",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 md:gap-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 md:w-5 md:h-5 dark:text-white text-gray-900"}),n.jsx("input",{type:"text",placeholder:"Buscar...",value:w,onChange:R=>y(R.target.value),className:"w-full pl-9 md:pl-10 pr-3 py-1.5 md:py-2 text-sm md:text-base border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase dark:placeholder-gray-400 placeholder-gray-500"})]}),n.jsxs("div",{className:"flex gap-2 md:gap-4",children:[n.jsxs("select",{value:S,onChange:R=>C(R.target.value),className:"flex-1 px-2 md:px-4 py-1.5 md:py-2 text-xs md:text-base border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase",children:[n.jsx("option",{value:"all",children:"Tipo"}),Se.map(R=>n.jsx("option",{value:R.value,children:R.label},R.value))]}),n.jsxs("select",{value:T,onChange:R=>A(R.target.value),className:"flex-1 px-2 md:px-4 py-1.5 md:py-2 text-xs md:text-base border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase",children:[n.jsx("option",{value:"all",children:"Evento"}),i.map(R=>n.jsx("option",{value:R.id,children:R.nombre},R.id))]})]})]})})}),v&&n.jsx(at,{className:"bg-red-900/20 border-red-800 mb-6 flex-shrink-0",children:n.jsxs("div",{className:"p-4 flex items-center gap-3",children:[n.jsx("p",{className:"text-red-400 uppercase text-sm",children:v}),n.jsx("button",{onClick:()=>x(null),className:"text-red-400 hover:text-red-300",children:""})]})}),I&&n.jsx("div",{className:"fixed inset-0 dark:bg-black/80 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:n.jsx(at,{className:"dark:bg-black bg-white dark:border-white/20 border-gray-200 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsx("h2",{className:"text-2xl font-bold uppercase dark:text-white text-gray-900",children:"Nuevo Gasto"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase dark:text-white text-gray-900",children:"Evento"}),n.jsxs("select",{value:ne.evento_id,onChange:R=>Ee({...ne,evento_id:R.target.value}),className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase",children:[n.jsx("option",{value:"",children:"Seleccionar evento..."}),i.map(R=>n.jsx("option",{value:R.id,children:R.nombre},R.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase dark:text-white text-gray-900",children:"Tipo de Gasto"}),n.jsx("select",{value:ne.tipo,onChange:R=>Ee({...ne,tipo:R.target.value}),className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase",children:Se.map(R=>n.jsx("option",{value:R.value,children:R.label},R.value))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase dark:text-white text-gray-900",children:"Monto"}),n.jsx("input",{type:"number",step:"0.01",min:"0",value:ne.monto||"",onChange:R=>Ee({...ne,monto:parseFloat(R.target.value)||0}),className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600",placeholder:"0.00"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase dark:text-white text-gray-900",children:"Responsable"}),n.jsxs("select",{value:ne.responsable_id,onChange:R=>Ee({...ne,responsable_id:R.target.value}),className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase",children:[n.jsx("option",{value:"",children:"Seleccionar responsable..."}),d.map(R=>n.jsxs("option",{value:R.id,children:[R.nombre," ",R.apellido||""," ",R.email?`(${R.email})`:""]},R.id))]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium mb-2 uppercase dark:text-white text-gray-900",children:"Descripcin"}),n.jsx("textarea",{value:ne.descripcion,onChange:R=>Ee({...ne,descripcion:R.target.value}),rows:4,className:"w-full px-3 py-2 border dark:border-white/30 border-gray-300 dark:bg-black/50 bg-white dark:text-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-600 uppercase",placeholder:"Descripcin del gasto"})]})]}),n.jsxs("div",{className:"flex gap-4 justify-end",children:[n.jsx(He,{variant:"outline",onClick:()=>{O(!1),Ee({evento_id:"",tipo:"material",descripcion:"",monto:0,responsable_id:""})},className:"uppercase",children:"Cancelar"}),n.jsx(He,{onClick:De,className:"uppercase",children:"Crear Gasto"})]})]})})}),f?n.jsx(at,{className:"bg-black/80 backdrop-blur-sm border-gray-800",children:n.jsxs("div",{className:"p-12 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),n.jsx("p",{className:"text-white uppercase text-sm",children:"Cargando gastos..."})]})}):ye.length===0?n.jsx(at,{className:"bg-black/80 backdrop-blur-sm border-gray-800",children:n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(lf,{className:"w-16 h-16 dark:text-white text-gray-900 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-semibold uppercase mb-2 dark:text-white text-gray-900",children:"No hay gastos"}),n.jsx("p",{className:"dark:text-white text-gray-900 uppercase text-sm mb-4",children:"Crea tu primer gasto para comenzar"}),n.jsxs(He,{onClick:()=>O(!0),className:"uppercase",children:[n.jsx(Hr,{className:"w-5 h-5 mr-2"}),"Crear Gasto"]})]})}):n.jsx("div",{className:"grid grid-cols-1 gap-4 flex-1 overflow-y-auto min-h-0",children:ye.map(R=>n.jsx(at,{className:"dark:bg-black/80 bg-white/80 backdrop-blur-sm dark:border-white/20 border-gray-200 dark:hover:border-white/40 hover:border-gray-300 transition-colors",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"text-xl font-bold uppercase mb-2 dark:text-white text-gray-900",children:["$",R.monto.toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})]}),n.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-medium uppercase dark:bg-white/10 bg-gray-200 dark:text-white text-gray-900 dark:border border-white/20",children:H(R.tipo)})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>{$(R),te(!0)},className:"p-2 dark:text-white text-gray-900 dark:hover:text-white hover:text-gray-700 dark:hover:bg-white/10 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(Ai,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>U(R.id),className:"p-2 dark:text-white text-gray-900 hover:text-red-400 dark:hover:bg-white/10 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(Gr,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx(Fs,{className:"w-4 h-4 mr-2 dark:text-white text-gray-900"}),n.jsx("span",{className:"uppercase dark:text-white text-gray-900",children:R.evento_nombre})]}),R.descripcion&&n.jsx("p",{className:"text-sm dark:text-white text-gray-900 uppercase",children:R.descripcion}),n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx(Sr,{className:"w-4 h-4 mr-2 dark:text-white text-gray-900"}),n.jsx("span",{className:"uppercase dark:text-white text-gray-900",children:R.responsable_nombre})]}),n.jsx("p",{className:"text-xs dark:text-white text-gray-900 uppercase",children:new Date(R.created_at).toLocaleDateString("es-MX")})]})]})},R.id))})]}),F&&P&&n.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:n.jsx(at,{className:"dark:bg-black bg-white dark:border-white/20 border-gray-200 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsx("h2",{className:"text-2xl font-bold uppercase dark:text-white text-gray-900",children:"Detalle del Gasto"}),n.jsx("button",{onClick:()=>te(!1),className:"dark:text-white text-gray-900 dark:hover:text-white hover:text-gray-700",children:""})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm uppercase dark:text-white text-gray-900 mb-1",children:"Monto"}),n.jsxs("p",{className:"text-2xl font-bold uppercase dark:text-white text-gray-900",children:["$",P.monto.toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm uppercase dark:text-white text-gray-700 mb-1",children:"Tipo"}),n.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-medium uppercase dark:bg-white/10 bg-gray-200 dark:text-white text-gray-900 dark:border border-white/20",children:H(P.tipo)})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("p",{className:"text-sm uppercase dark:text-white text-gray-700 mb-1",children:"Evento"}),n.jsx("p",{className:"uppercase dark:text-white text-gray-900",children:P.evento_nombre})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("p",{className:"text-sm uppercase dark:text-white text-gray-700 mb-1",children:"Responsable"}),n.jsx("p",{className:"uppercase dark:text-white text-gray-900",children:P.responsable_nombre})]}),P.descripcion&&n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("p",{className:"text-sm uppercase dark:text-white text-gray-700 mb-2",children:"Descripcin"}),n.jsx("p",{className:"uppercase dark:text-white text-gray-900",children:P.descripcion})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm uppercase dark:text-white text-gray-700 mb-1",children:"Fecha de Creacin"}),n.jsx("p",{className:"uppercase dark:text-white text-gray-900",children:new Date(P.created_at).toLocaleDateString("es-MX",{year:"numeric",month:"long",day:"numeric"})})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(He,{variant:"outline",onClick:()=>te(!1),className:"uppercase",children:"Cerrar"})})]})})})]})},_w=["Art","Biology","Chemistry","Computer Science","Economics","English","Geography","History","Mathematics","Music","Physics","Science","Social Studies","Technology","Other"],Z7=({isOpen:e,onClose:t,onCreate:r})=>{const[s,o]=j.useState({className:"",section:"",room:""}),[i,c]=j.useState(!1),[d,h]=j.useState(_w),[f,p]=j.useState(!1),[v,x]=j.useState(null);j.useEffect(()=>{e&&(o({className:"",section:"",room:""}),x(null),c(!1))},[e]);const w=(T,A)=>{if(o(I=>({...I,[T]:A})),x(null),T==="className"){const I=_w.filter(O=>O.toLowerCase().includes(A.toLowerCase()));h(I),c(!0)}},y=T=>{o(A=>({...A,className:T})),c(!1)},S=async()=>{if(!s.className.trim()){x("Subject is required");return}p(!0),x(null);try{await r(s),t()}catch(T){console.error("Error in CreateClassModal:",T);const A=T.message||"Error creating class";x(A)}finally{p(!1)}},C=T=>{T.key==="Escape"&&t()};return e?n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:t,onKeyDown:C,children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4 relative",onClick:T=>T.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"create-class-title",children:[n.jsx("div",{className:"px-6 pt-6 pb-4",children:n.jsx("h2",{id:"create-class-title",className:"text-2xl font-medium text-gray-900",children:"Create class"})}),n.jsx("div",{className:"px-6 pb-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"className",className:"block text-sm font-medium text-gray-700 mb-1",children:["Subject",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{id:"className",type:"text",value:s.className,onChange:T=>w("className",T.target.value),onFocus:()=>c(!0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-green-medium focus:border-brand-green-medium text-gray-900",placeholder:"Subject name",autoComplete:"off",role:"combobox","aria-expanded":i,"aria-controls":"subject-listbox"}),i&&d.length>0&&n.jsx("div",{id:"subject-listbox",className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-auto",role:"listbox",children:d.map(T=>n.jsx("div",{onClick:()=>y(T),className:"px-3 py-2 hover:bg-gray-100 cursor-pointer text-gray-900",role:"option",children:T},T))})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"*Required"})]}),n.jsxs("div",{className:"hidden",children:[n.jsx("label",{htmlFor:"section",className:"block text-sm font-medium text-gray-700 mb-1",children:"Section"}),n.jsx("input",{id:"section",type:"text",value:s.section,onChange:T=>w("section",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-green-medium focus:border-brand-green-medium text-gray-900",placeholder:"Section",autoComplete:"off"})]}),n.jsxs("div",{className:"hidden",children:[n.jsx("label",{htmlFor:"room",className:"block text-sm font-medium text-gray-700 mb-1",children:"Room"}),n.jsx("input",{id:"room",type:"text",value:s.room,onChange:T=>w("room",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-green-medium focus:border-brand-green-medium text-gray-900",placeholder:"Room",autoComplete:"off"})]}),v&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:[n.jsx("p",{className:"text-red-600 text-sm font-medium",children:v}),n.jsx("p",{className:"text-red-500 text-xs mt-1",children:"Please check your connection and try again."})]})]})}),n.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end gap-3",children:[n.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md transition-colors",disabled:f,children:"Cancel"}),n.jsx("button",{onClick:S,disabled:f||!s.className.trim(),className:"px-4 py-2 bg-brand-green-light text-white rounded-md hover:bg-brand-green-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Creating":"Create"})]})]})}):null},Ci="/assets/classroom-code-BSEuO9uM.jpg",Df="/assets/classroom-read-DY-Qdh7B.jpg",Rf="/assets/classroom-bookclub-OcWJHjxw.jpg",Of="/assets/classroom-backtoschool-CLG6gyZy.jpg",Cw=()=>{const{user:e}=$t(),t=Kr(),[r,s]=j.useState([]),[o,i]=j.useState([]),[c,d]=j.useState(!0),[h,f]=j.useState(null),[p,v]=j.useState(!1);j.useEffect(()=>{e?.id&&(x(),e.role==="student"&&w())},[e?.id,e?.role,e?.grupoAsignado]);const x=async()=>{if(!e?.id){d(!1);return}try{let $;if(e.role==="student"){const{getStudentClasses:F}=await Yc(async()=>{const{getStudentClasses:te}=await Promise.resolve().then(()=>R2);return{getStudentClasses:te}},void 0);$=await F(e.id)}else $=await ko(e.id);s($.map(F=>({id:F.id,title:F.title,description:F.description,classCode:F.classCode,section:F.section,subject:F.subject,room:F.room,teacherId:F.teacherId,teacher:F.teacher,module:F.module,archived:F.isArchived,status:F.status}))),d(!1)}catch($){console.error("Error loading classes:",$),d(!1)}},w=async()=>{if(!(!e?.id||e.role!=="student"))try{const F=(await td(e.id,e.grupoAsignado)).filter(Ee=>!Ee.isArchived),ne=(await Promise.all(F.map(async Ee=>{try{const{getSubmission:Se}=await Yc(async()=>{const{getSubmission:U}=await Promise.resolve().then(()=>F2);return{getSubmission:U}},void 0),De=await Se(Ee.id,e.id);return{...Ee,submissionStatus:De?.status||null}}catch{return{...Ee,submissionStatus:null}}}))).filter(Ee=>!Ee.submissionStatus||Ee.submissionStatus==="draft"||Ee.submissionStatus==="returned");i(ne),console.log(" Assignments cargados para estudiante:",ne.length)}catch($){console.error("Error loading assignments:",$)}},y=$=>{t(`/dashboard/classes/${$}`)},S=($,F)=>{F.stopPropagation(),f(h===$?null:$)},C=($,F)=>{F.stopPropagation();const te=`${window.location.origin}/dashboard/classes/${$}`;navigator.clipboard.writeText(te),f(null)},T=($,F)=>{F.stopPropagation(),t(`/dashboard/teaching?edit=${$}`),f(null)},A=async($,F)=>{if(F.stopPropagation(),!!confirm("Ests seguro de eliminar esta clase? Esta accin no se puede deshacer."))try{await T2($),await x(),f(null)}catch(te){console.error("Error deleting class:",te),alert("Error al eliminar la clase"),f(null)}},I=[Ci,Df,Rf,Of],O=$=>I[$%I.length],P=async $=>{if(!e?.id){console.error("Cannot create class: user not logged in");return}try{const F=$.className,te=$.section?`${F} - ${$.section}`:F,ne=await pf({title:te,subject:F,section:$.section,room:$.room,teacherId:e.id,status:"active"});return await x(),ne.id&&t(`/dashboard/classes/${ne.id}`),ne}catch(F){console.error("Error creating class:",F),console.error("Error response:",F.response);let te="Error creating class";throw F.response?.data?.message?te=F.response.data.message:F.response?.data?.error?te=F.response.data.error:F.message?te=F.message:F.response?.status===400?te="Invalid data. Please check all fields.":F.response?.status===401?te="Unauthorized. Please log in again.":F.response?.status===500&&(te="Server error. Please try again later."),new Error(te)}};return n.jsx("div",{className:"min-h-screen bg-white",children:n.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h1",{className:"text-2xl font-normal text-gray-900",children:e?.role==="student"?"Mis Clases":"Classes"}),(e?.role==="admin"||e?.role==="teacher")&&n.jsxs("button",{onClick:()=>v(!0),className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-md hover:bg-gray-50 text-gray-700 transition-colors shadow-sm",children:[n.jsx(Hr,{className:"w-5 h-5"}),n.jsx("span",{children:"Create class"})]})]}),!1,c?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-green-medium mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Cargando clases..."})]}):r.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(of,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-black mb-2",children:"No hay clases"}),n.jsx("p",{className:"text-gray-600 mb-4",children:e?.role==="student"?"No ests inscrito en ninguna clase todava":"Crea tu primera clase para comenzar"}),(e?.role==="admin"||e?.role==="teacher")&&n.jsx("button",{onClick:()=>v(!0),className:"px-6 py-3 bg-brand-green-light text-white rounded-lg hover:bg-brand-green-medium transition-colors font-semibold",children:"Crear Clase"})]}):n.jsx("ol",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 list-none p-0 m-0",children:r.map(($,F)=>n.jsxs("li",{className:"relative bg-white rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow cursor-pointer overflow-visible",onClick:()=>y($.id),children:[n.jsx("div",{className:"relative h-32 overflow-hidden",children:n.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${O(F)})`},children:n.jsx("div",{className:"absolute inset-0 bg-black/10"})})}),n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex-1 pr-2 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h2",{className:"text-lg font-semibold text-black line-clamp-2",children:$.title}),$.archived&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gray-100 text-gray-600 text-xs font-medium rounded-full flex-shrink-0",children:[n.jsx(da,{className:"w-3 h-3"}),"Archivada"]})]}),$.subject&&n.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-1",children:$.subject})]}),(e?.role==="admin"||e?.role==="teacher")&&n.jsxs("div",{className:"relative flex-shrink-0 flex items-center gap-1 z-30",children:[n.jsx("button",{onClick:te=>S($.id,te),className:"p-1 text-gray-600 hover:bg-gray-100 rounded-full transition-colors relative z-30","aria-label":"Class options",children:n.jsx(jo,{className:"w-5 h-5"})}),h===$.id&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>f(null)}),n.jsxs("div",{className:"absolute right-0 top-full mt-1 z-50 bg-white border border-gray-200 rounded-lg shadow-xl min-w-[180px]",children:[n.jsxs("button",{onClick:te=>C($.id,te),className:"w-full text-left px-4 py-2 text-sm text-black hover:bg-gray-50 flex items-center gap-2",children:[n.jsx(Ah,{className:"w-4 h-4"}),"Copy invite link"]}),n.jsxs("button",{onClick:te=>T($.id,te),className:"w-full text-left px-4 py-2 text-sm text-black hover:bg-gray-50 flex items-center gap-2",children:[n.jsx(Bn,{className:"w-4 h-4"}),"Edit"]}),n.jsxs("button",{onClick:te=>A($.id,te),className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2 border-t border-gray-200",children:[n.jsx(Gr,{className:"w-4 h-4"}),"Delete"]})]})]})]})]}),e?.role==="student"&&o.length>0&&n.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-100",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm mb-2",children:[n.jsx(fr,{className:"w-4 h-4 text-gray-600"}),n.jsx("span",{className:"text-gray-700 font-medium",children:"Assignments"})]}),n.jsxs("div",{className:"space-y-2",children:[o.filter(te=>te.classId===$.id).slice(0,3).map(te=>n.jsxs("div",{onClick:ne=>{ne.stopPropagation(),t(`/dashboard/classes/${$.id}?tab=classwork&assignment=${te.streamItemId}`)},className:"flex items-center gap-2 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[n.jsx(fr,{className:"w-3 h-3 text-blue-600 flex-shrink-0"}),n.jsx("span",{className:"text-xs text-gray-700 truncate",children:te.title}),te.dueDate&&n.jsx("span",{className:"text-xs text-gray-500 ml-auto flex-shrink-0",children:new Date(te.dueDate).toLocaleDateString()})]},te.id)),o.filter(te=>te.classId===$.id).length>3&&n.jsxs("button",{onClick:te=>{te.stopPropagation(),t(`/dashboard/classes/${$.id}?tab=classwork`)},className:"text-xs text-blue-600 hover:text-blue-700 ml-6",children:["Ver todos (",o.filter(te=>te.classId===$.id).length,")"]})]})]})]}),n.jsxs("div",{className:"px-4 pb-4 flex items-center gap-2 border-t border-gray-100 pt-3 hidden",children:[n.jsxs("button",{onClick:te=>{te.stopPropagation(),t(`/dashboard/classes/${$.id}/gradebook`)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",title:"Open gradebook",children:[n.jsx(Sl,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden md:inline",children:"Gradebook"})]}),n.jsx("button",{onClick:te=>{te.stopPropagation()},className:"flex items-center justify-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",title:"Open folder",children:n.jsx(Us,{className:"w-4 h-4"})})]})]},$.id))}),n.jsx(Z7,{isOpen:p,onClose:()=>v(!1),onCreate:P})]})})},X7=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),Ew=async e=>{try{const t=new Date().toISOString(),r=e.status==="submitted"||e.status==="to_review",s=e.status==="reviewed",{data:o}=await Ue.from("quiz_submissions").select("id").eq("quiz_id",e.quizId).eq("student_id",e.studentId).maybeSingle(),i={quiz_id:e.quizId,student_id:e.studentId,answers:e.answers||null,status:e.status||"draft",grade:e.grade||null,student_comments:e.studentComments||null,teacher_comments:e.teacherComments||null,updated_at:t};if(r&&(i.submitted_at=t),s&&(i.reviewed_at=t),o){const{error:c}=await Ue.from("quiz_submissions").update(i).eq("id",o.id);if(c)throw c}else{i.id=X7(),i.created_at=t;const{error:c}=await Ue.from("quiz_submissions").insert(i);if(c)throw c}}catch(t){throw console.error("Error saving quiz submission:",t),t}},Lg=async(e,t)=>{try{const{data:r,error:s}=await Ue.from("quiz_submissions").select("*").eq("quiz_id",e).eq("student_id",t).maybeSingle();if(s&&s.code!=="PGRST116")throw s;return r?{id:r.id,quizId:r.quiz_id,studentId:r.student_id,answers:r.answers,status:r.status,grade:r.grade?parseFloat(r.grade):null,studentComments:r.student_comments,teacherComments:r.teacher_comments,submittedAt:r.submitted_at,gradedAt:r.graded_at,reviewedAt:r.reviewed_at,createdAt:r.created_at,updatedAt:r.updated_at}:null}catch(r){throw console.error("Error loading quiz submission:",r),r}},eO=async e=>{try{const{data:t,error:r}=await Ue.from("quiz_submissions").select(`
        *,
        student:users!quiz_submissions_student_id_fkey(
          id,
          first_name,
          last_name,
          avatar
        )
      `).eq("quiz_id",e).order("submitted_at",{ascending:!1,nullsFirst:!1});if(r)throw r;return(t||[]).map(s=>({id:s.id,quizId:s.quiz_id,studentId:s.student_id,answers:s.answers,status:s.status,grade:s.grade?parseFloat(s.grade):null,studentComments:s.student_comments,teacherComments:s.teacher_comments,submittedAt:s.submitted_at,gradedAt:s.graded_at,reviewedAt:s.reviewed_at,createdAt:s.created_at,student:{id:s.student?.id,name:`${s.student?.first_name||""} ${s.student?.last_name||""}`.trim()||"Estudiante",avatar:s.student?.avatar,group:s.student?.grupo_asignado}}))}catch(t){throw console.error("Error loading quiz submissions:",t),t}},tO=async(e,t,r)=>{try{console.log(" service.markQuizAsReviewed called",{submissionId:e,grade:r});const s={status:"reviewed",reviewed_at:new Date().toISOString(),updated_at:new Date().toISOString()};t!==void 0&&(s.teacher_comments=t),r!==void 0&&(s.grade=r),console.log(" Updating quiz_submissions with:",s);const{error:o}=await Ue.from("quiz_submissions").update(s).eq("id",e);if(o)throw console.error(" Supabase error updating quiz submission:",o),o;console.log(" Quiz submission marked as reviewed in DB")}catch(s){throw console.error("Error marking quiz submission as reviewed:",s),s}},rO=({isOpen:e,onClose:t,submission:r,onSave:s})=>{const[o,i]=j.useState(void 0),[c,d]=j.useState(""),[h,f]=j.useState(!1);if(j.useEffect(()=>{r?(i(r.grade),d(r.teacherComments||"")):(i(void 0),d(""))},[r]),!e||!r)return null;const p=async()=>{console.log(" ReviewSubmissionModal.handleSave called",{submissionId:r.id,grade:o,comments:c}),f(!0);try{console.log(" Calling onSave prop"),await s(r.id,r.type,o,c),console.log(" onSave completed successfully - REVIEW SAVED"),console.log(" Saved Details:",{id:r.id,grade:o,comments:c}),t()}catch(x){console.error(" Error saving grade in modal:",x),alert("Error al guardar la calificacin")}finally{f(!1)}},v=n.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl mx-4 max-h-[90vh] flex flex-col overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100 bg-gray-50",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[r.itemTitle,n.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full font-medium ${r.type==="assignment"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:r.type==="assignment"?"Tarea":"Quiz"})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("span",{className:"text-sm text-gray-500",children:"Entregado por:"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:r.studentName}),r.submittedAt&&n.jsxs("span",{className:"text-xs text-gray-400",children:[" ",new Date(r.submittedAt).toLocaleString()]})]})]}),n.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors",children:n.jsx(Rr,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[n.jsxs("div",{className:"flex-1 overflow-y-auto p-6 border-r border-gray-100 bg-white",children:[n.jsx("div",{className:"mb-6 pb-4 border-b border-gray-100",children:n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:r.itemTitle})}),n.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[n.jsx(fr,{className:"w-4 h-4 text-gray-500"}),"Contenido de la entrega"]}),r.content?n.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 text-gray-700 whitespace-pre-wrap leading-relaxed",children:r.content}):r.type==="assignment"?n.jsxs("div",{className:"text-gray-400 italic flex items-center gap-2 bg-gray-50 p-4 rounded-lg",children:[n.jsx(s2,{className:"w-4 h-4"}),"Sin contenido de texto"]}):null,r.type==="quiz"&&n.jsxs("div",{className:"mt-4 p-4 bg-purple-50 rounded-lg border border-purple-100",children:[n.jsx("p",{className:"text-purple-800 mb-2 font-medium",children:"Respuestas del Quiz:"}),n.jsx("pre",{className:"text-xs text-purple-700 overflow-x-auto",children:JSON.stringify(r.answers,null,2)})]}),r.studentComments&&n.jsxs("div",{className:"mt-6",children:[n.jsxs("h4",{className:"font-medium text-sm text-gray-700 mb-2 flex items-center gap-2",children:[n.jsx(Xc,{className:"w-3 h-3"}),"Comentario del estudiante"]}),n.jsx("div",{className:"bg-blue-50 text-blue-800 p-3 rounded-lg text-sm border border-blue-100",children:r.studentComments})]})]}),n.jsxs("div",{className:"w-[350px] bg-gray-50 p-6 flex flex-col overflow-y-auto",children:[n.jsxs("h3",{className:"font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[n.jsx(sn,{className:"w-4 h-4 text-green-600"}),"Evaluacin"]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Calificacin"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",min:"0",max:"100",value:o===void 0?"":o,onChange:x=>i(x.target.value?parseFloat(x.target.value):void 0),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-green-medium focus:border-brand-green-medium",placeholder:"0-100"}),n.jsx(ax,{className:"w-4 h-4 text-gray-400 absolute left-3 top-3"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comentarios privados"}),n.jsx("textarea",{value:c,onChange:x=>d(x.target.value),rows:6,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-green-medium focus:border-brand-green-medium text-sm resize-none",placeholder:"Escribe un comentario para el estudiante..."}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"El estudiante recibir una notificacin con tu calificacin y comentarios."})]})]}),n.jsx("div",{className:"mt-auto pt-6 border-t border-gray-200",children:n.jsxs("div",{className:"space-y-3",children:[n.jsx("button",{onClick:p,disabled:h||o===void 0,className:"w-full py-2.5 px-4 bg-brand-green-medium text-white rounded-lg hover:bg-green-700 transition-colors font-medium shadow-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:h?"Guardando...":n.jsxs(n.Fragment,{children:[n.jsx(sn,{className:"w-4 h-4"}),"Calificar y Devolver"]})}),n.jsx("button",{onClick:t,className:"w-full py-2.5 px-4 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Cancelar"})]})})]})]})]})});return Pa.createPortal(v,document.body)},nO=({classId:e,onClassChange:t})=>{const{user:r}=$t(),[s,o]=j.useState("all"),[i,c]=j.useState([]),[d,h]=j.useState([]),[f,p]=j.useState(!0),[v,x]=j.useState(!1),[w,y]=j.useState("to-review"),[S,C]=j.useState(null),[T,A]=j.useState(!1);j.useEffect(()=>{I()},[r?.id]),j.useEffect(()=>{O(),(async()=>{const te=await I();O(te)})()},[s,w,r?.id]);const I=async()=>{try{if(r?.id){const F=await ko(r.id),te=F.map(ne=>ne.id);return c(F.map(ne=>({id:ne.id,title:ne.title}))),r.role==="admin"?null:te}return[]}catch(F){return console.error("Error loading classes:",F),[]}},O=async F=>{p(!0);try{const te=await mx(),ne=await px();console.log("DEBUG: Loaded all items",{assignmentsCount:te.length,quizzesCount:ne.length});const Ee=F;let Se=te,De=ne;s!=="all"?(Se=te.filter(H=>H.classId===s),De=ne.filter(H=>H.classId===s)):Ee&&(Se=te.filter(H=>Ee.includes(H.classId)),De=ne.filter(H=>Ee.includes(H.classId))),console.log("DEBUG: Filtered items",{selectedClass:s,restrictToClasses:Ee?Ee.length:"ALL (Admin)",filteredAssignmentsCount:Se.length,filteredQuizzesCount:De.length});const U=[];for(const H of Se)try{const ye=await L2(H.id);ye.length>0&&(console.log(`DEBUG: Fetched ${ye.length} submissions for assignment ${H.id}. ActiveTab: ${w}`),ye.forEach(R=>console.log(` - Sub ${R.id}: status=${R.status}`)));for(const R of ye)(w==="to-review"&&(R.status==="to_review"||R.status==="submitted")||w==="reviewed"&&(R.status==="reviewed"||R.status==="graded"))&&U.push({id:R.id,type:"assignment",itemId:H.id,itemTitle:H.title,classId:H.classId,className:H.className,studentId:R.studentId,studentName:R.student?.name||"Estudiante",studentAvatar:R.student?.avatar,studentGroup:R.student?.group,content:R.content,status:R.status,grade:R.grade||void 0,studentComments:R.studentComments,teacherComments:R.teacherComments,submittedAt:R.submittedAt,reviewedAt:R.reviewedAt})}catch(ye){console.error(`Error loading submissions for assignment ${H.id}:`,ye)}for(const H of De)try{const ye=await eO(H.id);for(const R of ye)(w==="to-review"&&(R.status==="to_review"||R.status==="submitted")||w==="reviewed"&&(R.status==="reviewed"||R.status==="graded"))&&(console.log("DEBUG: Found assignment submission to display",{id:R.id,status:R.status,activeTab:w}),U.push({id:R.id,type:"quiz",itemId:H.id,itemTitle:H.title,classId:H.classId,className:H.className,studentId:R.studentId,studentName:R.student?.name||"Estudiante",studentAvatar:R.student?.avatar,studentGroup:R.student?.group,answers:R.answers,status:R.status,grade:R.grade||void 0,studentComments:R.studentComments,teacherComments:R.teacherComments,submittedAt:R.submittedAt,reviewedAt:R.reviewedAt}))}catch(ye){console.error(`Error loading submissions for quiz ${H.id}:`,ye)}U.sort((H,ye)=>!H.submittedAt&&!ye.submittedAt?0:H.submittedAt?ye.submittedAt?new Date(ye.submittedAt).getTime()-new Date(H.submittedAt).getTime():-1:1),console.log("DEBUG: Final submissions list",{count:U.length}),h(U)}catch(te){console.error("Error loading submissions:",te)}finally{p(!1)}},P=F=>{o(F),x(!1),t&&t(F)},$=async(F,te,ne,Ee)=>{console.log(" handleMarkAsReviewed called with:",{submissionId:F,type:te,grade:ne,teacherComments:Ee});try{te==="assignment"?(console.log(" Calling markAsReviewed for assignment"),await $2(F,Ee,ne)):(console.log(" Calling markQuizAsReviewed for quiz"),await tO(F,Ee,ne)),console.log(" Marked as reviewed successfully"),A(!1),C(null),await O()}catch(Se){console.error(" Error marking submission as reviewed:",Se),alert("Error al marcar como revisado")}};return f?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-green-medium"})}):n.jsx("div",{className:"bg-white min-h-screen",children:n.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[n.jsx("div",{className:"mb-6 flex items-center justify-between",children:n.jsxs("div",{className:"relative inline-block",children:[n.jsxs("button",{onClick:()=>x(!v),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg bg-white hover:bg-gray-50 text-gray-700",children:[n.jsx("span",{children:s==="all"?"All classes":i.find(F=>F.id===s)?.title||"All classes"}),n.jsx(qr,{className:"w-4 h-4"})]}),v&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>x(!1)}),n.jsxs("div",{className:"absolute left-0 top-10 z-20 bg-white border border-gray-200 rounded-lg shadow-lg min-w-[200px]",children:[n.jsx("button",{onClick:()=>P("all"),className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 ${s==="all"?"text-brand-green-medium font-medium":"text-gray-800"}`,children:"All classes"}),i.map(F=>n.jsx("button",{onClick:()=>P(F.id),className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 ${s===F.id?"text-brand-green-medium font-medium":"text-gray-800"}`,children:F.title},F.id))]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 mb-6",children:n.jsxs("nav",{className:"flex space-x-8",children:[n.jsx("button",{onClick:()=>y("to-review"),className:`py-4 px-1 border-b-2 ${w==="to-review"?"border-brand-green-medium text-brand-green-medium":"border-transparent text-gray-600 hover:text-gray-800 hover:border-gray-300"} transition-colors text-sm font-medium`,children:"To review"}),n.jsx("button",{onClick:()=>y("reviewed"),className:`py-4 px-1 border-b-2 ${w==="reviewed"?"border-brand-green-medium text-brand-green-medium":"border-transparent text-gray-600 hover:text-gray-800 hover:border-gray-300"} transition-colors text-sm font-medium`,children:"Reviewed"})]})}),d.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsxs("svg",{viewBox:"0 0 210 174",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-48 h-auto mx-auto mb-4 text-gray-400","aria-hidden":"true",children:[n.jsx("path",{d:"M80.7852 170.407L132.959 46.7041M108.555 170.407L131.276 47.5456",stroke:"#5F6368",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M129.593 169.986L131.219 49.2291M131.276 45.0215L131.219 49.2291M155.259 170.828L131.219 49.2291",stroke:"#5F6368",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M180.084 172.09L132.538 50.9121",stroke:"#5F6368",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M67.9948 155.932H6.31178C3.53478 155.932 1.2627 153.66 1.2627 150.883V94.2493C1.2627 91.4723 3.53478 89.2002 6.31178 89.2002H62.9457C65.7227 89.2002 67.9948 91.4723 67.9948 94.2493V155.932Z",stroke:"#5F6368",strokeWidth:"2",strokeMiterlimit:"10"}),n.jsx("path",{d:"M4.88078 154.671C2.18794 154.671 0 152.483 0 149.79V92.8193C0 90.1264 2.18794 87.9385 4.88078 87.9385H61.8513C64.5442 87.9385 66.7321 90.1264 66.7321 92.8193L4.88078 154.671Z",fill:"#5F6368"}),n.jsx("path",{d:"M208.864 164.6L136.746 39.8031V37.4469C136.746 34.3333 134.222 31.7246 131.024 31.7246C127.91 31.7246 125.302 34.2492 125.302 37.4469V39.8031L53.268 164.6C52.3423 166.199 52.9314 168.134 54.4461 169.06L58.6537 171.5C60.2525 172.426 62.188 171.837 63.1137 170.322L131.024 52.6783L198.934 170.322C199.86 171.921 201.795 172.426 203.394 171.5L207.602 169.06C209.201 168.218 209.79 166.199 208.864 164.6Z",fill:"#1E8E3E"}),n.jsx("path",{d:"M109.396 6.73214L117.391 5.89062M130.855 26.087C130.855 26.4236 131.136 31.8373 131.276 34.5021",stroke:"#5F6368",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M147.181 11.2764C147.181 20.1964 139.944 27.4334 131.024 27.4334C122.104 27.4334 114.867 20.1964 114.867 11.2764H147.181Z",fill:"#CEEAD6"}),n.jsx("path",{d:"M120.505 0C117.392 0 114.867 2.52454 114.867 5.63815V11.2763H126.143V5.63815C126.059 2.52454 123.619 0 120.505 0Z",fill:"#CEEAD6"}),n.jsx("path",{d:"M128.331 17.251C129.173 18.0925 131.445 19.5231 133.801 18.5132",stroke:"#5F6368",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M43.7933 59.3332L43.0635 41.584",stroke:"#5F6368",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M43.2595 49.3815C43.7726 48.0742 44.4317 47.1489 45.6543 46.1489C48.0996 44.1487 50.9918 45.8757 50.769 47.5929C50.6228 48.7195 49.1637 50.7819 47.3131 50.9723C45.1536 51.1946 43.8828 50.8101 43.3699 50.6088",stroke:"#5F6368",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M43.1922 49.7431C42.7694 48.4039 42.1749 47.4358 41.0233 46.3547C38.72 44.1926 35.7169 45.7184 35.8221 47.4469C35.8911 48.5808 36.4669 50.0443 39.0397 51.0539C41.0605 51.847 42.473 51.1258 42.9985 50.96",stroke:"#5F6368",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M38.0703 86.6842C46.1057 89.8377 55.1745 85.8841 58.326 77.8537C61.4775 69.8232 57.5183 60.7569 49.483 57.6034C41.4476 54.4499 32.3788 58.4035 29.2273 66.434C26.0757 74.4644 30.0349 83.5308 38.0703 86.6842Z",fill:"#DADCE0"}),n.jsx("path",{d:"M34.4039 78.6508C35.6111 79.1245 36.3586 77.2197 35.1515 76.7459C33.9443 76.2722 33.1968 78.177 34.4039 78.6508Z",fill:"#5F6368"}),n.jsx("path",{d:"M38.941 74.9359C40.1482 75.4097 40.8957 73.5048 39.6886 73.0311C38.4814 72.5573 37.7339 74.4622 38.941 74.9359Z",fill:"#5F6368"}),n.jsx("path",{d:"M42.2525 81.0717C43.4597 81.5454 44.2072 79.6406 43.0001 79.1668C41.7929 78.6931 41.0454 80.598 42.2525 81.0717Z",fill:"#5F6368"}),n.jsx("path",{d:"M37.5484 82.5961C38.7556 83.0698 39.5031 81.165 38.296 80.6912C37.0888 80.2175 36.3413 82.1224 37.5484 82.5961Z",fill:"#5F6368"}),n.jsx("path",{d:"M44.1148 56.5226C35.4827 56.2857 28.3179 63.1461 28.0846 71.7742C27.9998 74.2323 28.5478 76.5723 29.5381 78.7195L53.7583 60.1606C51.1074 57.9478 47.8285 56.5878 44.1148 56.5226Z",fill:"#5F6368"})]}),n.jsx("p",{className:"text-xl font-medium text-gray-900 mb-2",children:w==="to-review"?"Nothing to review right now":"No reviewed assignments"}),n.jsx("p",{className:"text-sm text-gray-600",children:w==="to-review"?"This is where you can track assignments and other work across all your classes":"Reviewed assignments will appear here"})]}):n.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estudiante"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grupo"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assignment/Quiz"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Comentarios"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Calificacin"}),w==="to-review"&&n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(F=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[F.studentAvatar?n.jsx("img",{src:F.studentAvatar,alt:F.studentName,className:"h-10 w-10 rounded-full mr-3"}):n.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center mr-3",children:n.jsx(es,{className:"w-5 h-5 text-gray-500"})}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:F.studentName}),F.className&&n.jsx("div",{className:"text-xs text-gray-500",children:F.className})]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-indigo-50 text-indigo-700 rounded-lg border border-indigo-100",children:F.studentGroup||"N/A"})}),n.jsxs("td",{className:"px-6 py-4",children:[n.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[n.jsx("span",{className:`mr-2 px-1.5 py-0.5 text-xs rounded ${F.type==="assignment"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:F.type==="assignment"?"Tarea":"Quiz"}),F.itemTitle]}),F.content&&n.jsx("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2 max-w-xs",children:F.content}),F.answers&&n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Respuestas recibidas"})]}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"space-y-2",children:[F.studentComments&&n.jsxs("div",{className:"text-xs",children:[n.jsxs("div",{className:"flex items-center gap-1 text-gray-600 mb-1",children:[n.jsx(Xc,{className:"w-3 h-3"}),n.jsx("span",{className:"font-medium",children:"Estudiante:"})]}),n.jsx("p",{className:"text-gray-700 bg-blue-50 p-2 rounded border border-blue-100",children:F.studentComments})]}),F.teacherComments&&n.jsxs("div",{className:"text-xs",children:[n.jsxs("div",{className:"flex items-center gap-1 text-gray-600 mb-1",children:[n.jsx(Xc,{className:"w-3 h-3"}),n.jsx("span",{className:"font-medium",children:"Profesor:"})]}),n.jsx("p",{className:"text-gray-700 bg-green-50 p-2 rounded border border-green-100",children:F.teacherComments})]}),!F.studentComments&&!F.teacherComments&&n.jsx("span",{className:"text-xs text-gray-400",children:"Sin comentarios"})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:F.grade!==void 0&&F.grade!==null?n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(ax,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:F.grade})]}):n.jsx("span",{className:"text-xs text-gray-400",children:"Sin calificar"})}),w==="to-review"&&n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("button",{onClick:()=>{console.log(' "Revisar" button clicked for submission:',F),C(F),A(!0)},className:"px-4 py-2 bg-brand-green-medium text-white rounded hover:bg-green-700 text-sm flex items-center gap-2 ml-auto",children:[n.jsx(sn,{className:"w-4 h-4"}),"Revisar"]})})]},F.id))})]})})}),n.jsx(rO,{isOpen:T,onClose:()=>{A(!1),C(null)},submission:S,onSave:$})]})})},Zx=({isOpen:e,onClose:t,classId:r,className:s="",onSave:o,initialData:i,isEdit:c=!1,availableClasses:d=[]})=>{const[h,f]=j.useState(r),[p,v]=j.useState(s),[x,w]=j.useState(!1),[y,S]=j.useState({title:"",instructions:"",points:void 0,dueDate:void 0,dueTime:void 0,topic:"No topic",assignTo:"all",selectedGroups:[],selectedStudents:[],attachments:[],rubric:void 0}),[C,T]=j.useState(!1),[A,I]=j.useState(!1),[O,P]=j.useState(!1),[$,F]=j.useState(!1),[te,ne]=j.useState({}),[Ee,Se]=j.useState(!1),[De,U]=j.useState(""),[H,ye]=j.useState([]),[R,de]=j.useState([]),[V,he]=j.useState({}),[K,B]=j.useState(!1),[re,ae]=j.useState(!1);j.useEffect(()=>{e?(f(r),v(s),r?z():d.length>0,i?(console.log("AssignmentModal - Loading initialData:",i),console.log("AssignmentModal - initialData.title:",i.title),S({title:i.title||"",instructions:i.instructions||"",points:i.points,dueDate:i.dueDate,dueTime:i.dueTime,topic:i.topic||"No topic",assignTo:i.assignTo||"all",selectedGroups:i.selectedGroups||[],selectedStudents:i.selectedStudents||[],attachments:i.attachments||[],rubric:i.rubric})):S({title:"",instructions:"",points:void 0,dueDate:void 0,dueTime:void 0,topic:"No topic",assignTo:"all",selectedGroups:[],selectedStudents:[],attachments:[],rubric:void 0})):e||(S({title:"",instructions:"",points:void 0,dueDate:void 0,dueTime:void 0,topic:"No topic",assignTo:"all",selectedGroups:[],selectedStudents:[],attachments:[],rubric:void 0}),ne({}),Se(!1),U(""),U(""),B(!1),ae(!1),w(!1))},[e,i,r]),j.useEffect(()=>{if(h){if(z(),d.length>0){const ce=d.find(J=>J.id===h);ce&&v(ce.title)}}else ye([]),de([])},[h]),j.useEffect(()=>{e&&i&&(console.log("AssignmentModal - initialData changed while open:",i),console.log("AssignmentModal - initialData.title:",i.title),S(ce=>({...ce,title:i.title||ce.title||"",instructions:i.instructions||ce.instructions||"",points:i.points!==void 0?i.points:ce.points,dueDate:i.dueDate||ce.dueDate,dueTime:i.dueTime||ce.dueTime,topic:i.topic||ce.topic||"No topic",assignTo:i.assignTo||ce.assignTo||"all",selectedGroups:i.selectedGroups||ce.selectedGroups||[],selectedStudents:i.selectedStudents||ce.selectedStudents||[],attachments:i.attachments||ce.attachments||[],rubric:i.rubric||ce.rubric})))},[i,e]);const z=async ce=>{try{const[J,qe]=await Promise.all([ux(),fx()]);console.log("AssignmentModal - Loaded groups:",J),console.log("AssignmentModal - Loaded students:",qe.length),ye(J),de(qe)}catch(J){console.error("Error loading groups and students:",J)}},ge=ce=>{const J=y.selectedGroups||[];if(J.includes(ce))we("selectedGroups",J.filter(qe=>qe!==ce));else{const qe=[...J,ce];console.log("AssignmentModal - Toggling group:",ce,"New groups:",qe),we("selectedGroups",qe)}},Pe=ce=>{const J=y.selectedStudents||[];J.includes(ce)?we("selectedStudents",J.filter(qe=>qe!==ce)):we("selectedStudents",[...J,ce])},we=(ce,J)=>{S(qe=>{const Be={...qe,[ce]:J};return(ce==="selectedGroups"||ce==="assignTo")&&console.log("AssignmentModal - FormData updated:",{assignTo:Be.assignTo,selectedGroups:Be.selectedGroups,title:Be.title}),Be}),te[ce]&&ne(qe=>({...qe,[ce]:""}))},Q=()=>{if(console.log(" [AssignmentModal] Assign button clicked",y),!y.title.trim()){ne({title:"Title is required"});return}if(y.assignTo==="groups"&&(!y.selectedGroups||y.selectedGroups.length===0)){ne({assignTo:"Please select at least one group"});return}if(y.assignTo==="students"&&(!y.selectedStudents||y.selectedStudents.length===0)){ne({assignTo:"Please select at least one student"});return}o?(console.log(" [AssignmentModal] Calling onSave with:",{...y,classId:h}),o({...y,classId:h})):console.warn(" [AssignmentModal] onSave prop is missing!"),t()},ke=()=>{console.log("Saving draft:",y),T(!1)},q=()=>{confirm("Are you sure you want to discard this draft?")&&(S({title:"",instructions:"",points:void 0,dueDate:void 0,dueTime:void 0,topic:"No topic",assignTo:"all",selectedStudents:[],attachments:[],rubric:void 0}),T(!1),t())};return e?n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 p-4",onClick:t,children:n.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto relative",onClick:ce=>ce.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"assignment-modal-title",children:[n.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-gray-100 rounded-full",children:n.jsx(fr,{className:"w-6 h-6 text-gray-600"})}),n.jsx("h2",{id:"assignment-modal-title",className:"text-2xl font-medium text-gray-900",children:c?"Edit Assignment":"Assignment"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:()=>T(!C),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Save options",children:n.jsx(jo,{className:"w-5 h-5"})}),C&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>T(!1)}),n.jsxs("div",{className:"absolute right-0 top-10 z-20 bg-white border border-gray-200 rounded-lg shadow-lg min-w-[180px]",children:[n.jsxs("button",{onClick:Q,className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50 flex items-center gap-2",children:[n.jsx(fr,{className:"w-4 h-4"}),"Assign"]}),n.jsxs("button",{onClick:()=>T(!1),className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50 flex items-center gap-2",children:[n.jsx(Xn,{className:"w-4 h-4"}),"Schedule"]}),n.jsxs("button",{onClick:ke,className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50 flex items-center gap-2",children:[n.jsx(Gs,{className:"w-4 h-4"}),"Save draft"]}),n.jsx("div",{className:"border-t border-gray-200 my-1"}),n.jsxs("button",{onClick:q,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[n.jsx(Gr,{className:"w-4 h-4"}),"Discard draft"]})]})]})]}),n.jsx("button",{onClick:t,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Close",children:n.jsx(Rr,{className:"w-6 h-6"})})]})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"For"}),d.length>0?n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>w(!x),className:"w-full border border-gray-300 rounded-lg px-4 py-2 text-left flex items-center justify-between bg-white hover:bg-gray-50",children:[n.jsx("span",{className:h?"text-gray-900":"text-gray-500",children:p||"Select class"}),n.jsx(qr,{className:`w-5 h-5 text-gray-400 transition-transform ${x?"rotate-180":""}`})]}),x&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>w(!1)}),n.jsx("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:d.map(ce=>n.jsxs("button",{onClick:()=>{f(ce.id),v(ce.title+(ce.subject?` (${ce.subject})`:"")),w(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 text-sm text-gray-900",children:[ce.title,ce.subject&&n.jsxs("span",{className:"text-gray-500 ml-2",children:["(",ce.subject,")"]})]},ce.id))})]})]}):n.jsx("div",{className:"border border-gray-300 rounded-lg px-4 py-2 bg-gray-50",children:n.jsx("span",{className:"text-gray-700",children:s||"Select class"})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign to"}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>F(!$),className:"w-full border border-gray-300 rounded-lg px-4 py-2 text-left flex items-center justify-between bg-white hover:bg-gray-50",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Sr,{className:"w-5 h-5 text-gray-600"}),n.jsx("span",{className:"text-gray-700",children:y.assignTo==="all"?"All students":y.assignTo==="groups"?`Groups (${y.selectedGroups?.length||0} selected)`:`Students (${y.selectedStudents?.length||0} selected)`})]}),n.jsx(qr,{className:"w-5 h-5 text-gray-400"})]}),$&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>F(!1)}),n.jsxs("div",{className:"absolute z-20 w-full bg-white border border-gray-200 rounded-lg shadow-lg mt-1",children:[n.jsx("button",{onClick:()=>{we("assignTo","all"),we("selectedGroups",[]),we("selectedStudents",[]),F(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50",children:"All students"}),n.jsx("button",{onClick:()=>{we("assignTo","groups"),we("selectedStudents",[]),F(!1),B(!0)},className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50",children:"Groups"}),n.jsx("button",{onClick:()=>{we("assignTo","students"),we("selectedGroups",[]),F(!1),ae(!0)},className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50",children:"Selected students"})]})]})]}),y.assignTo==="groups"&&n.jsxs("div",{className:"mt-3 border border-gray-300 rounded-lg p-3 max-h-48 overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Select groups"}),n.jsxs("button",{onClick:()=>B(!K),className:"text-sm text-blue-600 hover:text-blue-700",children:[K?"Hide":"Show"," groups"]})]}),K&&n.jsxs("div",{className:"space-y-2",children:[H.map(ce=>n.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:y.selectedGroups?.includes(ce)||!1,onChange:()=>ge(ce),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),n.jsx("span",{className:"text-sm text-gray-700",children:ce})]},ce)),H.length===0&&n.jsx("p",{className:"text-sm text-gray-500",children:"No groups available"})]}),y.selectedGroups&&y.selectedGroups.length>0&&n.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Selected groups:"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:y.selectedGroups.map(ce=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:[ce,n.jsx("button",{onClick:()=>ge(ce),className:"hover:text-blue-900",children:""})]},ce))})]})]}),y.assignTo==="students"&&n.jsxs("div",{className:"mt-3 border border-gray-300 rounded-lg p-3 max-h-48 overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Select students"}),n.jsxs("button",{onClick:()=>ae(!re),className:"text-sm text-blue-600 hover:text-blue-700",children:[re?"Hide":"Show"," students"]})]}),re&&n.jsxs("div",{className:"space-y-2",children:[R.map(ce=>n.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:y.selectedStudents?.includes(ce.id)||!1,onChange:()=>Pe(ce.id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),n.jsxs("span",{className:"text-sm text-gray-700",children:[ce.firstName," ",ce.lastName,ce.grupoAsignado&&n.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",ce.grupoAsignado,")"]})]})]},ce.id)),R.length===0&&n.jsx("p",{className:"text-sm text-gray-500",children:"No students available"})]}),y.selectedStudents&&y.selectedStudents.length>0&&n.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Selected students:"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:y.selectedStudents.map(ce=>{const J=R.find(qe=>qe.id===ce);return J?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-800 text-xs rounded",children:[J.firstName," ",J.lastName,n.jsx("button",{onClick:()=>Pe(ce),className:"hover:text-green-900",children:""})]},ce):null})})]})]})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:["Title ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",id:"title",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${te.title?"border-red-500":"border-gray-300"}`,value:y.title||"",onChange:ce=>{console.log("Title input changed:",ce.target.value),we("title",ce.target.value)},placeholder:"Title",required:!0}),te.title&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:te.title}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"*Required"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"instructions",className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructions (optional)"}),n.jsx("textarea",{id:"instructions",rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",value:y.instructions,onChange:ce=>we("instructions",ce.target.value),placeholder:"Add instructions for your assignment..."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Attach"}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("button",{onClick:()=>Se(!Ee),className:"flex items-center gap-3 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors w-full",title:"Google Drive",children:[n.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded flex items-center justify-center flex-shrink-0",children:n.jsx(Us,{className:"w-6 h-6 text-blue-600"})}),n.jsx("span",{className:"text-sm text-gray-700",children:"Google Drive"})]}),Ee&&n.jsxs("div",{className:"pl-13 flex gap-2",children:[n.jsx("input",{type:"url",placeholder:"Pega el link de Google Drive aqu",value:De,onChange:ce=>U(ce.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onKeyDown:ce=>{ce.key==="Enter"&&De.trim()&&(we("attachments",[...y.attachments||[],{type:"drive",url:De.trim(),name:"Google Drive file"}]),U(""),Se(!1))}}),n.jsx("button",{onClick:()=>{De.trim()&&(we("attachments",[...y.attachments||[],{type:"drive",url:De.trim(),name:"Google Drive file"}]),U(""),Se(!1))},className:"px-4 py-2 bg-blue-400 text-white rounded-lg hover:bg-blue-500 transition-colors",children:"Agregar"})]}),y.attachments&&y.attachments.length>0&&n.jsx("div",{className:"pl-13 space-y-2",children:y.attachments.map((ce,J)=>n.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg",children:[n.jsx(Us,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}),n.jsx("a",{href:ce.url,target:"_blank",rel:"noopener noreferrer",className:"flex-1 text-sm text-blue-600 hover:underline truncate",children:ce.url}),n.jsx("button",{onClick:()=>{const qe=y.attachments?.filter((Be,ee)=>ee!==J)||[];we("attachments",qe)},className:"p-1 hover:bg-gray-200 rounded transition-colors",title:"Eliminar",children:n.jsx(Gr,{className:"w-4 h-4 text-gray-600"})})]},J))})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"hidden",children:[n.jsx("label",{htmlFor:"points",className:"block text-sm font-medium text-gray-700 mb-1",children:"Points"}),n.jsx("input",{type:"number",id:"points",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:y.points||"",onChange:ce=>we("points",ce.target.value?parseInt(ce.target.value):void 0),placeholder:"100"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Due"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"date",id:"dueDate",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:y.dueDate||"",onChange:ce=>we("dueDate",ce.target.value)}),n.jsx("input",{type:"time",id:"dueTime",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:y.dueTime||"",onChange:ce=>we("dueTime",ce.target.value)})]})]}),n.jsxs("div",{className:"hidden",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Topic"}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>P(!O),className:"w-full border border-gray-300 rounded-lg px-4 py-2 text-left flex items-center justify-between bg-white hover:bg-gray-50",children:[n.jsx("span",{className:"text-gray-700",children:y.topic||"No topic"}),n.jsx(qr,{className:"w-5 h-5 text-gray-400"})]}),O&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>P(!1)}),n.jsxs("div",{className:"absolute z-20 w-full bg-white border border-gray-200 rounded-lg shadow-lg mt-1",children:[n.jsx("button",{onClick:()=>{we("topic","No topic"),P(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50",children:"No topic"}),n.jsx("button",{onClick:()=>{P(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50",children:"Create topic"})]})]})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"hidden block text-sm font-medium text-gray-700 mb-2",children:"Rubric"}),n.jsxs("button",{className:"hidden px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[n.jsx($a,{className:"w-5 h-5 text-gray-600"}),n.jsx("span",{className:"text-gray-700",children:"Attach rubric"})]})]})]}),n.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex justify-end gap-3",children:[n.jsx(He,{variant:"outline",onClick:t,children:"Cancel"}),n.jsx(He,{onClick:Q,disabled:!y.title||!y.title.trim()||!h||y.assignTo==="groups"&&(!y.selectedGroups||y.selectedGroups.length===0)||y.assignTo==="students"&&(!y.selectedStudents||y.selectedStudents.length===0),children:"Assign"})]})]})}):null},zN=({isOpen:e,onClose:t,classId:r,className:s="",onSave:o,initialData:i,isEdit:c=!1,availableClasses:d=[]})=>{const[h,f]=j.useState(r),[p,v]=j.useState(s),[x,w]=j.useState(!1),[y,S]=j.useState({title:"Blank Quiz",description:"",points:void 0,dueDate:void 0,dueTime:void 0,topic:"No topic",assignTo:"all",selectedGroups:[],selectedStudents:[],questions:[]}),[C,T]=j.useState(!1),[A,I]=j.useState(!1),[O,P]=j.useState(!1),[$,F]=j.useState({}),[te,ne]=j.useState({}),[Ee,Se]=j.useState([]),[De,U]=j.useState([]),[H,ye]=j.useState(!1),[R,de]=j.useState(!1),V=async()=>{try{const J=await ux();Se(J);const qe=await fx();U(qe)}catch(J){console.error("Error loading groups and students:",J)}};j.useEffect(()=>{e&&(f(r),v(s),r&&V(),S(i?{title:i.title||"Blank Quiz",description:i.description||"",points:i.points,dueDate:i.dueDate,dueTime:i.dueTime,topic:i.topic||"No topic",assignTo:i.assignTo||"all",selectedGroups:i.selectedGroups||[],selectedStudents:i.selectedStudents||[],questions:i.questions||[]}:{title:"Blank Quiz",description:"",points:void 0,dueDate:void 0,dueTime:void 0,topic:"No topic",assignTo:"all",selectedGroups:[],selectedStudents:[],questions:[]}),ne({}),ne({}),ye(!1),de(!1),w(!1))},[e,i,r]),j.useEffect(()=>{if(d.length>0&&h){const J=d.find(qe=>qe.id===h);J&&v(J.title)}},[h,d]);const he=(J,qe)=>{S(Be=>({...Be,[J]:qe})),te[J]&&ne(Be=>({...Be,[J]:""}))},K=J=>{S(qe=>{const Be=qe.selectedGroups||[];return Be.includes(J)?{...qe,selectedGroups:Be.filter(ee=>ee!==J)}:{...qe,selectedGroups:[...Be,J]}})},B=J=>{S(qe=>{const Be=qe.selectedStudents||[];return Be.includes(J)?{...qe,selectedStudents:Be.filter(ee=>ee!==J)}:{...qe,selectedStudents:[...Be,J]}})},re=(J,qe,Be)=>{S(ee=>({...ee,questions:ee.questions.map(Ye=>Ye.id===J?{...Ye,[qe]:Be}:Ye)}))},ae=()=>{const J={id:`question_${Date.now()}`,title:"Untitled Question",description:"",type:"multiple-choice",options:["Option 1"],required:!0,points:0};S(qe=>({...qe,questions:[...qe.questions,J]}))},z=J=>{S(qe=>({...qe,questions:qe.questions.filter(Be=>Be.id!==J)}))},ge=J=>{const qe=y.questions.find(Be=>Be.id===J);if(qe){const Be={...qe,id:`question_${Date.now()}`,title:`${qe.title} (Copy)`};S(ee=>({...ee,questions:[...ee.questions,Be]}))}},Pe=J=>{S(qe=>({...qe,questions:qe.questions.map(Be=>{if(Be.id===J){const ee=(Be.options?.length||0)+1;return{...Be,options:[...Be.options||[],`Option ${ee}`]}}return Be})}))},we=(J,qe)=>{S(Be=>({...Be,questions:Be.questions.map(ee=>ee.id===J&&ee.options?{...ee,options:ee.options.filter((Ye,Ne)=>Ne!==qe)}:ee)}))},Q=()=>{if(console.log(" [QuizAssignmentModal] Assign button clicked",y),!y.title.trim()){ne({title:"Title is required"});return}o?(console.log(" [QuizAssignmentModal] Calling onSave with:",{...y,classId:h}),o({...y,classId:h})):console.warn(" [QuizAssignmentModal] onSave prop is missing!"),t()},ke=()=>{console.log("Saving draft:",y),T(!1)},q=()=>{confirm("Are you sure you want to discard this draft?")&&(S({title:"Blank Quiz",description:"",points:void 0,dueDate:void 0,dueTime:void 0,topic:"No topic",assignTo:"all",selectedStudents:[],questions:[]}),T(!1),t())},ce=[{value:"short-answer",label:"Short answer"},{value:"paragraph",label:"Paragraph"},{value:"multiple-choice",label:"Multiple choice"},{value:"checkboxes",label:"Checkboxes"},{value:"dropdown",label:"Dropdown"},{value:"file-upload",label:"File upload"},{value:"linear-scale",label:"Linear scale"},{value:"rating",label:"Rating"}];return e?n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 p-4 overflow-y-auto",onClick:t,children:n.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto relative my-8",onClick:J=>J.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"quiz-modal-title",children:[n.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-gray-100 rounded-full",children:n.jsx(fr,{className:"w-6 h-6 text-gray-600"})}),n.jsx("h2",{id:"quiz-modal-title",className:"text-2xl font-medium text-gray-900",children:"Quiz assignment"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:()=>T(!C),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Save options",children:n.jsx(jo,{className:"w-5 h-5"})}),C&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>T(!1)}),n.jsxs("div",{className:"absolute right-0 top-10 z-20 bg-white border border-gray-200 rounded-lg shadow-lg min-w-[180px]",children:[n.jsxs("button",{onClick:Q,className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50 flex items-center gap-2",children:[n.jsx(fr,{className:"w-4 h-4"}),"Assign"]}),n.jsxs("button",{onClick:()=>T(!1),className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50 flex items-center gap-2",children:[n.jsx(Xn,{className:"w-4 h-4"}),"Schedule"]}),n.jsxs("button",{onClick:ke,className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50 flex items-center gap-2",children:[n.jsx(Gs,{className:"w-4 h-4"}),"Save draft"]}),n.jsx("div",{className:"border-t border-gray-200 my-1"}),n.jsxs("button",{onClick:q,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[n.jsx(Gr,{className:"w-4 h-4"}),"Discard draft"]})]})]})]}),n.jsx("button",{onClick:t,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Close",children:n.jsx(Rr,{className:"w-6 h-6"})})]})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"For"}),d.length>0?n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>w(!x),className:"w-full border border-gray-300 rounded-lg px-4 py-2 text-left flex items-center justify-between bg-white hover:bg-gray-50",children:[n.jsx("span",{className:h?"text-gray-900":"text-gray-500",children:p||"Select class"}),n.jsx(qr,{className:`w-5 h-5 text-gray-400 transition-transform ${x?"rotate-180":""}`})]}),x&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>w(!1)}),n.jsx("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:d.map(J=>n.jsxs("button",{onClick:()=>{f(J.id),v(J.title+(J.subject?` (${J.subject})`:"")),w(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 text-sm text-gray-900",children:[J.title,J.subject&&n.jsxs("span",{className:"text-gray-500 ml-2",children:["(",J.subject,")"]})]},J.id))})]})]}):n.jsx("div",{className:"border border-gray-300 rounded-lg px-4 py-2 bg-gray-50",children:n.jsx("span",{className:"text-gray-700",children:s||"Select class"})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign to"}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>P(!O),className:"w-full border border-gray-300 rounded-lg px-4 py-2 text-left flex items-center justify-between bg-white hover:bg-gray-50",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Sr,{className:"w-5 h-5 text-gray-600"}),n.jsx("span",{className:"text-gray-700",children:y.assignTo==="all"?"All students":y.assignTo==="groups"?"Groups":"Selected students"})]}),n.jsx(qr,{className:"w-5 h-5 text-gray-400"})]}),O&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>P(!1)}),n.jsxs("div",{className:"absolute z-20 w-full bg-white border border-gray-200 rounded-lg shadow-lg mt-1",children:[n.jsx("button",{onClick:()=>{he("assignTo","all"),he("selectedGroups",[]),he("selectedStudents",[]),P(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50",children:"All students"}),n.jsx("button",{onClick:()=>{he("assignTo","groups"),he("selectedStudents",[]),P(!1),ye(!0)},className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50",children:"Groups"}),n.jsx("button",{onClick:()=>{he("assignTo","students"),he("selectedGroups",[]),P(!1),de(!0)},className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50",children:"Selected students"})]})]})]}),y.assignTo==="groups"&&n.jsxs("div",{className:"mt-3 border border-gray-300 rounded-lg p-3 max-h-48 overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Select groups"}),n.jsxs("button",{onClick:()=>ye(!H),className:"text-sm text-blue-600 hover:text-blue-700",children:[H?"Hide":"Show"," groups"]})]}),H&&n.jsxs("div",{className:"space-y-2",children:[Ee.map(J=>n.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:y.selectedGroups?.includes(J)||!1,onChange:()=>K(J),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),n.jsx("span",{className:"text-sm text-gray-700",children:J})]},J)),Ee.length===0&&n.jsx("p",{className:"text-sm text-gray-500",children:"No groups available"})]}),y.selectedGroups&&y.selectedGroups.length>0&&n.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Selected groups:"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:y.selectedGroups.map(J=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:[J,n.jsx("button",{onClick:()=>K(J),className:"hover:text-blue-900",children:""})]},J))})]})]}),y.assignTo==="students"&&n.jsxs("div",{className:"mt-3 border border-gray-300 rounded-lg p-3 max-h-48 overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Select students"}),n.jsxs("button",{onClick:()=>de(!R),className:"text-sm text-blue-600 hover:text-blue-700",children:[R?"Hide":"Show"," students"]})]}),R&&n.jsxs("div",{className:"space-y-2",children:[De.map(J=>n.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:y.selectedStudents?.includes(J.id)||!1,onChange:()=>B(J.id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),n.jsxs("span",{className:"text-sm text-gray-700",children:[J.firstName," ",J.lastName,J.grupoAsignado&&n.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",J.grupoAsignado,")"]})]})]},J.id)),De.length===0&&n.jsx("p",{className:"text-sm text-gray-500",children:"No students available"})]}),y.selectedStudents&&y.selectedStudents.length>0&&n.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Selected students:"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:y.selectedStudents.map(J=>{const qe=De.find(Be=>Be.id===J);return qe?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-800 text-xs rounded",children:[qe.firstName," ",qe.lastName,n.jsx("button",{onClick:()=>B(J),className:"hover:text-green-900",children:""})]},J):null}).filter(Boolean)})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"quizTitle",className:"block text-sm font-medium text-gray-700 mb-1",children:"Form title"}),n.jsx("input",{type:"text",id:"quizTitle",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:y.title,onChange:J=>he("title",J.target.value),placeholder:"Blank Quiz"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"quizDescription",className:"block text-sm font-medium text-gray-700 mb-1",children:"Form description"}),n.jsx("textarea",{id:"quizDescription",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",value:y.description,onChange:J=>he("description",J.target.value),placeholder:"Add a description for your quiz..."})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Section 1 of 1"}),n.jsxs("button",{onClick:ae,className:"flex items-center gap-2 px-4 py-2 bg-blue-400 text-white rounded-lg hover:bg-blue-500 transition-colors text-sm",children:[n.jsx(Hr,{className:"w-4 h-4"}),"Add question"]})]}),y.questions.length===0?n.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:[n.jsx(fr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600 mb-2",children:"No questions yet"}),n.jsx("button",{onClick:ae,className:"text-blue-600 hover:text-blue-700 font-medium",children:"Add your first question"})]},"no-questions"):n.jsx("div",{className:"space-y-6",children:y.questions.map((J,qe)=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsxs("span",{className:"text-sm text-gray-500",children:["Question ",qe+1]}),n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",value:J.title,onChange:Be=>re(J.id,"title",Be.target.value),placeholder:"Untitled Question"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>ge(J.id),className:"p-2 text-gray-600 hover:bg-gray-200 rounded transition-colors",title:"Duplicate question",children:n.jsx(Ah,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>z(J.id),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete question",children:n.jsx(Gr,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Type"}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>F(Be=>({...Be,[J.id]:!Be[J.id]})),className:"w-full border border-gray-300 rounded-lg px-4 py-2 text-left flex items-center justify-between bg-white hover:bg-gray-50",children:[n.jsx("span",{className:"text-gray-700",children:ce.find(Be=>Be.value===J.type)?.label||"Multiple choice"}),n.jsx(qr,{className:"w-5 h-5 text-gray-400"})]}),$[J.id]&&n.jsxs(pt.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>F(Be=>({...Be,[J.id]:!1}))}),n.jsx("div",{className:"absolute z-20 w-full bg-white border border-gray-200 rounded-lg shadow-lg mt-1 max-h-60 overflow-y-auto",children:ce.map(Be=>n.jsx("button",{onClick:()=>{re(J.id,"type",Be.value),F(ee=>({...ee,[J.id]:!1}))},className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50",children:Be.label},Be.value))})]},`menu-${J.id}`)]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",value:J.description,onChange:Be=>re(J.id,"description",Be.target.value),placeholder:"Add description (optional)"})]}),(J.type==="multiple-choice"||J.type==="checkboxes"||J.type==="dropdown")&&n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Options"}),n.jsxs("div",{className:"space-y-2",children:[J.options?.map((Be,ee)=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-gray-400"}),n.jsx("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",value:Be,onChange:Ye=>{const Ne=[...J.options||[]];Ne[ee]=Ye.target.value,re(J.id,"options",Ne)},placeholder:`Option ${ee+1}`})]}),J.options&&J.options.length>1&&n.jsx("button",{onClick:()=>we(J.id,ee),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",children:n.jsx(Gr,{className:"w-4 h-4"})})]},`${J.id}-option-${ee}`)),n.jsxs("button",{onClick:()=>Pe(J.id),className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center gap-1",children:[n.jsx(Hr,{className:"w-4 h-4"}),"Add option"]})]})]}),n.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:J.required,onChange:Be=>re(J.id,"required",Be.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Required"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-700",children:"Points:"}),n.jsx("input",{type:"number",min:"0",className:"w-20 px-2 py-1 border border-gray-300 rounded bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",value:J.points,onChange:Be=>re(J.id,"points",parseInt(Be.target.value)||0)})]})]}),n.jsxs("button",{className:"flex items-center gap-2 px-3 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded transition-colors",title:"Answer key",children:[n.jsx($a,{className:"w-4 h-4"}),"Answer key"]})]})]},J.id))},"questions-list")]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t border-gray-200",children:[n.jsxs("div",{className:"hidden",children:[n.jsx("label",{htmlFor:"points",className:"block text-sm font-medium text-gray-700 mb-1",children:"Points"}),n.jsx("input",{type:"number",id:"points",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:y.points||"",onChange:J=>he("points",J.target.value?parseInt(J.target.value):void 0),placeholder:"100"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Due"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"date",id:"dueDate",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:y.dueDate||"",onChange:J=>he("dueDate",J.target.value)}),n.jsx("input",{type:"time",id:"dueTime",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 hidden",value:y.dueTime||"",onChange:J=>he("dueTime",J.target.value)})]})]}),n.jsxs("div",{className:"hidden",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Topic"}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>I(!A),className:"w-full border border-gray-300 rounded-lg px-4 py-2 text-left flex items-center justify-between bg-white hover:bg-gray-50",children:[n.jsx("span",{className:"text-gray-700",children:y.topic||"No topic"}),n.jsx(qr,{className:"w-5 h-5 text-gray-400"})]}),A&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>I(!1)}),n.jsxs("div",{className:"absolute z-20 w-full bg-white border border-gray-200 rounded-lg shadow-lg mt-1",children:[n.jsx("button",{onClick:()=>{he("topic","No topic"),I(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50",children:"No topic"}),n.jsx("button",{onClick:()=>{I(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50",children:"Create topic"})]})]})]})]})]})]}),n.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex justify-end gap-3",children:[n.jsx(He,{variant:"outline",onClick:t,children:"Cancel"}),n.jsx(He,{onClick:Q,disabled:!y.title.trim(),children:"Assign"})]})]})}):null},sO=()=>{const e=Kr(),{user:t}=$t(),[r,s]=j.useState("assignments"),[o,i]=j.useState([]),[c,d]=j.useState([]),[h,f]=j.useState([]),[p,v]=j.useState([]),[x,w]=j.useState(!0),[y,S]=j.useState(null),[C,T]=j.useState(!1),[A,I]=j.useState(null),[O,P]=j.useState([]),[$,F]=j.useState(""),[te,ne]=j.useState(!1),[Ee,Se]=j.useState(!1),[De,U]=j.useState(!1),[H,ye]=j.useState(null),[R,de]=j.useState("");j.useEffect(()=>{he(),V()},[r]);const V=async()=>{try{if(!t?.id)return;let q=[];if(!ig){const J=await ko(t.id),qe=await mg();q=[...J,...qe]}const ce=q.filter(J=>!J.isArchived).map(J=>({id:J.id,title:J.title||J.subject||"Sin nombre",subject:J.subject})).sort((J,qe)=>J.title.localeCompare(qe.title));console.log(" Clases disponibles:",ce),P(ce)}catch(q){console.error("Error loading classes:",q)}},he=async()=>{w(!0);try{if(r==="classes"){const q=await mg();i(q)}else if(r==="assignments"){const q=await p5();d(q)}else if(r==="quizzes"){const q=await eb("quiz");f(q)}else if(r==="materials"){const q=await eb("material");v(q)}}catch(q){console.error("Error loading archived items:",q)}finally{w(!1)}},K=async()=>{if(!A&&!H||!$.trim()){alert("Por favor, selecciona una clase");return}const q=O.find(J=>J.id===$||J.title===$),ce=q?.title||q?.subject||$||"Sin clase";if(H){de($);const J=O.find(qe=>qe.id===$)?.id||$;de(J),de(J);return}try{A&&(A.type==="assignment"?await Zy(A.streamItemId,ce):await gg(A.streamItemId,ce)),T(!1),I(null),F(""),await he()}catch(J){console.error("Error restoring item:",J),alert("Error al restaurar el elemento")}},B=q=>{e(`/dashboard/classes/${q}`)},re=q=>{e(`/dashboard/classes/${q}?tab=grades`)},ae=async q=>{try{const ce=await wi(q.streamItemId);ce&&S({...q,...ce,type:"assignment"})}catch(ce){console.error("Error loading assignment:",ce),alert("Error al cargar el assignment.")}},z=async q=>{try{const ce=await yl(q.id);ce&&S({...q,...ce,type:"quiz"})}catch(ce){console.error("Error loading quiz:",ce),alert("Error al cargar el quiz.")}},ge=async q=>{try{const ce=await ch(q.id);ce&&S({...q,...ce,type:"material"})}catch(ce){console.error("Error loading material:",ce),alert("Error al cargar el material.")}},Pe=async(q,ce)=>{let J=q;try{if(ce==="assignment"){const Be=await wi(q.streamItemId);Be&&(J={...q,...Be})}else if(ce==="quiz"){const Be=await yl(q.id);Be&&(J={...q,...Be})}}catch(Be){console.error("Error fetching full details for republish:",Be)}const qe={...J,id:void 0,createdAt:void 0,updatedAt:void 0,dueDate:void 0,dueTime:void 0,assignTo:"all",selectedStudents:[],selectedGroups:[]};ye({item:qe,type:ce,originalStreamItemId:q.streamItemId||q.stream_item_id||q.id,originalClassName:q.className}),V(),ce==="assignment"?Se(!0):U(!0)},we=async q=>{const ce=q.classId||R;if(!ce){alert("Por favor selecciona una clase destino en el formulario.");return}try{console.log("Republicando assignment en clase:",ce);const J=$t.getState().user,qe=await yo({classId:ce,type:"assignment",title:q.title,content:q.instructions||"",authorId:J?.id||"unknown"});if(await ed({...q,streamItemId:qe.id,classId:ce,id:void 0}),alert("Assignment republicado exitosamente"),Se(!1),H?.originalStreamItemId)try{console.log("Desarchivando item original:",H.originalStreamItemId),await Zy(H.originalStreamItemId,H.originalClassName)}catch(Be){console.error("Error desarchivando original:",Be)}ye(null),await he()}catch(J){console.error("Error republicando assignment:",J),alert("Error al republicar el assignment")}},Q=async q=>{const ce=q.classId||R;if(!ce){alert("Por favor selecciona una clase destino en el formulario.");return}try{console.log("Republicando quiz en clase:",ce);const J=$t.getState().user,qe=await yo({classId:ce,type:"quiz",title:q.title,content:q.description||"",authorId:J?.id||"unknown"});if(await Ph({...q,streamItemId:qe.id,classId:ce,id:void 0}),U(!1),H?.originalStreamItemId)try{await gg(H.originalStreamItemId,H.originalClassName)}catch(Be){console.error("Error desarchivando original:",Be)}ye(null),await he()}catch(J){console.error("Error republicando quiz:",J),alert("Error al republicar el quiz")}},ke=[{id:"assignments",label:"Assignments",icon:fr},{id:"quizzes",label:"Quizzes",icon:Ih},{id:"materials",label:"Materials",icon:lg}];return y?n.jsxs("div",{className:"space-y-6 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("button",{onClick:()=>S(null),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[n.jsx(Rr,{className:"w-5 h-5"}),n.jsx("span",{children:"Volver a elementos archivados"})]}),y.classId&&n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>Pe(y,y.type),className:"px-4 py-2 text-sm bg-brand-green-medium text-white rounded hover:bg-brand-green-dark transition-colors flex items-center gap-2",children:[n.jsx(Ma,{className:"w-4 h-4"}),"Republicar"]}),n.jsxs("button",{onClick:()=>{S(null),e(`/dashboard/classes/${y.classId}?tab=classwork`)},className:"px-4 py-2 text-sm bg-blue-400 text-white rounded hover:bg-blue-500 transition-colors flex items-center gap-2",children:[n.jsx(Sl,{className:"w-4 h-4"}),"Ir a la clase"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-lg p-8",children:[n.jsx("h1",{className:"text-3xl font-semibold text-gray-900 mb-4",children:y.title}),y.className&&n.jsx("div",{className:"mb-6",children:n.jsx("span",{className:"inline-block text-sm px-3 py-1 bg-blue-100 text-blue-800 rounded",children:y.className})}),(y.instructions||y.description)&&n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-3",children:y.type==="quiz"||y.type==="material"?"Descripcin":"Instrucciones"}),n.jsx("div",{className:"prose max-w-none",children:n.jsx("p",{className:"text-gray-700 whitespace-pre-wrap leading-relaxed",children:y.instructions||y.description})})]}),y.attachments&&y.attachments.length>0&&n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-3",children:"Archivos adjuntos"}),n.jsx("div",{className:"space-y-2",children:y.attachments.map(q=>n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100 transition-colors",children:[n.jsx(Us,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:q.name||"Google Drive file"}),q.url&&n.jsx("a",{href:q.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline truncate block",children:q.url})]}),q.url&&n.jsx("a",{href:q.url,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 text-sm bg-blue-400 text-white rounded hover:bg-blue-500 transition-colors",children:"Abrir"})]},q.id||q.url))})]}),y.type==="quiz"&&y.questions&&y.questions.length>0&&n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Preguntas"}),n.jsx("div",{className:"space-y-4",children:y.questions.map((q,ce)=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("h3",{className:"font-medium text-gray-900",children:["Pregunta ",ce+1,": ",q.title]}),n.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-600 rounded",children:q.type})]}),q.description&&n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:q.description}),q.options&&q.options.length>0&&n.jsx("ul",{className:"list-disc list-inside text-sm text-gray-700 space-y-1",children:q.options.map((J,qe)=>n.jsx("li",{children:J},qe))})]},q.id||ce))})]}),n.jsx("div",{className:"border-t border-gray-200 pt-6 mt-6",children:n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[y.points&&n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Puntos:"}),n.jsx("span",{className:"ml-2 font-medium text-gray-900",children:y.points})]}),Ee&&H?.type==="assignment"&&n.jsx(Zx,{isOpen:Ee,onClose:()=>{Se(!1),ye(null)},classId:R,availableClasses:O,initialData:H.item,onSave:we}),De&&H?.type==="quiz"&&n.jsx(zN,{isOpen:De,onClose:()=>{U(!1),ye(null)},classId:R,availableClasses:O,initialData:H.item,onSave:Q}),C&&!H&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:H?"Seleccionar clase destino":"Seleccionar Clase"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:H?"Selecciona la clase donde deseas republicar este contenido:":"La clase asociada fue eliminada. Por favor, selecciona una clase disponible:"}),n.jsxs("div",{className:"relative mb-4",children:[n.jsxs("button",{onClick:()=>ne(!te),className:"w-full border border-gray-300 rounded-lg px-4 py-2 text-left flex items-center justify-between bg-white hover:bg-gray-50",children:[n.jsx("span",{className:$?"text-gray-900":"text-gray-500",children:$?O.find(q=>q.id===$||q.title===$)?.title||$:"Selecciona una clase"}),n.jsx(qr,{className:`w-5 h-5 text-gray-400 transition-transform ${te?"rotate-180":""}`})]}),te&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>ne(!1)}),n.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[O.map(q=>n.jsxs("button",{onClick:()=>{F(q.id),ne(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 text-sm text-gray-900",children:[q.title,q.subject&&n.jsxs("span",{className:"text-gray-500 ml-2",children:["(",q.subject,")"]})]},q.id)),O.length===0&&n.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:"No hay clases disponibles"})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-3",children:[n.jsx("button",{onClick:()=>{T(!1),I(null),ye(null)},className:"px-4 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancelar"}),n.jsx("button",{onClick:K,disabled:!$,className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:H?"Continuar":"Restaurar"})]})]})}),y.dueDate&&n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Fecha lmite:"}),n.jsxs("span",{className:"ml-2 font-medium text-gray-900",children:[new Date(y.dueDate).toLocaleDateString(),y.dueTime&&` ${y.dueTime}`]})]}),y.author&&n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Autor:"}),n.jsx("span",{className:"ml-2 font-medium text-gray-900",children:y.author.name})]}),y.createdAt&&n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Creado:"}),n.jsx("span",{className:"ml-2 font-medium text-gray-900",children:new Date(y.createdAt).toLocaleDateString()})]})]})})]})]}):n.jsxs("div",{className:"space-y-6 p-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-black mb-2",children:"Archived"}),n.jsx("p",{className:"text-gray-600",children:"Elementos archivados: clases, assignments, quizzes y materials"})]})}),n.jsx("div",{className:"border-b border-gray-200",children:n.jsx("nav",{className:"flex gap-6",children:ke.map(q=>{const ce=q.icon;return n.jsxs("button",{onClick:()=>s(q.id),className:`pb-3 px-1 text-sm font-medium border-b-2 transition-colors flex items-center gap-2 ${r===q.id?"border-brand-green-medium text-brand-green-medium":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[n.jsx(ce,{className:"w-4 h-4"}),q.label]},q.id)})})}),x?n.jsx("div",{className:"text-center py-12 text-gray-500",children:"Cargando elementos archivados..."}):n.jsxs(n.Fragment,{children:[r==="classes"&&n.jsx(n.Fragment,{children:o.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(da,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600 mb-2",children:"No hay clases archivadas"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(q=>n.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow bg-white",children:[n.jsxs("div",{className:"h-32 bg-cover bg-center relative",style:{backgroundImage:`url(${Ci})`},children:[n.jsx("div",{className:"absolute inset-0 bg-black/40"}),n.jsxs("div",{className:"relative z-10 p-4 h-full flex flex-col justify-end",children:[n.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:q.title}),q.module?.title&&n.jsx("p",{className:"text-white/80 text-sm",children:q.module.title})]})]}),n.jsxs("div",{className:"p-4",children:[q.description&&n.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:q.description}),q.subject&&n.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["Materia: ",q.subject]}),q.teacher&&n.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:["Profesor: ",q.teacher.firstName," ",q.teacher.lastName]}),n.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[n.jsx("button",{onClick:()=>B(q.id),className:"flex-1 px-3 py-2 text-sm bg-blue-400 text-white rounded hover:bg-blue-500 transition-colors",children:"Ver clase"}),n.jsxs("button",{onClick:()=>re(q.id),className:"flex items-center justify-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:[n.jsx(Sl,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden md:inline",children:"Gradebook"})]})]})]})]},q.id))})}),r==="assignments"&&n.jsx(n.Fragment,{children:c.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(da,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600 mb-2",children:"No hay assignments archivados"})]}):n.jsx("div",{className:"space-y-4",children:c.map(q=>n.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(fr,{className:"w-5 h-5 text-gray-600"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:q.title}),q.className&&q.className!=="Sin clase"&&n.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded",children:q.className})]}),q.instructions&&n.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:q.instructions}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mt-2",children:[q.points&&n.jsx("span",{className:"flex items-center gap-1",children:n.jsxs("span",{children:[q.points," puntos"]})}),q.dueDate&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Xn,{className:"w-4 h-4"}),n.jsxs("span",{children:[new Date(q.dueDate).toLocaleDateString(),q.dueTime&&` ${q.dueTime}`]})]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Sr,{className:"w-4 h-4"}),n.jsx("span",{children:q.author.name})]})]})]}),n.jsx("div",{className:"flex items-center gap-2 ml-4",children:n.jsx("button",{onClick:()=>ae(q),className:"px-3 py-2 text-sm bg-blue-400 text-white rounded hover:bg-blue-500 transition-colors",children:"Ver"})})]})},q.id))})}),r==="quizzes"&&n.jsx(n.Fragment,{children:h.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(da,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600 mb-2",children:"No hay quizzes archivados"})]}):n.jsx("div",{className:"space-y-4",children:h.map(q=>n.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Ih,{className:"w-5 h-5 text-gray-600"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:q.title}),q.className&&q.className!=="Sin clase"&&n.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded",children:q.className})]}),q.content&&n.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:q.content}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mt-2",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Sr,{className:"w-4 h-4"}),n.jsx("span",{children:q.author.name})]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Xn,{className:"w-4 h-4"}),n.jsx("span",{children:new Date(q.createdAt).toLocaleDateString()})]})]})]}),n.jsx("div",{className:"flex items-center gap-2 ml-4",children:n.jsx("button",{onClick:()=>z(q),className:"px-3 py-2 text-sm bg-blue-400 text-white rounded hover:bg-blue-500 transition-colors",children:"Ver"})})]})},q.id))})}),r==="materials"&&n.jsx(n.Fragment,{children:p.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(da,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600 mb-2",children:"No hay materials archivados"})]}):n.jsx("div",{className:"space-y-4",children:p.map(q=>n.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(lg,{className:"w-5 h-5 text-gray-600"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:q.title}),q.className&&q.className!=="Sin clase"&&n.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded",children:q.className})]}),q.content&&n.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:q.content}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mt-2",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Sr,{className:"w-4 h-4"}),n.jsx("span",{children:q.author.name})]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Xn,{className:"w-4 h-4"}),n.jsx("span",{children:new Date(q.createdAt).toLocaleDateString()})]})]})]}),n.jsx("div",{className:"flex items-center gap-2 ml-4",children:n.jsx("button",{onClick:()=>ge(q),className:"px-3 py-2 text-sm bg-blue-400 text-white rounded hover:bg-blue-500 transition-colors",children:"Ver"})})]})},q.id))})})]}),C&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Seleccionar Clase"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"La clase asociada fue eliminada. Por favor, selecciona una clase disponible:"}),n.jsxs("div",{className:"relative mb-4",children:[n.jsxs("button",{onClick:()=>ne(!te),className:"w-full border border-gray-300 rounded-lg px-4 py-2 text-left flex items-center justify-between bg-white hover:bg-gray-50",children:[n.jsx("span",{className:$?"text-gray-900":"text-gray-500",children:$?O.find(q=>q.id===$||q.title===$)?.title||$:"Selecciona una clase"}),n.jsx(qr,{className:`w-5 h-5 text-gray-400 transition-transform ${te?"rotate-180":""}`})]}),te&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>ne(!1)}),n.jsx("div",{className:"absolute z-20 w-full bg-white border border-gray-200 rounded-lg shadow-lg mt-1 max-h-60 overflow-y-auto",children:O.length>0?O.map(q=>n.jsxs("button",{onClick:()=>{F(q.id),ne(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:[n.jsx("div",{className:"font-medium",children:q.title}),q.subject&&n.jsx("div",{className:"text-xs text-gray-500",children:q.subject})]},q.id)):n.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:"No hay clases disponibles"})})]})]}),n.jsxs("div",{className:"flex gap-3 justify-end",children:[n.jsx("button",{onClick:()=>{T(!1),I(null),F(""),ne(!1)},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancelar"}),n.jsx("button",{onClick:K,disabled:!$.trim(),className:"px-4 py-2 text-sm text-white bg-blue-400 rounded-lg hover:bg-blue-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Restaurar"})]})]})})]})},aO=({isOpen:e,onClose:t,classId:r,className:s="",onSave:o,initialData:i,isEdit:c=!1})=>{const[d,h]=j.useState({title:"",description:"",topic:"No topic",assignTo:"all",selectedGroups:[],selectedStudents:[],attachments:[]}),[f,p]=j.useState(!1),[v,x]=j.useState(!1),[w,y]=j.useState(!1),[S,C]=j.useState(!1),[T,A]=j.useState(!1),[I,O]=j.useState(""),[P,$]=j.useState(!1),[F,te]=j.useState([]),[ne,Ee]=j.useState([]),[Se,De]=j.useState(!1),[U,H]=j.useState(!1),[ye,R]=j.useState({});j.useEffect(()=>{e&&(de(),i?(console.log(" MaterialModal - Loading initialData:",i),console.log(" MaterialModal - initialData.title:",i.title),h({title:i.title||"",description:i.description||"",topic:i.topic||"No topic",assignTo:i.assignTo||"all",selectedGroups:i.selectedGroups||[],selectedStudents:i.selectedStudents||[],attachments:i.attachments||[]})):h({title:"",description:"",topic:"No topic",assignTo:"all",selectedGroups:[],selectedStudents:[],attachments:[]}),O(""),$(!1),R({}))},[e,i]);const de=async()=>{try{const[ge,Pe]=await Promise.all([ux(),fx()]);te(ge),Ee(Pe)}catch(ge){console.error("Error loading groups and students:",ge)}},V=ge=>{const Pe=d.selectedGroups||[];Pe.includes(ge)?K("selectedGroups",Pe.filter(we=>we!==ge)):K("selectedGroups",[...Pe,ge])},he=ge=>{const Pe=d.selectedStudents||[];Pe.includes(ge)?K("selectedStudents",Pe.filter(we=>we!==ge)):K("selectedStudents",[...Pe,ge])},K=(ge,Pe)=>{h(we=>({...we,[ge]:Pe})),ye[ge]&&R(we=>({...we,[ge]:""}))},B=()=>{if(!d.title.trim()){R({title:"Title is required"});return}console.log(" Posting material with attachments:",d.attachments),o&&o(d),t()},re=()=>{console.log("Saving draft:",d),p(!1)},ae=()=>{confirm("Are you sure you want to discard this draft?")&&(h({title:"",description:"",topic:"No topic",assignTo:"all",selectedStudents:[],attachments:[]}),p(!1),t())},z=ge=>{h(Pe=>({...Pe,attachments:Pe.attachments?.filter(we=>we.id!==ge)||[]}))};return e?n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 p-4 overflow-y-auto",onClick:t,children:n.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto relative my-8",onClick:ge=>ge.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"material-modal-title",children:[n.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-gray-100 rounded-full",children:n.jsx(tx,{className:"w-6 h-6 text-gray-600"})}),n.jsx("h2",{id:"material-modal-title",className:"text-2xl font-medium text-gray-900",children:"Material"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:B,disabled:!d.title||!d.title.trim(),className:"px-4 py-2 bg-blue-400 text-white rounded-lg hover:bg-blue-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",title:!d.title||!d.title.trim()?"Title is required":"Post material",children:[n.jsx("span",{children:"Post"}),n.jsx(qr,{className:"w-4 h-4"})]}),f&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>p(!1)}),n.jsxs("div",{className:"absolute right-0 top-10 z-20 bg-white border border-gray-200 rounded-lg shadow-lg min-w-[180px]",children:[n.jsxs("button",{onClick:B,className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50 flex items-center gap-2",children:[n.jsx(fr,{className:"w-4 h-4"}),"Post"]}),n.jsxs("button",{onClick:()=>p(!1),className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50 flex items-center gap-2",children:[n.jsx(Xn,{className:"w-4 h-4"}),"Schedule"]}),n.jsxs("button",{onClick:re,className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50 flex items-center gap-2",children:[n.jsx(Gs,{className:"w-4 h-4"}),"Save draft"]}),n.jsx("div",{className:"border-t border-gray-200 my-1"}),n.jsxs("button",{onClick:ae,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[n.jsx(Gr,{className:"w-4 h-4"}),"Discard draft"]})]})]})]}),n.jsx("div",{className:"relative",children:n.jsx("button",{onClick:()=>p(!f),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Save options",children:n.jsx(jo,{className:"w-5 h-5"})})}),n.jsx("button",{onClick:t,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Close",children:n.jsx(Rr,{className:"w-6 h-6"})})]})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"For"}),n.jsx("div",{className:"border border-gray-300 rounded-lg px-4 py-2 bg-gray-50",children:n.jsx("span",{className:"text-gray-700",children:s||"Select class"})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign to"}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>y(!w),className:"w-full border border-gray-300 rounded-lg px-4 py-2 text-left flex items-center justify-between bg-white hover:bg-gray-50",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Sr,{className:"w-5 h-5 text-gray-600"}),n.jsx("span",{className:"text-gray-700",children:d.assignTo==="all"?"All students":d.assignTo==="groups"?`Groups (${d.selectedGroups?.length||0} selected)`:`Students (${d.selectedStudents?.length||0} selected)`})]}),n.jsx(qr,{className:"w-5 h-5 text-gray-400"})]}),w&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>y(!1)}),n.jsxs("div",{className:"absolute z-20 w-full bg-white border border-gray-200 rounded-lg shadow-lg mt-1",children:[n.jsx("button",{onClick:()=>{K("assignTo","all"),K("selectedGroups",[]),K("selectedStudents",[]),y(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50",children:"All students"}),n.jsx("button",{onClick:()=>{K("assignTo","groups"),K("selectedStudents",[]),y(!1),De(!0)},className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50",children:"Groups"}),n.jsx("button",{onClick:()=>{K("assignTo","students"),K("selectedGroups",[]),y(!1),H(!0)},className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50",children:"Selected students"})]})]})]}),d.assignTo==="groups"&&n.jsxs("div",{className:"mt-3 border border-gray-300 rounded-lg p-3 max-h-48 overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Select groups"}),n.jsxs("button",{onClick:()=>De(!Se),className:"text-sm text-blue-600 hover:text-blue-700",children:[Se?"Hide":"Show"," groups"]})]}),Se&&n.jsxs("div",{className:"space-y-2",children:[F.map(ge=>n.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:d.selectedGroups?.includes(ge)||!1,onChange:()=>V(ge),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),n.jsx("span",{className:"text-sm text-gray-700",children:ge})]},ge)),F.length===0&&n.jsx("p",{className:"text-sm text-gray-500",children:"No groups available"})]}),d.selectedGroups&&d.selectedGroups.length>0&&n.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Selected groups:"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:d.selectedGroups.map(ge=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:[ge,n.jsx("button",{onClick:()=>V(ge),className:"hover:text-blue-900",children:""})]},ge))})]})]}),d.assignTo==="students"&&n.jsxs("div",{className:"mt-3 border border-gray-300 rounded-lg p-3 max-h-48 overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Select students"}),n.jsxs("button",{onClick:()=>H(!U),className:"text-sm text-blue-600 hover:text-blue-700",children:[U?"Hide":"Show"," students"]})]}),U&&n.jsxs("div",{className:"space-y-2",children:[ne.map(ge=>n.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:d.selectedStudents?.includes(ge.id)||!1,onChange:()=>he(ge.id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),n.jsxs("span",{className:"text-sm text-gray-700",children:[ge.firstName," ",ge.lastName,ge.grupoAsignado&&n.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",ge.grupoAsignado,")"]})]})]},ge.id)),ne.length===0&&n.jsx("p",{className:"text-sm text-gray-500",children:"No students available"})]}),d.selectedStudents&&d.selectedStudents.length>0&&n.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Selected students:"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:d.selectedStudents.map(ge=>{const Pe=ne.find(we=>we.id===ge);return Pe?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-800 text-xs rounded",children:[Pe.firstName," ",Pe.lastName,n.jsx("button",{onClick:()=>he(ge),className:"hover:text-green-900",children:""})]},ge):null})})]})]})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"materialTitle",className:"block text-sm font-medium text-gray-700 mb-1",children:["Title",n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),n.jsx("input",{type:"text",id:"materialTitle",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:d.title,onChange:ge=>K("title",ge.target.value),placeholder:"Enter title",required:!0}),ye.title&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:ye.title}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"*Required"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"materialDescription",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (optional)"}),n.jsx("textarea",{id:"materialDescription",rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",value:d.description,onChange:ge=>K("description",ge.target.value),placeholder:"Add a description for your material..."}),n.jsxs("div",{className:"flex items-center gap-1 mt-2 p-2 bg-gray-50 rounded-lg border border-gray-200",children:[n.jsx("button",{className:"p-1 hover:bg-gray-200 rounded",title:"Bold",children:n.jsx("span",{className:"font-bold text-sm",children:"B"})}),n.jsx("button",{className:"p-1 hover:bg-gray-200 rounded",title:"Italic",children:n.jsx("span",{className:"italic text-sm",children:"I"})}),n.jsx("button",{className:"p-1 hover:bg-gray-200 rounded",title:"Underline",children:n.jsx("span",{className:"underline text-sm",children:"U"})}),n.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),n.jsx("button",{className:"p-1 hover:bg-gray-200 rounded",title:"Bulleted list",children:n.jsx("span",{className:"text-sm",children:""})})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Attach"}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("button",{onClick:()=>$(!P),className:"flex items-center gap-3 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors w-full",title:"Google Drive",children:[n.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded flex items-center justify-center flex-shrink-0",children:n.jsx(Us,{className:"w-6 h-6 text-blue-600"})}),n.jsx("span",{className:"text-sm text-gray-700",children:"Google Drive"})]}),P&&n.jsxs("div",{className:"pl-13 flex gap-2",children:[n.jsx("input",{type:"url",placeholder:"Pega el link de Google Drive aqu",value:I,onChange:ge=>O(ge.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onKeyDown:ge=>{if(ge.key==="Enter"&&I.trim()){const Pe={id:`attachment_${Date.now()}`,type:"drive",url:I.trim(),name:"Google Drive file"};console.log(" Adding Google Drive attachment:",Pe),K("attachments",[...d.attachments||[],Pe]),O(""),$(!1)}}}),n.jsx("button",{onClick:()=>{if(I.trim()){const ge={id:`attachment_${Date.now()}`,type:"drive",url:I.trim(),name:"Google Drive file"};console.log(" Adding Google Drive attachment:",ge),K("attachments",[...d.attachments||[],ge]),O(""),$(!1)}},className:"px-4 py-2 bg-blue-400 text-white rounded-lg hover:bg-blue-500 transition-colors",children:"Agregar"})]}),d.attachments&&d.attachments.length>0&&n.jsx("div",{className:"pl-13 space-y-2",children:d.attachments.map((ge,Pe)=>n.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg",children:[n.jsx(Us,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}),n.jsx("a",{href:ge.url,target:"_blank",rel:"noopener noreferrer",className:"flex-1 text-sm text-blue-600 hover:underline truncate",children:ge.url}),n.jsx("button",{onClick:()=>z(ge.id),className:"p-1 hover:bg-gray-200 rounded transition-colors",title:"Eliminar",children:n.jsx(Gr,{className:"w-4 h-4 text-gray-600"})})]},ge.id||Pe))})]})]}),n.jsxs("div",{className:"hidden",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Topic"}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>x(!v),className:"w-full border border-gray-300 rounded-lg px-4 py-2 text-left flex items-center justify-between bg-white hover:bg-gray-50",children:[n.jsx("span",{className:"text-gray-700",children:d.topic||"No topic"}),n.jsx(qr,{className:"w-5 h-5 text-gray-400"})]}),v&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>x(!1)}),n.jsxs("div",{className:"absolute z-20 w-full bg-white border border-gray-200 rounded-lg shadow-lg mt-1",children:[n.jsx("button",{onClick:()=>{K("topic","No topic"),x(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50",children:"No topic"}),n.jsx("button",{onClick:()=>{x(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50",children:"Create topic"})]})]})]})]})]}),n.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex justify-end gap-3",children:[n.jsx(He,{variant:"outline",onClick:t,children:"Cancel"}),n.jsx(He,{onClick:B,disabled:!d.title||!d.title.trim(),children:"Post"})]})]})}):null},iO=({classId:e,isTeacher:t=!0,className:r=""})=>{const{user:s}=$t(),o=Kr(),[i,c]=j.useState(!1),[d,h]=j.useState([]),[f,p]=j.useState([]),[v,x]=j.useState(!0),[w,y]=j.useState(!1),[S,C]=j.useState(!1),[T,A]=j.useState(!1),[I,O]=j.useState(null),[P,$]=j.useState(null),[F,te]=j.useState(null),[ne,Ee]=j.useState(null),[Se,De]=j.useState(!1),[U,H]=j.useState(!1),[ye,R]=j.useState(null),[de,V]=j.useState(null);j.useEffect(()=>{K(),he()},[e,s?.id]);const he=async()=>{if(e)try{const ee=await dh(e);p(ee)}catch(ee){console.error("Error loading students:",ee)}},K=async()=>{if(s?.id){x(!0);try{console.log(" Classwork.loadAssignments - classId:",e,"user.role:",s.role);let ee=[];if(e){console.log(" Calling getAssignmentsByClass with classId:",e);const Ye=await f5(e,!1);console.log(" Loaded assignments for classId:",e,"count:",Ye.length),console.log(" Assignment details:",Ye.map(kt=>({id:kt.id,classId:kt.classId||"NO CLASSID",title:kt.title,streamItemId:kt.streamItemId})));const Ne=Ye.filter(kt=>{const xt=kt.classId===e;return xt||console.warn(" Assignment filtered out - classId mismatch:",{assignmentId:kt.id,assignmentClassId:kt.classId,expectedClassId:e,title:kt.title}),xt});console.log(" After additional filtering:",Ne.length,"assignments"),ee=[...ee,...Ne]}else s.role==="admin"&&(ee=[...ee,...await mx()]);e?ee=[...ee,...await g5(e,!1)]:s.role==="admin"&&(ee=[...ee,...await px()]),e?ee=[...ee,...await x5(e,!1)]:s.role==="admin"&&(ee=[...ee,...await I2()]),console.log("Items before filtering:",ee.map(Ye=>({id:Ye.id,title:Ye.title,isArchived:Ye.isArchived,type:Ye.type}))),ee=ee.filter(Ye=>{const Ne=Ye.isArchived===!0||Ye.isArchived==="true"||Ye.is_archived===!0||Ye.is_archived==="true";return Ne&&console.log("Filtering out archived item:",Ye.title,Ye.id,"isArchived:",Ye.isArchived,"is_archived:",Ye.is_archived),!Ne}),console.log("Loaded items after filtering:",ee.length,"items"),h(ee)}catch(ee){console.error("Error loading items:",ee)}finally{x(!1)}}},B=()=>{c(!i)},re=()=>{c(!1),y(!0)},ae=()=>{c(!1),C(!0)},z=async ee=>{if(!e||!s?.id){console.error("Cannot save assignment: classId or userId is missing"),alert(`Cannot save: ${e?"Missing User ID":"Missing Class ID"}`);return}try{console.log(" Saving assignment:",ee),console.log(" classId being used:",e),console.log(" user.id:",s.id);const Ye=await yo({classId:e,type:"assignment",title:ee.title,content:ee.instructions,authorId:s.id,className:r,attachments:ee.attachments?.map(Ne=>({type:Ne.type||"drive",name:Ne.name||"",url:Ne.url,filePath:Ne.filePath,fileSize:Ne.fileSize,mimeType:Ne.mimeType}))||[]});console.log(" Stream item saved:",Ye.id,"classId:",Ye.classId),await ed({streamItemId:Ye.id||"",points:ee.points,dueDate:ee.dueDate,dueTime:ee.dueTime,instructions:ee.instructions,assignToAll:ee.assignTo==="all",assignedGroups:ee.assignTo==="groups"?ee.selectedGroups:[],selectedStudents:ee.assignTo==="students"?ee.selectedStudents:[]}),console.log(" Assignment saved successfully"),await K(),y(!1)}catch(Ye){console.error("Error saving assignment:",Ye),alert("Error al guardar el assignment. Por favor, intenta de nuevo.")}},ge=async ee=>{if(!e||!s?.id){console.error("Cannot save quiz: classId or userId is missing"),alert(`Cannot save: ${e?"Missing User ID":"Missing Class ID"}`);return}try{if(console.log("Saving quiz:",ee),F){const Ye={title:ee.title};ee.description&&(Ye.content=ee.description),await uh(F.id,Ye),await Ph({streamItemId:F.id,points:ee.points,dueDate:ee.dueDate,dueTime:ee.dueTime,description:ee.description,assignToAll:ee.assignTo==="all",assignedGroups:ee.assignTo==="groups"?ee.selectedGroups:[],selectedStudents:ee.assignTo==="students"?ee.selectedStudents:[],questions:ee.questions?.map((Ne,kt)=>({...Ne,order:kt}))||[]}),await K(),C(!1),te(null)}else{const Ye=await yo({classId:e,type:"quiz",title:ee.title,content:ee.description,authorId:s.id,className:r,attachments:[]});await Ph({streamItemId:Ye.id||"",points:ee.points,dueDate:ee.dueDate,dueTime:ee.dueTime,description:ee.description,assignToAll:ee.assignTo==="all",assignedGroups:ee.assignTo==="groups"?ee.selectedGroups:[],selectedStudents:ee.assignTo==="students"?ee.selectedStudents:[],questions:ee.questions?.map((Ne,kt)=>({...Ne,order:kt}))||[]}),console.log(" Quiz saved successfully"),await K(),C(!1)}}catch(Ye){console.error("Error saving quiz:",Ye),alert("Error al guardar el quiz. Por favor, intenta de nuevo.")}},Pe=async ee=>{if(!e||!s?.id){console.error("Cannot save material: classId or userId is missing"),alert(`Cannot save: ${e?"Missing User ID":"Missing Class ID"}`);return}try{if(console.log("Saving material:",ee),ne){const Ye={title:ee.title};ee.description&&(Ye.content=ee.description),ee.attachments&&(Ye.attachments=ee.attachments.map(Ne=>({type:Ne.type||"drive",name:Ne.name||"",url:Ne.url,filePath:Ne.filePath,fileSize:Ne.fileSize,mimeType:Ne.mimeType}))),await uh(ne.id,Ye),await Mh({streamItemId:ne.id,description:ee.description,assignToAll:ee.assignTo==="all",assignedGroups:ee.assignTo==="groups"?ee.selectedGroups:[],selectedStudents:ee.assignTo==="students"?ee.selectedStudents:[]}),await K(),A(!1),Ee(null)}else{const Ye=await yo({classId:e,type:"material",title:ee.title,content:ee.description,authorId:s.id,className:r,attachments:ee.attachments?.map(Ne=>({type:Ne.type||"drive",name:Ne.name||"",url:Ne.url,filePath:Ne.filePath,fileSize:Ne.fileSize,mimeType:Ne.mimeType}))||[]});await Mh({streamItemId:Ye.id||"",description:ee.description,assignToAll:ee.assignTo==="all",assignedGroups:ee.assignTo==="groups"?ee.selectedGroups:[],selectedStudents:ee.assignTo==="students"?ee.selectedStudents:[]}),console.log(" Material saved successfully"),await K(),A(!1)}}catch(Ye){console.error("Error saving material:",Ye),alert("Error al guardar el material. Por favor, intenta de nuevo.")}},we=()=>{c(!1),console.log("Create question")},Q=()=>{c(!1),A(!0)},ke=()=>{c(!1),console.log("Reuse post")},q=()=>{c(!1),console.log("Create topic")},ce=async ee=>{try{const Ye=ee.type||"assignment";if(Ye==="assignment"){const Ne=await wi(ee.streamItemId);if(Ne){console.log("handleEditItem - item:",ee),console.log("handleEditItem - fullAssignment:",Ne);const xt={title:Ne.title||ee.title||"",instructions:ee.instructions||Ne.instructions||"",points:Ne.points,dueDate:Ne.dueDate,dueTime:Ne.dueTime,assignTo:Ne.assignToAll?"all":(Ne.assignedGroups?.length??0)>0?"groups":"students",selectedGroups:Ne.assignedGroups||[],selectedStudents:Ne.selectedStudents||[],attachments:Ne.attachments||ee.attachments||[]};console.log("handleEditItem - editData:",xt),$({id:ee.streamItemId,data:xt}),setTimeout(()=>{y(!0)},0)}}else if(Ye==="quiz"){const Ne=await yl(ee.streamItemId);Ne&&(te({id:ee.streamItemId,data:{title:ee.title,description:ee.description||Ne.description||"",points:Ne.points,dueDate:Ne.dueDate,dueTime:Ne.dueTime,assignTo:Ne.assignToAll?"all":(Ne.assignedGroups?.length??0)>0?"groups":"students",selectedGroups:Ne.assignedGroups||[],selectedStudents:Ne.selectedStudents||[],questions:Ne.questions||[]}}),C(!0))}else if(Ye==="material"){const Ne=await ch(ee.streamItemId);Ne&&(Ee({id:ee.streamItemId,data:{title:ee.title,description:ee.description||Ne.description||"",assignTo:Ne.assignToAll?"all":(Ne.assignedGroups?.length??0)>0?"groups":"students",selectedGroups:Ne.assignedGroups||[],selectedStudents:Ne.selectedStudents||[],attachments:Ne.attachments||ee.attachments||[]}}),A(!0))}}catch(Ye){console.error("Error loading item for editing:",Ye),alert("Error al cargar el item para editar.")}},J=async ee=>{if(V(null),!!confirm(`Ests seguro de que quieres archivar "${ee.title}"?`))try{await j5(ee.streamItemId),await K(),alert("Item archivado correctamente.")}catch(Ye){console.error("Error archiving item:",Ye),alert("Error al archivar el item.")}},qe=async ee=>{V(null);try{await gg(ee.streamItemId),await K(),alert("Item desarchivado correctamente.")}catch(Ye){console.error("Error unarchiving item:",Ye),alert("Error al desarchivar el item.")}},Be=async ee=>{if(V(null),!!confirm(`Ests seguro de que quieres eliminar "${ee.title}"? Esta accin no se puede deshacer.`))try{ee.type==="assignment"?await m5(ee.id):await w5(ee.streamItemId),await K(),alert("Item eliminado correctamente.")}catch(Ye){console.error("Error deleting item:",Ye),alert("Error al eliminar el item.")}};if(I){const ee=s?.role==="admin"||I.authorId===s?.id,Ye=s?.role==="student";return n.jsx("div",{className:"min-h-screen bg-white",children:n.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("button",{onClick:()=>O(null),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[n.jsx(Rr,{className:"w-5 h-5"}),n.jsx("span",{children:"Volver a assignments"})]}),I.classId&&n.jsxs("button",{onClick:()=>{O(null),(s?.role==="admin"||I.classId!==e)&&o(`/dashboard/classes/${I.classId}?tab=classwork`)},className:"px-4 py-2 text-sm bg-blue-400 text-white rounded hover:bg-blue-500 transition-colors flex items-center gap-2",children:[n.jsx(Sl,{className:"w-4 h-4"}),"Ir a la clase"]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-lg p-8",children:[n.jsx("h1",{className:"text-3xl font-semibold text-gray-900 mb-4",children:I.title}),I.className&&s?.role==="admin"&&n.jsx("div",{className:"mb-6",children:n.jsx("span",{className:"inline-block text-sm px-3 py-1 bg-blue-100 text-blue-800 rounded",children:I.className})}),(I.instructions||I.description)&&n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-3",children:I.type==="quiz"||I.type==="material"?"Descripcin":"Instrucciones"}),n.jsx("div",{className:"prose max-w-none",children:n.jsx("p",{className:"text-gray-700 whitespace-pre-wrap leading-relaxed",children:I.instructions||I.description})})]}),I.attachments&&I.attachments.length>0&&n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-3",children:"Archivos adjuntos"}),n.jsx("div",{className:"space-y-2",children:I.attachments.map(Ne=>n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100 transition-colors",children:[n.jsx(Us,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:Ne.name||"Google Drive file"}),Ne.url&&n.jsx("a",{href:Ne.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline truncate block",onClick:kt=>kt.stopPropagation(),children:Ne.url})]}),Ne.url&&n.jsx("a",{href:Ne.url,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 text-sm bg-blue-400 text-white rounded hover:bg-blue-500 transition-colors",onClick:kt=>kt.stopPropagation(),children:"Abrir"})]},Ne.id||Ne.url))})]}),I.type==="quiz"&&I.questions&&I.questions.length>0&&n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Preguntas"}),n.jsx("div",{className:"space-y-4",children:I.questions.map((Ne,kt)=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("h3",{className:"font-medium text-gray-900",children:[kt+1,". ",Ne.title]}),n.jsxs("span",{className:"text-sm text-gray-500",children:[Ne.points," puntos"]})]}),Ne.description&&n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:Ne.description}),n.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:["Tipo: ",Ne.type]}),Ne.options&&Ne.options.length>0&&n.jsxs("div",{className:"space-y-2 mt-2",children:[n.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Opciones:"}),n.jsx("ul",{className:"list-disc list-inside space-y-1 pl-2",children:Ne.options.map((xt,X)=>n.jsxs("li",{className:`text-sm ${Ne.correctAnswer===xt?"text-green-700 font-medium":"text-gray-600"}`,children:[xt,Ne.correctAnswer===xt&&n.jsx("span",{className:"ml-2 text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded-full",children:"Correcta"})]},X))})]})]},Ne.id||kt))})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[I.points!==void 0&&n.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[n.jsx($a,{className:"w-6 h-6 text-gray-600 flex-shrink-0 mt-1"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Puntos"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:I.points})]})]}),I.dueDate&&n.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[n.jsx(Fs,{className:"w-6 h-6 text-gray-600 flex-shrink-0 mt-1"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Fecha de vencimiento"}),n.jsxs("p",{className:"text-xl font-semibold text-gray-900",children:[new Date(I.dueDate).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),I.dueTime&&n.jsxs("span",{className:"text-base font-normal text-gray-600 block mt-1",children:["a las ",I.dueTime]})]})]})]})]}),I.type==="assignment"&&n.jsxs("div",{className:"border-t border-gray-200 pt-6 mb-8",children:[n.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Asignacin"}),I.assignToAll?n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Sr,{className:"w-6 h-6 text-gray-600"}),n.jsx("span",{className:"text-gray-900 text-lg",children:"Todos los estudiantes"})]}):n.jsxs("div",{className:"space-y-4",children:[I.assignedGroups&&I.assignedGroups.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Grupos asignados:"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:I.assignedGroups.map(Ne=>n.jsx("span",{className:"px-3 py-1.5 bg-blue-100 text-blue-800 rounded-lg text-sm font-medium",children:Ne},Ne))})]}),I.selectedStudents&&I.selectedStudents.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Estudiantes asignados:"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:I.selectedStudents.map(Ne=>{const kt=f.find(xt=>xt.id===Ne);return n.jsxs("span",{className:"px-3 py-1.5 bg-green-100 text-green-800 rounded-lg text-sm font-medium flex items-center gap-2",children:[n.jsx(Sr,{className:"w-3.5 h-3.5"}),kt?`${kt.firstName} ${kt.lastName}`:"Estudiante desconocido"]},Ne)})})]})]})]}),(I.type==="quiz"||I.type==="material")&&n.jsxs("div",{className:"border-t border-gray-200 pt-6 mb-8",children:[n.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Asignacin"}),I.assignToAll?n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Sr,{className:"w-6 h-6 text-gray-600"}),n.jsx("span",{className:"text-gray-900 text-lg",children:"Todos los estudiantes"})]}):n.jsx("div",{children:I.selectedStudents&&I.selectedStudents.length>0?n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Estudiantes asignados:"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:I.selectedStudents.map(Ne=>{const kt=f.find(xt=>xt.id===Ne);return n.jsxs("span",{className:"px-3 py-1.5 bg-green-100 text-green-800 rounded-lg text-sm font-medium flex items-center gap-2",children:[n.jsx(Sr,{className:"w-3.5 h-3.5"}),kt?`${kt.firstName} ${kt.lastName}`:"Estudiante desconocido"]},Ne)})})]}):I.assignedGroups&&I.assignedGroups.length>0?n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Grupos asignados:"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:I.assignedGroups.map(Ne=>n.jsx("span",{className:"px-3 py-1.5 bg-blue-100 text-blue-800 rounded-lg text-sm font-medium",children:Ne},Ne))})]}):n.jsx("p",{className:"text-sm text-gray-500",children:"Sin asignacin especfica"})})]}),I.author&&n.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[n.jsxs("p",{className:"text-sm text-gray-600",children:["Creado por: ",n.jsx("span",{className:"font-medium text-gray-900",children:I.author.name})]}),I.createdAt&&n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:new Date(I.createdAt).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),n.jsxs("div",{className:"border-t border-gray-200 pt-6 mt-6 flex items-center gap-3 hidden",children:[Ye&&I.type==="assignment"&&n.jsxs("button",{onClick:()=>{R(I),H(!0)},className:"flex-1 px-6 py-3 bg-blue-400 text-white rounded-lg hover:bg-blue-500 transition-colors font-medium flex items-center justify-center gap-2",children:[n.jsx(fr,{className:"w-5 h-5"}),I.submissionStatus?"Ver/Editar mi respuesta":"Enviar respuesta"]}),ee&&n.jsx(n.Fragment,{children:n.jsxs("button",{onClick:async()=>{try{if(I.type==="assignment"){const Ne=await wi(I.streamItemId);Ne&&($({id:I.streamItemId,data:{title:I.title,instructions:I.instructions||"",points:Ne.points,dueDate:Ne.dueDate,dueTime:Ne.dueTime,assignTo:Ne.assignToAll?"all":(Ne.assignedGroups?.length??0)>0?"groups":"students",selectedGroups:Ne.assignedGroups||[],selectedStudents:Ne.selectedStudents||[],attachments:Ne.attachments||I.attachments||[]}}),y(!0))}else if(I.type==="quiz"){const Ne=await yl(I.streamItemId);Ne&&(te({id:I.streamItemId,data:{title:I.title,description:I.description||Ne.description||"",points:Ne.points,dueDate:Ne.dueDate,dueTime:Ne.dueTime,assignTo:Ne.assignToAll?"all":(Ne.assignedGroups?.length??0)>0?"groups":"students",selectedGroups:Ne.assignedGroups||[],selectedStudents:Ne.selectedStudents||[],questions:Ne.questions||[]}}),C(!0))}else if(I.type==="material"){const Ne=await ch(I.streamItemId);Ne&&(Ee({id:I.streamItemId,data:{title:I.title,description:I.description||Ne.description||"",assignTo:Ne.assignToAll?"all":"selected",selectedStudents:Ne.selectedStudents||[],attachments:I.attachments||[]}}),A(!0))}}catch(Ne){console.error("Error loading item for editing:",Ne),alert("Error al cargar el item para editar.")}},className:"px-6 py-3 bg-brand-green-light text-white rounded-lg hover:bg-brand-green-medium transition-colors font-medium flex items-center gap-2",children:[n.jsx(Bn,{className:"w-5 h-5"}),"Editar"]})})]})]})]})})}return n.jsx("div",{className:"min-h-screen bg-white",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("div",{className:"flex-1"}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:B,className:"flex items-center gap-2 px-4 py-2 bg-blue-400 text-white rounded-lg hover:bg-blue-500 transition-colors font-medium shadow-sm",children:[n.jsx(Hr,{className:"w-5 h-5"}),n.jsx("span",{children:"Create"})]}),i&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>c(!1)}),n.jsxs("div",{className:"absolute right-0 top-12 z-20 bg-white border border-gray-200 rounded-lg shadow-lg min-w-[220px]",children:[n.jsxs("button",{onClick:re,className:"w-full text-left px-4 py-3 text-sm text-gray-800 hover:bg-gray-50 flex items-center gap-3 border-b border-gray-100",children:[n.jsx(fr,{className:"w-5 h-5 text-gray-600"}),n.jsx("span",{children:"Assignment"})]}),n.jsxs("button",{onClick:ae,className:"w-full text-left px-4 py-3 text-sm text-gray-800 hover:bg-gray-50 flex items-center gap-3 border-b border-gray-100",children:[n.jsx(fr,{className:"w-5 h-5 text-gray-600"}),n.jsx("span",{children:"Quiz assignment"})]}),n.jsxs("button",{onClick:we,className:"w-full text-left px-4 py-3 text-sm text-gray-800 hover:bg-gray-50 flex items-center gap-3 border-b border-gray-100 hidden",children:[n.jsx(Ih,{className:"w-5 h-5 text-gray-600"}),n.jsx("span",{children:"Question"})]}),n.jsxs("button",{onClick:Q,className:"w-full text-left px-4 py-3 text-sm text-gray-800 hover:bg-gray-50 flex items-center gap-3 border-b border-gray-100",children:[n.jsx(tx,{className:"w-5 h-5 text-gray-600"}),n.jsx("span",{children:"Material"})]}),n.jsxs("button",{onClick:ke,className:"w-full text-left px-4 py-3 text-sm text-gray-800 hover:bg-gray-50 flex items-center gap-3 border-b border-gray-100 hidden",children:[n.jsx(f2,{className:"w-5 h-5 text-gray-600"}),n.jsx("span",{children:"Reuse post"})]}),n.jsx("div",{className:"border-t border-gray-200 my-1"}),n.jsxs("button",{onClick:q,className:"w-full text-left px-4 py-3 text-sm text-gray-800 hover:bg-gray-50 flex items-center gap-3 hidden",children:[n.jsx(h2,{className:"w-5 h-5 text-gray-600"}),n.jsx("span",{children:"Topic"})]})]})]})]})]}),!t&&n.jsx("div",{className:"mb-6",children:n.jsxs(He,{variant:"outline",className:"flex items-center gap-2",children:[n.jsx(nx,{className:"w-5 h-5"}),n.jsx("span",{children:"View your work"})]})}),d.length===0?n.jsxs("div",{className:"text-center py-16",children:[n.jsxs("svg",{viewBox:"0 0 238 134",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"w-64 h-auto mx-auto mb-6 text-gray-400",children:[n.jsx("path",{d:"M116.595 13.9408L101.654 5.62358C101.655 5.67073 102.784 8.16035 102.784 8.16035L100.904 8.61261L101.563 10.1003L98.3151 10.9611L113.233 19.306C115.108 18.0993 116.398 16.0763 116.595 13.9408Z",fill:"#1E8E3E"}),n.jsx("path",{d:"M98.8805 5.79916C99.2962 6.99028 98.5161 8.26467 97.2788 8.45413L95.2839 5.9474C95.0808 5.68426 95.2792 5.33334 95.6163 5.37946L98.8805 5.79916Z",fill:"#5F6368"}),n.jsx("path",{d:"M101.789 5.96962L95.4866 5.6473L98.927 11.0948",stroke:"#5F6368",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M107 103.3L183 103.957V88.5222C183 57.8497 160.068 32.957 131.783 32.957L107.859 42.0865L107 103.3Z",fill:"#DADCE0"}),n.jsx("path",{d:"M97 102.957H120V93.9578H106.187C101.098 93.893 97 97.9718 97 102.957Z",fill:"#DADCE0"}),n.jsx("path",{d:"M177.995 92.0402C178.455 91.1595 179.476 91.0085 180.368 91.3213C190.399 94.6613 200.909 91.0111 210.436 88.4643C215.171 87.1736 220.485 85.6947 225.187 88.2578C229.494 90.58 231.915 94.8489 232.363 99.3071C232.802 103.527 232.032 108.713 227.394 110.605C223.46 112.23 219.259 110.748 215.16 110.49C213.065 110.373 211.205 110.631 209.586 111.888C208.091 113.067 206.879 114.418 205.015 115.062C201.129 116.483 197.664 113.669 194.691 111.697C193.958 111.249 193.226 110.802 192.425 110.467C191.792 110.235 191.125 110.06 190.342 110.202C189.322 110.353 188.432 111.049 187.589 111.541C186.405 112.212 185.052 112.78 183.624 112.838C182.14 112.861 180.728 112.385 179.787 111.267C178.979 110.309 178.526 109.025 178.207 107.9C177.404 105.162 177.077 102.405 177.226 99.6292C177.217 99.391 177.355 99.1654 177.458 98.9961C177.541 97.3418 178.064 95.7248 178.983 94.3488C178.926 94.3143 178.836 94.3363 178.779 94.3019C177.921 93.9327 177.637 92.7517 177.995 92.0402Z",fill:"#DADCE0"}),n.jsx("path",{d:"M100.597 31.2005L100.092 27.7059L105.359 26.6501C105.821 24.7988 106.54 21.6134 107.398 19.9604C107.992 18.8364 108.653 17.7785 109.445 16.8529C108.124 12.7535 107.332 9.88448 107.662 5.52069C107.794 4.33056 108.124 3.0082 109.445 2.67761C110.633 2.34702 111.781 2.75907 112.64 3.42025C114.422 4.87485 115.453 5.6789 116.972 7.39797C118.227 8.85257 119.349 10.3733 120.405 12.0262C123.245 11.6295 126.084 11.4312 128.989 11.3651C130.046 11.3651 131.036 11.3651 132.092 11.5634C132.687 7.92692 133.479 5.75918 135.46 2.58552C136.12 1.52763 136.978 0.535855 138.365 0.866446C139.554 1.13092 140.478 2.67761 140.478 2.67761C141.419 3.80397 142.261 6.20785 142.855 8.38974C143.515 10.9022 143.845 13.547 143.977 16.1917C143.977 16.39 143.977 16.5223 143.911 16.6545C147.939 19.4315 150.976 22.6051 152.693 23.9275C153.419 24.5226 161.475 30.0765 149.656 30.6054C154.081 31.2005 168.633 41.9752 147.174 38.3387C147.439 39.3305 159.098 48.9862 138.035 48.3912C136.714 48.3251 102.842 54.4079 94.7206 34.4403L98.4842 33.9113C99.8048 33.713 100.729 32.5228 100.597 31.2005Z",fill:"#DADCE0"}),n.jsx("path",{d:"M100.093 27.7061L100.598 31.1345C100.796 32.4569 99.8054 33.7131 98.4849 33.9115L94.8262 34.7447C93.9678 32.6289 93.4239 31.607 93.2258 28.8962L100.093 27.7061Z",fill:"#5F6368"}),n.jsx("path",{d:"M117.954 72.957C118.05 80.1039 118.002 87.1851 117.761 94.332C110.28 95.279 109.241 100.203 109 102.957",stroke:"#5F6368",strokeWidth:"2",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M118.04 99.4629C116.18 99.8045 114.688 102.179 114.505 103.087",stroke:"#5F6368",strokeWidth:"2",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M104 98.957C102.084 99.619 101 102.087 101 102.957",stroke:"#5F6368",strokeWidth:"2",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M121.145 27.8622C120.581 27.9058 120.088 27.483 120.045 26.9178C120.001 26.3526 120.423 25.859 120.987 25.8154C121.551 25.7717 122.044 26.1945 122.088 26.7597C122.132 27.3249 121.71 27.8185 121.145 27.8622Z",fill:"#5F6368"}),n.jsx("path",{d:"M109.598 26.6512C109.033 26.6949 108.541 26.272 108.497 25.7068C108.453 25.1416 108.875 24.6481 109.439 24.6044C110.004 24.5608 110.496 24.9836 110.54 25.5488C110.584 26.114 110.162 26.6076 109.598 26.6512Z",fill:"#5F6368"}),n.jsx("path",{d:"M141.516 38.3389C143.043 39.0428 146.545 40.2635 148.328 39.5154",stroke:"#5F6368",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M135.566 39.291C136.151 40.1914 138.081 42.1456 141.131 42.7594",stroke:"#5F6368",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M41 102H70V88H41C45.1938 92.1674 45.1938 97.8326 41 102Z",fill:"#5F6368"}),n.jsx("path",{d:"M13.2949 88H39C34.3263 83.9628 34.2329 78.2326 38.8131 74.1953L39 74H13.2949C8.90169 78.1674 8.90169 83.7674 13.2949 88Z",fill:"#DADCE0"}),n.jsx("path",{d:"M32 81H79",stroke:"#DADCE0",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M32 87H79",stroke:"#DADCE0",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M1 95H63",stroke:"#5F6368",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M1 101H63",stroke:"#5F6368",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M32 75H79",stroke:"#DADCE0",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M1 89H63",stroke:"#5F6368",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M7.28938 67.951C5.41313 67.951 3.88867 67.951 3.88867 64.5502V24.8558C3.88867 22.9795 5.41313 21.4551 7.28938 21.4551H69.0352C70.9114 21.4551 72.4359 22.9795 72.4359 24.8558L7.28938 67.951Z",fill:"#CEEAD6"}),n.jsx("path",{d:"M4.07143 68.1345H68.3043C70.2392 68.1345 71.8223 66.5515 71.8223 64.6166V25.1566C71.8223 23.2218 70.2392 21.6387 68.3043 21.6387L7.5894 21.6387C5.65452 21.6387 4.07143 23.2218 4.07143 25.1566V68.1345Z",stroke:"#5F6368",strokeWidth:"2",strokeMiterlimit:"10"}),n.jsx("path",{d:"M92.7904 68.2686H3V74.4081H92.7904C94.4858 74.4081 95.8602 73.0337 95.8602 71.3383C95.8602 69.6429 94.4858 68.2686 92.7904 68.2686Z",fill:"#5F6368"}),n.jsx("path",{d:"M112 7.95703L114 13.957",stroke:"#5F6368",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M137 6.95703L138 12.957",stroke:"#5F6368",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M118.487 39.8768C117.746 47.6332 116.034 62.1001 116.034 62.1001L96.1434 60.2671C98.2227 53.5399 100.102 47.8608 102.369 39.8768L118.487 39.8768Z",fill:"#5F6368"}),n.jsx("path",{d:"M115.955 41.1963C115.14 44.4072 113.625 49.7609 112.234 54.5774C111.442 57.3212 110.693 59.8815 110.142 61.7561C109.873 62.6705 109.651 63.4217 109.495 63.9512L91.895 60.6012C92.6965 58.5653 93.489 56.6018 94.2883 54.6217C95.9565 50.4888 97.6539 46.2836 99.5233 41.1962L115.955 41.1963Z",fill:"white",stroke:"#5F6368",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M108.418 42.9432C100.744 43.7107 97.9015 39.7526 97.9015 39.7526L117.628 39.7526C117.628 39.7526 116.093 42.1758 108.418 42.9432Z",fill:"#DADCE0"}),n.jsx("path",{d:"M119.279 33.8346C118.111 35.2699 115.428 40.2128 121.11 43.8439",stroke:"#5F6368",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M98 36.957H115V40.957L98 40.557V36.957Z",fill:"#DADCE0"}),n.jsx("path",{d:"M99.1969 41.8728C102.843 43.7476 111.606 45.8632 117.496 39.3267",stroke:"#5F6368",strokeWidth:"2",strokeLinecap:"round"})]}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"This is where you'll assign work"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"You can add assignments and other work for the class, then organize it into topics"})]}):v?n.jsx("div",{className:"text-center py-16",children:n.jsx("p",{className:"text-gray-600",children:"Cargando assignments..."})}):n.jsx("div",{className:"space-y-4",children:d.map(ee=>{const Ye=s?.role==="admin"||ee.author?.id===s?.id;return n.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow relative ${ee.classId&&ee.classId.trim()!==""?"cursor-pointer":""} ${ee.isArchived?"opacity-75 border-gray-300":""}`,onClick:async Ne=>{if(!Ne.target.closest(".item-menu")){Ne.stopPropagation();try{const kt=ee.type||"assignment";let xt=null;if(kt==="assignment"){if(xt=await wi(ee.streamItemId),xt){let X=null;if(s?.role==="student"&&s?.id)try{const{getSubmission:xe}=await Yc(async()=>{const{getSubmission:Ae}=await Promise.resolve().then(()=>F2);return{getSubmission:Ae}},void 0),W=await xe(ee.id,s.id);W&&(X=W.status)}catch(xe){console.error("Error loading submission:",xe)}if(O({...ee,...xt,type:"assignment",authorId:ee.author?.id,submissionStatus:X,attachments:xt.attachments||ee.attachments||[]}),De(xt.isArchived||ee.isArchived||!1),xt.classId&&(!e||xt.classId!==e))try{const xe=await dh(xt.classId);p(W=>{const Ae=[...W];return xe.forEach(Le=>{Ae.find(Fe=>Fe.id===Le.id)||Ae.push(Le)}),Ae})}catch(xe){console.error("Error loading students for assignment:",xe)}}}else if(kt==="quiz"){if(xt=await yl(ee.streamItemId),xt&&(O({...ee,...xt,type:"quiz",description:xt.description||ee.description,authorId:ee.author?.id}),De(xt.isArchived||ee.isArchived||!1),xt.classId&&(!e||xt.classId!==e)))try{const X=await dh(xt.classId);p(xe=>{const W=[...xe];return X.forEach(Ae=>{W.find(Le=>Le.id===Ae.id)||W.push(Ae)}),W})}catch(X){console.error("Error loading students for quiz:",X)}}else kt==="material"&&(xt=await ch(ee.streamItemId),xt&&(O({...ee,...xt,type:"material",description:xt.description||ee.description,authorId:ee.author?.id}),De(xt.isArchived||ee.isArchived||!1)))}catch(kt){console.error("Error loading item details:",kt)}}},children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[n.jsx("h4",{className:"font-semibold text-gray-900",children:ee.title}),ee.isArchived&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gray-100 text-gray-600 text-xs font-medium rounded-full",children:[n.jsx(da,{className:"w-3 h-3"}),"Archivado"]})]}),ee.className&&s?.role==="admin"&&n.jsx("span",{className:"inline-block text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded mb-2",children:ee.className}),(ee.instructions||ee.description)&&n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:ee.instructions||ee.description})]}),Ye&&n.jsxs("div",{className:"relative item-menu",children:[n.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),V(de===ee.streamItemId?null:ee.streamItemId)},className:"p-1 text-gray-500 hover:bg-gray-100 rounded-full transition-colors","aria-label":"More options",children:n.jsx(jo,{className:"w-5 h-5"})}),de===ee.streamItemId&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>V(null)}),n.jsxs("div",{className:"absolute right-0 top-8 z-20 bg-white border border-gray-200 rounded-lg shadow-lg min-w-[180px]",children:[n.jsxs("button",{onClick:Ne=>{Ne.stopPropagation(),V(null),ce(ee)},className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50 flex items-center gap-2 border-b border-gray-100",children:[n.jsx(Bn,{className:"w-4 h-4"}),"Editar"]}),ee.isArchived?n.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),qe(ee)},className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50 flex items-center gap-2 border-b border-gray-100",children:"Desarchivar"}):n.jsxs("button",{onClick:Ne=>{Ne.stopPropagation(),J(ee)},className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50 flex items-center gap-2 border-b border-gray-100",children:[n.jsx(da,{className:"w-4 h-4"}),"Archivar"]}),n.jsxs("button",{onClick:Ne=>{Ne.stopPropagation(),Be(ee)},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[n.jsx(Gr,{className:"w-4 h-4"}),"Eliminar"]})]})]})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[ee.points!==void 0&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx($a,{className:"w-4 h-4"}),n.jsxs("span",{children:[ee.points," puntos"]})]}),ee.dueDate&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Fs,{className:"w-4 h-4"}),n.jsxs("span",{children:["Vence: ",new Date(ee.dueDate).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),ee.dueTime&&` a las ${ee.dueTime}`]})]}),ee.assignToAll?n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Sr,{className:"w-4 h-4"}),n.jsx("span",{children:"Todos los estudiantes"})]}):n.jsxs(n.Fragment,{children:[ee.assignedGroups&&ee.assignedGroups.length>0&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Sr,{className:"w-4 h-4"}),n.jsxs("span",{children:["Grupos: ",ee.assignedGroups.join(", ")]})]}),ee.studentCount>0&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Sr,{className:"w-4 h-4"}),n.jsxs("span",{children:[ee.studentCount," estudiante(s) asignado(s)"]})]})]}),ee.author&&n.jsxs("div",{className:"text-xs text-gray-500",children:["Por: ",ee.author.name]})]})]},ee.id||ee.streamItemId)})}),n.jsx(Zx,{isOpen:w,onClose:()=>{y(!1),$(null)},classId:e,className:r,initialData:P?.data,isEdit:!!P,onSave:async ee=>{if(P)try{const Ye={title:ee.title,attachments:ee.attachments?.map(Ne=>({type:Ne.type||"drive",name:Ne.name||"",url:Ne.url,filePath:Ne.filePath,fileSize:Ne.fileSize,mimeType:Ne.mimeType}))||[]};if(ee.instructions&&(Ye.content=ee.instructions),await uh(P.id,Ye),await ed({streamItemId:P.id,points:ee.points,dueDate:ee.dueDate,dueTime:ee.dueTime,instructions:ee.instructions,assignToAll:ee.assignTo==="all",assignedGroups:ee.assignTo==="groups"?ee.selectedGroups:[],selectedStudents:ee.assignTo==="students"?ee.selectedStudents:[]}),await K(),y(!1),$(null),I){const Ne=await wi(P.id);Ne&&O({...I,...Ne})}}catch(Ye){console.error("Error updating assignment:",Ye),alert("Error al actualizar el assignment.")}else await z(ee)}}),n.jsx(zN,{isOpen:S,onClose:()=>{C(!1),te(null)},classId:e,className:r,initialData:F?.data,isEdit:!!F,onSave:ge}),n.jsx(aO,{isOpen:T,onClose:()=>{A(!1),Ee(null)},classId:e,className:r,initialData:ne?.data,isEdit:!!ne,onSave:Pe}),ye&&n.jsx(rd,{isOpen:U,onClose:()=>{H(!1),R(null)},assignmentId:ye.id,streamItemId:ye.streamItemId,assignmentTitle:ye.title,instructions:ye.instructions,dueDate:ye.dueDate,dueTime:ye.dueTime,onSubmitted:()=>{K()}})]})})},oO=({isOpen:e,onClose:t,classId:r,className:s="",onSave:o})=>{const[i,c]=j.useState({content:"",assignTo:"all",selectedStudents:[],attachments:[]}),[d,h]=j.useState(!1),[f,p]=j.useState(!1),[v,x]=j.useState({});j.useEffect(()=>{e||(c({content:"",assignTo:"all",selectedStudents:[],attachments:[]}),x({}))},[e]);const w=(O,P)=>{c($=>({...$,[O]:P})),v[O]&&x($=>({...$,[O]:""}))},y=()=>{if(!i.content.trim()){x({content:"Content is required"});return}o&&o(i),h(!1),t()},S=()=>{console.log("Saving draft:",i),h(!1)},C=()=>{console.log("Schedule announcement"),h(!1)},T=(O,P)=>{const $={id:`attachment_${Date.now()}`,type:O,name:P||`${O} attachment`,url:O==="link"?"":void 0};c(F=>({...F,attachments:[...F.attachments||[],$]}))},A=O=>{c(P=>({...P,attachments:P.attachments?.filter($=>$.id!==O)||[]}))},I=O=>{const P=O.target.files;P&&P.length>0&&Array.from(P).forEach($=>{T("upload",$.name)})};return e?n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 p-4 overflow-y-auto",onClick:t,children:n.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto relative my-8",onClick:O=>O.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"announcement-modal-title",children:[n.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-gray-100 rounded-full",children:n.jsx(Oy,{className:"w-6 h-6 text-gray-600"})}),n.jsx("h2",{id:"announcement-modal-title",className:"text-2xl font-medium text-gray-900",children:"Announcement"})]}),n.jsx("button",{onClick:t,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Close",children:n.jsx(Rr,{className:"w-6 h-6"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"For"}),n.jsx("div",{className:"border border-gray-300 rounded-lg px-4 py-2 bg-gray-50",children:n.jsx("span",{className:"text-gray-700",children:s||"Select class"})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign to"}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>p(!f),className:"w-full border border-gray-300 rounded-lg px-4 py-2 text-left flex items-center justify-between bg-white hover:bg-gray-50",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Sr,{className:"w-5 h-5 text-gray-600"}),n.jsx("span",{className:"text-gray-700",children:i.assignTo==="all"?"All students":"Selected students"})]}),n.jsx(qr,{className:"w-5 h-5 text-gray-400"})]}),f&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>p(!1)}),n.jsxs("div",{className:"absolute z-20 w-full bg-white border border-gray-200 rounded-lg shadow-lg mt-1",children:[n.jsx("button",{onClick:()=>{w("assignTo","all"),p(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50",children:"All students"}),n.jsx("button",{onClick:()=>{w("assignTo","selected"),p(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50",children:"Selected students"})]})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"announcementContent",className:"block text-sm font-medium text-gray-700 mb-1",children:"Announce something to your class"}),n.jsx("textarea",{id:"announcementContent",rows:8,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",value:i.content,onChange:O=>w("content",O.target.value),placeholder:"Announce something to your class"}),v.content&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.content}),n.jsxs("div",{className:"flex items-center gap-1 mt-2 p-2 bg-gray-50 rounded-lg border border-gray-200",children:[n.jsx("button",{className:"p-1 hover:bg-gray-200 rounded",title:"Bold",children:n.jsx("span",{className:"font-bold text-sm",children:"B"})}),n.jsx("button",{className:"p-1 hover:bg-gray-200 rounded",title:"Italic",children:n.jsx("span",{className:"italic text-sm",children:"I"})}),n.jsx("button",{className:"p-1 hover:bg-gray-200 rounded",title:"Underline",children:n.jsx("span",{className:"underline text-sm",children:"U"})}),n.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),n.jsx("button",{className:"p-1 hover:bg-gray-200 rounded",title:"Bulleted list",children:n.jsx("span",{className:"text-sm",children:""})}),n.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),n.jsx("button",{className:"p-1 hover:bg-gray-200 rounded",title:"Remove formatting",children:n.jsx("span",{className:"text-sm",children:"T"})})]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"flex items-center gap-2 mb-3",children:n.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Attach"})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>T("drive","Google Drive file"),className:"flex items-center justify-center p-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",title:"Add Google Drive file",children:n.jsx(Us,{className:"w-6 h-6 text-blue-600"})}),n.jsx("button",{onClick:()=>T("youtube","YouTube video"),className:"flex items-center justify-center p-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",title:"Add YouTube video",children:n.jsx(My,{className:"w-6 h-6 text-red-600"})}),n.jsxs("label",{className:"flex items-center justify-center p-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",title:"Upload file",children:[n.jsx("input",{type:"file",className:"hidden",onChange:I,multiple:!0}),n.jsx(ug,{className:"w-6 h-6 text-gray-600"})]}),n.jsx("button",{onClick:()=>T("link","Link"),className:"flex items-center justify-center p-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",title:"Add link",children:n.jsx(Fc,{className:"w-6 h-6 text-gray-600"})})]}),i.attachments&&i.attachments.length>0&&n.jsx("div",{className:"mt-4 space-y-2",children:i.attachments.map(O=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[O.type==="drive"&&n.jsx(Us,{className:"w-5 h-5 text-blue-600"}),O.type==="youtube"&&n.jsx(My,{className:"w-5 h-5 text-red-600"}),O.type==="upload"&&n.jsx(ug,{className:"w-5 h-5 text-gray-600"}),O.type==="link"&&n.jsx(Fc,{className:"w-5 h-5 text-gray-600"}),n.jsx("span",{className:"text-sm text-gray-700",children:O.name})]}),n.jsx("button",{onClick:()=>A(O.id),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:n.jsx(Rr,{className:"w-4 h-4"})})]},O.id))})]})]}),n.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex justify-between items-center",children:[n.jsx(He,{variant:"outline",onClick:t,children:"Cancel"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:y,disabled:!i.content.trim(),className:"px-4 py-2 bg-blue-400 text-white rounded-lg hover:bg-blue-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[n.jsx("span",{children:"Post"}),n.jsx(qr,{className:"w-4 h-4"})]}),d&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>h(!1)}),n.jsxs("div",{className:"absolute right-0 top-10 z-20 bg-white border border-gray-200 rounded-lg shadow-lg min-w-[180px]",children:[n.jsxs("button",{onClick:y,className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50 flex items-center gap-2",children:[n.jsx(Oy,{className:"w-4 h-4"}),"Post"]}),n.jsxs("button",{onClick:C,className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50 flex items-center gap-2",children:[n.jsx(Xn,{className:"w-4 h-4"}),"Schedule"]}),n.jsxs("button",{onClick:S,className:"w-full text-left px-4 py-2 text-sm text-gray-800 hover:bg-gray-50 flex items-center gap-2",children:[n.jsx(Gs,{className:"w-4 h-4"}),"Save draft"]})]})]})]}),n.jsx("button",{onClick:()=>h(!d),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Save options",children:n.jsx(qr,{className:"w-5 h-5"})})]})]})]})}):null},lO=({isOpen:e,onClose:t,classData:r,onSave:s})=>{const[o,i]=j.useState({title:r.title||"",description:r.description||"",section:r.section||"",subject:r.subject||"",room:r.room||""}),[c,d]=j.useState({});j.useEffect(()=>{e&&r&&(i({title:r.title||"",description:r.description||"",section:r.section||"",subject:r.subject||"",room:r.room||""}),d({}))},[e,r]);const h=(p,v)=>{i(x=>({...x,[p]:v})),c[p]&&d(x=>({...x,[p]:""}))},f=()=>{const p={};if(o.title.trim()||(p.title="Title is required"),Object.keys(p).length>0){d(p);return}s&&s({title:o.title.trim(),description:o.description.trim(),section:o.section.trim()||void 0,subject:o.subject.trim()||void 0,room:o.room.trim()||void 0}),t()};return e?n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 p-4 overflow-y-auto",onClick:t,children:n.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto relative my-8",onClick:p=>p.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"edit-class-modal-title",children:[n.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-gray-100 rounded-full",children:n.jsx(of,{className:"w-6 h-6 text-gray-600"})}),n.jsx("h2",{id:"edit-class-modal-title",className:"text-2xl font-medium text-gray-900",children:"Edit class information"})]}),n.jsx("button",{onClick:t,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Close",children:n.jsx(Rr,{className:"w-6 h-6"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"className",className:"block text-sm font-medium text-gray-700 mb-2",children:["Class name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{id:"className",type:"text",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${c.title?"border-red-500":"border-gray-300"}`,value:o.title,onChange:p=>h("title",p.target.value),placeholder:"Enter class name"}),c.title&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.title})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"section",className:"block text-sm font-medium text-gray-700 mb-2",children:"Section"}),n.jsx("input",{id:"section",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:o.section,onChange:p=>h("section",p.target.value),placeholder:"Enter section (e.g., Period 1)"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject"}),n.jsx("input",{id:"subject",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:o.subject,onChange:p=>h("subject",p.target.value),placeholder:"Enter subject (e.g., Math, Science)"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"room",className:"block text-sm font-medium text-gray-700 mb-2",children:"Room"}),n.jsx("input",{id:"room",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:o.room,onChange:p=>h("room",p.target.value),placeholder:"Enter room number"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),n.jsx("textarea",{id:"description",rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",value:o.description,onChange:p=>h("description",p.target.value),placeholder:"Enter class description"})]})]}),n.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex justify-end items-center gap-3",children:[n.jsx(He,{variant:"outline",onClick:t,children:"Cancel"}),n.jsxs(He,{variant:"primary",onClick:f,className:"flex items-center gap-2",children:[n.jsx(Gs,{className:"w-4 h-4"}),"Save changes"]})]})]})}):null},cO=({classId:e,isTeacher:t=!0})=>{const[r,s]=j.useState([]),[o,i]=j.useState([]),[c,d]=j.useState(!0);j.useEffect(()=>{h()},[e]);const h=async()=>{d(!0);try{s([{id:"1",firstName:"Jean Paul",lastName:"Raimond",email:"ark2784@gmail.com",avatar:"https://lh3.googleusercontent.com/a/ACg8ocLuHx4b80EgFUAwR7EJgbG24V-nH2pQBAgXpQHHPoLW2h5f4e4C_g=s32-c"}]),i([])}catch(x){console.error("Error loading people:",x)}finally{d(!1)}},f=()=>{console.log("Invite teachers")},p=()=>{console.log("Invite students")},v=x=>{window.open(`https://mail.google.com/mail/?view=cm&fs=1&to=${encodeURIComponent(x)}`,"_blank")};return c?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-green-medium"})}):n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hidden",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Teachers"}),t&&n.jsxs("button",{onClick:f,className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-colors hidden",title:"Invite teachers",children:[n.jsx(Bc,{className:"w-5 h-5"}),n.jsx("span",{children:"Invite teachers"})]})]}),r.length===0?n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No teachers yet"})}):n.jsx("ul",{className:"space-y-3",children:r.map(x=>n.jsxs("li",{className:"flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[x.avatar?n.jsx("img",{src:x.avatar,alt:`${x.firstName} ${x.lastName}`,className:"w-10 h-10 rounded-full object-cover"}):n.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center",children:n.jsx(es,{className:"w-6 h-6 text-gray-600"})}),n.jsx("div",{className:"flex-1",children:n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[x.firstName," ",x.lastName]})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>v(x.email),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-full transition-colors",title:`Email ${x.email}`,children:n.jsx(Ba,{className:"w-5 h-5"})}),t&&n.jsx("div",{className:"relative",children:n.jsx("button",{className:"p-2 text-gray-600 hover:bg-gray-100 rounded-full transition-colors",title:"More options",children:n.jsx(jo,{className:"w-5 h-5"})})})]})]},x.id))})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Students"}),n.jsxs("span",{className:"text-sm text-gray-600",children:["(",o.length," students)"]})]}),t&&n.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:"Invite students",children:[n.jsx(Bc,{className:"w-5 h-5"}),n.jsx("span",{children:"Invite students"})]})]}),o.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsxs("svg",{viewBox:"0 0 221 161",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-48 h-auto mx-auto mb-4 text-gray-400","aria-hidden":"true",children:[n.jsx("path",{d:"M3 156.083C12.0042 145.648 23.2805 127.051 23.2805 127.051C38.6802 134.12 57.1094 134.204 72.5091 127.303C64.8513 136.392 58.2034 149.94 52.0603 156.251C33.0421 163.404 17.8107 160.122 3 156.083Z",fill:"#DADCDF"}),n.jsx("path",{d:"M39.438 103.404C57.0256 102.478 74.5291 101.973 92.1168 101.637C109.62 101.3 127.208 101.216 144.711 101.132C154.641 101.048 164.571 101.048 174.501 100.963C175.679 100.963 175.763 99.0279 174.501 99.112C156.913 99.2803 139.326 99.3645 121.738 99.4486C104.235 99.617 86.6469 99.8694 69.1434 100.374C59.2136 100.711 49.2837 101.048 39.3538 101.552C38.1757 101.552 38.1757 103.488 39.438 103.404Z",fill:"#606266"}),n.jsx("path",{d:"M219.269 48.1162L175.511 100.29H120.812M218.849 58.6351L175.511 109.126L96.4082 108.284",stroke:"#606266",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M87.7409 39.2803L37.25 94.8202L175.258 93.9787L219.859 40.9633L87.7409 39.2803Z",fill:"#DADCE0"}),n.jsx("path",{d:"M158.849 67.0498L149.592 68.7328L42.7197 88.9292L59.55 68.7328L158.849 67.0498Z",fill:"#606266"}),n.jsx("path",{d:"M79.7465 116.7L78.905 109.968H46.0859L38.933 107.864C38.344 103.572 37.8391 99.2804 37.25 95.0729L175.258 92.8008",fill:"#606266"}),n.jsx("path",{d:"M219.69 41.8047L218.849 67.4709L175.09 117.12L79.1572 115.858",stroke:"#606266",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M175.511 93.9785V116.699",stroke:"#606266",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M166.591 48.8738C168.779 47.6115 173.491 44.5821 173.239 42.0575C172.986 38.6915 161.794 36.3352 161.794 36.3352L159.438 24.8065C159.27 24.0491 158.176 23.8808 157.839 24.6382L154.136 33.3899C153.8 34.0631 152.79 34.0631 152.537 33.3058L149.676 25.4797C149.424 24.7223 148.33 24.7223 148.077 25.5638L146.058 32.6326C145.889 33.3058 144.964 33.4741 144.543 32.885C139.915 26.2371 119.887 -0.607258 100.784 1.07577C77.8951 3.09541 60.7282 20.5989 62.9161 46.181C63.8418 56.4474 67.4603 61.4965 72.0886 65.5358C72.6777 66.0407 72.3411 66.9664 71.5837 67.0505C66.4505 67.4713 58.8769 68.3128 58.8769 68.3128C49.6202 69.3226 40.2794 71.2581 32.4533 76.3072C27.7408 79.3366 23.4491 83.2917 20.9246 88.3408C18.4 93.3899 17.811 99.533 20.2513 104.666C23.954 112.324 33.1265 115.438 41.4575 116.868C52.9863 118.804 64.8516 118.972 76.4645 117.289C78.4841 117.036 79.9989 115.269 79.9989 113.334C79.8306 107.78 65.9456 110.641 57.4463 110.978C36.5767 111.735 28.6665 103.656 27.9933 98.6073C27.2359 92.6326 35.3986 83.965 40.7843 81.0197C46.0858 78.0743 58.961 76.0547 65.0199 75.5498L87.9091 73.2777L158.765 67.0505C161.121 66.8822 163.056 65.0309 163.309 62.6746L163.645 59.9818C163.73 59.4769 164.234 59.1403 164.655 59.3086C166.002 59.6452 168.526 59.8135 170.378 57.6256C172.397 55.1852 168.526 51.8191 166.507 50.3885C166.002 49.8836 166.086 49.1263 166.591 48.8738Z",fill:"white",stroke:"#606266",strokeWidth:"2",strokeMiterlimit:"10"}),n.jsx("path",{d:"M152.285 44.1613C153.884 44.1613 153.884 41.6367 152.285 41.6367C150.686 41.6367 150.686 44.1613 152.285 44.1613Z",fill:"#606266"}),n.jsx("path",{d:"M158.259 43.4034C159.858 43.4034 159.858 40.8789 158.259 40.8789C156.576 40.8789 156.576 43.4034 158.259 43.4034Z",fill:"#606266"}),n.jsx("path",{d:"M139.746 41.3838C136.801 42.3656 131.079 44.9182 131.752 47.2744C132.425 49.6306 138.764 49.3782 141.85 48.9574C139.325 50.6404 134.445 54.5956 135.118 56.9518C135.791 59.308 140.447 58.4946 142.692 57.7933",stroke:"#606266",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M155.375 48.125C156.286 48.125 157.104 48 158 48",stroke:"#5F6368",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M156.625 52C157.215 52.8089 158.25 53.375 158.25 53.375",stroke:"#5F6368",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M156.425 48.25C156.425 49.1936 156.8 52 156.8 52",stroke:"#5F6368",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M156.75 52C155.909 52.2003 155 53.25 155 53.25",stroke:"#5F6368",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M130.827 135.803L84.291 143.208C84.3752 143.292 91.1914 146.069 91.1914 146.069L87.9937 149.688L92.033 151.371L86.6473 157.766L133.183 150.445C135.034 145.48 134.193 139.926 130.827 135.803Z",fill:"#1E8E3E"}),n.jsx("path",{d:"M111.767 148.802C119.342 147.606 125.277 145.334 125.023 143.727C124.77 142.121 118.423 141.787 110.848 142.983C103.273 144.178 97.3384 146.45 97.592 148.057C97.8456 149.664 104.192 149.997 111.767 148.802Z",fill:"#CEEAD6"}),n.jsx("path",{d:"M79.5782 147.668C82.1027 149.183 82.6076 152.633 80.6721 154.821L73.351 153.306C72.5936 153.138 72.4253 152.212 73.0985 151.791L79.5782 147.668Z",fill:"#606266"}),n.jsx("path",{d:"M85.0478 143.629L73.2666 152.465L87.5723 157.093",stroke:"#606266",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M113.238 154.148V154.148C125.823 150.791 138.935 148.811 151.948 148.257V148.257M134.276 136.896C135.118 137.878 136.885 140.347 137.221 142.366C137.558 144.386 137.081 146.854 136.801 148.257M135.538 138.159L141.679 137.574C143.21 137.428 144.604 138.464 144.905 139.972L145.408 142.488C145.756 144.226 144.529 145.885 142.765 146.062L137.642 146.574",stroke:"#606266",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M22.5 74C25.2227 56.1515 24 18 24 18",stroke:"#CEEAD6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M17.2703 41.6331C23.0524 44.8387 24.9999 58.0001 24.9999 58.0001C24.9999 58.0001 16.471 55.1873 13.2271 50.9122C9.49994 46.0002 11.9459 38.6813 17.2703 41.6331Z",fill:"#CEEAD6"}),n.jsx("path",{d:"M17.2703 21.68C23.0524 24.8855 24.9999 38.047 24.9999 38.047C24.9999 38.047 16.471 35.2342 13.2271 30.9591C9.49994 26.0471 11.9459 18.7282 17.2703 21.68Z",fill:"#CEEAD6"}),n.jsx("path",{d:"M30.7297 41.68C24.9476 44.8855 23.0001 58.047 23.0001 58.047C23.0001 58.047 31.529 55.2342 34.7729 50.9591C38.5001 46.0471 36.0541 38.7282 30.7297 41.68Z",fill:"#CEEAD6"}),n.jsx("path",{d:"M30.7297 21.7269C24.9476 24.9324 23.0001 38.0938 23.0001 38.0938C23.0001 38.0938 31.529 35.281 34.7729 31.0059C38.5001 26.094 36.0541 18.7751 30.7297 21.7269Z",fill:"#CEEAD6"}),n.jsx("path",{d:"M22 73.5C14.9633 73.6303 8.01809 73.5 1 73.5",stroke:"#DADCDF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),n.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"Add students to this class"}),t&&n.jsxs("button",{onClick:p,className:"px-4 py-2 bg-brand-green-light text-white rounded-lg hover:bg-brand-green-medium transition-colors flex items-center gap-2 mx-auto",children:[n.jsx(Bc,{className:"w-5 h-5"}),n.jsx("span",{children:"Invite students"})]})]}):n.jsx("ul",{className:"space-y-3",children:o.map(x=>n.jsxs("li",{className:"flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[x.avatar?n.jsx("img",{src:x.avatar,alt:`${x.firstName} ${x.lastName}`,className:"w-10 h-10 rounded-full object-cover"}):n.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center",children:n.jsx(es,{className:"w-6 h-6 text-gray-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[x.firstName," ",x.lastName]}),n.jsx("p",{className:"text-xs text-gray-500",children:x.email})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>v(x.email),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-full transition-colors",title:`Email ${x.email}`,children:n.jsx(Ba,{className:"w-5 h-5"})}),t&&n.jsx("div",{className:"relative",children:n.jsx("button",{className:"p-2 text-gray-600 hover:bg-gray-100 rounded-full transition-colors",title:"More options",children:n.jsx(jo,{className:"w-5 h-5"})})})]})]},x.id))})]})]})},dO=({classId:e,isTeacher:t=!0})=>{const[r,s]=j.useState([]),[o,i]=j.useState([]),[c,d]=j.useState(!0),[h,f]=j.useState("lastName"),[p,v]=j.useState(!1);j.useEffect(()=>{x()},[e]);const x=async()=>{d(!0);try{s([]),i([])}catch(T){console.error("Error loading grades:",T)}finally{d(!1)}},w=()=>{console.log("Invite students")},y=T=>{if(o.length===0)return null;const A=o.map(O=>O.grades[T]).filter(O=>O!=null);if(A.length===0)return null;const I=A.reduce((O,P)=>O+P,0);return Math.round(I/A.length*100)/100},S=T=>{if(r.length===0)return null;const A=r.map(O=>T.grades[O.id]).filter(O=>O!=null);if(A.length===0)return null;const I=A.reduce((O,P)=>O+P,0);return Math.round(I/A.length*100)/100},C=[...o].sort((T,A)=>{const I=h==="lastName"?T.studentName.split(" ").pop()||"":T.studentName.split(" ")[0]||"",O=h==="lastName"?A.studentName.split(" ").pop()||"":A.studentName.split(" ")[0]||"";return I.localeCompare(O)});return c?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-green-medium"})}):r.length===0||o.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsxs("svg",{viewBox:"0 0 181 143",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-48 h-auto mx-auto mb-4 text-gray-400","aria-hidden":"true",children:[n.jsx("path",{d:"M160.156 107.599C161.764 100.018 166.818 93.3552 172.944 90.7515C173.94 90.3686 175.165 90.1388 175.701 91.0578C176.084 91.747 175.931 92.7426 175.625 93.6615C173.251 101.549 166.282 107.369 159.543 107.063",fill:"#CEEAD6"}),n.jsx("path",{d:"M160.615 108.441C160.768 100.707 157.322 92.9724 151.884 88.9902C151.042 88.3776 149.893 87.8415 149.128 88.6839C148.592 89.2965 148.515 90.2921 148.592 91.211C149.128 99.4051 154.641 106.757 161.227 108.059",fill:"#CEEAD6"}),n.jsx("path",{d:"M160.156 123.298C161.764 115.717 166.818 109.054 172.944 106.451C173.94 106.068 175.165 105.838 175.701 106.757C176.084 107.446 175.931 108.442 175.625 109.361C173.251 117.248 166.282 123.069 159.543 122.762",fill:"#CEEAD6"}),n.jsx("path",{d:"M159.083 124.906C159.236 117.172 155.79 109.437 150.353 105.455C149.511 104.842 148.362 104.306 147.596 105.149C147.06 105.761 146.984 106.757 147.06 107.676C147.596 115.87 153.11 123.222 159.696 124.523",fill:"#CEEAD6"}),n.jsx("path",{d:"M73.3906 120.848H99.4278",stroke:"#5F6368",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M164.521 82.5576C163.244 87.4077 161.034 98.8999 160.309 105.914C159.16 117.019 159.415 124.166 159.16 128.888",stroke:"#5F6368",strokeWidth:"2"}),n.jsx("path",{d:"M164.291 89.1436C168.52 89.1436 171.949 85.6122 171.949 81.2559C171.949 76.8996 168.52 73.3682 164.291 73.3682C160.061 73.3682 156.633 76.8996 156.633 81.2559C156.633 85.6122 160.061 89.1436 164.291 89.1436Z",fill:"#DADCE0"}),n.jsx("path",{d:"M84.1885 139.227C112.829 139.074 168.12 137.159 171.872 136.93C177.846 136.623 182.67 133.254 180.449 129.808C178.228 126.362 132.281 127.357 117.041 128.889C118.573 129.425 84.1885 139.227 84.1885 139.227Z",fill:"#DADCE0"}),n.jsx("path",{d:"M6.07715 109.207C9.6764 117.171 15.1136 124.217 22.1589 129.73C25.5284 132.411 31.5782 134.632 38.3172 136.546C60.4488 142.749 83.8056 142.749 105.937 136.469C112.6 134.632 118.496 132.334 121.866 129.73C128.911 124.217 134.348 117.095 137.948 109.207H79.5172L78.0622 121H30.5827L30.3529 109.207H6.07715Z",fill:"#DADCE0"}),n.jsx("path",{d:"M71.6296 30.8661C102.081 30.8661 126.767 24.1804 126.767 15.9331C126.767 7.68576 102.081 1 71.6296 1C41.1781 1 16.4922 7.68576 16.4922 15.9331C16.4922 24.1804 41.1781 30.8661 71.6296 30.8661Z",stroke:"#5F6368",strokeWidth:"2",strokeMiterlimit:"10"}),n.jsx("path",{d:"M126.767 15.9326L140.934 72.6782C146.295 94.1206 138.637 116.712 121.483 130.19C118.113 132.793 112.14 135.091 105.554 136.929C83.4226 143.132 60.3721 141.83 37.9342 137.005C7.68519 130.496 -3.03598 94.1206 2.32461 72.6782L16.4919 15.9326",stroke:"#5F6368",strokeWidth:"2",strokeMiterlimit:"10"}),n.jsx("path",{d:"M74.5393 120.924H30.1996L27.213 49.5515C27.1364 46.8712 29.2041 44.6504 31.8078 44.6504H71.7824C74.233 44.6504 76.3007 46.6415 76.3772 49.1686L79.2107 116.023C79.2873 118.703 77.143 120.924 74.5393 120.924Z",stroke:"#5F6368",strokeWidth:"2",strokeMiterlimit:"10"}),n.jsx("path",{d:"M26.8303 46.6416L21.4697 121.843H29.5106L26.8303 46.6416Z",fill:"#5F6368"}),n.jsx("path",{d:"M45.2094 91.8999C48.5929 91.8999 51.3358 89.0885 51.3358 85.6204C51.3358 82.1523 48.5929 79.3408 45.2094 79.3408C41.8259 79.3408 39.083 82.1523 39.083 85.6204C39.083 89.0885 41.8259 91.8999 45.2094 91.8999Z",fill:"#5F6368"}),n.jsx("path",{d:"M45.2094 112.347C48.5929 112.347 51.3358 109.536 51.3358 106.068C51.3358 102.6 48.5929 99.7881 45.2094 99.7881C41.8259 99.7881 39.083 102.6 39.083 106.068C39.083 109.536 41.8259 112.347 45.2094 112.347Z",fill:"#5F6368"}),n.jsx("path",{d:"M64.3539 91.8999C67.7374 91.8999 70.4803 89.0885 70.4803 85.6204C70.4803 82.1523 67.7374 79.3408 64.3539 79.3408C60.9704 79.3408 58.2275 82.1523 58.2275 85.6204C58.2275 89.0885 60.9704 91.8999 64.3539 91.8999Z",fill:"#5F6368"}),n.jsx("path",{d:"M64.3539 112.347C67.7374 112.347 70.4803 109.536 70.4803 106.068C70.4803 102.6 67.7374 99.7881 64.3539 99.7881C60.9704 99.7881 58.2275 102.6 58.2275 106.068C58.2275 109.536 60.9704 112.347 64.3539 112.347Z",fill:"#5F6368"}),n.jsx("path",{d:"M67.7241 72.2193H38.6237C36.939 72.2193 35.5605 70.8408 35.5605 69.1561V54.8357C35.5605 53.1509 36.939 51.7725 38.6237 51.7725H67.7241C69.4088 51.7725 70.7873 53.1509 70.7873 54.8357V69.1561C70.7873 70.8408 69.4088 72.2193 67.7241 72.2193Z",fill:"#5F6368"}),n.jsx("path",{d:"M92.6885 52.4619C95.2262 52.4619 97.2833 50.3704 97.2833 47.7905C97.2833 45.2106 95.2262 43.1191 92.6885 43.1191C90.1509 43.1191 88.0938 45.2106 88.0938 47.7905C88.0938 50.3704 90.1509 52.4619 92.6885 52.4619Z",fill:"#DADCE0"}),n.jsx("path",{d:"M122.555 57.2099C125.092 57.2099 127.15 55.1185 127.15 52.5386C127.15 49.9586 125.092 47.8672 122.555 47.8672C120.017 47.8672 117.96 49.9586 117.96 52.5386C117.96 55.1185 120.017 57.2099 122.555 57.2099Z",fill:"#DADCE0"}),n.jsx("path",{d:"M114.131 43.042C116.669 43.042 118.726 40.9505 118.726 38.3706C118.726 35.7907 116.669 33.6992 114.131 33.6992C111.593 33.6992 109.536 35.7907 109.536 38.3706C109.536 40.9505 111.593 43.042 114.131 43.042Z",fill:"#DADCE0"}),n.jsx("path",{d:"M124.24 76.5078C124.24 90.9814 112.447 102.775 97.9733 102.775C85.1079 102.775 74.3867 93.5085 72.1659 81.3323C71.7064 78.8052 73.6975 76.5078 76.2246 76.5078H124.24Z",fill:"#1E8E3E"}),n.jsx("path",{d:"M135.574 79.3413C135.574 80.8729 132.434 82.1747 129.907 82.1747C127.38 82.1747 121.177 80.8729 121.177 79.3413C121.177 77.8097 127.38 76.5078 129.907 76.5078C132.511 76.5078 135.574 77.8097 135.574 79.3413Z",fill:"#1E8E3E"}),n.jsx("path",{d:"M131.438 69.0793C132.511 70.1514 131.209 73.2912 129.447 75.0525C127.609 76.8905 122.325 80.3365 121.253 79.2644C120.181 78.1923 123.627 72.9083 125.465 71.0704C127.227 69.3091 130.29 68.0072 131.438 69.0793Z",fill:"#1E8E3E"}),n.jsx("path",{d:"M84.0353 88.2249C86.2769 88.2249 88.094 86.4077 88.094 84.1661C88.094 81.9246 86.2769 80.1074 84.0353 80.1074C81.7937 80.1074 79.9766 81.9246 79.9766 84.1661C79.9766 86.4077 81.7937 88.2249 84.0353 88.2249Z",fill:"white"}),n.jsx("path",{d:"M92.076 79.265C94.2202 85.6977 93.8373 92.6665 90.7741 98.7163C90.3147 99.7118 91.7697 100.554 92.2291 99.5586C95.4455 93.1259 95.9816 85.6211 93.6842 78.8055C93.3778 77.7334 91.6931 78.1929 92.076 79.265Z",fill:"white"}),n.jsx("path",{d:"M94.9863 85.2374C95.0629 85.1608 95.216 85.1608 95.2926 85.0842C95.4458 85.0076 95.1394 85.1608 95.2926 85.0842C95.3692 85.0842 95.4458 85.0076 95.5223 85.0076C95.8287 84.931 96.135 84.7779 96.4413 84.7013C97.2837 84.4716 97.6666 84.4716 98.509 84.395C98.8919 84.395 99.2748 84.395 99.6577 84.4716C99.8108 84.4716 99.5811 84.4716 99.8108 84.4716C99.8874 84.4716 99.964 84.4716 100.117 84.5481C100.27 84.6247 100.5 84.6247 100.653 84.7013C101.266 84.8545 101.802 85.2374 102.185 85.6968C102.338 85.9266 102.568 86.3095 102.644 86.5392C102.797 86.9987 102.797 87.305 102.797 87.7645C102.797 88.6069 102.644 89.2961 102.185 89.9853C102.108 90.1385 102.185 89.9853 102.108 90.1385C102.032 90.215 102.032 90.2916 101.955 90.2916C101.878 90.3682 101.572 90.5979 101.572 90.6745C101.419 90.8277 100.96 91.0574 100.653 91.2106C100.577 91.2872 100.653 91.2106 100.653 91.2106C100.577 91.2106 100.577 91.2872 100.5 91.2872C100.423 91.2872 100.347 91.3637 100.194 91.3637C100.041 91.4403 99.8108 91.4403 99.6577 91.5169C99.5045 91.5935 99.2748 91.5935 99.1216 91.5935C99.045 91.5935 99.1216 91.5935 99.1216 91.5935C99.045 91.5935 99.045 91.5935 98.9684 91.5935C98.8919 91.5935 98.7387 91.5935 98.6621 91.5935C98.2026 91.5935 97.8197 91.5935 97.3603 91.5935C97.2837 91.5935 97.2071 91.5935 97.0539 91.5935C96.9008 91.5935 97.0539 91.5935 97.0539 91.5935C96.9774 91.5935 96.9774 91.5935 96.9008 91.5935C96.7476 91.5935 96.5179 91.5169 96.3647 91.4403C96.2116 91.3637 95.9818 91.3637 95.8287 91.2872C95.7521 91.2872 95.6755 91.2106 95.5989 91.2106C95.7521 91.2872 95.5989 91.2106 95.5223 91.2106C95.3692 91.134 95.2926 91.0574 95.1394 90.9808C94.9863 90.9043 95.216 91.0574 95.1394 90.9808C95.0629 90.9043 95.0629 90.9043 94.9863 90.8277C94.2205 89.9853 92.9952 91.2106 93.761 92.053C94.7565 93.1251 96.671 93.4314 98.0495 93.3548C99.8874 93.3548 101.802 92.8188 103.104 91.4403C104.559 89.8321 104.865 87.305 103.946 85.3139C103.104 83.5526 101.189 82.7868 99.3513 82.6336C97.59 82.4805 95.5989 82.7868 94.0673 83.6292C93.1484 84.2418 94.0673 85.7734 94.9863 85.2374Z",fill:"white"}),n.jsx("path",{d:"M84.0356 86.08C85.0929 86.08 85.9501 85.2228 85.9501 84.1655C85.9501 83.1081 85.0929 82.251 84.0356 82.251C82.9782 82.251 82.1211 83.1081 82.1211 84.1655C82.1211 85.2228 82.9782 86.08 84.0356 86.08Z",fill:"#5F6368"})]}),n.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"This is where you'll view and manage grades"}),t&&n.jsxs("button",{onClick:w,className:"px-4 py-2 bg-brand-green-light text-white rounded-lg hover:bg-brand-green-medium transition-colors flex items-center gap-2 mx-auto",children:[n.jsx(Bc,{className:"w-5 h-5"}),n.jsx("span",{children:"Invite students"})]})]}):n.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[n.jsx("th",{className:"text-left p-4 sticky left-0 bg-gray-50 z-10 min-w-[200px]",children:n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>v(!p),className:"flex items-center gap-2 text-sm font-medium text-gray-700 hover:text-gray-900",children:[n.jsx("span",{children:h==="lastName"?"Sort by last name":"Sort by first name"}),n.jsx(qr,{className:"w-4 h-4"})]}),p&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>v(!1)}),n.jsxs("div",{className:"absolute left-0 top-8 z-20 bg-white border border-gray-200 rounded-lg shadow-lg min-w-[180px]",children:[n.jsx("button",{onClick:()=>{f("lastName"),v(!1)},className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 ${h==="lastName"?"text-brand-green-medium font-medium":"text-gray-800"}`,children:"Sort by last name"}),n.jsx("button",{onClick:()=>{f("firstName"),v(!1)},className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 ${h==="firstName"?"text-brand-green-medium font-medium":"text-gray-800"}`,children:"Sort by first name"})]})]})]})})}),r.map(T=>n.jsx("th",{className:"text-center p-4 min-w-[120px]",children:n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:T.title}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["out of ",T.maxPoints]})]})},T.id)),n.jsx("th",{className:"w-4 p-4","aria-hidden":"true"})]})}),n.jsxs("tbody",{children:[n.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[n.jsx("th",{className:"text-left p-4 sticky left-0 bg-gray-50 z-10",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Class average"})]})}),r.map(T=>{const A=y(T.id);return n.jsx("td",{className:"text-center p-4",children:n.jsx("div",{className:"text-sm text-gray-700",children:A!==null?A.toFixed(2):""})},T.id)}),n.jsx("td",{className:"w-4","aria-hidden":"true"})]}),C.map(T=>(S(T),n.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[n.jsx("th",{className:"text-left p-4 sticky left-0 bg-white z-10",children:n.jsx("div",{className:"text-sm font-medium text-gray-900",children:T.studentName})}),r.map(A=>{const I=T.grades[A.id];return n.jsx("td",{className:"text-center p-4",children:n.jsx("div",{className:"text-sm text-gray-700",children:I??""})},A.id)}),n.jsx("td",{className:"w-4","aria-hidden":"true"})]},T.studentId)))]})]})})})},Xx=()=>{const{classId:e}=Xh(),t=Kr(),[r]=tf(),{user:s}=$t(),[o,i]=j.useState(null),[c,d]=j.useState(!0),[h,f]=j.useState("classwork"),[p,v]=j.useState(!1),[x,w]=j.useState(!1),[y,S]=j.useState(!1),[C,T]=j.useState(!1),[A,I]=j.useState(null),[O,P]=j.useState([]);j.useEffect(()=>{const R=r.get("tab");console.log("ClassDetail - Tab from URL:",R,"classId:",e),R&&["classwork","people","grades"].includes(R)?(console.log("Setting activeTab to:",R),f(R)):f("classwork")},[r,e]),j.useEffect(()=>{e&&$()},[e]);const $=async()=>{if(e)try{const R=await mf(e);R&&i({id:R.id||"",title:R.title||"",description:R.description,classCode:R.classCode,section:R.section,subject:R.subject,room:R.room,teacher:R.teacher,module:R.module}),d(!1)}catch(R){console.error("Error loading class:",R),d(!1)}},F=()=>{o?.classCode&&(navigator.clipboard.writeText(o.classCode),v(!1))},te=()=>{const R=`${window.location.origin}/dashboard/classes/${e}`;navigator.clipboard.writeText(R),v(!1)},ne=async()=>{try{const R=await b5(e||void 0);console.log("Loaded stream items:",R.map(de=>({id:de.id,classId:de.classId,className:de.className}))),P(R)}catch(R){console.error("Error loading stream items:",R)}},Ee=async R=>{if(!e||!s?.id){console.error("Cannot save stream item: classId or userId is missing");return}try{await yo({classId:e,type:R.type,title:R.title,content:R.content,authorId:s.id,attachments:R.attachments}),await ne()}catch(de){console.error("Error saving stream item:",de)}},Se=async R=>{if(e)try{const de=await Lh(e,R);i({id:de.id||"",title:de.title||"",description:de.description,classCode:de.classCode,section:de.section,subject:de.subject,room:de.room,teacher:de.teacher,module:de.module})}catch(de){console.error("Error updating class:",de)}},De=async R=>{if(A)try{const de=A.id;await uh(de,{title:R.title||"",content:R.instructions});const V=R.assignTo==="all",he=R.assignTo==="groups"?R.selectedGroups||[]:[],K=R.assignTo==="students"?R.selectedStudents||[]:[];await ed({streamItemId:de,points:R.points,dueDate:R.dueDate,dueTime:R.dueTime,instructions:R.instructions,assignToAll:V,assignedGroups:he,selectedStudents:K}),await ne(),T(!1),I(null)}catch(de){console.error("Error updating assignment:",de)}},U=[Ci,Df,Rf,Of],ye=(()=>{if(o?.backgroundImage)return o.backgroundImage;if(o?.id){const R=o.id.split("").reduce((de,V)=>de+V.charCodeAt(0),0);return U[R%U.length]}return Ci})();return c?n.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-green-medium"})}):o?n.jsxs("div",{className:"min-h-screen bg-white",children:[n.jsx("div",{className:"relative",children:n.jsxs("div",{className:"h-40 bg-cover bg-center relative",style:{backgroundImage:`url(${ye})`},children:[n.jsx("div",{className:"absolute inset-0 bg-black/20"}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-end justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-normal text-white mb-1 drop-shadow-lg",children:o.title}),o.description&&n.jsx("p",{className:"text-white text-sm drop-shadow-md",children:o.description})]}),n.jsxs("div",{className:"flex items-center gap-2 hidden",children:[n.jsxs("button",{className:"px-4 py-2 bg-white/90 hover:bg-white text-gray-700 rounded-md text-sm font-medium transition-colors flex items-center gap-2",title:"Customize",children:[n.jsx(Bn,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden md:inline",children:"Customize"})]}),n.jsx("button",{className:"p-2 bg-white/90 hover:bg-white text-gray-700 rounded-md transition-colors",title:"View class information",children:n.jsx(_E,{className:"w-4 h-4"})})]})]})})]})}),n.jsxs("div",{className:"max-w-7xl mx-auto flex gap-4 p-4",children:[n.jsxs("aside",{className:"w-64 flex-shrink-0 space-y-3 hidden",children:[n.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hidden",children:n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("h2",{className:"text-sm font-medium text-gray-900 flex items-center gap-2",children:[n.jsx("img",{src:"https://fonts.gstatic.com/s/i/productlogos/meet_2020q4/v6/web-48dp/logo_meet_2020q4_color_1x_web_48dp.png",alt:"Meet",className:"w-6 h-6"}),"Meet"]}),n.jsx("button",{className:"text-gray-500 hover:text-gray-700",children:n.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})})})]})}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hidden",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Class code"}),n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:()=>v(!p),className:"text-gray-500 hover:text-gray-700",children:n.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})})}),p&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>v(!1)}),n.jsxs("div",{className:"absolute right-0 top-8 z-20 bg-white border border-gray-200 rounded-lg shadow-lg min-w-[200px]",children:[n.jsxs("button",{onClick:()=>{v(!1),S(!0)},className:"w-full text-left px-4 py-2 text-sm text-black hover:bg-gray-50 flex items-center gap-2 hidden",children:[n.jsx(Bn,{className:"w-4 h-4"}),"Edit"]}),n.jsxs("button",{onClick:te,className:"w-full text-left px-4 py-2 text-sm text-black hover:bg-gray-50 flex items-center gap-2",children:[n.jsx(Ah,{className:"w-4 h-4"}),"Copy class invite link"]}),n.jsxs("button",{onClick:F,className:"w-full text-left px-4 py-2 text-sm text-black hover:bg-gray-50 flex items-center gap-2",children:[n.jsx(Ah,{className:"w-4 h-4"}),"Copy class code"]}),n.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-black hover:bg-gray-50 flex items-center gap-2",children:[n.jsx(m2,{className:"w-4 h-4"}),"Reset class code"]}),n.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-black hover:bg-gray-50 flex items-center gap-2 border-t border-gray-200",children:[n.jsx(GE,{className:"w-4 h-4"}),"Turn off"]})]})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-lg font-medium text-gray-900",children:o.classCode||"jqrkw6br"}),n.jsx("button",{className:"p-1 text-gray-500 hover:text-gray-700",title:"Display class code",children:n.jsx(RE,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hidden",children:[n.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-3",children:"Upcoming"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(sn,{className:"w-4 h-4 text-green-600"}),n.jsx("span",{className:"text-gray-700 font-medium",children:"No work due soon"})]}),n.jsx("p",{className:"text-xs text-gray-500",children:"Woohoo, no work due soon!"}),n.jsx("button",{className:"text-sm text-brand-green-medium hover:underline mt-2",children:"View all"})]})]})]}),n.jsxs("main",{className:"flex-1",children:[n.jsx("div",{className:"border-b border-gray-200 mb-4",children:n.jsxs("nav",{className:"flex gap-6",children:[!1,n.jsx("button",{onClick:()=>f("classwork"),className:`pb-3 px-1 text-sm font-medium border-b-2 transition-colors ${h==="classwork"?"border-brand-green-medium text-brand-green-medium":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Classwork"}),n.jsx("button",{onClick:()=>f("people"),className:`pb-3 px-1 text-sm font-medium border-b-2 transition-colors hidden ${h==="people"?"border-brand-green-medium text-brand-green-medium":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"People"}),!1]})}),!1,h==="classwork"&&n.jsx(iO,{classId:e||"",isTeacher:!0,className:o?.title||""}),h==="people"&&n.jsx("div",{className:"hidden",children:n.jsx(cO,{classId:e||"",isTeacher:!0})}),h==="grades"&&n.jsx(dO,{classId:e||"",isTeacher:!0})]}),n.jsx(oO,{isOpen:x,onClose:()=>w(!1),classId:e||"",className:o?.title||"",onSave:R=>{console.log("Saving announcement:",R);const de=R.content||"",V={id:`announcement_${Date.now()}`,type:"announcement",title:de.length>50?de.substring(0,50)+"...":de||"Announcement",content:de,author:{name:"Current User",avatar:void 0},createdAt:new Date().toISOString(),attachments:R.attachments||[]};Ee(V),w(!1)}}),o&&n.jsx(lO,{isOpen:y,onClose:()=>S(!1),classData:{...o,description:o.description||""},onSave:Se}),n.jsx(Zx,{isOpen:C,onClose:()=>{T(!1),I(null)},classId:e||"",className:o?.title||"",initialData:A?.data,isEdit:!!A,onSave:R=>{A&&De(R)}})]})]}):n.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-2xl font-semibold text-black mb-2",children:"Clase no encontrada"}),n.jsx("button",{onClick:()=>t("/dashboard/home"),className:"text-brand-green-medium hover:underline",children:"Volver a Home"})]})})},uO=({classId:e,className:t=""})=>{const{user:r}=$t(),s=Kr(),[o,i]=j.useState([]),[c,d]=j.useState([]),[h,f]=j.useState([]),[p,v]=j.useState(!0),[x,w]=j.useState(null),[y,S]=j.useState(!1),[C,T]=j.useState(null),[A,I]=j.useState(null),[O,P]=j.useState({}),[$,F]=j.useState(null),[te,ne]=j.useState(!1);j.useEffect(()=>{r?.id&&e&&Ee()},[e,r?.id]);const Ee=async()=>{if(r?.id){v(!0);try{const H=(await td(r.id,r.grupoAsignado)).filter(ae=>ae.classId===e&&!ae.isArchived),R=(await Promise.all(H.map(async ae=>{try{const z=await ji(ae.id,r.id);return{...ae,submissionStatus:z?.status||null}}catch{return{...ae,submissionStatus:null}}}))).filter(ae=>!ae.submissionStatus||ae.submissionStatus==="draft"||ae.submissionStatus==="returned");i(R);const V=(await A2(r.id,r.grupoAsignado)).filter(ae=>ae.classId===e&&!ae.isArchived),K=(await Promise.all(V.map(async ae=>{try{const z=await Lg(ae.id,r.id);return{...ae,submissionStatus:z?.status||null}}catch{return{...ae,submissionStatus:null}}}))).filter(ae=>!ae.submissionStatus||ae.submissionStatus==="draft");d(K);const re=(await v5(r.id,r.grupoAsignado)).filter(ae=>ae.classId===e&&!ae.isArchived);f(re)}catch(U){console.error("Error loading items:",U)}finally{v(!1)}}},Se=async U=>{if(U.type==="quiz"&&U.streamItemId)try{const H=await yl(U.streamItemId);if(H){if(w({...U,questions:H.questions||[],points:H.points,dueDate:H.dueDate,dueTime:H.dueTime,description:H.description}),r?.id&&U.id)try{const ye=await Lg(U.id,r.id);ye?(F(ye.status),ye.answers&&P(ye.answers)):(F(null),P({}))}catch(ye){console.error("Error loading quiz submission:",ye),F(null),P({})}}else w(U)}catch(H){console.error("Error loading quiz questions:",H),w(U)}else w(U),P({}),F(null);if(U.type==="assignment"&&r?.id&&U.id)try{const H=await ji(U.id,r.id);I(H?H.status:null)}catch(H){console.error("Error loading submission:",H),I(null)}else I(null)},De=U=>{if(console.log(" handleSubmitAssignment llamado con:",U),!U){console.error(" No hay assignment para enviar");return}if(!U.id){console.error(" Assignment no tiene ID:",U);return}console.log(" Estado antes de abrir modal - submissionModalOpen:",y),T(U),S(!0),console.log(" Modal abierto para assignment:",U.id),setTimeout(()=>{console.log(" Estado despus de abrir - submissionModalOpen debera ser true")},100)};if(x){const U=x.type==="assignment",H=x.type==="quiz",ye=x.type==="material";return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"min-h-screen bg-white",children:n.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("button",{onClick:()=>{w(null),P({}),F(null),I(null)},className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[n.jsx(Rr,{className:"w-5 h-5"}),n.jsx("span",{children:"Volver"})]}),x.classId&&n.jsxs("button",{onClick:()=>{w(null),s(`/dashboard/classes/${x.classId}?tab=classwork`)},className:"px-4 py-2 text-sm bg-blue-400 text-white rounded hover:bg-blue-500 transition-colors flex items-center gap-2",children:[n.jsx(Sl,{className:"w-4 h-4"}),"Ir a la clase"]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-lg p-8",children:[n.jsx("h1",{className:"text-3xl font-semibold text-gray-900 mb-4",children:x.title}),x.className&&n.jsx("div",{className:"mb-6",children:n.jsx("span",{className:"inline-block text-sm px-3 py-1 bg-blue-100 text-blue-800 rounded",children:x.className})}),(x.instructions||x.description)&&n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-3",children:H||ye?"Descripcin":"Instrucciones"}),n.jsx("div",{className:"prose max-w-none",children:n.jsx("p",{className:"text-gray-700 whitespace-pre-wrap leading-relaxed",children:x.instructions||x.description})})]}),x.attachments&&x.attachments.length>0&&n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-3",children:"Archivos adjuntos"}),n.jsx("div",{className:"space-y-2",children:x.attachments.map(R=>n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100 transition-colors",children:[n.jsx(Us,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:R.name||"Google Drive file"}),R.url&&n.jsx("a",{href:R.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline truncate block",onClick:de=>de.stopPropagation(),children:R.url})]}),R.url&&n.jsx("a",{href:R.url,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 text-sm bg-blue-400 text-white rounded hover:bg-blue-500 transition-colors",onClick:de=>de.stopPropagation(),children:"Abrir"})]},R.id||R.url))})]}),H&&x.questions&&x.questions.length>0&&n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Preguntas"}),n.jsx("div",{className:"space-y-6",children:x.questions.map((R,de)=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("h3",{className:"font-medium text-gray-900",children:[de+1,". ",R.title]}),n.jsxs("span",{className:"text-sm text-gray-500",children:[R.points," puntos"]})]}),R.description&&n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:R.description}),R.type==="multiple-choice"&&R.options&&Array.isArray(R.options)&&n.jsx("div",{className:"space-y-2 mt-4",children:R.options.map((V,he)=>n.jsxs("label",{className:`flex items-center gap-3 p-3 border-2 rounded-lg cursor-pointer transition-colors ${O[R.id]===V?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"} ${$==="submitted"||$==="graded"?"cursor-not-allowed opacity-75":""}`,children:[n.jsx("input",{type:"radio",name:`question-${R.id}`,value:V,checked:O[R.id]===V,onChange:K=>{$!=="submitted"&&$!=="graded"&&P({...O,[R.id]:K.target.value})},disabled:$==="submitted"||$==="graded",className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"text-gray-900 flex-1",children:V})]},he))}),R.type==="short-answer"&&n.jsx("div",{className:"mt-4",children:n.jsx("textarea",{value:O[R.id]||"",onChange:V=>{$!=="submitted"&&$!=="graded"&&P({...O,[R.id]:V.target.value})},disabled:$==="submitted"||$==="graded",placeholder:"Escribe tu respuesta aqu...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",rows:3})})]},R.id||de))})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[x.points!==void 0&&n.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[n.jsx($a,{className:"w-6 h-6 text-gray-600 flex-shrink-0 mt-1"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Puntos"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:x.points})]})]}),x.dueDate&&n.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[n.jsx(Fs,{className:"w-6 h-6 text-gray-600 flex-shrink-0 mt-1"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Fecha de vencimiento"}),n.jsxs("p",{className:"text-xl font-semibold text-gray-900",children:[new Date(x.dueDate).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),x.dueTime&&n.jsxs("span",{className:"text-base font-normal text-gray-600 block mt-1",children:["a las ",x.dueTime]})]})]})]})]}),U&&n.jsxs("div",{className:"border-t border-gray-200 pt-6 mb-8",children:[n.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Asignacin"}),x.assignToAll?n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Sr,{className:"w-6 h-6 text-gray-600"}),n.jsx("span",{className:"text-gray-900 text-lg",children:"Todos los estudiantes"})]}):n.jsx("div",{className:"space-y-4",children:x.assignedGroups&&x.assignedGroups.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Grupos asignados:"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:x.assignedGroups.map(R=>n.jsx("span",{className:"px-3 py-1.5 bg-blue-100 text-blue-800 rounded-lg text-sm font-medium",children:R},R))})]})})]}),x.author&&n.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[n.jsxs("p",{className:"text-sm text-gray-600",children:["Creado por: ",n.jsx("span",{className:"font-medium text-gray-900",children:x.author.name})]}),x.createdAt&&n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:new Date(x.createdAt).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),H&&x.questions&&x.questions.length>0&&n.jsx("div",{className:"border-t border-gray-200 pt-6 mt-6",children:$==="submitted"||$==="graded"?n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Eh,{className:"w-6 h-6 text-green-600"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-sm font-medium text-green-900",children:["Quiz ",$==="graded"?"calificado":"enviado"]}),n.jsx("p",{className:"text-xs text-green-700 mt-1",children:$==="graded"?"Tu quiz ha sido calificado. Revisa tus resultados.":"Tu quiz ha sido enviado. El profesor lo revisar pronto."})]})]})}):n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:async()=>{if(!(!r?.id||!x.id)){ne(!0);try{await Ew({quizId:x.id,studentId:r.id,answers:O,status:"draft"}),alert("Borrador guardado correctamente")}catch(R){console.error("Error saving quiz draft:",R),alert("Error al guardar el borrador")}finally{ne(!1)}}},disabled:te,className:"px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium flex items-center gap-2 disabled:opacity-50",children:te?"Guardando...":"Guardar borrador"}),n.jsx("button",{onClick:async()=>{if(!r?.id||!x.id)return;const de=x.questions.filter(V=>V.required).filter(V=>!O[V.id]);if(de.length>0){alert(`Por favor responde todas las preguntas requeridas. Faltan ${de.length} pregunta(s).`);return}if(confirm("Ests seguro de que deseas enviar el quiz? No podrs modificarlo despus.")){ne(!0);try{await Ew({quizId:x.id,studentId:r.id,answers:O,status:"submitted"}),F("submitted"),alert("Quiz enviado correctamente"),Ee()}catch(V){console.error("Error submitting quiz:",V),alert("Error al enviar el quiz")}finally{ne(!1)}}},disabled:te||Object.keys(O).length===0,className:"px-6 py-3 bg-blue-400 text-white rounded-lg hover:bg-blue-500 transition-colors font-medium flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:te?"Enviando...":"Enviar quiz"})]})}),U&&n.jsx("div",{className:"border-t border-gray-200 pt-6 mt-6",children:!A||A==="draft"||A==="returned"?n.jsxs("button",{onClick:()=>De(x),className:"w-full px-6 py-3 bg-blue-400 text-white rounded-lg hover:bg-blue-500 transition-colors font-medium flex items-center justify-center gap-2",children:[n.jsx(fr,{className:"w-5 h-5"}),A==="draft"?"Continuar borrador":A==="returned"?"Reenviar respuesta":"Enviar respuesta"]}):n.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-300 rounded-lg p-5 shadow-md",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${A==="submitted"||A==="to_review"?"bg-blue-100":A==="reviewed"?"bg-yellow-100":"bg-green-100"}`,children:A==="submitted"||A==="to_review"?n.jsx(Xn,{className:"w-6 h-6 text-blue-600"}):n.jsx(Eh,{className:"w-6 h-6 text-green-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"flex items-center gap-2 mb-2",children:n.jsx("h3",{className:"text-base font-semibold text-gray-900",children:A==="submitted"?" Respuesta enviada":A==="to_review"?" En revisin":A==="reviewed"?" Revisada por el profesor":A==="graded"?" Calificada":" Respuesta enviada"})}),n.jsx("p",{className:"text-sm text-gray-700 mb-3",children:A==="submitted"?"Tu respuesta ha sido enviada exitosamente. El profesor la revisar pronto.":A==="to_review"?"Tu respuesta est siendo revisada por el profesor.":A==="reviewed"?"El profesor ha revisado tu respuesta. Revisa los comentarios si los hay.":A==="graded"?"Tu respuesta ha sido calificada. Revisa tu calificacin y comentarios.":"Tu respuesta ha sido enviada exitosamente."}),n.jsxs("button",{onClick:()=>De(x),className:"px-4 py-2 text-sm bg-white border-2 border-green-400 text-green-700 rounded-lg hover:bg-green-50 transition-colors font-medium flex items-center gap-2 shadow-sm",children:[n.jsx(fr,{className:"w-4 h-4"}),"Ver mi respuesta"]})]})]})})})]})]})}),C&&n.jsx(rd,{isOpen:y,onClose:()=>{console.log(" Cerrando modal"),S(!1),T(null),Ee()},assignmentId:C.id,streamItemId:C.streamItemId,assignmentTitle:C.title,instructions:C.instructions,dueDate:C.dueDate,dueTime:C.dueTime,onSubmitted:async()=>{if(await Ee(),x?.type==="assignment"&&r?.id&&x?.id)try{const R=await ji(x.id,r.id);I(R?R.status:null)}catch(R){console.error("Error loading submission:",R)}}})]})}return n.jsxs("div",{className:"min-h-screen bg-white",children:[n.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:p?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-green-medium mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Cargando..."})]}):n.jsxs("div",{className:"space-y-6",children:[o.length>0&&n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(fr,{className:"w-5 h-5"}),"Assignments"]}),n.jsx("div",{className:"space-y-4",children:o.map(U=>n.jsx("div",{onClick:()=>Se({...U,type:"assignment"}),className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:U.title}),U.instructions&&n.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:U.instructions}),n.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[U.dueDate&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Fs,{className:"w-4 h-4"}),n.jsxs("span",{children:[new Date(U.dueDate).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),U.dueTime&&` a las ${U.dueTime}`]})]}),U.points!==void 0&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx($a,{className:"w-4 h-4"}),n.jsxs("span",{children:[U.points," puntos"]})]})]})]})})},U.id))})]}),c.length>0&&n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(Ih,{className:"w-5 h-5"}),"Quizzes"]}),n.jsx("div",{className:"space-y-4",children:c.map(U=>n.jsx("div",{onClick:()=>Se({...U,type:"quiz"}),className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:U.title}),U.description&&n.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:U.description}),n.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[U.dueDate&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Fs,{className:"w-4 h-4"}),n.jsxs("span",{children:[new Date(U.dueDate).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),U.dueTime&&` a las ${U.dueTime}`]})]}),U.points!==void 0&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx($a,{className:"w-4 h-4"}),n.jsxs("span",{children:[U.points," puntos"]})]})]})]})})},U.id))})]}),h.length>0&&n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(tx,{className:"w-5 h-5"}),"Materials"]}),n.jsx("div",{className:"space-y-4",children:h.map(U=>n.jsx("div",{onClick:()=>Se({...U,type:"material"}),className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:U.title}),U.description&&n.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:U.description})]})})},U.id))})]}),o.length===0&&c.length===0&&h.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(fr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No hay tareas asignadas"}),n.jsx("p",{className:"text-gray-600",children:"No hay assignments, quizzes o materials asignados para esta clase"})]})]})}),C&&n.jsxs(n.Fragment,{children:[console.log(" Renderizando modal - submissionModalOpen:",y,"selectedAssignment:",C.id),n.jsx(rd,{isOpen:y,onClose:()=>{console.log(" Cerrando modal"),S(!1),T(null),Ee()},assignmentId:C.id,streamItemId:C.streamItemId,assignmentTitle:C.title,instructions:C.instructions,dueDate:C.dueDate,dueTime:C.dueTime,onSubmitted:()=>{Ee()}})]})]})},hO=async(e,t)=>{try{const{data:r,error:s}=await Ue.from("assignments").select(`
        id,
        points,
        due_date,
        stream_item:stream_items!inner(
            id,
            title, 
            class_id
        )
      `).eq("stream_item.class_id",e).eq("is_deleted",!1);if(s)throw s;const{data:o,error:i}=await Ue.from("quizzes").select(`
        id,
        points,
        due_date,
        stream_item:stream_items!inner(
            id,
            title,
            class_id
        )
      `).eq("stream_item.class_id",e);if(i)throw i;const c=r?.map(w=>w.id)||[];let d=[],h=[];if(c.length>0){const{data:w,error:y}=await Ue.from("assignment_submissions").select("assignment_id, grade, status, teacher_comments, submitted_at").in("assignment_id",c).eq("student_id",t);if(y)throw y;d=w||[];const{data:S,error:C}=await Ue.from("assignment_students").select("assignment_id").in("assignment_id",c).eq("student_id",t);if(C)throw C;h=S?.map(T=>T.assignment_id)||[]}const f=o?.map(w=>w.id)||[];let p=[],v=[];if(f.length>0){const{data:w,error:y}=await Ue.from("quiz_submissions").select("quiz_id, grade, status, teacher_comments, submitted_at").in("quiz_id",f).eq("student_id",t);if(y)throw y;p=w||[];const{data:S,error:C}=await Ue.from("quiz_students").select("quiz_id").in("quiz_id",f).eq("student_id",t);if(C)throw C;v=S?.map(T=>T.quiz_id)||[]}const x=[];return r?.forEach(w=>{if(w.assign_to_all||h.includes(w.id)||d.some(y=>y.assignment_id===w.id)){const y=d.find(S=>S.assignment_id===w.id);x.push({id:w.id,title:w.stream_item?.title||"Untitled Assignment",type:"assignment",maxPoints:w.points||100,pointsEarned:y?.grade?parseFloat(y.grade):null,status:y?.status||"pending",dueDate:w.due_date,submittedAt:y?.submitted_at,feedback:y?.teacher_comments})}}),o?.forEach(w=>{if(w.assign_to_all||v.includes(w.id)||p.some(y=>y.quiz_id===w.id)){const y=p.find(S=>S.quiz_id===w.id);x.push({id:w.id,title:w.stream_item?.title||"Untitled Quiz",type:"quiz",maxPoints:w.points||100,pointsEarned:y?.grade?parseFloat(y.grade):null,status:y?.status||"pending",dueDate:w.due_date,submittedAt:y?.submitted_at,feedback:y?.teacher_comments})}}),x}catch(r){throw console.error("Error fetching student grades:",r),r}},fO=({isOpen:e,onClose:t,title:r,type:s,grade:o,maxPoints:i,comments:c,submittedAt:d,status:h})=>{if(!e)return null;const f=o!==null?o/i*100:0;return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden relative animate-fade-in-up",children:[n.jsxs("div",{className:`px-6 py-4 flex justify-between items-start border-b ${s==="quiz"?"bg-purple-50 border-purple-100":"bg-blue-50 border-blue-100"}`,children:[n.jsxs("div",{children:[n.jsxs("span",{className:`text-xs font-bold uppercase tracking-wider mb-1 block ${s==="quiz"?"text-purple-600":"text-blue-600"}`,children:[s," Feedback"]}),n.jsx("h2",{className:"text-xl font-bold text-gray-900 leading-tight",children:r})]}),n.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-200 rounded-full transition-colors text-gray-500",children:n.jsx(Rr,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-4 border border-gray-100",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm text-gray-500 font-medium block",children:"Your Score"}),n.jsxs("div",{className:"flex items-baseline gap-1",children:[n.jsx("span",{className:"text-3xl font-bold text-gray-900",children:o!==null?o:"--"}),n.jsxs("span",{className:"text-sm text-gray-400",children:["/ ",i]})]})]}),o!==null&&n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:`text-lg font-bold ${f>=90?"text-green-600":f>=70?"text-blue-600":"text-yellow-600"}`,children:[f.toFixed(0),"%"]}),n.jsx("span",{className:"text-xs text-gray-400",children:"Percentage"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("div",{className:"mt-0.5",children:h==="reviewed"||h==="graded"?n.jsx(sn,{className:"w-4 h-4 text-green-500"}):n.jsx(Ei,{className:"w-4 h-4 text-yellow-500"})}),n.jsxs("div",{children:[n.jsx("span",{className:"text-xs text-gray-500 block",children:"Status"}),n.jsx("span",{className:"text-sm font-medium text-gray-800 capitalize",children:h==="to_review"?"Submitted":h})]})]}),d&&n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("div",{className:"mt-0.5",children:n.jsx(fr,{className:"w-4 h-4 text-gray-400"})}),n.jsxs("div",{children:[n.jsx("span",{className:"text-xs text-gray-500 block",children:"Submitted on"}),n.jsx("span",{className:"text-sm font-medium text-gray-800",children:new Date(d).toLocaleDateString()})]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"flex items-center gap-2 text-sm font-bold text-gray-900 mb-3",children:[n.jsx(Xc,{className:"w-4 h-4 text-brand-green-medium"}),"Teacher Feedback"]}),c?n.jsxs("div",{className:"bg-yellow-50 border border-yellow-100 rounded-lg p-4 text-gray-800 text-sm leading-relaxed whitespace-pre-wrap",children:['"',c,'"']}):n.jsx("div",{className:"text-sm text-gray-400 italic bg-gray-50 p-4 rounded-lg text-center border border-gray-100",children:"No written feedback provided."})]})]}),n.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50 text-center",children:n.jsx("button",{onClick:t,className:"text-sm text-gray-600 hover:text-gray-900 font-medium px-4 py-2 hover:bg-gray-100 rounded-lg transition-colors",children:"Close"})})]})})},mO=({classId:e})=>{const{user:t}=$t(),[r,s]=j.useState([]),[o,i]=j.useState(!0),[c,d]=j.useState(null),[h,f]=j.useState(null);j.useEffect(()=>{t?.id&&e&&p()},[t,e]);const p=async()=>{if(t?.id){i(!0);try{const x=await hO(e,t.id);s(x),v(x)}catch(x){console.error("Failed to load grades",x)}finally{i(!1)}}},v=x=>{let w=0,y=0;x.forEach(S=>{S.pointsEarned!==null&&S.maxPoints>0&&(w+=S.pointsEarned,y+=S.maxPoints)}),y>0?d(w/y*100):d(null)};return o?n.jsx("div",{className:"flex justify-center p-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-green-medium"})}):n.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6 flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Your Grades"}),n.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:[r.length," items graded"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:`text-3xl font-bold ${c!==null?c>=90?"text-green-600":c>=80?"text-blue-600":c>=70?"text-yellow-600":"text-red-600":"text-gray-400"}`,children:c!==null?`${c.toFixed(1)}%`:"N/A"}),n.jsx("div",{className:"text-xs text-gray-500 uppercase font-bold tracking-wider mt-1",children:"Overall Grade"})]})]}),n.jsx("div",{className:"space-y-4",children:r.length===0?n.jsx("div",{className:"text-center py-12 text-gray-500 bg-white rounded-lg border border-gray-200 border-dashed",children:"No items found for this class."}):r.map(x=>n.jsxs("div",{onClick:()=>f(x),className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow cursor-pointer group",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsx("div",{className:`p-3 rounded-full h-12 w-12 flex items-center justify-center transition-colors ${x.type==="quiz"?"bg-purple-100 text-purple-600 group-hover:bg-purple-200":"bg-blue-100 text-blue-600 group-hover:bg-blue-200"}`,children:n.jsx(fr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900 group-hover:text-blue-700 transition-colors",children:x.title}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mt-1",children:[n.jsx("span",{className:"capitalize",children:x.type}),n.jsx("span",{children:""}),x.status==="reviewed"||x.status==="graded"?n.jsxs("span",{className:"flex items-center gap-1 text-green-600 font-medium",children:[n.jsx(sn,{className:"w-3 h-3"})," Graded"]}):x.status==="submitted"?n.jsxs("span",{className:"flex items-center gap-1 text-blue-600 font-medium",children:[n.jsx(Xn,{className:"w-3 h-3"})," Submitted"]}):n.jsxs("span",{className:"flex items-center gap-1 text-gray-500",children:[n.jsx(Ei,{className:"w-3 h-3"})," ",x.status]})]}),x.dueDate&&n.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Due: ",new Date(x.dueDate).toLocaleDateString()]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[x.pointsEarned!==null?x.pointsEarned:"",n.jsxs("span",{className:"text-sm text-gray-400 font-normal",children:[" / ",x.maxPoints]})]}),x.pointsEarned!==null&&n.jsxs("div",{className:`text-xs font-bold ${x.pointsEarned/x.maxPoints>=.9?"text-green-600":"text-gray-500"}`,children:[(x.pointsEarned/x.maxPoints*100).toFixed(0),"%"]})]})]}),x.feedback&&n.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-100 bg-gray-50 rounded p-3 text-sm text-gray-700 flex gap-2",children:[n.jsx(Xc,{className:"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("span",{className:"font-bold text-gray-900 block mb-1 text-xs uppercase",children:"Feedback:"}),n.jsx("span",{className:"line-clamp-2",children:x.feedback})]})]})]},`${x.type}-${x.id}`))}),h&&n.jsx(fO,{isOpen:!!h,onClose:()=>f(null),title:h.title,type:h.type,grade:h.pointsEarned,maxPoints:h.maxPoints,comments:h.feedback,submittedAt:h.submittedAt,status:h.status})]})},pO=()=>{const{classId:e}=Xh(),t=Kr(),[r]=tf(),{user:s}=$t(),[o,i]=j.useState(null),[c,d]=j.useState(!0),[h,f]=j.useState("classwork");j.useEffect(()=>{const w=r.get("tab");w&&["classwork","people","grades"].includes(w)?f(w):f("classwork")},[r,e]),j.useEffect(()=>{e&&p()},[e]);const p=async()=>{if(!e||!s?.id){d(!1);return}try{if(!(await D2(s.id)).some(C=>C.id===e)){alert("No tienes acceso a esta clase"),t("/dashboard");return}const S=await mf(e);if(!S){alert("Clase no encontrada"),t("/dashboard");return}i({id:S.id,title:S.title,description:S.description||"",classCode:S.classCode,section:S.section,subject:S.subject,room:S.room,backgroundImage:S.backgroundImage,module:S.module,teacher:S.teacher})}catch(w){console.error("Error loading class:",w),alert("Error al cargar la clase"),t("/dashboard")}finally{d(!1)}};if(c)return n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-green-medium"})});if(!o)return null;const x=(()=>{if(o?.backgroundImage)return o.backgroundImage;const w=[Ci,Df,Rf,Of];if(o?.id){const y=o.id.split("").reduce((S,C)=>S+C.charCodeAt(0),0);return w[y%w.length]}return Ci})();return n.jsxs("div",{className:"min-h-screen bg-white",children:[n.jsx("div",{className:"relative",children:n.jsxs("div",{className:"h-40 bg-cover bg-center relative",style:{backgroundImage:`url(${x})`},children:[n.jsx("div",{className:"absolute inset-0 bg-black/20"}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:n.jsx("div",{className:"max-w-7xl mx-auto flex items-end justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-normal text-white mb-1 drop-shadow-lg",children:o.title}),o.subject&&n.jsx("p",{className:"text-white text-sm drop-shadow-md",children:o.subject})]})})})]})}),n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsx("div",{className:"border-b border-gray-200 mb-4",children:n.jsxs("nav",{className:"flex gap-6",children:[n.jsx("button",{onClick:()=>{f("classwork"),t(`/dashboard/classes/${e}?tab=classwork`,{replace:!0})},className:`pb-3 px-1 text-sm font-medium border-b-2 transition-colors ${h==="classwork"?"border-brand-green-medium text-brand-green-medium":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Classwork"}),n.jsx("button",{onClick:()=>{f("people"),t(`/dashboard/classes/${e}?tab=people`,{replace:!0})},className:`pb-3 px-1 text-sm font-medium border-b-2 transition-colors hidden ${h==="people"?"border-brand-green-medium text-brand-green-medium":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"People"}),n.jsx("button",{onClick:()=>{f("grades"),t(`/dashboard/classes/${e}?tab=grades`,{replace:!0})},className:`pb-3 px-1 text-sm font-medium border-b-2 transition-colors ${h==="grades"?"border-brand-green-medium text-brand-green-medium":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Grades"})]})}),n.jsxs("main",{className:"min-h-screen bg-white",children:[h==="classwork"&&n.jsx(uO,{classId:e||"",className:o.title}),h==="people"&&n.jsx("div",{className:"hidden"}),h==="grades"&&n.jsx("div",{className:"p-6",children:n.jsx(mO,{classId:e||""})})]})]})]})},gO=()=>n.jsx(Xx,{}),xO=({classId:e,className:t="",studentId:r})=>{const{user:s}=$t();Kr();const[o,i]=j.useState([]),[c,d]=j.useState(!0);return j.useEffect(()=>{d(!1)},[e,r]),c?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-green-medium mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Cargando..."})]}):n.jsx("div",{className:"min-h-screen bg-white",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Tareas y Materiales"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Vista de solo lectura de las tareas y materiales de la clase"})]}),o.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(fr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No hay tareas"}),n.jsx("p",{className:"text-gray-600",children:"No hay assignments, quizzes o materials en esta clase"})]}):n.jsx("div",{className:"space-y-4",children:o.map(h=>n.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:h.title}),h.description&&n.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:h.description}),n.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[h.dueDate&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Fs,{className:"w-4 h-4"}),n.jsx("span",{children:new Date(h.dueDate).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"})})]}),h.points!==void 0&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx($a,{className:"w-4 h-4"}),n.jsxs("span",{children:[h.points," puntos"]})]})]})]})})},h.id))})]})})},vO=()=>{const{classId:e}=Xh(),t=Kr(),[r]=tf(),{user:s}=$t(),[o,i]=j.useState(null),[c,d]=j.useState(!0),[h,f]=j.useState("classwork"),[p,v]=j.useState();j.useEffect(()=>{const w=r.get("tab"),y=r.get("student");w&&["classwork","people","grades"].includes(w)&&f(w),y&&v(y)},[r,e]),j.useEffect(()=>{e&&x()},[e]);const x=async()=>{if(!e){d(!1);return}try{const w=await mf(e);i({id:w.id,title:w.title,description:w.description||"",classCode:w.classCode,section:w.section,subject:w.subject,room:w.room,module:w.module,teacher:w.teacher})}catch(w){console.error("Error loading class:",w),alert("Error al cargar la clase"),t("/dashboard")}finally{d(!1)}};return c?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-green-medium"})}):o?n.jsxs("div",{className:"min-h-screen bg-white",children:[n.jsx("div",{className:"relative",children:n.jsxs("div",{className:"h-40 bg-cover bg-center relative",style:{backgroundImage:`url(${(()=>{const w=[Ci,Df,Rf,Of];if(o?.backgroundImage)return o.backgroundImage;if(o?.id){const y=o.id.split("").reduce((S,C)=>S+C.charCodeAt(0),0);return w[y%w.length]}return Ci})()})`},children:[n.jsx("div",{className:"absolute inset-0 bg-black/20"}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:n.jsx("div",{className:"max-w-7xl mx-auto flex items-end justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-normal text-white mb-1 drop-shadow-lg",children:o.title}),o.subject&&n.jsx("p",{className:"text-white text-sm drop-shadow-md",children:o.subject})]})})})]})}),n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsx("div",{className:"border-b border-gray-200 mb-4",children:n.jsxs("nav",{className:"flex gap-6",children:[n.jsx("button",{onClick:()=>{f("classwork"),t(`/dashboard/classes/${e}?tab=classwork`,{replace:!0})},className:`pb-3 px-1 text-sm font-medium border-b-2 transition-colors ${h==="classwork"?"border-brand-green-medium text-brand-green-medium":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Classwork"}),n.jsx("button",{onClick:()=>{f("grades"),t(`/dashboard/classes/${e}?tab=grades`,{replace:!0})},className:`pb-3 px-1 text-sm font-medium border-b-2 transition-colors ${h==="grades"?"border-brand-green-medium text-brand-green-medium":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Grades"})]})}),n.jsxs("main",{className:"min-h-screen bg-white",children:[h==="classwork"&&n.jsx(xO,{classId:e||"",className:o.title,studentId:p}),h==="grades"&&n.jsx("div",{className:"p-6",children:n.jsx("p",{className:"text-gray-600",children:"Vista de calificaciones (prximamente)"})})]})]})]}):null},yO=()=>n.jsx(Xx,{}),bO=({classId:e,onClassChange:t})=>{const r=Kr(),{user:s}=$t(),o=()=>{const K=new Date,B=K.getDay(),ae=(B===0?7:B)-1,z=new Date(K);return z.setDate(K.getDate()-ae),z.setHours(0,0,0,0),z},[i,c]=j.useState(o()),[d,h]=j.useState("all"),[f,p]=j.useState([]),[v,x]=j.useState([]),[w,y]=j.useState(!0),[S,C]=j.useState(!1),[T,A]=j.useState(null),[I,O]=j.useState(!1);j.useEffect(()=>{P()},[]),j.useEffect(()=>{$()},[i,d]);const P=async()=>{try{const{user:K}=$t.getState();if(!K?.id)return;const B=await ko(K.id);p(B.map(re=>({id:re.id,title:re.title||re.subject||"Sin nombre"})))}catch(K){console.error("Error loading classes:",K)}},$=async()=>{y(!0);try{const{user:K}=$t.getState();if(!K?.id){x([]),y(!1);return}const B=[];try{let re;K.role==="student"?re=await td(K.id,K.grupoAsignado):re=await mx(),(await Promise.all(re.map(async z=>{let ge=null;if(K.role==="student")try{ge=(await ji(z.id,K.id))?.status||null}catch{}return{...z,submissionStatus:ge}}))).forEach(z=>{d!=="all"&&z.classId!==d||z.dueDate&&!z.isArchived&&B.push({id:z.id,title:z.title,date:z.dueDate,time:z.dueTime,type:"assignment",classId:z.classId,className:z.className,streamItemId:z.streamItemId,submissionStatus:z.submissionStatus,pendingReviewCount:z.pendingReviewCount})})}catch(re){console.error("Error loading assignments:",re)}try{let re;K.role==="student"?re=await A2(K.id,K.grupoAsignado):re=await px(),(await Promise.all(re.map(async z=>{let ge=null;if(K.role==="student")try{ge=(await Lg(z.id,K.id))?.status||null}catch{}return{...z,submissionStatus:ge}}))).forEach(z=>{d!=="all"&&z.classId!==d||z.dueDate&&!z.isArchived&&B.push({id:z.id,title:z.title,date:z.dueDate,time:z.dueTime,type:"quiz",classId:z.classId,className:z.className,streamItemId:z.streamItemId,submissionStatus:z.submissionStatus,pendingReviewCount:z.pendingReviewCount})})}catch(re){console.error("Error loading quizzes:",re)}try{(await I2()).forEach(ae=>{d!=="all"&&ae.classId})}catch(re){console.error("Error loading materials:",re)}x(B)}catch(K){console.error("Error loading events:",K),x([])}finally{y(!1)}},F=K=>{const B=new Date(K),re=B.getDay(),z=(re===0?7:re)-1,ge=new Date(B);return ge.setDate(B.getDate()-z),ge.setHours(0,0,0,0),ge},te=K=>{const B=F(K),re=new Date(B);return re.setDate(re.getDate()+6),re},ne=()=>{const K=F(i),B=[];for(let re=0;re<7;re++){const ae=new Date(K);ae.setDate(K.getDate()+re),B.push(ae)}return B},Ee=()=>{const K=F(i),B=te(i),re=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return`${re[K.getMonth()]} ${K.getDate()} - ${re[B.getMonth()]} ${B.getDate()}, ${B.getFullYear()}`},Se=K=>{const B=new Date;B.setHours(0,0,0,0);const re=new Date(K);re.setHours(0,0,0,0);const ae=re.getTime()-B.getTime(),z=Math.round(ae/(1e3*60*60*24));return z===-1?"Yesterday":z===0?"Today":z===1?"Tomorrow":""},De=K=>{const B=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],re=K.getDay(),ae=re===0?6:re-1;return B[ae]},U=()=>{const K=new Date(i);K.setDate(K.getDate()-7),c(K)},H=()=>{const K=new Date(i);K.setDate(K.getDate()+7),c(K)},ye=K=>{h(K),C(!1),t&&t(K)},R=K=>{const B=K.toISOString().split("T")[0];return v.filter(re=>new Date(re.date).toISOString().split("T")[0]===B&&(d==="all"||re.classId===d))},de=ne(),V=new Date;V.setHours(0,0,0,0);const he=K=>{const B=["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"];return`${K.getDate()} ${B[K.getMonth()]}`};return n.jsxs("div",{className:"bg-white min-h-screen",children:[n.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6",children:[n.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-4",children:[n.jsxs("div",{className:"relative w-full md:w-auto",children:[n.jsxs("button",{onClick:()=>C(!S),className:"flex items-center gap-2 px-3 py-2 border border-gray-300 rounded-md bg-white hover:bg-gray-50 text-gray-700 text-sm w-full md:w-auto",children:[n.jsx("span",{children:d==="all"?"Todas las clases":f.find(K=>K.id===d)?.title||"Todas las clases"}),n.jsx(qr,{className:"w-4 h-4"})]}),S&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>C(!1)}),n.jsxs("div",{className:"absolute left-0 top-10 z-20 bg-white border border-gray-200 rounded-md shadow-lg min-w-[200px] max-h-[300px] overflow-y-auto",children:[n.jsx("button",{onClick:()=>ye("all"),className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 ${d==="all"?"text-blue-600 font-medium bg-blue-50":"text-gray-800"}`,children:"Todas las clases"}),f.map(K=>n.jsx("button",{onClick:()=>ye(K.id),className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 ${d===K.id?"text-blue-600 font-medium bg-blue-50":"text-gray-800"}`,children:K.title},K.id))]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 md:gap-4 w-full md:w-auto justify-center",children:[n.jsx("button",{onClick:U,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Semana anterior",children:n.jsx(l2,{className:"w-5 h-5"})}),n.jsx("div",{className:"text-sm font-medium text-gray-700 min-w-[180px] text-center",children:Ee()}),n.jsx("button",{onClick:H,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Semana siguiente",children:n.jsx(rx,{className:"w-5 h-5"})})]})]}),n.jsx("div",{className:"grid grid-cols-7 gap-0 border-t border-l border-gray-200",children:de.map((K,B)=>{const re=R(K),ae=K.getTime()===V.getTime(),z=Se(K),ge=K<V&&!ae,Pe=De(K).toLowerCase();return n.jsxs("section",{className:"border-r border-b border-gray-200 bg-white min-h-[400px] flex flex-col",role:"region","aria-labelledby":`day-${B}`,children:[n.jsx("h2",{className:"px-3 py-2 border-b border-gray-100 bg-gray-50/50",id:`day-${B}`,children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-xs text-gray-600 mb-1 hidden md:block",children:he(K)}),z&&n.jsx("span",{className:`text-xs font-medium mb-1 ${ae?"text-blue-600":"text-gray-600"}`,children:z==="Today"?"Hoy":z==="Yesterday"?"Ayer":z==="Tomorrow"?"Maana":z}),n.jsxs("div",{className:"flex flex-col items-start",children:[n.jsx("span",{className:`text-xs ${ae?"text-blue-600 font-medium":"text-gray-500"}`,children:Pe}),ae?n.jsxs("span",{className:"relative inline-flex items-center justify-center w-7 h-7 text-base font-medium text-blue-600 mt-1",children:[n.jsx("span",{className:"absolute inset-0 rounded-full bg-blue-100"}),n.jsx("span",{className:"relative z-10",children:K.getDate()})]}):n.jsx("span",{className:`text-base font-medium mt-1 ${ge?"text-gray-400":"text-gray-900"}`,children:K.getDate()})]})]})}),n.jsx("div",{className:"flex-1 p-2 space-y-1.5 overflow-y-auto",children:w?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"})}):re.length===0?n.jsx("div",{className:"text-center py-8 text-gray-400 text-xs"}):re.map(we=>{const Q=()=>{if(s?.role==="student"&&we.submissionStatus){if(["submitted","to_review","reviewed","graded"].includes(we.submissionStatus)){if(we.type==="assignment")return"bg-green-50 border-l-4 border-green-500 text-green-900 hover:bg-green-100";if(we.type==="quiz")return"bg-green-50 border-l-4 border-green-500 text-green-900 hover:bg-green-100"}else if(we.submissionStatus==="draft"||we.submissionStatus==="returned"){if(we.type==="assignment")return"bg-yellow-50 border-l-4 border-yellow-500 text-yellow-900 hover:bg-yellow-100";if(we.type==="quiz")return"bg-yellow-50 border-l-4 border-yellow-500 text-yellow-900 hover:bg-yellow-100"}}switch(we.type){case"assignment":return"bg-blue-50 border-l-4 border-blue-500 text-blue-900 hover:bg-blue-100";case"quiz":return"bg-purple-50 border-l-4 border-purple-500 text-purple-900 hover:bg-purple-100";case"material":return"bg-green-50 border-l-4 border-green-500 text-green-900 hover:bg-green-100";default:return"bg-gray-50 border-l-4 border-gray-400 text-gray-900 hover:bg-gray-100"}},ke=async()=>{if(we.type==="assignment"&&s?.role==="student"&&we.streamItemId)try{const q=await wi(we.streamItemId);q?(A({id:we.id,streamItemId:we.streamItemId,title:we.title,instructions:q.instructions,dueDate:we.date,dueTime:we.time}),O(!0)):we.classId&&r(`/dashboard/classes/${we.classId}?tab=classwork`)}catch(q){console.error("Error loading assignment:",q),we.classId&&r(`/dashboard/classes/${we.classId}?tab=classwork`)}else we.classId&&r(`/dashboard/classes/${we.classId}?tab=classwork`)};return n.jsxs("div",{onClick:ke,className:`p-2 rounded text-xs cursor-pointer transition-colors ${Q()}`,title:`${we.title}${we.className?` (${we.className})`:""} - Click para abrir`,children:[n.jsxs("div",{className:"font-medium truncate flex items-center gap-1",children:[we.title,s?.role==="student"&&we.submissionStatus&&n.jsx("span",{className:"text-[10px] opacity-75",children:["submitted","to_review","reviewed","graded"].includes(we.submissionStatus)?"":we.submissionStatus==="draft"?"":we.submissionStatus==="returned"?"":""})]}),we.time&&n.jsx("div",{className:"text-xs opacity-70 mt-0.5",children:we.time}),s?.role==="student"&&we.submissionStatus&&n.jsx("div",{className:"text-[10px] opacity-70 mt-0.5",children:["submitted","to_review","reviewed","graded"].includes(we.submissionStatus)?"Enviado":we.submissionStatus==="draft"?"Borrador":we.submissionStatus==="returned"?"Devuelto":"Pendiente"}),s?.role!=="student"&&(we.pendingReviewCount||0)>0&&n.jsx("div",{className:"absolute top-[-4px] right-[-4px] flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-[10px] font-bold text-white shadow-sm",children:we.pendingReviewCount})]},we.id)})})]},B)})})]}),T&&n.jsx(rd,{isOpen:I,onClose:()=>{O(!1),A(null)},assignmentId:T.id,streamItemId:T.streamItemId,assignmentTitle:T.title,instructions:T.instructions,dueDate:T.dueDate,dueTime:T.dueTime,onSubmitted:async()=>{await $()}})]})},wO=()=>n.jsx(bO,{}),jO=()=>{const[e,t]=j.useState(!1),[r,s]=j.useState(!1),[o,i]=j.useState(null);return null},NO=()=>{const[e,t]=j.useState(!1),[r,s]=j.useState(!1),[o,i]=j.useState(!1),[c,d]=j.useState(!1),[h,f]=j.useState(null);return j.useRef(null),null},SO=()=>{const[e,t]=j.useState(!1),[r,s]=j.useState([]),[o,i]=j.useState(null);return null},kO=()=>{const{user:e}=$t();return e?.role==="student"?n.jsx(pO,{}):e?.role==="teacher"?n.jsx(gO,{}):e?.role==="parent"?n.jsx(vO,{}):e?.role==="admin"?n.jsx(yO,{}):n.jsx(Xx,{})},_O=()=>{const{checkAuth:e}=$t();return j.useEffect(()=>{e()},[e]),n.jsx(s_,{children:n.jsxs("div",{className:"App",children:[n.jsx(F3,{}),n.jsx(jO,{}),n.jsx(NO,{}),n.jsx(SO,{}),n.jsxs(Ok,{children:[n.jsx(Mt,{path:"/",element:n.jsx(B3,{})}),n.jsx(Mt,{path:"/login",element:n.jsx(d5,{})}),n.jsx(Mt,{path:"/register",element:n.jsx(u5,{})}),n.jsx(Mt,{path:"/stress-test",element:n.jsx(N5,{})}),n.jsxs(Mt,{path:"/dashboard",element:n.jsx(V4,{children:n.jsx(M3,{})}),children:[n.jsx(Mt,{index:!0,element:n.jsx(Cw,{})}),n.jsx(Mt,{path:"home",element:n.jsx(Cw,{})}),n.jsx(Mt,{path:"profile",element:n.jsx(UD,{})}),n.jsx(Mt,{path:"settings",element:n.jsx(BD,{})}),n.jsx(Mt,{path:"teaching",element:n.jsx(nO,{})}),n.jsx(Mt,{path:"archived-classes",element:n.jsx(sO,{})}),n.jsx(Mt,{path:"modules",element:n.jsx(PD,{})}),n.jsx(Mt,{path:"classes",element:n.jsx(q5,{})}),n.jsx(Mt,{path:"classes/:classId",element:n.jsx(kO,{})}),n.jsx(Mt,{path:"assignments",element:n.jsx(LD,{})}),n.jsx(Mt,{path:"students",element:n.jsx("div",{className:"p-6",children:"Gestin de Estudiantes (Prximamente)"})}),n.jsx(Mt,{path:"materials",element:n.jsx(MD,{})}),n.jsx(Mt,{path:"create-class",element:n.jsx("div",{className:"p-6",children:"Crear Nueva Clase (Prximamente)"})}),n.jsx(Mt,{path:"users",element:n.jsx(U5,{})}),n.jsx(Mt,{path:"db",element:n.jsx(Q7,{})}),n.jsx(Mt,{path:"evento",element:n.jsx(J7,{})}),n.jsx(Mt,{path:"calendar",element:n.jsx(wO,{})}),n.jsx(Mt,{path:"gastos",element:n.jsx(Y7,{})}),n.jsx(Mt,{path:"orders",element:n.jsx(JD,{})}),n.jsx(Mt,{path:"orders/create",element:n.jsx(YD,{})}),n.jsx(Mt,{path:"crm",element:n.jsx(ZD,{})}),n.jsx(Mt,{path:"whatsapp",element:n.jsx(XD,{})}),n.jsx(Mt,{path:"reports",element:n.jsx($D,{})}),n.jsx(Mt,{path:"search",element:n.jsx(W7,{})}),n.jsx(Mt,{path:"studentclasses",element:n.jsx(FD,{})}),n.jsx(Mt,{path:"notion",element:n.jsx(QD,{})}),n.jsx(Mt,{path:"menu-management",element:n.jsx(z7,{})}),n.jsx(Mt,{path:"restricted-users",element:n.jsx(q7,{})}),n.jsx(Mt,{path:"bug-reports",element:n.jsx(G7,{})}),n.jsx(Mt,{path:"configuration",element:n.jsx(V7,{})}),n.jsx(Mt,{path:"test-navigation",element:n.jsx(H7,{})}),n.jsx(Mt,{path:":tribuId/:materia",element:n.jsx(K7,{})})]}),n.jsx(Mt,{path:"*",element:n.jsx(zD,{})})]})]})})},CO=async()=>{};k3();CO().catch(console.error);const Aw=localStorage.getItem("theme");Aw==="light"?document.documentElement.classList.remove("dark"):(document.documentElement.classList.add("dark"),Aw||localStorage.setItem("theme","dark"));US.createRoot(document.getElementById("root")).render(n.jsx(j.StrictMode,{children:n.jsx(D3,{children:n.jsx(_O,{})})}));
